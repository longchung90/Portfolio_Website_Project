"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["copilot-immersive-v1","packages_global-sso-banner_GlobalSsoBanner_tsx"],{77367:(e,t,n)=>{n.d(t,{Y:()=>a});function a(e,t){let n=new Date(e).getTime(),a=Math.floor(((t&&"0001-01-01T00:00:00Z"!==t?new Date(t).getTime():Date.now())-n)/1e3),i=[{value:Math.floor(a/86400),label:"d"},{value:Math.floor(a%86400/3600),label:"h"},{value:Math.floor(a%3600/60),label:"m"},{value:a%60,label:"s"}].filter(e=>e.value>0);return 0===i.length?"0s":1===i.length?`${i[0]?.value??0}${i[0]?.label??""}`:i[1]?`${i[0]?.value}${i[0]?.label} ${i[1].value}${i[1].label??""}`:`${i[0]?.value??0}${i[0]?.label??""}`}},62189:(e,t,n)=>{n.d(t,{U:()=>a});let a=(e,t)=>{let n=`/copilot/tasks/pull/${encodeURIComponent(e)}`;return t&&(n+=`?session_id=${encodeURIComponent(t)}`),n}},55899:(e,t,n)=>{n.d(t,{u:()=>a});function a(){return crypto.randomUUID()}},54556:(e,t,n)=>{n.d(t,{E:()=>a});let a=n(24774).Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{border:0,backgroundColor:"transparent"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace",fontSize:"12px",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)",boxShadow:"var(--shadow-resting-medium, var(--color-shadow-medium))",minWidth:"auto"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]':{padding:"2px 8px",margin:0,color:"var(--fgColor-default, var(--color-fg-default))",whiteSpace:"pre"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:first-child':{borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:last-child':{borderBottomLeftRadius:"var(--borderRadius-medium)",borderBottomRightRadius:"var(--borderRadius-medium)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected], .cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected] .cm-completionDetail":{color:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",background:"var(--bgColor-accent-emphasis, var(--color-accent-emphasis))"},".cm-completionDetail":{paddingLeft:"8px",color:"var(--fgColor-muted, var(--color-fg-muted))",fontSize:"var(--fontSize-small)",fontStyle:"normal"}})},3482:(e,t,n)=>{n.d(t,{G:()=>i});var a=n(24774);function i(e=null,t="bottom"){return[a.S7.of(()=>({dom:e,top:"top"===t}))]}},68605:(e,t,n)=>{n.d(t,{BE:()=>o,Cw:()=>N,I6:()=>b,Lo:()=>d,Md:()=>f,TB:()=>j,TC:()=>v,TU:()=>m,YH:()=>g,Z3:()=>p,eO:()=>_,e_:()=>x,f9:()=>l,fJ:()=>S,fV:()=>h,tJ:()=>y,td:()=>u,w0:()=>c,ye:()=>w});var a=n(15874),i=n(54528),s=n(53839),r=n(24774);let o=e=>e.state.selection.main,l=(e,t)=>{e.dispatch({selection:{anchor:t}})},c=e=>e.state.selection.ranges.some(e=>!e.empty),d=e=>e.sliceDoc(e.selection.main.from,e.selection.main.to),u=(e,t,n)=>{e.dispatch({selection:{anchor:t,head:n}})};function m(e,t){return e.state.doc.line(t.line+1).from+t.ch}function p(e,t){let n=e.state.doc.lineAt(t);return{line:n.number-1,ch:t-n.from}}let h=(e,t)=>e.state.doc.line(t),f=(e,t,n)=>{let a=h(e,t);x(e,a.from,a.from,n)},g=(e,t,n)=>{let a=h(e,t);x(e,a.from,a.from+n.length,"")},y=(e,t)=>{e.dispatch(e.state.replaceSelection(t))},_=(e,t,n)=>e.sliceDoc(t,n),x=(e,t,n,a)=>{e.dispatch({changes:{from:t,to:n,insert:a}})},v=(e,t)=>{let n=o(e);x(e,n.from,n.to,t)},b=(e,t)=>new i.ZX(e.state.doc,t).next(),j=(e,t,n)=>{let a=new i.ZX(e.state.doc,t).next();e.dispatch({changes:{from:a.value.from,to:a.value.to,insert:n}})},w=(e,t,n,a,i)=>{if(void 0!==n)try{let o=h(e,t),l=h(e,n);if(o&&l){e.focus();let t=i?l.from+i:l.to;u(e,o.from+(a??0),t),e.dispatch({effects:[r.Lz.scrollIntoView(s.OF.range(o.from,l.to),{y:"center"})]})}}catch{}else try{let n=h(e,t);n&&(e.focus(),l(e,n.from+(a??0)),e.dispatch({effects:[r.Lz.scrollIntoView(n.from,{y:"center"})]}))}catch{}};function N(e){return e.state.facet(a.Xt)}function S(e,t){if(e===t)return[];let n=0,a=Math.min(e.length,t.length);for(;n<a&&e[n]===t[n];)n++;let i=e.length,s=t.length;for(;i>n&&s>n&&e[i-1]===t[s-1];)i--,s--;return[{from:n,to:i,insert:t.slice(n,s)}]}},31315:(e,t,n)=>{function a(e){return i(e)[0]}function i(e){let t=[];for(let n of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[a,i]=n.trim().split("=");e===a&&void 0!==i&&t.push({key:a,value:i})}return t}function s(e,t,n=null,a=!1,i="lax"){let r=document.domain;if(null==r)throw Error("Unable to get document domain");r.endsWith(".github.com")&&(r="github.com");let o="https:"===location.protocol?"; secure":"",l=n?`; expires=${n}`:"";!1===a&&(r=`.${r}`);try{document.cookie=`${e}=${t}; path=/; domain=${r}${l}${o}; samesite=${i}`}catch{}}function r(e,t=!1){let n=document.domain;if(null==n)throw Error("Unable to get document domain");n.endsWith(".github.com")&&(n="github.com");let a=new Date(Date.now()-1).toUTCString(),i="https:"===location.protocol?"; secure":"",s=`; expires=${a}`;!1===t&&(n=`.${n}`);try{document.cookie=`${e}=''; path=/; domain=${n}${s}${i}`}catch{}}n.d(t,{OR:()=>i,Ri:()=>a,TV:()=>s,Yj:()=>r})},84802:(e,t,n)=>{n.d(t,{G:()=>o});var a=n(21728),i=n(96459),s=n(25641),r=n(33592);function o(){let e,t=(0,a.c)(3),n=(0,r.b)(),o=(0,i.Z)();return t[0]!==n||t[1]!==o?(e=async e=>{window.location.pathname!==s.Jz&&(o(s.Jz),await n.selectThread(null,e))},t[0]=n,t[1]=o,t[2]=e):e=t[2],e}},7812:(e,t,n)=>{n.d(t,{Bx:()=>p,GJ:()=>_,LU:()=>o,PO:()=>f,SI:()=>m,SX:()=>y,by:()=>d,g:()=>u,oR:()=>g,oy:()=>r,wt:()=>c,yA:()=>h});var a=n(25641),i=n(51213),s=n(35247);function r(e){return e.split("#")[0]}function o(e,t){let n=r(e),a=t.get(n)??[],i=a.indexOf(e);return a.length>1&&-1!==i?i+1:null}function l(e,t){return`file:${e.name}#${t}`}function c(e,t,n){switch(e.type){case"thread-scoped-file":return o(l(e,t),n)??void 0;case"draft-issue":case"draft-update-issue":return o(g({ref:e,messageIndex:t}).id,n)??void 0}}function d(e,t,n){return{type:"file",id:`file:${(0,a.Vb)(e)}#0`,reference:e,messageId:t??i.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function u(e,t,n){let s=e=>({type:"file",id:`file:empty:${e}#${Date.now()}`,messageId:t??i.Wp,name:e,language:"",value:"",isStreaming:!1,isUserEdited:!1,timestamp:n?new Date(n):new Date}),r=e.baseFile?d(e.baseFile):s(e.headFile?.path||""),o=e.headFile?d(e.headFile):s(e.baseFile?.path||""),l=e.headFile||e.baseFile,c=l?.path||"";return{type:"file-diff",id:`file-diff:${(0,a.Vb)(e)}#0`,baseFile:r,headFile:o,name:c,language:(e.headFile?o:r).language,isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date,messageId:t??i.Wp,reference:e}}function m(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??i.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name,href:e.url}}function p(e,t=i.Wp){return{type:"plugin-content",id:`plugin-content:${e.type}:${(0,a.Vb)(e)}`,name:(0,a.z$)(e),messageId:t,reference:e}}function h(e){return{type:e.type,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,title:e.name,state:e.state,url:e.href,blockedByTags:e.blockedByTags??[]}}function f(e){switch(e.type){case"file":return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value};case"new-issue":case"update-issue":return{type:"update-issue"===e.type?"draft-update-issue":"draft-issue",tag:e.tag,parentTag:e.parentTag,title:e.name,description:e.body,bodyVersion:e.bodyVersion,repository:e.repository,template:e.template,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:e.projects,milestone:e.milestone,templateFormValuesById:e.defaultValuesById,issueNumber:e.issueNumber,blockedByTags:e.blockedByTags};default:return null}}function g({ref:e,messageIndex:t,messageId:n,timestamp:a}){switch(e.type){case"thread-scoped-file":return function(e,t,n=i.Wp,a){return{type:"file",id:l(e,t),reference:e,messageId:n,name:e.name,language:e.language,value:e.text,timestamp:a?new Date(a):new Date,isStreaming:!1,isUserEdited:n===i.Wp}}(e,t,n,a);case"draft-issue":case"draft-update-issue":return function({ref:e,messageId:t=i.Wp,messageIndex:n}){let a=e.issueNumber&&s.W.draftUpdateIssue?"update-issue":"new-issue";return{type:a,id:`${a}:${e.tag}#${n}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,name:e.title,body:e.description,bodyVersion:e.bodyVersion,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:e.projects,milestone:e.milestone,isUserEdited:t===i.Wp,messageId:t,isStreaming:!1,template:e.template,defaultValuesById:e.templateFormValuesById??{},issueNumber:e.issueNumber,blockedByTags:e.blockedByTags??[]}}({ref:e,messageIndex:t,messageId:n});default:return null}}function y(e,t,n){let a=r(e.id),i=n.get(a),s=i?.findIndex(t=>t===e.id)??-1,o=i?.[s-1];return o&&t.get(o)}function _(e,t){return{type:"task-diff",id:`task-diff:${t}`,messageId:i.Wp,name:"Files changed",diffEntries:e,tabSize:4}}},58376:(e,t,n)=>{n.d(t,{M:()=>i});let a=JSON.parse('{"Create issues":{"id":"create-issues-group","name":"Create issue","color":"var(--display-gray-fgColor)","icon":"issue-draft","entries":[{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"}]},"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}');function i(){return Object.values(a)}},23614:(e,t,n)=>{var a,i,s,r,o,l,c=n(27744),d=n(70103),u=n(40548),m=n(74848),p=n(21728);function h(e){let t,n=(0,p.c)(2);return n[0]!==e.children?(t=(0,m.jsx)(m.Fragment,{children:e.children}),n[0]=e.children,n[1]=t):t=n[1],t}try{h.displayName||(h.displayName="App")}catch{}var f=n(50467),g=n(76143),y=n(66565),_=n(34164),x=n(96540);let v={scrollContainer:"ContentView-module__scrollContainer--_BylN",contentContainer:"ContentView-module__contentContainer--q5UcY",content:"ContentView-module__content--kzPet",medium:"ContentView-module__medium--TcCTp",small:"ContentView-module__small--r1fwP",banner:"ContentView-module__banner--rgHMe",serviceHeader:"ContentView-module__serviceHeader--DEEHs",serviceTitle:"ContentView-module__serviceTitle--PbOYe",serviceDescription:"ContentView-module__serviceDescription--ZNDZz",serviceActions:"ContentView-module__serviceActions--IucKo",section:"ContentView-module__section--avH_l",sectionTitle:"ContentView-module__sectionTitle--MkQwz",sectionGrid:"ContentView-module__sectionGrid--unHY4",sectionGridEmpty:"ContentView-module__sectionGridEmpty--oxnzj",skeletonCard:"ContentView-module__skeletonCard--e4yHy"};function b(e){let t,n,a,i,s=(0,p.c)(10),{children:r,width:o}=e;if(s[0]!==r){for(let e of(t=[],n=[],x.Children.toArray(r)))x.isValidElement(e)&&e.type===j?t.push(e):n.push(e);s[0]=r,s[1]=t,s[2]=n}else t=s[1],n=s[2];let l="small"===o,c="medium"===o;return s[3]!==l||s[4]!==c?(a=(0,_.$)(v.content,{[v.small]:l,[v.medium]:c}),s[3]=l,s[4]=c,s[5]=a):a=s[5],s[6]!==t||s[7]!==n||s[8]!==a?(i=(0,m.jsx)("div",{className:v.scrollContainer,children:(0,m.jsx)("div",{className:v.contentContainer,children:(0,m.jsxs)("div",{className:a,children:[t,n]})})}),s[6]=t,s[7]=n,s[8]=a,s[9]=i):i=s[9],i}function j(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:v.banner,children:a}),n[0]=a,n[1]=t):t=n[1],t}function w(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:v.serviceHeader,children:a}),n[0]=a,n[1]=t):t=n[1],t}function N(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("section",{className:v.section,children:a}),n[0]=a,n[1]=t):t=n[1],t}function S(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("h2",{className:v.serviceTitle,children:a}),n[0]=a,n[1]=t):t=n[1],t}function C(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("p",{className:v.serviceDescription,children:a}),n[0]=a,n[1]=t):t=n[1],t}function I(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:v.serviceActions,children:a}),n[0]=a,n[1]=t):t=n[1],t}function k(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("h3",{className:v.sectionTitle,children:a}),n[0]=a,n[1]=t):t=n[1],t}function T(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:v.sectionGridEmpty,children:a}),n[0]=a,n[1]=t):t=n[1],t}function E(e){let t,n,a,i=(0,p.c)(8),{children:s,loading:r}=e;if(void 0!==r&&r){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:v.sectionGrid,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(R)}),i[0]=e):e=i[0],e}if(i[1]!==s){let e=x.Children.toArray(s);t=e.find(A),n=e.filter(L),i[1]=s,i[2]=t,i[3]=n}else t=i[2],n=i[3];let o=n;if(0===o.length&&t){let e;return i[4]!==t?(e=(0,m.jsx)(m.Fragment,{children:t}),i[4]=t,i[5]=e):e=i[5],e}return i[6]!==o?(a=(0,m.jsx)("div",{className:v.sectionGrid,children:o}),i[6]=o,i[7]=a):a=i[7],a}function L(e){return!(x.isValidElement(e)&&e.type===T)}function A(e){return x.isValidElement(e)&&e.type===T}function R(e,t){return(0,m.jsx)(y.f,{className:v.skeletonCard},t)}E.Empty=T,N.Title=k,N.Grid=E;let D={Title:S,Description:C,Actions:I,Container:b,Banner:j,Header:w,Section:N};D.displayName="ContentView",b.displayName="ContentView.Container",j.displayName="ContentView.Banner",w.displayName="ContentView.Header",N.displayName="ContentView.Section",S.displayName="ContentView.Title",C.displayName="ContentView.Description",I.displayName="ContentView.Actions",k.displayName="ContentView.Section.Title",E.displayName="ContentView.Section.Grid",T.displayName="ContentView.Section.Grid.Empty";let P={header:"AgentsView-module__header--fVWLw",failedTaskCreationBanners:"AgentsView-module__failedTaskCreationBanners--bUn1A",copilotDisclosure:"AgentsView-module__copilotDisclosure--lAild",copilotDisclosureText:"AgentsView-module__copilotDisclosureText--myF9L"};var O=n(93654),B=n(64894),M=n(79634),F=n(97189),U=n(2635),V=n(33544),$=n(65511),W=n(33592),H=n(34295),q=n(97949);function z(e){let t,n,a,i=(0,p.c)(8),{problemStatement:s,handleRetry:r,handleDismiss:o}=e,l=function(e,t=50,n=2){let a=t*n;return e.length<=a?e:`${e.substring(0,a).trim()}...`}(s??"",20,1),c=`Failed to create a task for '${l}'. Please try again.`;return i[0]!==o?(t=(0,m.jsx)(q.l.SecondaryAction,{onClick:o,children:"Dismiss"}),i[0]=o,i[1]=t):t=i[1],i[2]!==r?(n=(0,m.jsx)(q.l.PrimaryAction,{onClick:r,children:"Retry"}),i[2]=r,i[3]=n):n=i[3],i[4]!==c||i[5]!==t||i[6]!==n?(a=(0,m.jsx)(q.l,{variant:"critical",title:"Task Creation Failed",hideTitle:!0,description:c,secondaryAction:t,primaryAction:n}),i[4]=c,i[5]=t,i[6]=n,i[7]=a):a=i[7],a}try{z.displayName||(z.displayName="TaskCreationFailedBanner")}catch{}var G=n(69599),K=n(46251),Q=n(1805),Y=n(47865),J=n(27912),X=n(24735),Z=n(13017),ee=n(40090);let et={container:"ListBlock-module__container--QbgMo",header:"ListBlock-module__header--meKIf",list:"ListBlock-module__list--YHbt4",emptyState:"ListBlock-module__emptyState--MymTD",item:"ListBlock-module__item--xlbmd",itemButton:"ListBlock-module__itemButton--o9fcO",actions:"ListBlock-module__actions--LfUWo",leadingVisual:"ListBlock-module__leadingVisual--tOjGr",title:"ListBlock-module__title--MZAST",description:"ListBlock-module__description--dTYnl",metadata:"ListBlock-module__metadata--gtl9k",skeletonItem:"ListBlock-module__skeletonItem--ZfJMT"};function en(e){let t,n,a=(0,p.c)(5),{children:i,className:s}=e;return a[0]!==s?(t=(0,_.$)(et.container,s),a[0]=s,a[1]=t):t=a[1],a[2]!==i||a[3]!==t?(n=(0,m.jsx)("div",{className:t,children:i}),a[2]=i,a[3]=t,a[4]=n):n=a[4],n}function ea(e){let t,n,a=(0,p.c)(5),{children:i,className:s}=e;return a[0]!==s?(t=(0,_.$)(et.header,s),a[0]=s,a[1]=t):t=a[1],a[2]!==i||a[3]!==t?(n=(0,m.jsx)("div",{className:t,children:i}),a[2]=i,a[3]=t,a[4]=n):n=a[4],n}function ei(e){let t,n,a,i,s=(0,p.c)(11);if(s[0]!==e?({children:t,loading:a,...n}=e,s[0]=e,s[1]=t,s[2]=n,s[3]=a):(t=s[1],n=s[2],a=s[3]),void 0!==a&&a){let e,t;return s[4]===Symbol.for("react.memo_cache_sentinel")?(e=[void 0,void 0,void 0,void 0,void 0].map(es),s[4]=e):e=s[4],s[5]!==n||s[6]!==e?(t=(0,m.jsx)("ul",{className:et.list,"data-testid":"list-block-skeleton",...n,children:e}),s[5]=n,s[6]=e,s[7]=t):t=s[7],t}return s[8]!==t||s[9]!==n?(i=(0,m.jsx)("ul",{className:et.list,...n,children:t}),s[8]=t,s[9]=n,s[10]=i):i=s[10],i}function es(e,t){return(0,m.jsx)(el,{},t)}function er(e){let t,n,a,i,s,r=(0,p.c)(39),o=null,l=null,c=null,d=null,u=null;if(r[0]!==e.children){for(let t of x.Children.toArray(e.children))x.isValidElement(t)&&(t.type===ec?o=t:t.type===ed?l=t:t.type===eu?c=t:t.type===em?d=t:t.type===eo&&(u=t));r[0]=e.children,r[1]=o,r[2]=l,r[3]=c,r[4]=d,r[5]=u}else o=r[1],l=r[2],c=r[3],d=r[4],u=r[5];r[6]!==c||r[7]!==o||r[8]!==d||r[9]!==l?(t=(0,m.jsxs)(m.Fragment,{children:[o,l,c,d]}),r[6]=c,r[7]=o,r[8]=d,r[9]=l,r[10]=t):t=r[10];let h=t;if("href"in e){let t,n,a,i,s;if(r[11]!==e?({href:t,isExternalLink:a,...n}=e,r[11]=e,r[12]=t,r[13]=n,r[14]=a):(t=r[12],n=r[13],a=r[14]),void 0!==a&&a){let e,a;return r[15]!==h||r[16]!==t||r[17]!==n?(e=(0,m.jsx)("a",{href:t,className:et.itemButton,target:"_self",rel:"noopener noreferrer",...n,children:h}),r[15]=h,r[16]=t,r[17]=n,r[18]=e):e=r[18],r[19]!==u||r[20]!==e?(a=(0,m.jsxs)("li",{className:et.item,children:[e,u]}),r[19]=u,r[20]=e,r[21]=a):a=r[21],a}return r[22]!==h||r[23]!==t||r[24]!==n?(i=(0,m.jsx)(Z.N_,{...n,to:t,className:et.itemButton,children:h}),r[22]=h,r[23]=t,r[24]=n,r[25]=i):i=r[25],r[26]!==u||r[27]!==i?(s=(0,m.jsxs)("li",{className:et.item,children:[i,u]}),r[26]=u,r[27]=i,r[28]=s):s=r[28],s}return r[29]!==e?({onClick:n,...a}=e,r[29]=e,r[30]=n,r[31]=a):(n=r[30],a=r[31]),r[32]!==h||r[33]!==n||r[34]!==a?(i=(0,m.jsx)("button",{...a,className:et.itemButton,onClick:n,type:"button",children:h}),r[32]=h,r[33]=n,r[34]=a,r[35]=i):i=r[35],r[36]!==u||r[37]!==i?(s=(0,m.jsxs)("li",{className:et.item,children:[i,u]}),r[36]=u,r[37]=i,r[38]=s):s=r[38],s}function eo(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:et.actions,children:a}),n[0]=a,n[1]=t):t=n[1],t}function el(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("li",{className:et.item,children:(0,m.jsx)("div",{className:et.skeletonItem,children:(0,m.jsx)(ee.r,{lines:2})})}),t[0]=e):e=t[0],e}function ec(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:et.leadingVisual,children:a}),n[0]=a,n[1]=t):t=n[1],t}function ed(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:et.title,children:a}),n[0]=a,n[1]=t):t=n[1],t}function eu(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:et.description,children:a}),n[0]=a,n[1]=t):t=n[1],t}function em(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:et.metadata,children:a}),n[0]=a,n[1]=t):t=n[1],t}function ep(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("li",{className:et.emptyState,children:a}),n[0]=a,n[1]=t):t=n[1],t}er.LeadingVisual=ec,er.Title=ed,er.Description=eu,er.SecondaryDescription=em,er.Metadata=em,er.Actions=eo,er.Skeleton=el,en.Header=ea,en.List=ei,en.Item=er,en.EmptyState=ep,en.displayName="ListBlock",ea.displayName="ListBlock.Header",ei.displayName="ListBlock.List",er.displayName="ListBlock.Item",ec.displayName="ListBlock.Item.LeadingVisual",ed.displayName="ListBlock.Item.Title",eu.displayName="ListBlock.Item.Description",em.displayName="ListBlock.Item.Metadata",eo.displayName="ListBlock.Item.Actions",el.displayName="ListBlock.Item.Skeleton",ep.displayName="ListBlock.EmptyState";try{en.displayName||(en.displayName="ListBlock")}catch{}let eh={button:"TaskList-module__button--FzNZb",counter:"TaskList-module__counter--suSM7",filterButtons:"TaskList-module__filterButtons--DNyGe"};var ef=n(38621),eg=n(62935);let ey={description:"TaskListItem-module__description--GUKJ9",iconTransition:"TaskListItem-module__iconTransition--h8TDX",fadeOut:"TaskListItem-module__fadeOut--TTRa9",fadeText:"TaskListItem-module__fadeText--giNoG",entering:"TaskListItem-module__entering--aB9fl",exiting:"TaskListItem-module__exiting--m4Koz"};var e_=n(67154),ex=n(82595),ev=n(21998);let eb={animatedDot:"WithAnimatedEllipsis-module__animatedDot--Dbgsr"},ej=e=>{let t,n,a,i=(0,p.c)(4),{children:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("style",{children:`
    @keyframes dot1 {
      0%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes dot2 {
      0% { opacity: 0; }
      15% { opacity: 0; }
      25%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes dot3 {
      0% { opacity: 0; }
      40% { opacity: 0; }
      50%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
  `}),n=[1,2,3].map(ew),i[0]=t,i[1]=n):(t=i[0],n=i[1]),i[2]!==s?(a=(0,m.jsxs)(m.Fragment,{children:[s,t,n]}),i[2]=s,i[3]=a):a=i[3],a};try{ej.displayName||(ej.displayName="WithAnimatedEllipsis")}catch{}function ew(e){return(0,m.jsx)(ev.EY,{sx:{animationName:`dot${e}`},className:eb.animatedDot,children:"."},`dot${e}`)}let eN={diffstat:"DiffStatText-module__diffstat--E0sZy",added:"DiffStatText-module__added--ek533",deleted:"DiffStatText-module__deleted--DbtGy"};function eS(e){let t,n,a,i,s,r,o,l=(0,p.c)(17),{diffStat:c}=e;return c&&(0!==c.lines_added||0!==c.lines_deleted)?(l[0]!==c.lines_added?(t=c.lines_added.toLocaleString(),l[0]=c.lines_added,l[1]=t):t=l[1],l[2]!==t?(n=(0,m.jsxs)("span",{"aria-hidden":"true",className:`${eN.diffstat} ${eN.added}`,children:["+",t]}),l[2]=t,l[3]=n):n=l[3],l[4]!==c.lines_deleted?(a=c.lines_deleted.toLocaleString(),l[4]=c.lines_deleted,l[5]=a):a=l[5],l[6]!==a?(i=(0,m.jsxs)("span",{"aria-hidden":"true",className:`${eN.diffstat} ${eN.deleted}`,children:["-",a]}),l[6]=a,l[7]=i):i=l[7],l[8]!==c.lines_added||l[9]!==c.lines_deleted?(s=function({linesAdded:e,linesDeleted:t}){let n="Lines changed: ";return n+`${e} ${1===e?"addition":"additions"} & ${t} ${1===t?"deletion":"deletions"}`}({linesAdded:c.lines_added,linesDeleted:c.lines_deleted}),l[8]=c.lines_added,l[9]=c.lines_deleted,l[10]=s):s=l[10],l[11]!==s?(r=(0,m.jsx)("span",{className:"sr-only",children:s}),l[11]=s,l[12]=r):r=l[12],l[13]!==n||l[14]!==i||l[15]!==r?(o=(0,m.jsxs)(K.B,{direction:"horizontal",gap:"condensed",children:[n,i,r]}),l[13]=n,l[14]=i,l[15]=r,l[16]=o):o=l[16],o):null}try{eS.displayName||(eS.displayName="DiffStatText")}catch{}var eC=n(44334),eI=n(62189);let ek=e=>{let t,n,a,i=(0,p.c)(7),{text:s}=e,[r,o]=(0,x.useState)(null),[l,c]=(0,x.useState)("none");i[0]!==r||i[1]!==s?(t=()=>{if(null===r)return void o(s);if(s!==r){c("exiting");let e=setTimeout(()=>{o(s),c("entering")},400);return()=>clearTimeout(e)}},n=[s,r],i[0]=r,i[1]=s,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,x.useEffect)(t,n);let d=`${ey.fadeText} ${"entering"===l?ey.entering:"exiting"===l?ey.exiting:null}`;return i[4]!==r||i[5]!==d?(a=(0,m.jsx)("span",{className:d,children:r}),i[4]=r,i[5]=d,i[6]=a):a=i[6],a};function eT(e){let t,n,a,i,s,r,o,l,c,d,u,h,f=(0,p.c)(39),{state:g,revisionCount:y,startedAt:_,prState:v,prUrl:b,prTitle:j,prNwo:w,prNumber:N,prGlobalId:S,prInMergeQueue:C,prDiffStats:I}=e,[k,T]=(0,x.useState)(null),[E,L]=(0,x.useState)(!1);f[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,G.G7)("copilot_coding_agent_diff_stats"),f[0]=t):t=f[0];let A=t;f[1]!==C||f[2]!==v||f[3]!==g?(n="merged"===v?"Merged":"closed"===v?"Closed":C?"Queued to merge":g&&(0,e_.wG)(g)||"",f[1]=C,f[2]=v,f[3]=g,f[4]=n):n=f[4];let R=n;f[5]!==C||f[6]!==v||f[7]!==g?(a=(0,eC.T)(v,C,g),f[5]=C,f[6]=v,f[7]=g,f[8]=a):a=f[8];let D=a;f[9]!==k||f[10]!==D?(i=()=>{if(!k)return void T(D);if(k.icon!==D.icon){L(!0);let e=setTimeout(()=>{T(D),L(!1)},300);return()=>clearTimeout(e)}},s=[D,k],f[9]=k,f[10]=D,f[11]=i,f[12]=s):(i=f[11],s=f[12]),(0,x.useEffect)(i,s);let P=y>0?`${y} revision${y>1?"s":""} \xb7 `:null,O=b;if((0,G.G7)("copilot_mission_control")&&(0,G.G7)("copilot_mission_control_session_redirect")){let e;f[13]!==S?(e=(0,eI.U)(S),f[13]=S,f[14]=e):e=f[14],O=e}let B=`${ey.iconTransition} ${E?ey.fadeOut:""}`;return f[15]!==D||f[16]!==B?(r=(0,m.jsx)(en.Item.LeadingVisual,{children:(0,m.jsx)(ex.I,{...D,className:B})}),f[15]=D,f[16]=B,f[17]=r):r=f[17],f[18]!==j?(o=(0,m.jsx)(en.Item.Title,{children:j}),f[18]=j,f[19]=o):o=f[19],f[20]!==I||f[21]!==g?(l=A&&g&&"in_progress"!==g&&I&&(0,m.jsx)(en.Item.Actions,{children:(0,m.jsx)(eS,{diffStat:I})}),f[20]=I,f[21]=g,f[22]=l):l=f[22],f[23]!==_?(c=(0,m.jsx)(eg.A,{format:"micro",datetime:_}),f[23]=_,f[24]=c):c=f[24],f[25]!==R?(d=(0,m.jsx)(ek,{text:R}),f[25]=R,f[26]=d):d=f[26],f[27]!==N||f[28]!==w||f[29]!==P||f[30]!==c||f[31]!==d?(u=(0,m.jsx)(en.Item.Description,{children:(0,m.jsxs)("span",{className:ey.description,children:[w,"#",N," \xb7 started ",c," ago \xb7"," ",P,d]})}),f[27]=N,f[28]=w,f[29]=P,f[30]=c,f[31]=d,f[32]=u):u=f[32],f[33]!==u||f[34]!==r||f[35]!==o||f[36]!==l||f[37]!==O?(h=(0,m.jsxs)(en.Item,{href:O,isExternalLink:!0,children:[r,o,l,u]}),f[33]=u,f[34]=r,f[35]=o,f[36]=l,f[37]=O,f[38]=h):h=f[38],h}function eE(e){let t,n,a,i,s=(0,p.c)(7),{repositoryNwo:r}=e,o=`Creating task in ${r}`;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(en.Item.LeadingVisual,{children:(0,m.jsx)(ex.I,{icon:ef.DotFillIcon,color:"var(--fgColor-attention)"})}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(en.Item.Title,{children:(0,m.jsx)(ej,{children:"Creating task"})}),s[1]=n):n=s[1],s[2]!==r?(a=(0,m.jsxs)(en.Item.Description,{children:[(0,m.jsx)("span",{className:ey.description,children:r})," \xb7 Initializing pull request\u2026"]}),s[2]=r,s[3]=a):a=s[3],s[4]!==o||s[5]!==a?(i=(0,m.jsxs)(en.Item,{"aria-label":o,children:[t,n,a]}),s[4]=o,s[5]=a,s[6]=i):i=s[6],i}try{ek.displayName||(ek.displayName="FadeText")}catch{}try{eT.displayName||(eT.displayName="TaskListItem")}catch{}try{(a=function(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(en.Item.Skeleton,{}),t[0]=e):e=t[0],e}).displayName||(a.displayName="LoadingTaskListItem")}catch{}try{eE.displayName||(eE.displayName="OptimisticTaskListItem")}catch{}function eL(e){let t,n=(0,p.c)(3),{tasks:a,isError:i}=e;return n[0]!==i||n[1]!==a?(t=(0,m.jsx)(en.List,{id:"tasks-list","aria-labelledby":"open-tab",children:i?(0,m.jsxs)(en.EmptyState,{children:[(0,m.jsx)(ef.AlertIcon,{size:24}),(0,m.jsx)("p",{children:"Sorry, something went wrong"})]}):0===a.length?(0,m.jsx)(en.EmptyState,{children:(0,m.jsx)("p",{children:"No open tasks yet. Start a new task to see it here."})}):(0,m.jsx)(m.Fragment,{children:a.map(eA)})}),n[0]=i,n[1]=a,n[2]=t):t=n[2],t}function eA(e){return e.isOptimistic?(0,m.jsx)(eE,{title:`Creating: ${e.problemStatement??""}`,repositoryNwo:e.nwo??""},e.clientGeneratedId):e.pull&&(0,m.jsx)(eT,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffStats:e.pull.diffstat},e.pull.id)}try{eL.displayName||(eL.displayName="OpenTaskList")}catch{}function eR(e){let t,n,a=(0,p.c)(5),{tasks:i,isError:s}=e;return a[0]!==s||a[1]!==i?(t=s?(0,m.jsxs)(en.EmptyState,{children:[(0,m.jsx)(ef.AlertIcon,{size:24}),(0,m.jsx)("p",{children:"Sorry, something went wrong"})]}):0===i.length?(0,m.jsx)(en.EmptyState,{children:(0,m.jsx)("p",{children:"No closed tasks yet."})}):i.map(eD),a[0]=s,a[1]=i,a[2]=t):t=a[2],a[3]!==t?(n=(0,m.jsx)(en.List,{id:"tasks-list","aria-labelledby":"closed-tab",children:t}),a[3]=t,a[4]=n):n=a[4],n}function eD(e){return(0,m.jsx)(eT,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffStats:e.pull.diffstat},e.pull.id)}try{eR.displayName||(eR.displayName="ClosedTaskList")}catch{}function eP(e){let t,n,a,i,s,r,o,l,c,d,u,h=(0,p.c)(31),{tasks:f,isError:g,activeTab:y,setActiveTab:_}=e;h[0]!==f?(t=f.filter(eB),h[0]=f,h[1]=t):t=h[1];let x=t;h[2]!==f?(n=f.filter(eO),h[2]=f,h[3]=n):n=h[3];let v=n;h[4]!==_?(a=()=>_("open"),h[4]=_,h[5]=a):a=h[5];let b="open"===y;h[6]!==x.length?(i=(0,m.jsx)("span",{className:eh.counter,children:x.length}),h[6]=x.length,h[7]=i):i=h[7],h[8]!==a||h[9]!==b||h[10]!==i?(s=(0,m.jsxs)("button",{onClick:a,role:"tab","aria-selected":b,"aria-controls":"tasks-list",id:"open-tab",className:eh.button,children:["Open ",i]}),h[8]=a,h[9]=b,h[10]=i,h[11]=s):s=h[11],h[12]!==_?(r=()=>_("closed"),h[12]=_,h[13]=r):r=h[13];let j="closed"===y;return h[14]!==v.length?(o=(0,m.jsx)("span",{className:eh.counter,children:v.length}),h[14]=v.length,h[15]=o):o=h[15],h[16]!==r||h[17]!==j||h[18]!==o?(l=(0,m.jsxs)("button",{onClick:r,role:"tab","aria-selected":j,"aria-controls":"tasks-list",id:"closed-tab",className:eh.button,children:["Closed ",o]}),h[16]=r,h[17]=j,h[18]=o,h[19]=l):l=h[19],h[20]!==l||h[21]!==s?(c=(0,m.jsx)(en.Header,{children:(0,m.jsxs)("div",{role:"tablist","aria-label":"Filter pull requests",className:eh.filterButtons,children:[s,l]})}),h[20]=l,h[21]=s,h[22]=c):c=h[22],h[23]!==y||h[24]!==v||h[25]!==g||h[26]!==x?(d="open"===y?(0,m.jsx)(eL,{tasks:x,isError:g}):(0,m.jsx)(eR,{tasks:v,isError:g}),h[23]=y,h[24]=v,h[25]=g,h[26]=x,h[27]=d):d=h[27],h[28]!==c||h[29]!==d?(u=(0,m.jsxs)(en,{children:[c,d]}),h[28]=c,h[29]=d,h[30]=u):u=h[30],u}function eO(e){return!!(e.pull&&("merged"===e.pull.state||"closed"===e.pull.state))}function eB(e){return!e.pull||"merged"!==e.pull.state&&"closed"!==e.pull.state}try{eP.displayName||(eP.displayName="TaskList")}catch{}function eM(){let e,t,n,a=(0,p.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(J.P.Header,{children:(0,m.jsx)("div",{className:P.header})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(J.P.Sidebar,{children:(0,m.jsx)(X.U,{})}),a[1]=t):t=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(F.Fn,{children:(0,m.jsxs)(J.P,{"data-testid":"agents-layout",children:[e,t,(0,m.jsx)(J.P.ColumnLeft,{children:(0,m.jsx)(eF,{})})]})}),a[2]=n):n=a[2],n}function eF(){let e,t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,_,v,b,j,w,N,S=(0,p.c)(50),[C,I]=(0,x.useState)("open"),{sessionsPollingInterval:k,showCopilotCodingAgentPremiumRequestsBanner:T,tasks:E,pullRequestsMap:L}=(0,M.X)();S[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],S[0]=e):e=S[0];let[A,R]=(0,x.useState)(e);S[1]!==L||S[2]!==E||S[3]!==k?(t={sessionsPollingInterval:k,initialTasks:E,initialPullRequestsMap:L},S[1]=L,S[2]=E,S[3]=k,S[4]=t):t=S[4];let{tasks:F,isError:q}=(0,O.si)(t);S[5]===Symbol.for("react.memo_cache_sentinel")?(n={onError:(e,t)=>{R(n=>[...n,{...t,error:e,baseRef:t.baseRef,timestamp:new Date().toISOString()}])}},S[5]=n):n=S[5];let{createTask:Q}=(0,Y.Z)(n),J=(0,W.b)();S[6]===Symbol.for("react.memo_cache_sentinel")?(a=[],S[6]=a):a=S[6],(0,x.useEffect)(eW,a),S[7]!==J?(i=()=>{J.selectThread(null,{includeThreads:!1,clearTopic:!0})},s=[J],S[7]=J,S[8]=i,S[9]=s):(i=S[8],s=S[9]),(0,x.useEffect)(i,s),S[10]!==Q||S[11]!==J?(r=async(e,t,n,a)=>{let i=e.trim();""!==i&&n&&""!==n.trim()&&(t?(I("open"),Q({nwo:t.nameWithOwner,problemStatement:i,baseRef:n,eventType:"agents_page",subagent:a})):J.sendChatMessage({content:i,thread:null,references:[]}))},S[10]=Q,S[11]=J,S[12]=r):r=S[12];let X=r;S[13]!==Q||S[14]!==A?(o=e=>{let t=A[e];t&&(R(t=>t.filter((t,n)=>n!==e)),Q({nwo:t.nwo,problemStatement:t.problemStatement,baseRef:t.baseRef,eventType:"agents_page"}))},S[13]=Q,S[14]=A,S[15]=o):o=S[15];let Z=o,{ssoOrganizations:ee,currentReferences:et}=(0,U.Pk)();S[16]!==ee?(l=ee.map(e$),S[16]=ee,S[17]=l):l=S[17];let en=l;S[18]!==et?(c=et.find(eV),S[18]=et,S[19]=c):c=S[19];let ea=c;S[20]!==en?(d=()=>{let e=sessionStorage.getItem("PROTECTED_ORGS");JSON.stringify(en)!==e&&(new H.l().removeLocalStorageAuthToken(),sessionStorage.setItem("PROTECTED_ORGS",JSON.stringify(en)))},u=[en],S[20]=en,S[21]=d,S[22]=u):(d=S[21],u=S[22]),(0,x.useEffect)(d,u);let[ei,es]=(0,x.useState)(!1);S[23]!==ea?(h=ea?{...ea,private:ea?.visibility==="private"}:void 0,S[23]=ea,S[24]=h):h=S[24];let er=h;return S[25]!==ei||S[26]!==T?(f=T&&!ei&&(0,m.jsx)(D.Banner,{children:(0,m.jsx)(B.C,{onBannerDismiss:()=>es(!0)})}),S[25]=ei,S[26]=T,S[27]=f):f=S[27],S[28]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsxs)(D.Header,{children:[(0,m.jsx)(D.Title,{children:"Agents"}),(0,m.jsx)(D.Description,{children:"Delegate tasks to GitHub Copilot coding agent to work on in the background, and then monitor Copilot's progress."})]}),S[28]=g):g=S[28],S[29]!==en?(y=en.length>0&&!(0,G.G7)("global_sso_banner")&&(0,m.jsx)(D.Section,{children:(0,m.jsx)(V.x,{protectedOrgs:en,redirectURI:eU})}),S[29]=en,S[30]=y):y=S[30],S[31]!==X||S[32]!==er?(_=(0,m.jsx)($.Q,{handleUserSubmit:X,initialRepo:er}),S[31]=X,S[32]=er,S[33]=_):_=S[33],S[34]!==A||S[35]!==Z?(v=A.length>0&&(0,m.jsx)(K.B,{direction:"vertical",className:P.failedTaskCreationBanners,children:A.map((e,t)=>(0,m.jsx)(z,{problemStatement:e?.problemStatement,handleRetry:()=>Z(t),handleDismiss:()=>{R(e=>e.filter((e,n)=>n!==t))}},`${e?.nwo}-${e?.problemStatement}-${e?.timestamp}`))}),S[34]=A,S[35]=Z,S[36]=v):v=S[36],S[37]!==_||S[38]!==v?(b=(0,m.jsxs)(D.Section,{children:[_,v]}),S[37]=_,S[38]=v,S[39]=b):b=S[39],S[40]!==C||S[41]!==q||S[42]!==F?(j=(0,m.jsx)(D.Section,{children:(0,m.jsx)(eP,{tasks:F,isError:q,activeTab:C,setActiveTab:I})}),S[40]=C,S[41]=q,S[42]=F,S[43]=j):j=S[43],S[44]===Symbol.for("react.memo_cache_sentinel")?(w=(0,m.jsx)(eH,{}),S[44]=w):w=S[44],S[45]!==f||S[46]!==y||S[47]!==b||S[48]!==j?(N=(0,m.jsxs)(D.Container,{width:"small",children:[f,g,y,b,j,w]}),S[45]=f,S[46]=y,S[47]=b,S[48]=j,S[49]=N):N=S[49],N}function eU(){return location.href}function eV(e){return"repository"===e.type}function e$(e){return e.login}function eW(){(0,g.D)("Agents \xb7 GitHub Copilot")}function eH(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:P.copilotDisclosure,children:(0,m.jsxs)("p",{className:P.copilotDisclosureText,children:[(0,m.jsx)(Q.A,{href:"https://docs.github.com/copilot/responsible-use/copilot-coding-agent",target:"_blank",rel:"noopener noreferrer",muted:!0,inline:!0,children:"Copilot"})," ","uses AI. Check for mistakes."]})}),t[0]=e):e=t[0],e}try{eM.displayName||(eM.displayName="AgentsViewWrapper")}catch{}try{eF.displayName||(eF.displayName="AgentsView")}catch{}try{eH.displayName||(eH.displayName="CopilotDisclosure")}catch{}var eq=n(47723),ez=n(55248),eG=n(26607);let eK=/\/copilot\/agents/;let AgentsPlugin=class AgentsPlugin{constructor(){(0,f._)(this,"id",eq.Dv),(0,f._)(this,"displayName",eq.Ff),(0,f._)(this,"skipSyncRouteToThread",!0),(0,f._)(this,"components",[{id:"agents-view",Component:eM,routes:[eK]}]),(0,f._)(this,"navigationItems",[{id:eq.Dv,displayName:"Agents",href:eq.pr,icon:ez.p,label:(0,G.G7)("copilot_coding_agent_ga")?null:(0,x.createElement)(eG.A,{variant:"success"},"Preview")}])}};var eQ=n(42312),eY=n(1747),eJ=n(79684),eX=n(1992),eZ=n(5524);function e0(e){let t,n,a,i=(0,p.c)(4),{pull:s}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(eJ.B.Item,{href:"/copilot/agents",children:"Tasks"}),i[0]=t):t=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(eX.W.Overlay,{align:"end",children:(0,m.jsxs)(eZ.l,{children:[(0,m.jsx)(eZ.l.Item,{as:"a",href:"/tasks",children:"Task A"}),(0,m.jsx)(eZ.l.Item,{as:"a",href:"/tasks/123",children:"Task B"})]})}),i[1]=n):n=i[1];let r=s?.title??"Error loading data";return i[2]!==r?(a=(0,m.jsxs)(eJ.B,{children:[t,(0,m.jsx)(eJ.B.ItemWithMenu,{menuOverlay:n,children:(0,m.jsx)("span",{children:r})})]}),i[2]=r,i[3]=a):a=i[3],a}try{e0.displayName||(e0.displayName="TaskBreadcrumbs")}catch{}var e1=n(26108);function e2(e){let t,n=(0,p.c)(4),{isContentPreviewOpen:a,openPreviewPane:i}=e,s=(0,eQ.U)();return n[0]!==s||n[1]!==a||n[2]!==i?(t=!a&&(0,m.jsx)(e1.K,{icon:ef.SidebarExpandIcon,"aria-label":"Open workbench",size:"small",onClick:()=>{i()},ref:s}),n[0]=s,n[1]=a,n[2]=i,n[3]=t):t=n[3],t}try{e2.displayName||(e2.displayName="PreviewPaneButton")}catch{}var e3=n(19199),e4=n(26410),e5=n(99223),e6=n(13107),e7=n(71315);let e8={actionList:"OpenInMenu-module__actionList--jMOLM",menuItem:"OpenInMenu-module__menuItem--SS743",menuContent:"OpenInMenu-module__menuContent--dtUPD",menuIcon:"OpenInMenu-module__menuIcon--TWmG3",menuTitle:"OpenInMenu-module__menuTitle--hwhpE",cliSection:"OpenInMenu-module__cliSection--nAe4Q",cliHeader:"OpenInMenu-module__cliHeader--ggn5w",cliDescription:"OpenInMenu-module__cliDescription--TKlSI"};function e9(e,t){let n=`git clone https://github.com/${t}.git && code ${t.split("/")[1]}`;window.open(e,"_blank"),navigator.clipboard&&navigator.clipboard.writeText(n)}function te(e){let t,n,a,i,s,r,o=(0,p.c)(17),{pull:l}=e;if(o[0]!==l.repository_nwo){let e;e=l.repository_nwo,t=()=>{e9(`vscode://vscode.git/clone?url=https://github.com/${e}.git`,e)},o[0]=l.repository_nwo,o[1]=t}else t=o[1];let c=t;if(o[2]!==l.number||o[3]!==l.repository_nwo){let e,t;e=l.repository_nwo,t=l.number,n=()=>{e9(function(e,t){let n=e7.cg?.location.origin||"https://github.com";return`x-github-client://openRepo/${n}/${e}?pr=${t}`}(e,t),e)},o[2]=l.number,o[3]=l.repository_nwo,o[4]=n}else n=o[4];let d=n,u=`pull/${l.number}/head`;o[5]!==l.id||o[6]!==u?(a=(0,e6.QS)(l.id,u),o[5]=l.id,o[6]=u,o[7]=a):a=o[7];let h=a;o[8]===Symbol.for("react.memo_cache_sentinel")?(i=(0,e5.k)(),o[8]=i):i=o[8];let f=i,g=!!h;return o[9]!==d||o[10]!==c||o[11]!==l.url?(s=(0,m.jsx)(tt,{pullURL:l.url,onOpenInVSCode:c,onOpenInGitHubDesktop:d}),o[9]=d,o[10]=c,o[11]=l.url,o[12]=s):s=o[12],o[13]!==h||o[14]!==g||o[15]!==s?(r=(0,m.jsx)(e3.n,{primary:!1,size:"small",isEnterprise:f,showCodespacesTab:g,codespacesPath:h,localTab:s}),o[13]=h,o[14]=g,o[15]=s,o[16]=r):r=o[16],r}function tt(e){let t,n,a,i,s,r,o,l,c,d,u,h=(0,p.c)(18),{pullURL:f,onOpenInVSCode:g,onOpenInGitHubDesktop:y}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:e8.menuContent,children:[(0,m.jsx)(ef.TerminalIcon,{className:e8.menuIcon}),(0,m.jsx)("p",{className:e8.menuTitle,children:"Open in VS Code"})]}),h[0]=t):t=h[0],h[1]!==g?(n=(0,m.jsx)(eZ.l.Item,{className:e8.menuItem,onSelect:g,children:t}),h[1]=g,h[2]=n):n=h[2],h[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(eZ.l.Divider,{}),h[3]=a):a=h[3],h[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsxs)("div",{className:e8.menuContent,children:[(0,m.jsx)(ef.DesktopDownloadIcon,{className:e8.menuIcon}),(0,m.jsx)("p",{className:e8.menuTitle,children:"Checkout with GitHub Desktop"})]}),h[4]=i):i=h[4],h[5]!==y?(s=(0,m.jsx)(eZ.l.Item,{className:e8.menuItem,onSelect:y,children:i}),h[5]=y,h[6]=s):s=h[6],h[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(eZ.l.Divider,{}),h[7]=r):r=h[7],h[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsxs)("div",{className:e8.cliHeader,children:[(0,m.jsx)(ef.TerminalIcon,{className:e8.menuIcon}),(0,m.jsx)("p",{className:e8.menuTitle,children:"GitHub CLI"})]}),h[8]=o):o=h[8];let _=`gh pr view ${f}`;return h[9]!==_?(l=(0,m.jsx)(e4.J,{buttonAriaLabel:"Copy GitHub PR CLI command to clipboard",inputId:"github-cli",inputLabel:"GitHub CLI command",url:_}),h[9]=_,h[10]=l):l=h[10],h[11]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsx)("p",{className:e8.cliDescription,children:"View this pull request in the GitHub CLI PR view."}),h[11]=c):c=h[11],h[12]!==l?(d=(0,m.jsx)("ul",{children:(0,m.jsxs)("li",{className:e8.cliSection,children:[o,l,c]})}),h[12]=l,h[13]=d):d=h[13],h[14]!==d||h[15]!==n||h[16]!==s?(u=(0,m.jsxs)(eZ.l,{className:e8.actionList,children:[n,a,s,r,d]}),h[14]=d,h[15]=n,h[16]=s,h[17]=u):u=h[17],u}try{te.displayName||(te.displayName="OpenInMenu")}catch{}try{tt.displayName||(tt.displayName="CustomLocalTab")}catch{}var tn=n(21373);function ta(e){let t,n=(0,p.c)(2),{pullUrl:a}=e;return n[0]!==a?(t=(0,m.jsx)(tn.Q,{as:"a",href:a,target:"_blank",leadingVisual:ef.GitPullRequestIcon,variant:"primary",size:"small",children:"View pull request"}),n[0]=a,n[1]=t):t=n[1],t}try{ta.displayName||(ta.displayName="ViewPullRequestButton")}catch{}function ti(e){let t,n,a,i,s,r=(0,p.c)(13),{pull:o,isContentPreviewOpen:l,openPreviewPane:c}=e;return r[0]!==o?(t=(0,m.jsx)(e0,{pull:o}),r[0]=o,r[1]=t):t=r[1],r[2]!==o?(n=o&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(te,{pull:o}),(0,m.jsx)(ta,{pullUrl:o.url})]}),r[2]=o,r[3]=n):n=r[3],r[4]!==l||r[5]!==c?(a=(0,m.jsx)(e2,{isContentPreviewOpen:l,openPreviewPane:c}),r[4]=l,r[5]=c,r[6]=a):a=r[6],r[7]!==n||r[8]!==a?(i=(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"condensed",children:[n,a]}),r[7]=n,r[8]=a,r[9]=i):i=r[9],r[10]!==t||r[11]!==i?(s=(0,m.jsx)(J.P.Header,{children:(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",justify:"space-between",className:"flex-1",children:[t,i]})}),r[10]=t,r[11]=i,r[12]=s):s=r[12],s}try{ti.displayName||(ti.displayName="TaskHeader")}catch{}var ts=n(97665),tr=n(97286);let to=async(e,t={})=>{let{includeDiff:n=!1,includeBody:a=!1}=t,i=new URL("/copilot/agent-sessions/pull-requests",window.location.origin);i.searchParams.set("pull_request_ids",String(e)),n&&i.searchParams.set("include_diffs","true"),a&&i.searchParams.set("include_body","true");let s=await fetch(i.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!s.ok)throw Error(`Failed to fetch pull request ${e}`);let r=(await s.json()).pull_requests[e];if(!r)throw Error(`Pull request ${e} not found`);return r};var tl=n(40235),tc=n(74022),td=n(7730),tu=n(35247),tm=n(53419),tp=n(11607),th=n(77999),tf=n(75202),tg=n(6551),ty=n(11683),t_=n(45800),tx=n(71941),tv=n(26382);let tb={errorFallbackContainer:"ErrorFallback-module__errorFallbackContainer--uGjJA"};function tj(e){let t,n,a,i,s,r,o=(0,p.c)(8),{regionName:l}=e;return o[0]!==l?(t=()=>{let e=`ERROR_FALLBACK_${l.toUpperCase().replace(/\s+/g,"_")}`;(0,tm.BI)("dotcom_chat.activate",{target:e,mode:"immersive",message:`${l} error fallback`})},n=[l],o[0]=l,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,x.useEffect)(t,n),o[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(tv.E.Visual,{children:(0,m.jsx)(ef.AlertIcon,{size:"medium"})}),i=(0,m.jsx)(tv.E.Heading,{children:"Something went wrong"}),o[3]=a,o[4]=i):(a=o[3],i=o[4]),o[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(Q.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),o[5]=s):s=o[5],o[6]!==l?(r=(0,m.jsx)("div",{className:tb.errorFallbackContainer,children:(0,m.jsxs)(tv.E,{children:[a,i,(0,m.jsxs)(tv.E.Description,{children:[l," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",s,"."]})]})}),o[6]=l,o[7]=r):r=o[7],r}try{tj.displayName||(tj.displayName="ErrorFallback")}catch{}let tw={container:"ContentPreview-module__container--y5_MG",resourcePanelOpen:"ContentPreview-module__resourcePanelOpen--YIQql",toolbar:"ContentPreview-module__toolbar--_XWuB",actions:"ContentPreview-module__actions--o_YRg",tabsContainer:"ContentPreview-module__tabsContainer--t0I1P",tabs:"ContentPreview-module__tabs--X2Pn9",rightDivider:"ContentPreview-module__rightDivider--LY__Z",leftDivider:"ContentPreview-module__leftDivider--FCyvC",content:"ContentPreview-module__content--FgZZL"};var tN=n(47789),tS=n(90651),tC=n(49246),tI=n(66827),tk=n(29731);let tT="/favicons/favicon-copilot.svg",tE={container:"FailureState-module__container--EliAz",icon:"FailureState-module__icon--TP632",heading:"FailureState-module__heading--ohXqD",subtitle:"FailureState-module__subtitle--VM7x1"};function tL(e){let t,n,a,i,s,r=(0,p.c)(11),{title:o,description:l,icon:c}=e;return r[0]!==c?(t=(0,m.jsx)(c,{size:24,className:tE.icon}),r[0]=c,r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),r[2]=n):n=r[2],r[3]!==o?(a=(0,m.jsx)("h2",{className:tE.heading,children:o}),r[3]=o,r[4]=a):a=r[4],r[5]!==l?(i=(0,m.jsx)("p",{className:tE.subtitle,children:l}),r[5]=l,r[6]=i):i=r[6],r[7]!==t||r[8]!==a||r[9]!==i?(s=(0,m.jsxs)("div",{className:tE.container,children:[t,n,a,i]}),r[7]=t,r[8]=a,r[9]=i,r[10]=s):s=r[10],s}try{tL.displayName||(tL.displayName="FailureState")}catch{}var tA=n(26100),tR=n(7812);let tD={anchor:"VersionSelector-module__anchor--Tx_UX"};function tP(e){let t,n,a,i,s,r=(0,p.c)(16),{item:o,onVersionSelect:l}=e,{versionedItems:c,openItem:d}=(0,eY.xx)(),u=(0,tR.oy)(o.id),h=c.get(u)??[],f=h.indexOf(o.id);if((0,x.useEffect)(()=>{l&&h.length>1&&l(`Version${f+1}`)},[f,l,h.length]),h.length<=1)return null;let g=eX.W,y=f+1;r[0]!==y?(t=(0,m.jsx)(eX.W.Button,{variant:"invisible",className:tD.anchor,children:(0,m.jsx)(tA.g,{version:y,"data-testid":"version-selector"})}),r[0]=y,r[1]=t):t=r[1];let _=eX.W,v=eZ.l;r[2]!==o.id||r[3]!==l||r[4]!==d?(n=(e,t)=>(0,m.jsxs)(eZ.l.Item,{onSelect:()=>{d(e),l&&l(`Version${t+1}`)},selected:e===o.id,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(tA.g,{version:t+1})}),"Version ",t+1]},e),r[2]=o.id,r[3]=l,r[4]=d,r[5]=n):n=r[5];let b=h.map(n);return r[6]!==v||r[7]!==b?(a=(0,m.jsx)(v,{selectionVariant:"single",children:b}),r[6]=v,r[7]=b,r[8]=a):a=r[8],r[9]!==_.Overlay||r[10]!==a?(i=(0,m.jsx)(_.Overlay,{children:a}),r[9]=_.Overlay,r[10]=a,r[11]=i):i=r[11],r[12]!==g||r[13]!==t||r[14]!==i?(s=(0,m.jsxs)(g,{children:[t,i]}),r[12]=g,r[13]=t,r[14]=i,r[15]=s):s=r[15],s}try{tP.displayName||(tP.displayName="VersionSelector")}catch{}var tO=n(58335),tB=n(79531),tM=n(83494),tF=n(15042),tU=n(69726),tV=n(79431);let t$={dialogFooter:"BulkCreateDialog-module__dialogFooter--aWAd9",dialogFooterStatus:"BulkCreateDialog-module__dialogFooterStatus--RMt1N",dialogFooterActions:"BulkCreateDialog-module__dialogFooterActions--BvuR4",loadingIndicator:"BulkCreateDialog-module__loadingIndicator--sRZcS"};function tW(e){let t,n=(0,p.c)(3);if("existing-issue"===e.type){if("open"===e.state){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueOpenedIcon,{className:"fgColor-open"}),n[0]=e):e=n[0],e}if("closed"===e.state){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueClosedIcon,{className:"fgColor-done"}),n[1]=e):e=n[1],e}}return n[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(ef.IssueDraftIcon,{className:"fgColor-muted"}),n[2]=t):t=n[2],t}try{tW.displayName||(tW.displayName="IssueIcon")}catch{}var tH=n(67955),tq=n(54070);let tz={container:"IssueTree-module__container--kYTT7",subHeader:"IssueTree-module__subHeader--BDblp",tree:"IssueTree-module__tree--GQG9_",grid:"IssueTree-module__grid--hqjkj",description:"IssueTree-module__description--b8yCi",item:"IssueTree-module__item--th4vZ",rootItem:"IssueTree-module__rootItem--hxb6j",spacer:"IssueTree-module__spacer--Z4HHo",leadingVisual:"IssueTree-module__leadingVisual--e_q3O",content:"IssueTree-module__content--Ko11D",title:"IssueTree-module__title--v0mbM",blockedBy:"IssueTree-module__blockedBy--z0s4g",trailingVisual:"IssueTree-module__trailingVisual--SewMY"},tG=x.createContext({hasTrailingVisuals:void 0}),tK=x.createContext({level:0});function tQ(e){let t,n,a,i,s,r,o=(0,p.c)(16),{subIssueCount:l,subIssueHeaderText:c,hasTrailingVisuals:d,children:u}=e,h=void 0===c?"Sub-issues":c,f=void 0!==d&&d;if(o[0]!==u){let e=x.Children.toArray(u);t=e.find(tJ),n=e.filter(tY),o[0]=u,o[1]=t,o[2]=n}else t=o[1],n=o[2];let g=n;o[3]!==f?(a={hasTrailingVisuals:f},o[3]=f,o[4]=a):a=o[4];let y=a,_=!!f||void 0;return o[5]!==g||o[6]!==l||o[7]!==h?(i=g.length>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:tz.subHeader,children:[h,(0,m.jsx)(tH.A,{children:l})]}),(0,m.jsx)("ul",{role:"tree",className:tz.tree,children:g})]}),o[5]=g,o[6]=l,o[7]=h,o[8]=i):i=o[8],o[9]!==t||o[10]!==_||o[11]!==i?(s=(0,m.jsxs)("div",{className:tz.container,"data-has-trailing-visual":_,children:[t,i]}),o[9]=t,o[10]=_,o[11]=i,o[12]=s):s=o[12],o[13]!==y||o[14]!==s?(r=(0,m.jsx)(tG.Provider,{value:y,children:s}),o[13]=y,o[14]=s,o[15]=r):r=o[15],r}function tY(e){return x.isValidElement(e)&&e.type===tZ}function tJ(e){return x.isValidElement(e)&&e.type===tX}function tX(e){let t,n,a,i=(0,p.c)(4);i[0]===Symbol.for("react.memo_cache_sentinel")?(t={level:0},i[0]=t):t=i[0];let s=t;return i[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,_.$)(tz.item,tz.rootItem),i[1]=n):n=i[1],i[2]!==e?(a=(0,m.jsx)(tK.Provider,{value:s,children:(0,m.jsx)("div",{className:n,children:(0,m.jsx)(t2,{...e})})}),i[2]=e,i[3]=a):a=i[3],a}function tZ(e){let t,n,a,i,s,r,o,l,c,d=(0,p.c)(19);if(d[0]!==e?({children:t,...n}=e,d[0]=e,d[1]=t,d[2]=n):(t=d[1],n=d[2]),d[3]!==t){let e=x.Children.toArray(t);a=e.filter(t1),i=e.filter(t0),d[3]=t,d[4]=a,d[5]=i}else a=d[4],i=d[5];let u=i,{level:h}=x.useContext(tK),f=h+1;d[6]!==f?(s={level:f},d[6]=f,d[7]=s):s=d[7];let g=s;return d[8]!==u||d[9]!==n?(r=(0,m.jsx)(t2,{...n,children:u}),d[8]=u,d[9]=n,d[10]=r):r=d[10],d[11]!==a?(o=a.length>0&&(0,m.jsx)("ul",{role:"group",className:tz.tree,children:a}),d[11]=a,d[12]=o):o=d[12],d[13]!==r||d[14]!==o?(l=(0,m.jsxs)("li",{role:"treeitem","aria-selected":"false",className:tz.item,children:[r,o]}),d[13]=r,d[14]=o,d[15]=l):l=d[15],d[16]!==g||d[17]!==l?(c=(0,m.jsx)(tK.Provider,{value:g,children:l}),d[16]=g,d[17]=l,d[18]=c):c=d[18],c}function t0(e){return!(x.isValidElement(e)&&e.type===tZ)}function t1(e){return x.isValidElement(e)&&e.type===tZ}function t2(e){let t,n,a,i,s,r,o,l,c,d=(0,p.c)(32),{leadingVisual:u,title:h,description:f,trailingBadge:g,trailingVisual:y,href:_,onClick:v,blockedBy:b}=e,{level:j}=x.useContext(tK),{hasTrailingVisuals:w}=x.useContext(tG),N=null!=b&&b.length>0;e:{if(_){t="a";break e}if(v){t="button";break e}t="div"}let S=t;d[0]!==j?(n={"--level":j},d[0]=j,d[1]=n):n=d[1];let C=!!v||void 0;if(d[2]!==j?(a=j>0&&(0,m.jsx)("div",{className:tz.spacer}),d[2]=j,d[3]=a):a=d[3],d[4]!==u?(i=(0,m.jsx)("div",{className:tz.leadingVisual,children:u}),d[4]=u,d[5]=i):i=d[5],d[6]!==_||d[7]!==v||d[8]!==h||d[9]!==S){let e;d[11]!==_||d[12]!==v?(e={className:tz.title,href:_,onClick:v},d[11]=_,d[12]=v,d[13]=e):e=d[13],s=x.createElement(S,e,h),d[6]=_,d[7]=v,d[8]=h,d[9]=S,d[10]=s}else s=d[10];return d[14]!==s||d[15]!==g?(r=(0,m.jsxs)("div",{className:tz.content,children:[s,g]}),d[14]=s,d[15]=g,d[16]=r):r=d[16],d[17]!==b||d[18]!==f||d[19]!==N?(o=(null!=f||N)&&(0,m.jsxs)("div",{className:tz.description,children:[N&&(0,m.jsx)(t3,{dependencyType:"Blocked by",blockedBy:b}),f]}),d[17]=b,d[18]=f,d[19]=N,d[20]=o):o=d[20],d[21]!==w||d[22]!==y?(l=w&&(0,m.jsx)("div",{className:tz.trailingVisual,children:y}),d[21]=w,d[22]=y,d[23]=l):l=d[23],d[24]!==n||d[25]!==C||d[26]!==a||d[27]!==i||d[28]!==r||d[29]!==o||d[30]!==l?(c=(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:tz.grid,style:n,"data-has-onclick":C,children:[a,i,r,o,l]})}),d[24]=n,d[25]=C,d[26]=a,d[27]=i,d[28]=r,d[29]=o,d[30]=l,d[31]=c):c=d[31],c}function t3(e){let t,n,a=(0,p.c)(8),{dependencyType:i,blockedBy:s}=e;if(!s.length)return null;let r=s[0]?.href,o=s[0]?.onClick,l=s[0]?.title;a[0]!==r||a[1]!==o||a[2]!==l?(t=(0,m.jsx)(Q.A,{"data-testid":"blocked-by-link",className:tz.blockedBy,muted:!0,href:r,onClick:o,children:l}),a[0]=r,a[1]=o,a[2]=l,a[3]=t):t=a[3];let c=t;return a[4]!==s.length||a[5]!==c||a[6]!==i?(n=(0,m.jsx)(tq.A,{size:"medium",className:"mr-2",leadingVisual:t4,text:s.length>1?(0,m.jsxs)(m.Fragment,{children:[i," ",s.length]}):(0,m.jsxs)(m.Fragment,{children:[i,": ",c]})}),a[4]=s.length,a[5]=c,a[6]=i,a[7]=n):n=a[7],n}function t4(){return(0,m.jsx)(ef.BlockedIcon,{"data-testid":"blocked-by-icon",className:"fgColor-danger",size:14})}let t5=Object.assign(tQ,{RootItem:tX,Item:tZ});try{tQ.displayName||(tQ.displayName="Tree")}catch{}try{tX.displayName||(tX.displayName="TreeRootItem")}catch{}try{tZ.displayName||(tZ.displayName="TreeItem")}catch{}try{t2.displayName||(t2.displayName="TreeItemContent")}catch{}try{t3.displayName||(t3.displayName="IssueDependencies")}catch{}try{t5.displayName||(t5.displayName="IssueTree")}catch{}var t6=n(16654),t7=n(94747),t8=n(96379),t9=n(18312);function ne(e,t){for(let n of(t(e),e.children))ne(n,t)}function nt(e,t,n,a){let i=e.reduce((e,n)=>(e.set(t(n),{item:n,parent:null,children:[],blockedBy:[],isBlocking:[]}),e),new Map);for(let s of e){let e=i.get(t(s)),r=n(s);if(null!=r){let t=i.get(r);t&&e&&(e.parent=t,t.children.push(e))}for(let t of a?.(s)??[]){let n=i.get(t);n&&e&&(e.blockedBy.push(n),n.isBlocking.push(e))}}return i}function nn(){let e,t,n=(0,p.c)(6),{items:a,allOpenItems:i,versionedItems:s}=(0,eY.xx)();n[0]!==i?(e=new Set(i),n[0]=i,n[1]=e):e=n[1];let r=e;return n[2]!==a||n[3]!==r||n[4]!==s?(t=nt([...s.entries()].filter(no).map(e=>{let[,t]=e,n=t.find(e=>r.has(e));if(n)return a.get(n);let i=t.at(-1);return i?a.get(i):void 0}).filter(nr),ns,ni,na),n[2]=a,n[3]=r,n[4]=s,n[5]=t):t=n[5],t}function na(e){return e.blockedByTags}function ni(e){return e.parentTag}function ns(e){return e.tag}function nr(e){return!!e}function no(e){let[t]=e;return t.startsWith("new-issue:")||t.startsWith("existing-issue:")}var nl=n(16049),nc=n(73952);function nd(){let e,t,n=(0,p.c)(4),{messages:a}=(0,U.Pk)();n[0]!==a?(e=(0,nc.B)(a),n[0]=a,n[1]=e):e=n[1];let i=e;return n[2]!==i?(t=(e,t)=>null==e?Promise.resolve(t):nu(t,e.databaseId,i[0]?.threadID),n[2]=i,n[3]=t):t=n[3],t}async function nu(e,t,n){let a=e.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),i=new Set;for(let e of a||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&i.add(t)}if(i.size>0){let a=Array.from(i).map(async e=>{let t=await fetch(e),n=await t.blob(),a=n.type.split("/")[1],i=`copilot-image.${a}`,s=await createImageBitmap(n),r=s.width;return s.close(),{file:new File([n],i,{type:n.type}),url:e,width:r}}),s=await Promise.all(a);for(let n of(await Promise.all(s.map(async e=>{if(e)return{uploadedFile:await (0,nl.QM)(e.file,t?.toString()),originalUrl:e.url,width:e.width}}))))if(n){let{uploadedFile:t,originalUrl:a,width:i}=n,s=t.url;if(s){let t=RegExp(`!\\[(.*?)\\]\\(${a}\\)`,"g");e=e.replace(t,`<img alt="$1" width="${i}" src="${s}" />`)}}(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:i.size,threadId:n})}return e}function nm(e){return!e.state.error&&e.state.data?.job.state!=="success"&&e.state.data?.job.state!=="error"&&2e3}var np=n(62559),nh=n(81724),nf=n(977),ng=n(18501),ny=n(40961),n_=n(5338);let nx={kind:"InlineDataFragment",name:"useIssueQueryIssueContent"};nx.hash="8d98014b603ef51225b6824b67f1c49c";let nv=function(){var e={defaultValue:null,kind:"LocalArgument",name:"name"},t={defaultValue:null,kind:"LocalArgument",name:"number"},n={defaultValue:null,kind:"LocalArgument",name:"owner"},a=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],i=[{kind:"Variable",name:"number",variableName:"number"}],s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},c=[{kind:"Literal",name:"first",value:20}],d={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},m=[u],p={alias:null,args:c,concreteType:"ProjectV2ItemConnection",kind:"LinkedField",name:"projectItems",plural:!1,selections:[{alias:null,args:null,concreteType:"ProjectV2Item",kind:"LinkedField",name:"nodes",plural:!0,selections:[s,{alias:null,args:null,concreteType:"ProjectV2",kind:"LinkedField",name:"project",plural:!1,selections:[s,o],storageKey:null}],storageKey:null}],storageKey:"projectItems(first:20)"},h=[u,s];return{fragment:{argumentDefinitions:[e,t,n],kind:"Fragment",metadata:null,name:"useIssueQueryQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"useIssueQueryIssueContent",selections:[s,r,o,l,{alias:null,args:c,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:[d],storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:c,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:m,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[o],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:m,storageKey:null},p],args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e,t],kind:"Operation",name:"useIssueQueryQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[s,r,o,l,{alias:null,args:c,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:[d,s],storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:c,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:h,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[o,s],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:h,storageKey:null},p],storageKey:null},s],storageKey:null}]},params:{id:"b9fbfc0b8a280081979ffb558774603a",metadata:{},name:"useIssueQueryQuery",operationKind:"query",text:null}}}();async function nb(e,t,n,a,i=!1){try{var s;let r=await (0,t9.fetchQuery)(e,nv,{owner:t,name:n,number:a},{fetchPolicy:i?"network-only":"store-or-network"}).toPromise();if(r?.repository?.issue==null)return null;return s=r.repository.issue,(0,t9.readInlineData)(nx,s)}catch(e){if("object"==typeof e&&null!=e&&"name"in e&&"ValidationError"===e.name&&"message"in e&&"string"==typeof e.message&&e.message.includes("NOT_FOUND"))return null;throw e}}nv.hash="a1c6e44ba1445bc4d870fb9c11487d4d";var nj=n(72767),nw=n(93997);function nN(e){let t,n,a,i,s=(0,p.c)(13),{repoId:r,filename:o}=e,l=(0,t9.useRelayEnvironment)();return s[0]!==l?(t=JSON.stringify(l),s[0]=l,s[1]=t):t=s[1],s[2]!==o||s[3]!==r||s[4]!==t?(n=["copilot-immersive-template-payload",t,r,o],s[2]=o,s[3]=r,s[4]=t,s[5]=n):n=s[5],s[6]!==l||s[7]!==o||s[8]!==r?(a=async()=>r&&o?await nS(l,r,o):null,s[6]=l,s[7]=o,s[8]=r,s[9]=a):a=s[9],s[10]!==n||s[11]!==a?(i={queryKey:n,queryFn:a},s[10]=n,s[11]=a,s[12]=i):i=s[12],(0,tr.I)(i)}async function nS(e,t,n){let a=await (0,t9.fetchQuery)(e,nj.F,{repoId:t,filename:n}).toPromise();return a&&a.node?(0,nw.EV)(a.node)??null:null}let nC=crypto.randomUUID();async function nI(e,t,n){let a={},i=new Map;if(ne(n,e=>i.set(e.item.tag,e)),i.size>60)return a[nC]={errorMessages:["You cannot create more than 60 new issues at a time. Please remove some draft issues from the tree and try again."]},a;if(function e(t,n=0){if(n>7)return!0;if(!t.children||0===t.children.length)return!1;for(let a of t.children)if(e(a,n+1))return!0;return!1}(n))return a[nC]={errorMessages:["You cannot add more than 7 levels of sub-issues. Please remove some issues from the tree and try again."]},a;for(let[n,s]of i){let r=s.item;if(a[n]={errorMessages:[]},"new-issue"===r.type&&(!r.repository&&r.parentTag&&(r.repository=i.get(r.parentTag)?.item?.repository),!r.repository)){a[n].errorMessages.push("Repository is required");continue}let[o,l]=r.repository?.split("/")||[];if(!o||!l){a[n].errorMessages.push('Repository must be in the format "owner/repo"');continue}let c=await (0,t6.tZ)(e,o,l);if(!c){a[n].errorMessages.push("Repository not found");continue}if(c.isArchived){a[n].errorMessages.push("Repository is archived");continue}if(!c.hasIssuesEnabled){a[n].errorMessages.push("Repository does not have issues enabled");continue}if(c.viewerInteractionLimitReasonHTML){a[n].errorMessages.push(c.viewerInteractionLimitReasonHTML);continue}if(s.children.length>0&&(c.isLocked||!1===c.viewerCanPush&&c.viewerIssueCreationPermissions?.triageable===!1)){a[n].errorMessages.push("You do not have permission to create subissues in this repository");continue}if("existing-issue"===r.type){if(!r.number){a[n].errorMessages.push("Issue number is required");continue}await nb(e,o,l,r.number)||a[n].errorMessages.push("Issue not found");continue}let d=r.template?.split("/").findLast(Boolean),u=d?await nS(e,c.id,d):void 0;if(r.template&&!u){a[n].errorMessages.push("Issue template not found");continue}if(!c.isBlankIssuesEnabled&&!u){a[n].errorMessages.push("Issue template is required");continue}let p=(0,np.O_)(r.name);if(p.isValid||a[n].errorMessages.push(p.errorMessage||"Issue title is invalid"),u&&(0,nh.GQ)(u.data)){t.current=null;let i=document.createElement("div"),s=(0,n_.H)(i);if((0,ny.flushSync)(()=>{s.render((0,m.jsx)(ng.c,{partialName:"copilot-creates-issues-bulk-validation",wasServerRendered:!1,children:(0,m.jsx)(t9.RelayEnvironmentProvider,{environment:e,children:(0,m.jsx)(nk,{repository:c,draftIssue:r,template:u,outputRef:t})})}))}),!t.current)throw Error("IssueFormRef is not set");let o=t.current;try{if(o.getInvalidInputs().length>0){a[n].errorMessages.push("Invalid form input");continue}r.body=o.markdown()}finally{o.clearSessionStorage(),s.unmount(),i.remove()}}let h=(0,np.QK)(r.body??"");h.isValid||a[n].errorMessages.push(h.errorMessage||"Issue body is invalid")}return a}function nk(e){let t,n,a=(0,p.c)(10),{repository:i,draftIssue:s,template:r,outputRef:o}=e,l=`${i.owner.login}/${i.name}`;a[0]!==i.databaseId||a[1]!==i.slashCommandsEnabled||a[2]!==l?(t={type:"issue",repository:{databaseId:i.databaseId,nwo:l,slashCommandsEnabled:i.slashCommandsEnabled}},a[0]=i.databaseId,a[1]=i.slashCommandsEnabled,a[2]=l,a[3]=t):t=a[3];let c=t;if(!(0,nh.GQ)(r.data))return;let d=`copilot-creates-issues:${s.tag}`;return a[4]!==s.defaultValuesById||a[5]!==o||a[6]!==c||a[7]!==d||a[8]!==r.data?(n=(0,m.jsx)(nf.Z,{outputRef:o,issueFormRef:r.data,subject:c,sessionStorageKey:d,defaultValuesById:s.defaultValuesById}),a[4]=s.defaultValuesById,a[5]=o,a[6]=c,a[7]=d,a[8]=r.data,a[9]=n):n=a[9],n}try{nC.displayName||(nC.displayName="TREE_ERROR_KEY")}catch{}try{nk.displayName||(nk.displayName="IssueFormWrapper")}catch{}var nT=n(17855),nE=n(51213),nL=n(72303),nA=n(20382);function nR(){let e,t=(0,p.c)(8),n=(0,W.b)(),a=(0,U.Pk)(),{closeItems:i,openItem:s,openPreviewPane:r,versionedItems:o,updateItem:l}=(0,eY.xx)();return t[0]!==i||t[1]!==n||t[2]!==s||t[3]!==r||t[4]!==a||t[5]!==l||t[6]!==o?(e=async e=>{var t;if(0===e.length)return;let c=e.find(nU)??e[0];(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUES_SAVED",mode:"immersive",threadId:(0,nL.W)(a)?.id,chatReferrer:document.referrer,repositoryId:c.repository.databaseId,draftType:c.draftType,issueTag:c.tag,issueNumber:c.number,templateType:c.template?c.template.endsWith(".md")?"markdown":"yaml":"none",issuesWithCopilotAssigned:e.filter(nM).length,savedIssuesCount:e.length});let d=[],u=[],m=[];for(let t of e){let n=t.repository.owner.login,a=t.repository.name,i=t.number;l({type:"issue",id:nV(t),messageId:nE.Wp,name:t.title,owner:n,repo:a,number:i,href:t.url});let s=e.find(e=>e.tag===t.parentTag),r=tu.W.draftIssuesWithDependencies?t.blockedByTags?.map(t=>e.find(e=>e.tag===t)).filter(nB):void 0;u.push({tag:`${n}/${a}#${i}`,parentTag:s?`${s.repository.owner.login}/${s.repository.name}#${s.number}`:void 0,blockedByTags:null!=r&&r.length>0?r?.map(nO):void 0,title:t.title,repository:`${t.repository.owner.login}/${t.repository.name}`,number:t.number,state:"open",url:t.url}),d.push(`[${n}/${a}#${i}](${t.url})`),m.push(t.tag)}i(e.map(nP).flatMap(e=>o.get(e)??[])),s(nV(c)),r();let p={type:"text",name:`timeline-event: {"type": "issue-saved", "markdownContent": "${(t=d).length>1?`Saved ${t.length} issues`:`Issue saved to ${t[0]}`}"}`,text:`${d.length>1?"Fetch the details for all saved issues and return them in a code block with YAML following this example format:":"Fetch the issue details and return them in a code block with YAML following this example format:"}
\`\`\`\`yaml type="issue-tree"
${(0,nA.Bh)({data:u},{forceQuotes:!0,noArrayIndent:!0,lineWidth:-1})}\`\`\`\``},h=[p,{type:"text",name:"ignore-obsolete-drafts",text:`From now on, you should only interact with these newly saved issues and not their corresponding drafts. You MUST exclude the draft issues with the following tags from any future tree creation: ${m.join(", ")}`},...a.currentReferences];e.some(nD)&&h.push({type:"text",name:"summarize-errors",text:"You MUST add this note at the end of your message in the user's language: 'Note: Copilot encountered an error adding at least one project to the issues. Navigate to the issues to review and make changes.'"}),await n.sendChatMessage({thread:(0,nL.W)(a),content:d.length>1?`Saved the issues to ${d.join(", ")}`:`Saved the issue to ${d[0]}`,references:h,topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},t[0]=i,t[1]=n,t[2]=s,t[3]=r,t[4]=a,t[5]=l,t[6]=o,t[7]=e):e=t[7],e}function nD(e){return e.errors&&e.errors.length>0}function nP(e){return`${e.draftType}:${e.tag}`}function nO(e){return`${e.repository.owner.login}/${e.repository.name}#${e.number}`}function nB(e){return void 0!==e}function nM(e){return e.assignees.some(nF)}function nF(e){return(0,nT.v)(e)}function nU(e){return!e.parentTag}function nV(e){let t=e.repository.owner.login,n=e.repository.name,a=e.number;return`issue:${t}/${n}/${a}`}function n$({issueNode:e,onComplete:t,onCancel:n}){let a=(0,x.useMemo)(()=>{let t=e;for(;t?.parent;)t=t.parent;return t},[e]),i=(0,x.useMemo)(()=>{let e=0;return ne(a,t=>{"new-issue"===t.item.type&&e++}),e},[a]),{mutate:s,isLoading:r,data:o,isComplete:l,isError:c,error:d}=function(e){let t,n,a,i=(0,p.c)(13),{issueNode:s}=e;i[0]!==s?(t={issueNode:s},i[0]=s,i[1]=t):t=i[1];let r=function(e){let t,n,a,i=(0,p.c)(9),{issueNode:s}=e,r=(0,t9.useRelayEnvironment)(),o=nd();return i[0]!==s.item.tag?(t=["copilot-issues-bulk-create",s.item.tag],i[0]=s.item.tag,i[1]=t):t=i[1],i[2]!==r||i[3]!==s||i[4]!==o?(n=async()=>{let e=new Map;ne(s,t=>e.set(t.item.tag,t.item));let t=[],n=new Map;for(let[,a]of e){if("existing-issue"===a.type){t.push({tag:a.tag,parent_tag:a.parentTag,repository_nwo:a.repository,number:a.number});continue}let e=a.body;if(e&&a.repository){let t=n.get(a.repository);if(!t){let[e,i]=a.repository.split("/");null!=e&&null!=i&&(t=await (0,t6.tZ)(r,e,i),n.set(a.repository,t))}e=await o(t,e)}t.push({title:a.name,tag:a.tag,repository_nwo:a.repository,body:e,parent_tag:a.parentTag,labels:a.labels,assignees:a.assignees,milestone:a.milestone,issue_type:a.issueType,template:a.template,projects:a.projects})}let a=await (0,t8.Sr)("/copilot_issues/bulk_create",{method:"POST",body:{data:{issues:t}}});if(429===a.status)throw Error((await a.json()).error||"Rate limit exceeded. Please try again later.");if(!a.ok)throw Error((await a.json()).error.message||"Failed to create issues.");return await a.json()},i[2]=r,i[3]=s,i[4]=o,i[5]=n):n=i[5],i[6]!==t||i[7]!==n?(a={mutationKey:t,mutationFn:n},i[6]=t,i[7]=n,i[8]=a):a=i[8],(0,t7.n)(a)}(t),o=function(e){let t,n,a,i=(0,p.c)(7),s=!!e;return i[0]!==e?(t=["copilot-issues-bulk-create-status",e],n=async t=>{let n=await (0,t8.Sr)(e);if(!n.ok){let e=await n.json();throw t.client.setQueryData(t.queryKey,e),Error(e?.job.error_message||"Failed to fetch job status")}return await n.json()},i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),i[3]!==s||i[4]!==t||i[5]!==n?(a={enabled:s,queryKey:t,queryFn:n,refetchInterval:nm},i[3]=s,i[4]=t,i[5]=n,i[6]=a):a=i[6],(0,tr.I)(a)}(r.data?.jobStatusUrl),l=r.error||o.error,c=r.isError||o.isError;i[2]!==r.isPending||i[3]!==o.data?.job.state||i[4]!==o.isLoading?(n=r.isPending||o.isLoading||["pending","queued","started"].includes(o.data?.job.state||""),i[2]=r.isPending,i[3]=o.data?.job.state,i[4]=o.isLoading,i[5]=n):n=i[5];let d=o.data?.job.state==="success";return i[6]!==r.mutate||i[7]!==o.data||i[8]!==l||i[9]!==c||i[10]!==n||i[11]!==d?(a={mutate:r.mutate,data:o.data,error:l,isError:c,isLoading:n,isComplete:d},i[6]=r.mutate,i[7]=o.data,i[8]=l,i[9]=c,i[10]=n,i[11]=d,i[12]=a):a=i[12],a}({issueNode:a}),u=nR(),{loading:h,result:f}=function(e){let t,n,a,i,s=(0,p.c)(8),[r,o]=(0,x.useState)(!1);s[0]===Symbol.for("react.memo_cache_sentinel")?(t={},s[0]=t):t=s[0];let[l,c]=(0,x.useState)(t),d=(0,t9.useRelayEnvironment)(),u=(0,x.useRef)(null);return s[1]!==d||s[2]!==e?(n=()=>{!async function(){o(!0),c(await nI(d,u,e)),o(!1)}()},a=[d,e],s[1]=d,s[2]=e,s[3]=n,s[4]=a):(n=s[3],a=s[4]),(0,x.useEffect)(n,a),s[5]!==r||s[6]!==l?(i={loading:r,result:l},s[5]=r,s[6]=l,s[7]=i):i=s[7],i}(a),g=(0,x.useMemo)(()=>f&&Object.values(f).some(e=>e.errorMessages.length>0),[f]);(0,x.useEffect)(()=>{if(!o||!l)return;let e=new Map;ne(a,t=>{e.set(t.item.tag,t.item)});let n=o.job.completed_issues.map(t=>{let n=e.get(t.tag),[a,i]=n.repository.split("/");return{draftType:n.type,tag:t.tag,parentTag:n.parentTag,blockedByTags:n.blockedByTags,template:"new-issue"===n.type?n.template:void 0,repository:{databaseId:t.repository_id,name:i,owner:{login:a}},number:t.number,title:n.name,url:t.href,assignees:"assignees"in n?n.assignees??[]:[],errors:t.errors||[]}});t(),u(n)},[a,o,l,t,u]);let y=(0,x.useCallback)(()=>{r||l||s()},[r,l,s]),_=(0,x.useCallback)(()=>{r||l||n()},[r,l,n]),v=(0,x.useMemo)(()=>{let e=new Set;return(ne(a,t=>e.add(t.item.type)),1===e.size&&"existing-issue"===a.item.type)?{title:"Update existing issues?",description:"Clicking Update will update the relationships between the issues shown below.",button:"Update issues"}:e.size>1&&"existing-issue"===a.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish all Copilot draft issues shown below. Existing sub-issues aren't displayed and remain unchanged.",button:1===i?"Create 1 issue":`Create ${i} issues`}:e.size>1&&"new-issue"===a.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish the Copilot draft issues shown below.",button:1===i?"Create 1 issue":`Create ${i} issues`}:{title:"Create all linked draft issues?",description:"These drafts are linked. Creating a sub-issue automatically publishes its parent and any nested drafts.",button:1===i?"Create 1 issue":`Create ${i} issues`}},[a,i]),{openItem:b,openPreviewPane:j}=(0,eY.xx)(),w=(0,x.useCallback)(e=>{r||l||(b(e.item.id,!0),j(),n())},[l,r,n,b,j]),N=(0,x.useMemo)(()=>f[nC]?f[nC]?.errorMessages[0]:"Fill out missing required fields to create all of these issues.",[f]);return(0,m.jsx)(tF.l,{title:v.title,onClose:_,renderFooter:()=>h?null:(0,m.jsxs)(tF.l.Footer,{className:t$.dialogFooter,children:[(0,m.jsx)("div",{className:t$.dialogFooterStatus,children:c&&(0,m.jsx)(tV.v,{variant:"critical",children:d?.message})}),(0,m.jsxs)("div",{className:t$.dialogFooterActions,children:[(0,m.jsx)(tn.Q,{variant:"default",onClick:_,inactive:r||l,children:"Cancel"}),(0,m.jsx)(tn.Q,{variant:"primary",onClick:y,loading:r||l,disabled:g||c,children:v.button})]})]}),children:h?(0,m.jsx)("div",{className:t$.loadingIndicator,role:"status","aria-label":"Validating issues",children:(0,m.jsx)(tU.A,{})}):g?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(q.l,{variant:"warning",hideTitle:!0,title:"Validation errors",description:N,className:"mb-3"}),(0,m.jsx)(nW,{issueNode:a,onNodeClick:w,statusSelector:e=>{let t=f[e.item.tag]?.errorMessages[0];if(t)return{trailingVisual:(0,m.jsx)(ef.AlertIcon,{className:"fgColor-attention","data-testid":`warning-icon-${e.item.tag}`}),description:(0,m.jsx)("span",{className:"fgColor-attention",children:t})}}})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:v.description}),(0,m.jsx)(nW,{issueNode:a,onNodeClick:w,statusSelector:e=>({trailingVisual:o?.job.completed_issues.some(t=>t.tag===e.item.tag)&&(0,m.jsx)(ef.CheckIcon,{className:"fgColor-success","data-testid":`success-icon-${e.item.tag}`})})})]})})}function nW({issueNode:e,onNodeClick:t,statusSelector:n}){let{versionedItems:a}=(0,eY.xx)(),i=(0,x.useMemo)(()=>{let t=0;return ne(e,e=>{e.parent&&t++}),t},[e]),s=e=>{let i=(0,tR.LU)(e.item.id,a),r=n?.(e);return(0,m.jsx)(t5.Item,{title:e.item.name,leadingVisual:(0,m.jsx)(tW,{...e.item}),trailingBadge:(0,m.jsxs)(m.Fragment,{children:[null!=i?(0,m.jsx)(tA.g,{version:i}):void 0,(0,m.jsx)(nH,{node:e})]}),trailingVisual:r?.trailingVisual,description:r?.description,onClick:()=>t(e),children:e.children.map(s)},e.item.tag)},r=(0,tR.LU)(e.item.id,a),o=n?.(e);return(0,m.jsxs)(t5,{subIssueHeaderText:"existing-issue"===e.item.type?"New sub-issues":void 0,subIssueCount:i,hasTrailingVisuals:!0,children:[(0,m.jsx)(t5.RootItem,{title:e.item.name,leadingVisual:(0,m.jsx)(tW,{...e.item}),trailingBadge:(0,m.jsxs)(m.Fragment,{children:[null!=r?(0,m.jsx)(tA.g,{version:r}):void 0,(0,m.jsx)(nH,{node:e})]}),trailingVisual:o?.trailingVisual,description:o?.description,onClick:()=>t(e)}),e.children.map(s)]})}function nH(e){let t,n=(0,p.c)(2),{node:a}=e;if(a.item.repository&&a.item.repository!==a.parent?.item.repository)return n[0]!==a.item.repository?(t=(0,m.jsx)("span",{className:"fgColor-muted no-wrap",children:a.item.repository}),n[0]=a.item.repository,n[1]=t):t=n[1],t}try{n$.displayName||(n$.displayName="BulkCreateDialog")}catch{}try{nW.displayName||(nW.displayName="IssueTree")}catch{}try{nH.displayName||(nH.displayName="IssueLocation")}catch{}function nq(e){let t,n,a,i,s,r=(0,p.c)(11),{issueNode:o,disabled:l,onSuccess:c}=e,d=void 0!==l&&l,[u,h]=(0,x.useState)(!1),f=o;for(;f?.parent;)f=f.parent;let g=f,y=new Set;ne(g,e=>y.add(e.item.type));e:{if(1===y.size&&y.has("existing-issue")){t="Review and update";break e}t="Review and create"}let _=t;return y.size>1&&"existing-issue"===o.item.type?null:(r[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e.preventDefault(),h(!0)},r[0]=n):n=r[0],r[1]!==_||r[2]!==d?(a=(0,m.jsx)(tM.cQ,{commandId:"github:submit-form",variant:"primary",disabled:d,"data-testid":"create-bulk-issue-dialog-button",showKeybindingHint:!0,onClick:n,children:_}),r[1]=_,r[2]=d,r[3]=a):a=r[3],r[4]!==c||r[5]!==g||r[6]!==u?(i=u&&(0,m.jsx)(n$,{issueNode:g,onComplete:()=>{h(!1),c()},onCancel:()=>{h(!1)}}),r[4]=c,r[5]=g,r[6]=u,r[7]=i):i=r[7],r[8]!==a||r[9]!==i?(s=(0,m.jsxs)(m.Fragment,{children:[a,i]}),r[8]=a,r[9]=i,r[10]=s):s=r[10],s)}try{nq.displayName||(nq.displayName="BulkCreateButton")}catch{}function nz(e){let t,n,a,i=(0,p.c)(16),{issueTemplate:s,issueNode:r,issueFormRef:o,noRepoAccess:l,onClose:c}=e,d=void 0!==l&&l,[u,h]=x.useState(!1),f=x.useRef(null),{repository:g}=(0,tB.u)(),y=g&&!s&&!g.isBlankIssuesEnabled,{clearSessionData:_}=(0,tB.u)();i[0]!==_||i[1]!==o?(t=()=>{_(),o.current?.clearSessionStorage()},i[0]=_,i[1]=o,i[2]=t):t=i[2];let v=t;i[3]!==v||i[4]!==c?(n=()=>{v(),c?.()},i[3]=v,i[4]=c,i[5]=n):n=i[5];let b=n;if(r?.parent||r?.children.length){let e;return i[6]!==b||i[7]!==r||i[8]!==d?(e=(0,m.jsx)(nq,{issueNode:r,disabled:d,onSuccess:b}),i[6]=b,i[7]=r,i[8]=d,i[9]=e):e=i[9],e}if(!g||!g.hasIssuesEnabled)return null;if(y){let e,t,n;return i[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tM.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-issue-dialog-button",ref:f,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),h(!0)},children:"Create"}),i[10]=e):e=i[10],i[11]!==u?(t=u&&(0,m.jsx)(tF.l,{title:"Select a template",onClose:()=>h(!1),footerButtons:[{buttonType:"primary",content:"OK",onClick:()=>h(!1)}],returnFocusRef:f,children:"This repository requires all issues to have a template. To create this issue, first select the appropriate template from the template dropdown."}),i[11]=u,i[12]=t):t=i[12],i[13]!==t?(n=(0,m.jsxs)(m.Fragment,{children:[e,t]}),i[13]=t,i[14]=n):n=i[14],n}return i[15]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(tO.l,{hideCreateMore:!0,className:"width-auto"}),i[15]=a):a=i[15],a}try{nz.displayName||(nz.displayName="CreateIssueButton")}catch{}var nG=n(56924),nK=n(73189),nQ=n(25641),nY=n(88752);function nJ(e){let t,n=(0,p.c)(8),{messageId:a,messageIndex:i,messageTimestamp:s}=e,{openPreviewPane:r,openItem:o,updateItem:l}=(0,eY.xx)(),c=(0,tN.qw)();return n[0]!==a||n[1]!==i||n[2]!==s||n[3]!==o||n[4]!==r||n[5]!==c||n[6]!==l?(t=(e,t)=>{let n=null;switch(e.type){case"file":n=(0,tR.by)(e,a,s);break;case"file-diff":n=(0,tR.g)(e,a,s);break;case"thread-scoped-file":n=(0,tR.oR)({ref:e,messageIndex:i,messageId:a,timestamp:s});break;case"draft-issue":case"draft-update-issue":n=(0,tR.oR)({ref:e,messageIndex:i,messageId:a});break;case"issue":n=(0,tR.SI)(e,a);break;default:for(let t of c)if(t.previewComponents?.[e.type]){n=(0,tR.Bx)(e,a);break}}n&&(t?.preventDefault(),l(n),o(n.id),r())},n[0]=a,n[1]=i,n[2]=s,n[3]=o,n[4]=r,n[5]=c,n[6]=l,n[7]=t):t=n[7],t}function nX(e){let t,n,a,i,s,r=(0,p.c)(20),{className:o,messageId:l,messageIndex:c,messageTimestamp:d,references:u,size:h}=e;r[0]!==l||r[1]!==c||r[2]!==d?(t={messageId:l,messageIndex:c,messageTimestamp:d},r[0]=l,r[1]=c,r[2]=d,r[3]=t):t=r[3];let f=nJ(t),{updateItem:g,versionedItems:y}=(0,eY.xx)();return r[4]!==l||r[5]!==c||r[6]!==d||r[7]!==u||r[8]!==g?(n=()=>{for(let e of u){let t=(0,tR.oR)({ref:e,messageIndex:void 0!==c?c:1,messageId:l,timestamp:d});null!=t&&g(t)}},a=[l,c,d,u,g],r[4]=l,r[5]=c,r[6]=d,r[7]=u,r[8]=g,r[9]=n,r[10]=a):(n=r[9],a=r[10]),(0,x.useEffect)(n,a),r[11]!==c||r[12]!==y?(i=e=>(0,tR.wt)(e,c,y),r[11]=c,r[12]=y,r[13]=i):i=r[13],r[14]!==o||r[15]!==f||r[16]!==u||r[17]!==h||r[18]!==i?(s=(0,m.jsx)(nY.t,{references:u,onClickReference:f,size:h,className:o,getReferenceVersion:i}),r[14]=o,r[15]=f,r[16]=u,r[17]=h,r[18]=i,r[19]=s):s=r[19],s}try{nX.displayName||(nX.displayName="ChatMessageReferences")}catch{}var nZ=n(4817);let n0=(0,x.createContext)(null),n1=()=>{let e=(0,x.useContext)(n0);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{n0.displayName||(n0.displayName="ContentPreviewBlockContext")}catch{}var n2=n(85094),n3=n(47970),n4=n(46665),n5=n(39876),n6=n(23967),n7=n(22072);function n8(e){let t,n,a,i=(0,p.c)(4),{className:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,m.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),i[0]=t):t=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("defs",{children:(0,m.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,m.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})}),i[1]=n):n=i[1],i[2]!==s?(a=(0,m.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:s,children:[t,n]}),i[2]=s,i[3]=a):a=i[3],a}try{n8.displayName||(n8.displayName="ExpandIcon")}catch{}let n9={container:"FileBlock-module__container--Dzsqa",header:"FileBlock-module__header--AdNd3",language:"FileBlock-module__language--hjnkp",name:"FileBlock-module__name--PRLLi",previewCode:"FileBlock-module__previewCode--xp45Y",isClipped:"FileBlock-module__isClipped--g6E0E",expandIconContainer:"FileBlock-module__expandIconContainer--re33w",insightsButtonContainer:"FileBlock-module__insightsButtonContainer--QtzBn"};function ae(e){return e.replace(/#L\d+(-L\d+)?$/,"")}function at(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,v,b,j,w,N,S=(0,p.c)(89),{language:C,name:I,url:k,code:T,line:E,children:L,isClipped:A,isStreaming:R,index:D,startOffset:P,endOffset:O}=e,{message:B}=(0,n4.V)(),{updateItem:M,openItem:F,openPreviewPane:U,versionedItems:V,getOpenItems:$}=(0,eY.xx)(),{messageIndex:W,messageId:H,messageTimestamp:q,autoOpenPreviewPane:z,markdown:G,hasAutoOpenedPreviewPaneRef:K,setHasAutoOpenedPreviewPane:Q}=n1(),{name:Y}=(0,n6.vL)(C),J=`file:${I}`,X=`${J}#${W}.${E}`,Z=!!T,ee=V.get(J)??[],et=ee.indexOf(X),en=ee.length>1&&-1!==et?et+1:null;S[0]!==B.references||S[1]!==k?(t=function(e,t){if(!tu.W.fileBlockRefMatching||!e||!t)return;let n=ae(e);return t.find(e=>ae(e.url)===n)}(k,B.references?.filter(an)),S[0]=B.references,S[1]=k,S[2]=t):t=S[2];let ea=t;S[3]!==ea||S[4]!==$||S[5]!==X||S[6]!==D||S[7]!==F||S[8]!==U?(n=(e,t)=>{(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive",...tu.W.fileBlockRefMatching?{isRepoFile:!!ea}:{}}),F(X,void 0===t||t||$().length<1||0===D),e&&U()},S[3]=ea,S[4]=$,S[5]=X,S[6]=D,S[7]=F,S[8]=U,S[9]=n):n=S[9];let ei=n;S[10]!==T||S[11]!==ea||S[12]!==X||S[13]!==R||S[14]!==C||S[15]!==G||S[16]!==H||S[17]!==q||S[18]!==I||S[19]!==Z||S[20]!==M?(a=()=>{let e=T?.trimEnd();Z&&H!==nE.Wp&&-1!==G.indexOf(e)&&(tu.W.fileBlockRefMatching?M({messageId:H,id:X,language:C,name:I,value:T,type:"file",timestamp:new Date(q),isStreaming:R,isUserEdited:!1,reference:(()=>{if(!ea)return;let e=function(e){if(!tu.W.fileBlockRefMatching||!e)return null;let t=/^https?:\/\/(?:github|.*\.ghe)\.com\/([^/]+)\/([^/]+)/.exec(e);return t&&t[1]&&t[2]?{owner:t[1],name:t[2]}:null}(ea.url);return{type:"file",url:ae(ea.url),path:ea.path,repoID:ea.repoID,repoOwner:e?.owner??ea.repoOwner??"",repoName:e?.name??ea.repoName??"",ref:ea.ref,commitOID:ea.commitOID}})()}):M({messageId:H,id:X,language:C,name:I,value:T,type:"file",timestamp:new Date(q),isStreaming:R,isUserEdited:!1}))},S[10]=T,S[11]=ea,S[12]=X,S[13]=R,S[14]=C,S[15]=G,S[16]=H,S[17]=q,S[18]=I,S[19]=Z,S[20]=M,S[21]=a):a=S[21],S[22]!==T||S[23]!==ea||S[24]!==X||S[25]!==D||S[26]!==R||S[27]!==C||S[28]!==G||S[29]!==H||S[30]!==q||S[31]!==I||S[32]!==Z||S[33]!==M||S[34]!==k?(i=[T,C,H,I,k,M,X,Z,q,R,G,ea,D],S[22]=T,S[23]=ea,S[24]=X,S[25]=D,S[26]=R,S[27]=C,S[28]=G,S[29]=H,S[30]=q,S[31]=I,S[32]=Z,S[33]=M,S[34]=k,S[35]=i):i=S[35],(0,x.useEffect)(a,i),S[36]!==z||S[37]!==K||S[38]!==R||S[39]!==H||S[40]!==ei||S[41]!==Z||S[42]!==Q?(s=()=>{R&&Z&&H!==nE.Wp&&(ei(z&&!K.current,!1),Q(!0))},r=[R,Z,ei,z,H,K,Q],S[36]=z,S[37]=K,S[38]=R,S[39]=H,S[40]=ei,S[41]=Z,S[42]=Q,S[43]=s,S[44]=r):(s=S[43],r=S[44]),(0,x.useEffect)(s,r);let[es,er]=(0,x.useState)(!1),{publicCodeReferences:eo,codeVulnerabilities:el}=(0,n5.R)(B.copilotAnnotations,P,O);S[45]!==ei?(o=()=>ei(!0),S[45]=ei,S[46]=o):o=S[46];let ec=`View file: ${I}`,ed=`chat-message-view-file-${I}`,eu=R?(0,m.jsx)(tU.A,{size:"small",className:nZ.sX}):n6.Yr.has(Y)?(0,m.jsx)(ef.MarkdownIcon,{className:nZ.sX}):(0,m.jsx)(ef.CodeIcon,{className:nZ.sX});S[47]!==I?(l=(0,m.jsx)("span",{className:n9.name,children:I}),S[47]=I,S[48]=l):l=S[48],S[49]!==en?(c=null!==en&&(0,m.jsx)(tA.g,{version:en}),S[49]=en,S[50]=c):c=S[50],S[51]!==n9.language||S[52]!==eu||S[53]!==l||S[54]!==c?(d=(0,m.jsxs)("div",{className:n9.language,children:[eu,l,c]}),S[51]=n9.language,S[52]=eu,S[53]=l,S[54]=c,S[55]=d):d=S[55],S[56]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.jsx)("div",{className:n9.expandIconContainer,children:(0,m.jsx)(n8,{})}),S[56]=u):u=S[56],S[57]!==n9.header||S[58]!==d?(h=(0,m.jsxs)("div",{className:n9.header,children:[d,u]}),S[57]=n9.header,S[58]=d,S[59]=h):h=S[59];let em=A&&n9.isClipped;return S[60]!==em?(f=(0,_.$)(n9.previewCode,em),S[60]=em,S[61]=f):f=S[61],S[62]!==L?(g=(0,m.jsx)("code",{children:L}),S[62]=L,S[63]=g):g=S[63],S[64]!==f||S[65]!==g?(y=(0,m.jsx)("pre",{className:f,"aria-hidden":!0,children:g}),S[64]=f,S[65]=g,S[66]=y):y=S[66],S[67]!==ec||S[68]!==ed||S[69]!==h||S[70]!==y||S[71]!==n9.container||S[72]!==o?(v=(0,m.jsxs)("button",{className:n9.container,onClick:o,"aria-label":ec,"data-testid":ed,children:[h,y]}),S[67]=ec,S[68]=ed,S[69]=h,S[70]=y,S[71]=n9.container,S[72]=o,S[73]=v):v=S[73],S[74]!==el||S[75]!==eo.length||S[76]!==er?(b=(eo.length>0||el.length>0)&&(0,m.jsx)("div",{className:n9.insightsButtonContainer,children:(0,m.jsx)(e1.K,{variant:"invisible",size:"small",icon:ef.ShieldIcon,"aria-label":"Code insights",onClick:()=>er(!0)})}),S[74]=el,S[75]=eo.length,S[76]=er,S[77]=b):b=S[77],S[78]!==v||S[79]!==b?(j=(0,m.jsxs)("div",{className:"position-relative",children:[v,b]}),S[78]=v,S[79]=b,S[80]=j):j=S[80],S[81]!==el||S[82]!==es||S[83]!==eo||S[84]!==er?(w=es&&(0,m.jsx)(n7.t,{publicCodeReferences:eo,codeVulnerabilities:el,onClose:()=>er(!1)}),S[81]=el,S[82]=es,S[83]=eo,S[84]=er,S[85]=w):w=S[85],S[86]!==j||S[87]!==w?(N=(0,m.jsxs)(m.Fragment,{children:[j,w]}),S[86]=j,S[87]=w,S[88]=N):N=S[88],N}function an(e){return"file"===e.type||"file-v2"===e.type||"snippet"===e.type}try{at.displayName||(at.displayName="FileBlock")}catch{}let aa="data-fileblock-props",ai=(0,n2.F)(aa),as=/^name=(?<name>[^\s]+)/,ar=/^name=(?<name>[^\s]+)\n?/,ao=/url=(?<url>[^\s]+)/,al={code:(e,t)=>{let n=(0,n2.k)(e,aa);return n?(0,m.jsx)(at,{...n,children:e.children}):t}},ac=/^type=(?<type>[^\s]+)\n?/,ad=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e;let YamlBlockExtension=class YamlBlockExtension{get dataProperty(){return(0,n2.F)(this.dataAttribute)}constructor(){(0,f._)(this,"transformMarkdown",e=>{(0,n3.YR)(e,"code",e=>{let t=e.lang;if(!t)return;let n=ad(ac.exec(e.meta??"")?.groups?.type??"");if(!n)return;let a={lang:t,type:n,value:e.value,isStreaming:e.isStreaming};if(!this.isSupported(a))return;let i=this.extractProps(a);e.data={hName:"div",hProperties:{[this.dataProperty]:JSON.stringify(i)},hChildren:[]}})}),(0,f._)(this,"transformHtml",e=>{(0,n3.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&this.dataProperty in a.properties&&n.children.splice(t,1,a)})}),(0,f._)(this,"reactComponents",{div:(e,t)=>{let n=(0,n2.k)(e,this.dataAttribute);return n?this.createComponent(n):t}})}};function au(e){let{messages:t}=(0,U.Pk)(),n=(0,nc.B)(t);return function(e,t){if(!e)return"";let n=e.match(/(!\[.*?\]\(image\d+\))/g);if(null==n)return e;for(let a of n){let n=/\(image(\d+)\)/,i=parseInt(a.match(n)[1],10),s=t.length-i,r=t[s]?.chatAttachmentUrl||t[s]?.url;if(r){let t=a.replace(n,`(${r})`);e=e.replace(a,t)}}return e}(e,(0,x.useMemo)(()=>n.flatMap(e=>e.mediaContent||[]),[n]))}var am=n(46996),ap=n(99852);let ah=e=>e.replace(/\\n/g,`
`).replace(/^\s+|\s+$/g,""),af=(e,t)=>{let n=(e||[]).map(e=>ah(e)),a=(t||[]).map(e=>ah(e));return n.length===a.length&&(0,am.A)((0,ap.A)(n),(0,ap.A)(a))},ag=e=>null==e?"":ah(e),ay=e=>{if(Array.isArray(e)){let t=e.map(e=>"string"==typeof e?ah(e):String(e));return`[${t.join(",")}]`}return"string"==typeof e||null==e?ag(e):JSON.stringify(e)},a_=(e,t)=>{let n=[],a={};return ag(e.title)!==ag(t.title)&&(n.push("title"),a.title={expected:ay(t.title),actual:ay(e.title)}),ag(e.body)!==ag(t.description)&&(n.push("body"),a.body={expected:ay(t.description),actual:ay(e.body)}),ag(e.repository)!==ag(t.repository)&&(n.push("repository"),a.repository={expected:ay(t.repository),actual:ay(e.repository)}),ag(e.template)!==ag(t.template)&&(n.push("template"),a.template={expected:ay(t.template),actual:ay(e.template)}),ag(e.issueType)!==ag(t.issueType)&&(n.push("issueType"),a.issueType={expected:ay(t.issueType),actual:ay(e.issueType)}),ag(e.milestone)!==ag(t.milestone)&&(n.push("milestone"),a.milestone={expected:ay(t.milestone),actual:ay(e.milestone)}),af(e.assignees,t.assignees)||(n.push("assignees"),a.assignees={expected:ay(t.assignees),actual:ay(e.assignees)}),af(e.labels,t.labels)||(n.push("labels"),a.labels={expected:ay(t.labels),actual:ay(e.labels)}),af(e.projects,t.projects)||(n.push("projects"),a.projects={expected:ay(t.projects),actual:ay(e.projects)}),(0,am.A)(e.templateFormValues,t.templateFormValuesById)||(n.push("templateFormValues"),a.templateFormValues={expected:ay(t.templateFormValuesById),actual:ay(e.templateFormValues)}),{isEqual:0===n.length,mismatchedFields:n,fieldComparisons:a}};function ax(e){let t,n,a=(0,p.c)(8),{issues:i,isStreaming:s,isIssueTree:r}=e,o=void 0!==r&&r,{messages:l,threadSelectedAt:c}=(0,U.Pk)(),{messageId:d}=n1();a[0]!==o||a[1]!==s||a[2]!==i||a[3]!==d||a[4]!==l||a[5]!==c?(t=()=>{let e=(0,nc.B)(l),t=e[e.length-1],n=e.find(e=>e.id===d);if(!s&&n&&"assistant"===n.role&&n.id===t?.id&&new Date(n.createdAt)>=c&&n.references&&i.length>0){let e=n.references.filter(av);for(let t of i)if(t.tag){let n=e.find(e=>e.tag===t.tag);if(n){let e=a_(t,n);if(!e.isEqual)return void(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_DRAFT_ISSUE_REFERENCE_MISMATCH",mode:"immersive",messageId:d,issueTree:o,mismatchedFields:e.mismatchedFields.join(","),fieldComparisons:JSON.stringify(e.fieldComparisons),yamlMarshaled:(0,G.G7)("copilot_api_agentic_issue_marshal_yaml")})}}}},n=[s,i,l,c,o,d],a[0]=o,a[1]=s,a[2]=i,a[3]=d,a[4]=l,a[5]=c,a[6]=t,a[7]=n):(t=a[6],n=a[7]),(0,x.useEffect)(t,n)}function av(e){return"draft-issue"===e.type||"draft-update-issue"===e.type}function ab(e,t,n){let a=(0,x.useRef)(n);return(0,x.useMemo)(()=>{let n=t(e);return null!=n&&(a.current=n),a.current},[e,t])}let aj={fromUnknown:e=>{if("object"!=typeof e||null==e)return null;let t={};return"title"in e&&"string"==typeof e.title&&(t.title=e.title),"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"template-form-values"in e&&"object"==typeof e["template-form-values"]&&null!=e["template-form-values"]&&(t.templateFormValues=Object.fromEntries(Object.entries(e["template-form-values"]).map(([e,t])=>[e,"string"==typeof t?t.trim():t]))),"description"in e&&"string"==typeof e.description&&(t.body=e.description),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"template"in e&&"string"==typeof e.template&&(t.template=e.template),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e)),"milestone"in e&&"string"==typeof e.milestone&&(t.milestone=e.milestone),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"issueNumber"in e&&"number"==typeof e.issueNumber&&(t.issueNumber=e.issueNumber),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"bodyVersion"in e&&"string"==typeof e.bodyVersion&&(t.bodyVersion=e.bodyVersion),"issueType"in e&&"string"==typeof e.issueType?t.issueType=e.issueType:"type"in e&&"string"==typeof e.type&&"draft-issue"!==e.type&&"draft-update-issue"!==e.type&&(t.issueType=e.type),t}},aw=e=>{try{let t=(0,nA.Hh)(e);return aj.fromUnknown(t)}catch{return null}};function aN(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,_,v,b=(0,p.c)(61),{yaml:j,isStreaming:w}=e,[N,S]=(0,x.useState)(w);b[0]!==w?(t=()=>{w&&S(!0)},n=[w],b[0]=w,b[1]=t,b[2]=n):(t=b[1],n=b[2]),(0,x.useEffect)(t,n);let{updateItem:C,openItem:I,openPreviewPane:k,closeItem:T,versionedItems:E,items:L}=(0,eY.xx)(),{messageId:A,messageIndex:R,autoOpenPreviewPane:D,hasAutoOpenedPreviewPaneRef:P,setHasAutoOpenedPreviewPane:O}=n1();j=au(j),b[3]===Symbol.for("react.memo_cache_sentinel")?(a={},b[3]=a):a=b[3];let B=ab(j,aw,a);b[4]!==B?(i=[B],b[4]=B,b[5]=i):i=b[5],b[6]!==w||b[7]!==i?(s={issues:i,isStreaming:w,isIssueTree:!1},b[6]=w,b[7]=i,b[8]=s):s=b[8],ax(s),b[9]===Symbol.for("react.memo_cache_sentinel")?(r=[],b[9]=r):r=b[9],(0,x.useEffect)(aS,r);let M=tu.W.draftUpdateIssue?null==B.issueNumber&&w?void 0:B.issueNumber?"update-issue":"new-issue":"new-issue",F=null!=B.tag&&null!=M?`${M}:${B.tag}#${R}`:void 0;b[10]!==F||b[11]!==E?(o=null!=F?(0,tR.LU)(F,E):null,b[10]=F,b[11]=E,b[12]=o):o=b[12];let U=o;b[13]!==F||b[14]!==L?(l=null!=F?L.get(F):void 0,b[13]=F,b[14]=L,b[15]=l):l=b[15];let V=l,$=B.repository||null==M||V?.type!==M?B.repository:V.repository||"";b[16]!==D||b[17]!==P||b[18]!==F||b[19]!==I||b[20]!==k||b[21]!==O?(c=e=>{let{selectItem:t}=e;null!=F&&(I(F,t),(t||D&&!P.current)&&(k(),O(!0)),(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},b[16]=D,b[17]=P,b[18]=F,b[19]=I,b[20]=k,b[21]=O,b[22]=c):c=b[22];let W=c;b[23]!==T||b[24]!==M||b[25]!==F||b[26]!==w||b[27]!==B.assignees||b[28]!==B.body||b[29]!==B.bodyVersion||b[30]!==B.issueNumber||b[31]!==B.issueType||b[32]!==B.labels||b[33]!==B.milestone||b[34]!==B.parentTag||b[35]!==B.projects||b[36]!==B.tag||b[37]!==B.template||b[38]!==B.templateFormValues||b[39]!==B.title||b[40]!==A||b[41]!==$||b[42]!==C?(d=()=>{null!=F&&("update-issue"===M&&$&&B.issueNumber&&T(`issue:${$}/${B.issueNumber}`),C({messageId:A,name:B.title??"",body:B.body,bodyVersion:B.bodyVersion,repository:$,id:F,type:M,tag:B.tag??"",parentTag:B.parentTag,isStreaming:w,template:B.template,issueType:B.issueType,milestone:B.milestone,assignees:B.assignees?.sort(),labels:B.labels?.sort(),projects:B.projects?.sort(),isUserEdited:!1,defaultValuesById:B.templateFormValues??{},issueNumber:B.issueNumber}))},u=[T,M,F,w,B.assignees,B.body,B.bodyVersion,B.issueNumber,B.issueType,B.labels,B.milestone,B.parentTag,B.projects,B.tag,B.template,B.templateFormValues,B.title,A,$,C],b[23]=T,b[24]=M,b[25]=F,b[26]=w,b[27]=B.assignees,b[28]=B.body,b[29]=B.bodyVersion,b[30]=B.issueNumber,b[31]=B.issueType,b[32]=B.labels,b[33]=B.milestone,b[34]=B.parentTag,b[35]=B.projects,b[36]=B.tag,b[37]=B.template,b[38]=B.templateFormValues,b[39]=B.title,b[40]=A,b[41]=$,b[42]=C,b[43]=d,b[44]=u):(d=b[43],u=b[44]),(0,x.useEffect)(d,u),b[45]!==N||b[46]!==F||b[47]!==W?(h=()=>{null!=F&&N&&W({selectItem:!0})},f=[F,W,N],b[45]=N,b[46]=F,b[47]=W,b[48]=h,b[49]=f):(h=b[48],f=b[49]),(0,x.useEffect)(h,f);let H=B.title??"";return b[50]!==w?(g=w?(0,m.jsx)(tU.A,{size:"small",className:nZ.sX}):(0,m.jsx)(tW,{type:"new-issue"}),b[50]=w,b[51]=g):g=b[51],b[52]!==U?(y=null!=U&&(0,m.jsx)(tA.g,{"data-testid":"version-label",version:U}),b[52]=U,b[53]=y):y=b[53],b[54]!==W?(_=()=>W({selectItem:!0}),b[54]=W,b[55]=_):_=b[55],b[56]!==H||b[57]!==g||b[58]!==y||b[59]!==_?(v=(0,m.jsx)(t5,{subIssueCount:0,children:(0,m.jsx)(t5.RootItem,{title:H,leadingVisual:g,trailingBadge:y,onClick:_})}),b[56]=H,b[57]=g,b[58]=y,b[59]=_,b[60]=v):v=b[60],v}function aS(){return(0,tm.BI)("dotcom_chat.activate",{target:"ISSUE_DRAFT_BLOCK_RENDERED",mode:"immersive"})}try{aN.displayName||(aN.displayName="DraftIssueBlock")}catch{}let aC=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,m.jsx)(aN,{...e})}},aI={container:"DraftIssueTreeBlock-module__container--framP"},ak={fromUnknown:e=>{if("object"!=typeof e||null===e)return null;let t={};return"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"url"in e&&"string"==typeof e.url&&(t.url=e.url),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),t}};function aT(e){try{let t=(0,nA.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(ak.fromUnknown).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}function aE({data:e}){let t=ab(e,aT,[]),{messageId:n}=n1(),{updateItem:a,openItem:i,openPreviewPane:s}=(0,eY.xx)(),r=(0,x.useMemo)(()=>Array.from(nt(t,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags).values()).filter(e=>!e.parent),[t]);function o(e){if(!e.url)return;let[t,r]=e.repository?.split("/")??[];if(!t||!r||!e.number)return;let o=`issue:${t}/${r}/${e.number}`;a({messageId:n,name:e.title??"",number:e.number,owner:t,repo:r,id:o,href:e.url,type:"issue"}),i(o),s()}let l=e=>{if(tu.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.title??"",href:e.item.url??"#",onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),o(e.item))}}))};function c(e){return(0,m.jsx)(t5.Item,{title:e.item.title??"",leadingVisual:(0,m.jsx)(aL,{item:e.item}),trailingBadge:(0,m.jsx)(aA,{node:e}),href:e.item.url??"#",onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),o(e.item)},blockedBy:l(e),children:e.children.map(c)},e.item.tag)}return(0,m.jsx)("div",{className:aI.container,children:r.map(e=>{let t=-1;return ne(e,()=>t++),(0,m.jsxs)(t5,{subIssueCount:t,children:[(0,m.jsx)(t5.RootItem,{leadingVisual:(0,m.jsx)(aL,{item:e.item}),title:e.item.title??"",trailingBadge:(0,m.jsx)(aA,{node:e}),href:e.item.url??"#",onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),o(e.item)},blockedBy:l(e)}),e.children.map(c)]},e.item.tag)})})}function aL(e){let t=(0,p.c)(2),{item:n}=e;if("open"===n.state){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueOpenedIcon,{className:"fgColor-open"}),t[0]=e):e=t[0],e}if("closed"===n.state){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueClosedIcon,{className:"fgColor-done"}),t[1]=e):e=t[1],e}}function aA(e){let t,n=(0,p.c)(5),{node:a}=e;if(!a.item.repository||!a.item.number)return null;if(a.item.repository===a.parent?.item.repository){let e;return n[0]!==a.item.number?(e=(0,m.jsxs)("span",{className:"fgColor-muted no-wrap",children:["#",a.item.number]}),n[0]=a.item.number,n[1]=e):e=n[1],e}return n[2]!==a.item.number||n[3]!==a.item.repository?(t=(0,m.jsxs)("span",{className:"fgColor-muted no-wrap",children:[a.item.repository,"#",a.item.number]}),n[2]=a.item.number,n[3]=a.item.repository,n[4]=t):t=n[4],t}try{aE.displayName||(aE.displayName="IssueTreeBlock")}catch{}try{aL.displayName||(aL.displayName="LeadingVisual")}catch{}try{aA.displayName||(aA.displayName="IssueLocation")}catch{}function aR(e){return"state"in e?"draft"===e.state:"assignees"in e||"labels"in e||"issueType"in e||"projects"in e||"milestone"in e||"template"in e||"templateFormValues"in e||"body"in e}function aD(e){return"state"in e&&("open"===e.state||"closed"===e.state)}function aP(e){try{let t=(0,nA.gh)(e);if(Array.isArray(t))return t.filter(e=>"object"==typeof e&&null!=e).map(e=>{switch("state"in e?e.state:void 0){case void 0:case"draft":return aj.fromUnknown(e);case"open":case"closed":return ak.fromUnknown(e)}}).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}function aO({data:e,isStreaming:t}){let n=ab(e=au(e),aP,[]),{items:a,updateItem:i,openItem:s,openPreviewPane:r,closeItem:o,versionedItems:l}=(0,eY.xx)(),{messageId:c,messageIndex:d,autoOpenPreviewPane:u,hasAutoOpenedPreviewPaneRef:h,setHasAutoOpenedPreviewPane:f}=n1(),g=(0,x.useCallback)(e=>aR(e)&&e.tag?`new-issue:${e.tag}#${d}`:aD(e)&&e.repository&&e.number?`existing-issue:${e.repository}/${e.number}`:void 0,[d]);ax({issues:n,isStreaming:t,isIssueTree:!0}),(0,x.useEffect)(()=>{for(let e of n)e.tag&&g(e)&&(aR(e)&&i({messageId:c,type:"new-issue",id:`new-issue:${e.tag}#${d}`,tag:e.tag,parentTag:e.parentTag,name:e.title??"",body:e.body,repository:e.repository,template:e.template,issueType:e.issueType,milestone:e.milestone,assignees:e.assignees?.sort(),labels:e.labels?.sort(),projects:e.projects?.sort(),defaultValuesById:e.templateFormValues??{},isUserEdited:!1,isStreaming:t,blockedByTags:e.blockedByTags??[]}),aD(e)&&e.repository&&e.number&&e.url&&(o(`issue:${e.repository}/${e.number}`),i({messageId:c,type:"existing-issue",id:`existing-issue:${e.repository}/${e.number}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,name:e.title??"",state:e.state??"open",href:e.url,blockedByTags:e.blockedByTags??[]})))},[g,t,n,c,d,i,o]);let y=(0,x.useCallback)((e,{selectItem:t})=>{let n=g(e);n&&(s(n,t),(t||u&&!h.current)&&(r(),f(!0)),(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[g,s,u,h,r,f]),_=(0,x.useCallback)(e=>{let t=[...a.entries()].find(([t,n])=>(t.startsWith("new-issue:")||t.startsWith("existing-issue:"))&&("new-issue"===n.type||"existing-issue"===n.type)&&n.tag===e);if(!t)return;let[n]=t,i=(0,tR.oy)(n),s=l.get(i),r=s?.at(-1);if(!r)return;let o=a.get(r);if(o)switch(o?.type){case"new-issue":return aj.fromUnknown(o);case"existing-issue":return ak.fromUnknown(o);default:return}},[a,l]),v=(0,x.useMemo)(()=>{let e=new Set(n.map(e=>e.tag)),t=Array.from(new Set([...new Set(n.filter(e=>null!=e.parentTag).map(e=>e.parentTag)),...new Set(n.flatMap(e=>null!=e.blockedByTags?e.blockedByTags:[]).filter(e=>null!=e))])).filter(t=>null!=t&&!e.has(t)).map(e=>_(e)).filter(e=>null!=e);return Array.from(nt([...n,...t],e=>e.tag,e=>e.parentTag,e=>e.blockedByTags).values()).filter(e=>!e.parent)},[n,_]),b=function(e){let t,n,a=(0,p.c)(4),[i,s]=(0,x.useState)(!1),r=(0,x.useRef)(e);return a[0]!==i||a[1]!==e?(t=()=>{e&&(r.current=!0),e||!r.current||i||s(!0)},n=[e,i],a[0]=i,a[1]=e,a[2]=t,a[3]=n):(t=a[2],n=a[3]),(0,x.useEffect)(t,n),i}(t);(0,x.useEffect)(()=>{if(!b)return;let e=!0;for(let t of v.values()){if(aR(t.item)){y(t.item,{selectItem:e}),e=!1;continue}for(let n of t.children)aR(n.item)&&(y(n.item,{selectItem:e}),e=!1)}},[b,v,y]);let j=e=>{if(tu.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.title??"",onClick:()=>{y(e.item,{selectItem:!0})}}))},w=e=>{let n=g(e.item),a=n?(0,tR.LU)(n,l):null;return(0,m.jsx)(t5.Item,{title:e.item.title??"",leadingVisual:(0,m.jsx)(aB,{isStreaming:t,item:e.item}),trailingBadge:null!=a?(0,m.jsx)(tA.g,{version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),y(e.item,{selectItem:!0}))},href:aD(e.item)?e.item.url:void 0,blockedBy:j(e),children:e.children.map(w)},e.item.tag)};return(0,m.jsx)("div",{className:aI.container,children:v.map(e=>{let n=g(e.item),a=n?(0,tR.LU)(n,l):null,i=-1;return ne(e,()=>i++),(0,m.jsxs)(t5,{subIssueHeaderText:aD(e.item)?"New sub-issues":void 0,subIssueCount:i,children:[(0,m.jsx)(t5.RootItem,{title:e.item.title??"",leadingVisual:(0,m.jsx)(aB,{isStreaming:t,item:e.item}),trailingBadge:null!=a?(0,m.jsx)(tA.g,{"data-testid":"version-label",version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),y(e.item,{selectItem:!0}))},href:aD(e.item)?e.item.url:void 0,blockedBy:j(e)}),e.children.map(w)]},e.item.tag)})})}function aB(e){let t=(0,p.c)(4),{isStreaming:n,item:a}=e;if(n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tU.A,{size:"small",className:`${nZ.sX} mt-1`}),t[0]=e):e=t[0],e}if(aR(a)){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tW,{type:"new-issue"}),t[1]=e):e=t[1],e}if(aD(a)){let e;return t[2]!==a.state?(e=(0,m.jsx)(tW,{type:"existing-issue",state:a.state}),t[2]=a.state,t[3]=e):e=t[3],e}}try{aO.displayName||(aO.displayName="DraftIssueTreeBlock")}catch{}try{aB.displayName||(aB.displayName="LeadingVisual")}catch{}let aM=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue-tree"===e.type}extractProps(e){return{data:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,m.jsx)(aO,{...e})}};var aF=n(72534);function aU(e){let t,n,a,i,s,r,o=(0,p.c)(28),{owner:l,repo:c,issueNumber:d,href:u,children:h}=e,{updateItem:f,openItem:g,openPreviewPane:y,items:_}=(0,eY.xx)(),{messageId:v}=n1(),b=(0,U.A3)("messages"),j=Number(d),w=`issue:${l}/${c}/${j}`;o[0]!==w||o[1]!==_?(t=_.get(w),o[0]=w,o[1]=_,o[2]=t):t=o[2];let N=t;o[3]!==N?.name||o[4]!==v||o[5]!==b||o[6]!==j||o[7]!==l||o[8]!==c?(n=function(e,t,n,a,i){if(!n||!a||!i||isNaN(i))return;let s=e.find(e=>e.id===t),r=s?.references,o=r?.find(e=>"issue"===e.type&&e.number===i&&e.repository.name===a&&e.repository.owner===n),l=o?.title;if(l)return l;let c=r?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${a}`&&e.data.number===i),d=c?.data;return d?.title}(b,v,l,c,j)??N?.name??`Issue #${j}`,o[3]=N?.name,o[4]=v,o[5]=b,o[6]=j,o[7]=l,o[8]=c,o[9]=n):n=o[9];let S=n;return o[10]!==u||o[11]!==w||o[12]!==v||o[13]!==j||o[14]!==l||o[15]!==c||o[16]!==S||o[17]!==f?(a=()=>{l&&c&&f({messageId:v,name:S,number:j,owner:l,repo:c,id:w,href:u,type:"issue"})},i=[w,v,u,j,l,c,S,f],o[10]=u,o[11]=w,o[12]=v,o[13]=j,o[14]=l,o[15]=c,o[16]=S,o[17]=f,o[18]=a,o[19]=i):(a=o[18],i=o[19]),(0,x.useEffect)(a,i),o[20]!==w||o[21]!==g||o[22]!==y?(s=e=>{e.metaKey||e.ctrlKey||(g(w),y(),(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},o[20]=w,o[21]=g,o[22]=y,o[23]=s):s=o[23],o[24]!==h||o[25]!==u||o[26]!==s?(r=(0,m.jsx)(Q.A,{href:u,onClick:s,target:"_blank",rel:"noreferrer",children:h}),o[24]=h,o[25]=u,o[26]=s,o[27]=r):r=o[27],r}try{aU.displayName||(aU.displayName="IssueLinkBlock")}catch{}let aV="data-issuelink-props",a$=(0,n2.F)(aV),aW=/\/(?<owner>[^/]+)\/(?<repo>[^/]+)\/issues\/(?<number>\d+)/,aH={span:(e,t)=>{let n=(0,n2.k)(e,aV);return n?(0,m.jsx)(aU,{...n}):t}};var aq=n(77430),az=n(94602);let aG={list:"IssueListBlock-module__list--hU3Jz",streaming:"IssueListBlock-module__streaming--sTYSD",toggleContent:"IssueListBlock-module__toggleContent--NWbi1",item:"IssueListBlock-module__item--gmkkY",link:"IssueListBlock-module__link--fc5wy",content:"IssueListBlock-module__content--bNFq8",metadata:"IssueListBlock-module__metadata--W4tCj",header:"IssueListBlock-module__header--NtmSe",title:"IssueListBlock-module__title--Di3wj",unknownTitle:"IssueListBlock-module__unknownTitle--JszGm",number:"IssueListBlock-module__number--vsvJy",labels:"IssueListBlock-module__labels--xeeTb",labelIcon:"IssueListBlock-module__labelIcon--g4B1V",description:"IssueListBlock-module__description--Uf86U",icon:"IssueListBlock-module__icon--qAaLP",open:"IssueListBlock-module__open--CQmwr",draft:"IssueListBlock-module__draft--ymDJ6",done:"IssueListBlock-module__done--bWmcu",closed:"IssueListBlock-module__closed--Iuz7v",unassignedAvatar:"IssueListBlock-module__unassignedAvatar--RB1C7",toggleButton:"IssueListBlock-module__toggleButton--C9dbQ",shimmer:"IssueListBlock-module__shimmer--xZ0Bt",toggleIcon:"IssueListBlock-module__toggleIcon--hynWs"},aK={fromUnknown:e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),t}};function aQ(e){let t,n,a,i,s,r=(0,p.c)(8),{item:o,isStreaming:l}=e,c=o.author;return o.merged_at?(i=o.merged_at,s="Merged"):o.closed_at?(i=o.closed_at,s="Closed"):o.created_at&&(i=o.created_at,s="Opened"),r[0]!==i?(n=(t=i?new Date(i):null)&&isNaN(t.getTime()),r[0]=i,r[1]=t,r[2]=n):(t=r[1],n=r[2]),n&&(t=null),r[3]!==s||r[4]!==c||r[5]!==l||r[6]!==t?(a=c&&t||!l?(0,m.jsxs)("span",{className:aG.description,children:[c," ",c?s?.toLowerCase():s," ",t&&(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(eg.A,{date:t,format:"relative"})})]}):null,r[3]=s,r[4]=c,r[5]=l,r[6]=t,r[7]=a):a=r[7],a}let aY=e=>{try{let t=(0,nA.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(aK.fromUnknown);return null}catch{return null}};function aJ(e){let t,n,a,i,s,r,o,l,c,d,u,h=(0,p.c)(39),{data:f,type:g,isStreaming:y}=e;h[0]!==f?(t=()=>aY(f)??[],h[0]=f,h[1]=t):t=h[1];let[v,b]=(0,x.useState)(t),{updateItem:j,openItem:w,openPreviewPane:N}=(0,eY.xx)(),{messageId:S}=n1(),[C,I]=(0,x.useState)(!0);h[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,G.G7)("copilot_issue_list_show_more"),h[2]=n):n=h[2];let k=n;h[3]!==C||h[4]!==v?(a=k&&C?v.slice(0,10):v,h[3]=C,h[4]=v,h[5]=a):a=h[5];let T=a,E=k&&v.length>10;h[6]!==f?(i=()=>b(e=>aY(f)??e),s=[f],h[6]=f,h[7]=i,h[8]=s):(i=h[7],s=h[8]),(0,x.useEffect)(i,s),h[9]!==g?(r=()=>{"issue"===g?(0,tm.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):(0,tm.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"})},o=[g],h[9]=g,h[10]=r,h[11]=o):(r=h[10],o=h[11]),(0,x.useEffect)(r,o);let L=y&&aG.streaming;if(h[12]!==L?(l=(0,_.$)(aG.list,L),h[12]=L,h[13]=l):l=h[13],h[14]!==y||h[15]!==S||h[16]!==w||h[17]!==N||h[18]!==g||h[19]!==j||h[20]!==T){let e;h[22]!==y||h[23]!==S||h[24]!==w||h[25]!==N||h[26]!==g||h[27]!==j||h[28]!==T.length?(e=(e,t)=>{let n={...e,type:g},a=y&&t===T.length-1,{icon:i,colorClass:s}=function(e){let t,n=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(n=(0,m.jsx)(ef.IssueDraftIcon,{"aria-label":"Draft issue"}),t=aG.draft):"closed"===e.state&&e.draft&&(n=(0,m.jsx)(ef.SkipIcon,{"aria-label":"Closed draft issue"}),t=aG.draft):(n=(0,m.jsx)(ef.IssueClosedIcon,{"aria-label":"Closed issue"}),t=aG.done):(n=(0,m.jsx)(ef.IssueOpenedIcon,{"aria-label":"Open issue"}),t=aG.open);else if("pr"===e.type){let a="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!a&&e.draft?(n=(0,m.jsx)(ef.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),t=aG.draft):"open"!==e.state||a||e.draft?"closed"!==e.state||a?"closed"===e.state&&a&&(n=(0,m.jsx)(ef.GitMergeIcon,{"aria-label":"Merged pull request"}),t=aG.done):(n=(0,m.jsx)(ef.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),t=aG.closed):(n=(0,m.jsx)(ef.GitPullRequestIcon,{"aria-label":"Pull request"}),t=aG.open)}return{icon:n,colorClass:t}}(n);return(0,m.jsx)("li",{className:aG.item,children:(0,m.jsxs)("div",{className:aG.content,children:[(0,m.jsx)("div",{className:(0,_.$)(s,aG.icon),children:i}),(0,m.jsxs)("div",{className:aG.header,children:[a&&!n.title?null:(0,m.jsx)("a",{...(0,tk.G)("issue-list-item-link"),href:n.url??"#",className:aG.link,onClick:e=>{if(!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),n.url))if("issue"===n.type){(0,tm.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:e,repo:t,number:a}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(n.url);if(e&&t&&a){let i=`issue:${e}/${t}/${a}`;j({messageId:S,name:n.title??`Issue #${a}`,number:a,owner:e,repo:t,id:i,href:n.url,type:"issue"}),w(i),N()}}else(0,tm.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(n.url,"_self")},target:"_blank",rel:"noreferrer",children:n.title||void 0===n.number?(0,m.jsxs)(m.Fragment,{children:[n.title?(0,m.jsx)("span",{className:aG.title,children:n.title}):(0,m.jsx)("span",{className:(0,_.$)(aG.title,aG.unknownTitle),children:"Unknown issue"}),void 0!==n.number&&(0,m.jsxs)("span",{className:aG.number,children:["#",n.number]})]}):(0,m.jsxs)("span",{className:aG.title,children:["#",n.number]})}),(0,m.jsxs)("div",{className:aG.labels,children:[n.labels?.length?n.labels.map(aZ):null,0!==n.comments&&void 0!==n.comments&&(0,m.jsxs)(eG.A,{size:"small",variant:"secondary",children:[(0,m.jsx)(ef.CommentIcon,{className:aG.labelIcon,size:12}),n.comments]})]})]}),(0,m.jsx)(aQ,{item:n,isStreaming:a}),(0,m.jsx)("div",{className:aG.metadata,children:void 0===n.assignees_avatar_urls?null:0===n.assignees_avatar_urls.length?(0,m.jsx)("div",{className:aG.unassignedAvatar,role:"img","aria-label":"Unassigned",children:(0,m.jsx)(ef.PersonIcon,{size:12})}):(0,m.jsx)("div",{role:"img","aria-label":`${n.assignees_avatar_urls.length} ${1===n.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,m.jsx)(az.A,{disableExpand:!0,children:n.assignees_avatar_urls.map(aX)})})})]})},t)},h[22]=y,h[23]=S,h[24]=w,h[25]=N,h[26]=g,h[27]=j,h[28]=T.length,h[29]=e):e=h[29],c=T.map(e),h[14]=y,h[15]=S,h[16]=w,h[17]=N,h[18]=g,h[19]=j,h[20]=T,h[21]=c}else c=h[21];return h[30]!==C||h[31]!==E||h[32]!==y||h[33]!==v?(d=E&&(0,m.jsx)("li",{className:aG.item,children:(0,m.jsx)("div",{className:(0,_.$)(aG.content,aG.toggleContent),children:(0,m.jsxs)("button",{type:"button",className:(0,_.$)(aG.toggleButton,y&&aG.shimmer),onClick:()=>I(!C),"aria-expanded":!C,"aria-controls":"issue-list",children:[(0,m.jsx)("span",{className:aG.toggleIcon,children:C?(0,m.jsx)(ef.UnfoldIcon,{size:16}):(0,m.jsx)(ef.FoldIcon,{size:16})}),C?`Show ${v.length-10} more`:"Show less"]})})}),h[30]=C,h[31]=E,h[32]=y,h[33]=v,h[34]=d):d=h[34],h[35]!==c||h[36]!==d||h[37]!==l?(u=(0,m.jsx)("div",{children:(0,m.jsxs)("ul",{id:"issue-list",className:l,children:[c,d]})}),h[35]=c,h[36]=d,h[37]=l,h[38]=u):u=h[38],u}function aX(e){return(0,m.jsx)(aq.r,{src:e,alt:"Assignee avatar"},e)}function aZ(e){return(0,m.jsx)(eG.A,{size:"small",variant:"secondary",children:e},e)}try{aQ.displayName||(aQ.displayName="Description")}catch{}try{aJ.displayName||(aJ.displayName="ListBlock")}catch{}let a0=new class extends YamlBlockExtension{get dataAttribute(){return"data-issues-list-block"}isSupported(e){return"list"===e.lang&&("issue"===e.type||"pr"===e.type)}extractProps(e){return{data:e.value,type:e.type,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,m.jsx)(aJ,{...e})}},a1=new class extends YamlBlockExtension{get dataAttribute(){return"data-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"issue-tree"===e.type}extractProps(e){return{data:e.value}}createComponent(e){return(0,m.jsx)(aE,{...e})}};var a2=n(35673);let a3="copilot-chat-spec-task";function a4(e,t){if(e&&t)return`${a3}-${e}-${t}`}function a5(e){let t=(0,U.Pk)(),n=e.map(e=>a4(t.selectedThreadID,e.tag)),{tasks:a,isLoading:i}=(0,O.si)({});return(0,x.useMemo)(()=>n.map(e=>{if(!e)return{isLoading:!1,pullRequest:void 0};let t=a.find(t=>t.event_identifiers?.includes(e));return{isLoading:i||!!t?.isOptimistic,pullRequest:t?.pull}}),[n,a,i])}function a6(e){return e.tag}let a7={container:"PlanningTasklistBlock-module__container--Vl4PK"},a8="data-planning-tasklist-block",a9=e=>"object"==typeof e&&null!==e&&"tag"in e&&"string"==typeof e.tag&&"title"in e&&"string"==typeof e.title&&"description"in e&&"string"==typeof e.description&&(!("dependencyTags"in e)||!!Array.isArray(e.dependencyTags))&&(!("repository"in e)||"string"==typeof e.repository)&&!0,ie={fromUnknown:e=>{if("object"!=typeof e||null==e)return null;let t={name:"name"in e&&"string"==typeof e.name?e.name:"Tasklist",tasks:[]};if("tasks"in e&&Array.isArray(e.tasks))for(let n of e.tasks)"object"==typeof n&&null!=n&&a9(n)&&t.tasks.push(n);return t}};function it(e){let t,n=(0,p.c)(4),{task:a,isStreaming:i,onClick:s}=e;return n[0]!==i||n[1]!==s||n[2]!==a?(t=(0,m.jsx)(F.Fn,{children:(0,m.jsx)(ia,{task:a,isStreaming:i,onClick:s})}),n[0]=i,n[1]=s,n[2]=a,n[3]=t):t=n[3],t}function ia(e){let t,n,a,i,s,r,o,l=(0,p.c)(21),{task:c,isStreaming:d,onClick:u}=e;l[0]!==c?(t=[c],l[0]=c,l[1]=t):t=l[1];let{pullRequest:h,isLoading:f}=a5(t)[0],{versionedItems:g}=(0,eY.xx)();l[2]!==c.id||l[3]!==g?(n=(0,tR.LU)(c.id,g),l[2]=c.id,l[3]=g,l[4]=n):n=l[4];let y=n;l[5]!==f||l[6]!==d||l[7]!==h?(a=()=>d||f?(0,m.jsx)(tU.A,{size:"small",className:nZ.sX}):null!=h?(0,m.jsx)(ef.GitPullRequestIcon,{}):(0,m.jsx)(ef.TasklistIcon,{}),l[5]=f,l[6]=d,l[7]=h,l[8]=a):a=l[8];let _=a;return l[9]!==_?(i=(0,m.jsx)(eZ.l.LeadingVisual,{children:_()}),l[9]=_,l[10]=i):i=l[10],l[11]!==y?(s=null!=y&&(0,m.jsx)(tA.g,{version:y}),l[11]=y,l[12]=s):s=l[12],l[13]!==s?(r=(0,m.jsx)(eZ.l.TrailingVisual,{children:s}),l[13]=s,l[14]=r):r=l[14],l[15]!==u||l[16]!==i||l[17]!==r||l[18]!==c.id||l[19]!==c.name?(o=(0,m.jsxs)(eZ.l.Item,{onSelect:u,className:"py-2",children:[i,c.name,r]},c.id),l[15]=u,l[16]=i,l[17]=r,l[18]=c.id,l[19]=c.name,l[20]=o):o=l[20],o}function ii({yaml:e,isStreaming:t}){let[n,a]=(0,x.useState)(t),i=(0,x.useRef)(new Set);(0,x.useEffect)(()=>{t&&a(!0)},[t]);let{selectedThreadID:s}=(0,U.Pk)(),{updateItem:r,openItem:o,openPreviewPane:l}=(0,eY.xx)(),{messageId:c,messageIndex:d,setHasAutoOpenedPreviewPane:u}=n1(),h=(0,x.useRef)({name:"Tasklist",tasks:[]}),f=(0,x.useMemo)(()=>{let t=((e,t)=>{try{let t=(0,nA.Hh)(e);return ie.fromUnknown(t)}catch{return(0,tm.BI)("copilot.planning_tasklist",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,s);return null!=t?(h.current=t,t):h.current},[e,s]),g=(0,x.useMemo)(()=>f.tasks.map(e=>{let n=`planning-task:${e.tag}#${d}`,{title:a,...i}=e;return{...i,name:a,messageId:c,id:n,type:"planning-task",isUserEdited:!1,isStreaming:t}}),[f,d,c,t]),{convertAllToDraftIssues:y}=function(e){let t,n,a=(0,p.c)(6),i=(0,W.b)(),s=(0,U.Pk)();a[0]!==i||a[1]!==e||a[2]!==s?(t=async()=>{(0,tm.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ALL_ISSUES",mode:"immersive",threadId:(0,nL.W)(s)?.id});let t=`
Create draft issues for all tasks with the following tags: ${e.map(a6).join(", ")}.
The tasks should be filed under a new parent issue. If the tasklist has a title, use that as the parent issue title.
`;await i.sendChatMessage({thread:(0,nL.W)(s),content:t,references:[{type:"text",name:'timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting all tasks as issues..."}'}],topic:s.currentTopic,context:s.context,customInstructions:s.customInstructions,model:s.model,intent:nE.wh.planningAgent})},a[0]=i,a[1]=e,a[2]=s,a[3]=t):t=a[3];let r=t;return a[4]!==r?(n={convertAllToDraftIssues:r},a[4]=r,a[5]=n):n=a[5],n}(g),_=(0,x.useCallback)((e,t={})=>{let{selectItem:n}=t;o(e.id,n),l(),u(!0)},[o,l,u]);(0,x.useEffect)(()=>{for(let e=0;e<g.length;e++){let t=g[e];r(t),n&&!i.current.has(t.id)&&(i.current.add(t.id),_(t,{selectItem:0===e}))}},[g,r,_,n]);let v=(0,x.useCallback)(e=>_(e),[_]);(0,x.useEffect)(()=>(0,tm.BI)("copilot.planning_tasklist",{type:"BLOCK_RENDERED",mode:"immersive",threadId:s}),[s]),(0,x.useEffect)(()=>{!t&&n&&0===g.length&&(0,tm.BI)("copilot.planning_tasklist",{type:"NO_TASKS",mode:"immersive",threadId:s})},[s,n,t,g]);let b=g.map(e=>(0,m.jsx)(it,{task:e,isStreaming:!!t,onClick:()=>v(e)},e.id)),j=(0,m.jsx)("span",{children:"No tasks were created, please retry."});return(0,m.jsx)("div",{className:a7.container,children:(0,m.jsxs)(eZ.l,{variant:"full",showDividers:!0,children:[(0,m.jsxs)(eZ.l.Heading,{as:"h4",className:"mx-3 mt-3 mb-1 d-flex flex-items-center",children:[f?.name??"Tasklist",(0,m.jsx)(tH.A,{className:"ml-2 pb-1",children:g.length}),g.length>0&&(0,m.jsx)("div",{className:"flex-justify-end d-flex flex-1",children:(0,m.jsxs)(eX.W,{children:[(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(e1.K,{icon:ef.KebabHorizontalIcon,variant:"invisible","aria-label":`Tasklist '${f?.name??""}' options`})}),(0,m.jsx)(a2.UJ,{children:(0,m.jsx)(eZ.l,{children:(0,m.jsx)(eZ.l.Item,{onSelect:y,children:"Draft all as issues"})})})]})})]}),t||0!==g.length?b:j]})})}try{it.displayName||(it.displayName="TasklistItem")}catch{}try{ia.displayName||(ia.displayName="TasklistItemImpl")}catch{}try{ii.displayName||(ii.displayName="PlanningTasklistBlock")}catch{}let is=(0,n2.F)(a8),ir={div:(e,t)=>{let n=(0,n2.k)(e,a8);return n?(0,m.jsx)(ii,{...n}):t}},io={markdownOverrides:"MarkdownViewer-module__markdownOverrides--xtpOl"},il=({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:a,markdown:i,...s})=>{let r=(0,x.useRef)(!1),o=(0,x.useCallback)(e=>{r.current=e},[]),l=(0,x.useMemo)(()=>[...s.extensions??[],function(e){return{transformMarkdown:t=>(0,n3.YR)(t,"code",t=>{let n=t.lang??"",{name:a,code:i}=function(e,t){let n=e&&as.exec(e);if(n)return{name:n.groups?.name,code:t};let a=ar.exec(t);return a?{name:a.groups?.name,code:t.replace(ar,"")}:{code:t}}(t.meta??void 0,t.value);if(!a)return;e.includes(a)||e.push(a);let s=function(e){if(!e)return;let t=ao.exec(e);return t?.groups?.url}(t.meta??void 0),r=i.split(`
`,6),o=6===r.length,l=o?r.join(`
`):`${r.join(`
`)}
`,c=t.position?.start.line??0;t.value=l,t.data={...t.data,hName:"code",hProperties:{[ai]:JSON.stringify({language:n,name:a,url:s,code:i,line:c,isStreaming:t.isStreaming??!1,isClipped:o,index:e.indexOf(a),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,n3.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&ai in a.properties&&n.children.splice(t,1,a)}),reactComponents:al}}([]),{transformMarkdown:e=>(0,n3.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=aW.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:a="",number:i=""}=t.groups;e.data={hName:"span",hProperties:{[a$]:JSON.stringify({owner:n,repo:a,issueNumber:i,href:e.url,children:(0,aF.d)(e)})}}}),reactComponents:aH},a0,a1,aC,aM,{transformMarkdown:e=>(0,n3.YR)(e,"code",e=>{"yaml"===e.lang&&"planning-tasklist"===ad(ac.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[is]:JSON.stringify({yaml:e.value,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,n3.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&is in a.properties&&n.children.splice(t,1,a)}),reactComponents:ir}],[s.extensions]);return(0,m.jsx)(n0.Provider,{value:(0,x.useMemo)(()=>({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:a,markdown:i,hasAutoOpenedPreviewPaneRef:r,setHasAutoOpenedPreviewPane:o}),[e,t,n,a,i,r,o]),children:(0,m.jsx)(nZ.To,{...s,markdown:i,extensions:l,chatMode:"immersive",className:io.markdownOverrides})})},ic=x.memo(il);try{il.displayName||(il.displayName="MarkdownViewer")}catch{}try{ic.displayName||(ic.displayName="MemoizedMarkdownViewer")}catch{}let id={timelineEvent:"TimelineEvents-module__timelineEvent--FV3V3",icon:"TimelineEvents-module__icon--E6IJb",situationalTimelineEvent:"TimelineEvents-module__situationalTimelineEvent--WTQlM TimelineEvents-module__timelineEvent--FV3V3",references:"TimelineEvents-module__references--lv7xz ChatMessage-module__references--Pi5OH"};function iu(e){return"text"===e.type&&null!=e.name&&e.name.startsWith("timeline-event:")}function im(e,t){return e.references?.some(e=>iu(e)&&(void 0===t||t?.some(t=>e.name.startsWith(`timeline-event: {"type": "${t}"`))))??!1}function ip(e){let t,n,a,i=(0,p.c)(10),{message:s,messageIndex:r,isViewingSharedThread:o,isSharedMessage:l,isLatestMessage:c}=e;return i[0]!==s||i[1]!==r?(t=im(s)&&(0,m.jsx)(ih,{message:s,messageIndex:r}),i[0]=s,i[1]=r,i[2]=t):t=i[2],i[3]!==c||i[4]!==l||i[5]!==o?(n=(0,m.jsx)(iy,{isViewingSharedThread:o,isSharedMessage:l,isLatestMessage:c}),i[3]=c,i[4]=l,i[5]=o,i[6]=n):n=i[6],i[7]!==t||i[8]!==n?(a=(0,m.jsxs)(m.Fragment,{children:[t,n]}),i[7]=t,i[8]=n,i[9]=a):a=i[9],a}function ih(e){let t,n,a,i,s,r,o,l=(0,p.c)(24),{message:c,messageIndex:d}=e,{updateItem:u}=(0,eY.xx)();if(l[0]!==c.createdAt||l[1]!==c.id||l[2]!==c.references||l[3]!==d||l[4]!==u?(t=()=>{if(c.references)for(let e of c.references){let t=(0,tR.oR)({ref:e,messageIndex:d,messageId:c.id,timestamp:c.createdAt});null!=t&&u(t)}},n=[c.references,c.id,d,c.createdAt,u],l[0]=c.createdAt,l[1]=c.id,l[2]=c.references,l[3]=d,l[4]=u,l[5]=t,l[6]=n):(t=l[5],n=l[6]),(0,x.useEffect)(t,n),l[7]!==c.references){a=Symbol.for("react.early_return_sentinel");e:{let e=c.references?.filter(ig);if(!e){a=void 0;break e}for(let t of(i=[],e)){let e=JSON.parse(t.name.replace("timeline-event: ","")),n=t.icon||ef.CheckIcon;i.push({type:e.type,markdownContent:e.markdownContent,icon:n})}}l[7]=c.references,l[8]=a,l[9]=i}else a=l[8],i=l[9];return a!==Symbol.for("react.early_return_sentinel")?a:(l[10]!==c.createdAt||l[11]!==c.id||l[12]!==c.references||l[13]!==d?(s=c.references&&c.references.length>0&&(0,m.jsx)(nX,{className:id.references,messageId:c.id,messageTimestamp:c.createdAt,messageIndex:d,references:c.references,size:"medium"}),l[10]=c.createdAt,l[11]=c.id,l[12]=c.references,l[13]=d,l[14]=s):s=l[14],l[15]!==c.content||l[16]!==c.createdAt||l[17]!==c.id||l[18]!==d||l[19]!==i?(r=i.map(e=>{let{type:t,markdownContent:n,icon:a}=e;return(0,m.jsxs)("div",{className:id.timelineEvent,children:[(0,m.jsx)(a,{className:id.icon}),(0,m.jsx)(il,{autoOpenPreviewPane:!1,markdown:n,messageId:c.id,messageIndex:d,messageTimestamp:c.createdAt,accessibleHeader:(0,nQ.hV)("Timeline",c.content??"")})]},t)}),l[15]=c.content,l[16]=c.createdAt,l[17]=c.id,l[18]=d,l[19]=i,l[20]=r):r=l[20],l[21]!==s||l[22]!==r?(o=(0,m.jsxs)(m.Fragment,{children:[s,r]}),l[21]=s,l[22]=r,l[23]=o):o=l[23],o)}function ig(e){return iu(e)}function iy(e){let t,n,a,i=(0,p.c)(9),{isSharedMessage:s,isViewingSharedThread:r,isLatestMessage:o}=e;return i[0]!==s||i[1]!==r?(t=s&&!r&&(0,m.jsxs)("div",{className:id.situationalTimelineEvent,children:[(0,m.jsx)(ef.LinkIcon,{className:id.icon})," Messages up to this point are included in shared link"]}),i[0]=s,i[1]=r,i[2]=t):t=i[2],i[3]!==o||i[4]!==r?(n=o&&tu.W.copilotDuplicateThread&&r&&(0,m.jsxs)("div",{className:id.situationalTimelineEvent,children:[(0,m.jsx)(ef.RepoForkedIcon,{className:id.icon})," Messages beyond this point will start a new private conversation"]}),i[3]=o,i[4]=r,i[5]=n):n=i[5],i[6]!==t||i[7]!==n?(a=(0,m.jsxs)(m.Fragment,{children:[t,n]}),i[6]=t,i[7]=n,i[8]=a):a=i[8],a}try{ip.displayName||(ip.displayName="TimelineEvents")}catch{}try{ih.displayName||(ih.displayName="UserMessageTimelineEvent")}catch{}try{iy.displayName||(iy.displayName="SituationalTimelineEvents")}catch{}var i_=n(15106),ix=n(66457),iv=n(58321),ib=n(921),ij=n(85391),iw=n(97764),iN=n(46036),iS=n(43063);function iC(){let e,t=(0,p.c)(4),n=(0,W.b)(),a=(0,U.Pk)(),{updateItem:i}=(0,eY.xx)();return t[0]!==n||t[1]!==a||t[2]!==i?(e=async(e,t)=>{(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_REMOVE_DEPENDENCY",mode:"immersive",threadId:(0,nL.W)(a)?.id,chatReferrer:document.referrer,issueTag:e.tag,issueRepository:e.repository,blockingIssueTag:t.tag});let s={type:"text",name:`timeline-event: {"type": "remove-dependency", "markdownContent": "Removed dependency on '${t.name}'"}`,text:`Remove the dependency on the issue '${t.tag}' by removing it from the 'blockedByTags' field. Return the updated '${e.tag}' draft-issue.`},r={...e,blockedByTags:e.blockedByTags?.filter(e=>e!==t.tag),isUserEdited:!1};i(r);let o="existing-issue"===r.type?(0,tR.yA)(r):(0,tR.PO)(r);await n.sendChatMessage({thread:(0,nL.W)(a),content:"Remove the blocking dependency from the issue",references:[s,o],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},t[0]=n,t[1]=a,t[2]=i,t[3]=e):e=t[3],e}function iI(e){let t,n,a,i=(0,p.c)(16),{issueNode:s}=e,{openItem:r,versionedItems:o}=(0,eY.xx)(),l=iC(),c=s.blockedBy;if(!tu.W.draftIssuesWithDependencies||0===c.length)return null;if(i[0]!==c.length?(t=(0,m.jsx)(iN.s,{title:(0,m.jsx)(iS.c,{title:"Blocked by",className:"p-0",children:(0,m.jsx)(tH.A,{children:c.length})}),className:"border-0 bgColor-default"}),i[0]=c.length,i[1]=t):t=i[1],i[2]!==s.item||i[3]!==l||i[4]!==r||i[5]!==c||i[6]!==o){let e;i[8]!==s.item||i[9]!==l||i[10]!==r||i[11]!==o?(e=e=>{let t=(0,tR.LU)(e.item.id,o);return(0,m.jsx)(ix.r,{title:(0,m.jsx)(iw.T,{value:e.item.name,onClick:()=>r(e.item.id,!0),trailingBadges:null!=t?[(0,m.jsx)(tA.g,{version:t},`${e.item.tag}#${t}`)]:void 0}),secondaryActions:(0,m.jsx)(iv.o,{actions:[],staticMenuActions:[{key:"unlink",render:()=>(0,m.jsxs)(eZ.l.Item,{onSelect:()=>l(s.item,e.item),children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.UnlinkIcon,{})}),"Remove dependency"]},`${e.item.tag}-unlink`)}]}),children:(0,m.jsx)(ib.Q,{children:(0,m.jsx)(ij.D,{children:(0,m.jsx)(tW,{...e.item})})})},e.item.tag)},i[8]=s.item,i[9]=l,i[10]=r,i[11]=o,i[12]=e):e=i[12],n=c.map(e),i[2]=s.item,i[3]=l,i[4]=r,i[5]=c,i[6]=o,i[7]=n}else n=i[7];return i[13]!==t||i[14]!==n?(a=(0,m.jsx)("div",{className:"mt-2 border rounded-2",children:(0,m.jsx)(i_.v,{title:"Blocked by",header:t,children:n})}),i[13]=t,i[14]=n,i[15]=a):a=i[15],a}try{iI.displayName||(iI.displayName="BlockedByList")}catch{}function ik(e){let t,n,a,i=(0,p.c)(16),{issueNode:s}=e,{openItem:r,versionedItems:o}=(0,eY.xx)(),l=iC(),c=s.isBlocking;if(!tu.W.draftIssuesWithDependencies||0===c.length)return null;if(i[0]!==c.length?(t=(0,m.jsx)(iN.s,{title:(0,m.jsx)(iS.c,{title:"Is blocking",className:"p-0",children:(0,m.jsx)(tH.A,{children:c.length})}),className:"border-0 bgColor-default"}),i[0]=c.length,i[1]=t):t=i[1],i[2]!==s.item||i[3]!==l||i[4]!==r||i[5]!==c||i[6]!==o){let e;i[8]!==s.item||i[9]!==l||i[10]!==r||i[11]!==o?(e=e=>{let t=(0,tR.LU)(e.item.id,o);return(0,m.jsx)(ix.r,{title:(0,m.jsx)(iw.T,{value:e.item.name,onClick:()=>r(e.item.id,!0),trailingBadges:null!=t?[(0,m.jsx)(tA.g,{version:t},`${e.item.tag}#${t}`)]:void 0}),secondaryActions:(0,m.jsx)(iv.o,{actions:[],staticMenuActions:[{key:"unlink",render:()=>(0,m.jsxs)(eZ.l.Item,{onSelect:()=>l(e.item,s.item),children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.UnlinkIcon,{})}),"Remove dependency"]},`${e.item.tag}-unlink`)}]}),children:(0,m.jsx)(ib.Q,{children:(0,m.jsx)(ij.D,{children:(0,m.jsx)(tW,{...e.item})})})},e.item.tag)},i[8]=s.item,i[9]=l,i[10]=r,i[11]=o,i[12]=e):e=i[12],n=c.map(e),i[2]=s.item,i[3]=l,i[4]=r,i[5]=c,i[6]=o,i[7]=n}else n=i[7];return i[13]!==t||i[14]!==n?(a=(0,m.jsx)("div",{className:"mt-2 border rounded-2",children:(0,m.jsx)(i_.v,{title:"Is blocking",header:t,children:n})}),i[13]=t,i[14]=n,i[15]=a):a=i[15],a}try{ik.displayName||(ik.displayName="BlockingList")}catch{}function iT({issue:e}){let{openItem:t,versionedItems:n}=(0,eY.xx)(),a=nn(),i=function(){let e,t=(0,p.c)(4),n=(0,W.b)(),a=(0,U.Pk)(),{updateItem:i}=(0,eY.xx)();return t[0]!==n||t[1]!==a||t[2]!==i?(e=async e=>{(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_UNLINK_FROM_PARENT",mode:"immersive",threadId:(0,nL.W)(a)?.id,chatReferrer:document.referrer,issueRepository:e.repository,issueTab:e.tag,parentIssueTag:e.parentTag});let t={type:"text",name:`timeline-event: {"type": "unlink-sub-issue", "markdownContent": "Unlinked sub-issue '${e.name}'"}`,text:`Unlink the sub issue '${e.tag}' from its parent issue by removing the 'parentTag' field. Return the updated '${e.tag}' draft-issue.`},s={...e,parentTag:void 0,isUserEdited:!1};i(s);let r="existing-issue"===s.type?(0,tR.yA)(s):(0,tR.PO)(s);await n.sendChatMessage({thread:(0,nL.W)(a),content:"Unlink the sub-issue from its parent issue",references:[t,r],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},t[0]=n,t[1]=a,t[2]=i,t[3]=e):e=t[3],e}(),s=a.get(e.tag),r=s?s.children:[],o=(0,x.useMemo)(()=>{if(!s)return 0;let e=-1;return ne(s,()=>e++),e},[s]),l=e=>{let a=(0,tR.LU)(e.item.id,n);return(0,m.jsx)(ix.r,{title:(0,m.jsx)(iw.T,{value:e.item.name,onClick:()=>{t(e.item.id,!0)},trailingBadges:null!=a?[(0,m.jsx)(tA.g,{version:a},`${e.item.tag}#${a}`)]:void 0}),secondaryActions:(0,m.jsx)(iv.o,{actions:[],staticMenuActions:[{key:"unlink",render:()=>(0,m.jsxs)(eZ.l.Item,{onSelect:()=>i(e.item),children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.LinkIcon,{})}),"Unlink sub-issue"]},`${e.item.tag}-unlink`)}]}),subItems:e.children?.length?e.children.map(l):void 0,defaultExpanded:!0,children:(0,m.jsx)(ib.Q,{children:(0,m.jsx)(ij.D,{children:(0,m.jsx)(tW,{...e.item})})})},e.item.tag)};return(0,m.jsx)("div",{className:"mt-2 border rounded-2",children:(0,m.jsx)(i_.v,{title:"Sub-issues",header:(0,m.jsx)(iN.s,{title:(0,m.jsx)(iS.c,{title:"Sub-issues",className:"p-0",children:(0,m.jsx)(tH.A,{children:o})}),className:"border-0 bgColor-default"}),children:r.map(l)})})}try{iT.displayName||(iT.displayName="SubissuesList")}catch{}function iE(e){let t,n,a,i,s=(0,p.c)(10),{issueNode:r}=e;return s[0]!==r.children.length||s[1]!==r.item?(t=r.children.length>0&&(0,m.jsx)(iT,{issue:r.item}),s[0]=r.children.length,s[1]=r.item,s[2]=t):t=s[2],s[3]!==r?(n=(0,m.jsx)(iI,{issueNode:r}),a=(0,m.jsx)(ik,{issueNode:r}),s[3]=r,s[4]=n,s[5]=a):(n=s[4],a=s[5]),s[6]!==t||s[7]!==n||s[8]!==a?(i=(0,m.jsxs)(m.Fragment,{children:[t,n,a]}),s[6]=t,s[7]=n,s[8]=a,s[9]=i):i=s[9],i}try{iE.displayName||(iE.displayName="RelationshipsSection")}catch{}var iL=n(33987),iA=n(89564),iR=n(40104);function iD(e){let{openItem:t,updateItem:n}=(0,eY.xx)(),{selectedThreadID:a}=(0,U.Pk)(),i=function(e){let{messages:t}=(0,U.Pk)(),{tag:n,issueNumber:a}=e,i=a&&tu.W.draftUpdateIssue?"update-issue":"new-issue";return`${i}:${n}#${t.length}`}(e),s=`edited-${a}-${i}`,[r,o]=(0,iR.Fo)(s,void 0);return(0,x.useCallback)((s,r=!1)=>{let l,c=!1;for(l in s)(0,am.A)(s[l],e[l])||(c=!0,"name"!==l&&"body"!==l&&"defaultValuesById"!==l&&(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_USER_CHANGED_FIELD",mode:"immersive",threadId:a,repository:e.repository,issueTag:e.tag,userChangedField:l,wasEmpty:function(e){switch(typeof e){case"string":return!e;case"object":if(Array.isArray(e))return!e||0===e.length;return null==e;default:return null==e}}(e[l])}));if(!c)return;let d={...e,...s};!r&&(d.id=i,d.isUserEdited=!0,tu.W.copilotPersistEditedDraftIssues&&o(d)),n(d),t(d.id)},[e,n,t,a,i,o])}function iP(e){return(0,iL.i)(e)}let iO=function(){var e={defaultValue:100,kind:"LocalArgument",name:"count"},t={defaultValue:"",kind:"LocalArgument",name:"labelNames"},n={defaultValue:null,kind:"LocalArgument",name:"owner"},a={defaultValue:null,kind:"LocalArgument",name:"repo"},i=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],s=[{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"names",variableName:"labelNames"},{kind:"Literal",name:"orderBy",value:{direction:"ASC",field:"NAME"}}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o=[r,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,n,a],kind:"Fragment",metadata:null,name:"useLabelsQueryQuery",selections:[{alias:null,args:i,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:s,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"ItemPickerLabelItem",selections:o,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,a,t,e],kind:"Operation",name:"useLabelsQueryQuery",selections:[{alias:null,args:i,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:s,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:o,storageKey:null}],storageKey:null},r],storageKey:null}]},params:{id:"4201915266ae2f0441a631b9a0eea9cb",metadata:{},name:"useLabelsQueryQuery",operationKind:"query",text:null}}}();iO.hash="6e8777b8ca66ee679f8d37dfb35062c1";var iB=n(6658),iM=n(30721);function iF(e){return(0,iB.P5)(e)}function iU(e){return!!e}function iV(e){return e.name}var i$=n(13398),iW=n(72741),iH=n(59459);function iq(e){return!1===e.hasReachedItemsLimit}function iz(e){return!1===e.closed}function iG(e){return e.toLowerCase()}function iK(e,t){return e.set(t.id,t),e}function iQ(e){return e.title}var iY=n(12495);function iJ(e,t){return e?.toLowerCase()===t?.toLowerCase()}function iX(e){let t,n,a,i,s,r,o,l,c,d,u,h=(0,p.c)(47),{draftIssue:f,issueNode:g,template:y,issueFormRef:_,loadingDraftIssueRepo:v,onCreate:b,onChange:j,onClose:w,onBeforeCreate:N,onFieldChange:S}=e,{name:C,body:I,defaultValuesById:k}=f,T=void 0===I?"":I,{repository:E,clearSessionData:L}=(0,tB.u)(),[A,R]=(0,x.useState)(C),[D,P]=(0,x.useState)(T),O=function(){let e,t=(0,p.c)(3),n=(0,W.b)(),a=(0,U.Pk)();return t[0]!==n||t[1]!==a?(e=async(e,t)=>{let i;if(e.parentMessageID&&(i=a.messages.findLast(t=>t.id===e.parentMessageID&&"root"!==t.id)),!i||!i.content)return;(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_RETRY_MESSAGE",mode:"immersive",threadId:(0,nL.W)(a)?.id,customMessage:t});let s={type:"text",name:`timeline-event: {"type": "automatic-retry", "markdownContent": "${t??"Copilot failed to generate a response, retrying\u2026"}"}`,icon:ef.XIcon};await n.sendChatMessage({thread:(0,nL.W)(a),content:i.content,references:[...i.references??[],s],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model,parentMessageId:e.id})},t[0]=n,t[1]=a,t[2]=e):e=t[2],e}(),B=(0,U.Pk)();h[0]!==L||h[1]!==_?(t=()=>{L(),_.current?.clearSessionStorage()},h[0]=L,h[1]=_,h[2]=t):t=h[2];let M=t;h[3]!==M||h[4]!==w?(n=()=>{M(),w?.()},h[3]=M,h[4]=w,h[5]=n):n=h[5];let F=n;if(h[6]!==T||h[7]!==C?(a=()=>{R(C),P(T)},i=[T,C],h[6]=T,h[7]=C,h[8]=a,h[9]=i):(a=h[8],i=h[9]),(0,x.useEffect)(a,i),!function(e){let t,n,a,i,s,r,o,l,c,d,u,m,h,f=(0,p.c)(42),{repository:g,assignees:y,setAssignees:_}=(0,tB.u)(),v=(0,x.useRef)(!0),b=(0,x.useRef)(e.id),j=(0,x.useRef)(void 0),w=iD(e);f[0]!==e.id?(t=()=>{b.current!==e.id&&(v.current=!0,j.current=void 0,b.current=e.id)},f[0]=e.id,f[1]=t):t=f[1],f[2]!==e.id||f[3]!==y?(n=[e.id,y],f[2]=e.id,f[3]=y,f[4]=n):n=f[4],(0,x.useEffect)(t,n),g?.nameWithOwner;let N=e.repository&&g?.nameWithOwner===e.repository,S=g?.owner.login,C=g?.name;f[5]!==e.assignees?(a=e.assignees??[],f[5]=e.assignees,f[6]=a):a=f[6],f[7]!==S||f[8]!==C||f[9]!==a?(i={owner:S,repo:C,assignees:a},f[7]=S,f[8]=C,f[9]=a,f[10]=i):i=f[10];let{isLoading:I,data:k}=function(e){let t,n,a,i,s,r=(0,p.c)(16),{owner:o,repo:l,assignees:c}=e,d=(0,t9.useRelayEnvironment)();r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,iL.M)({includeAuthorableBots:!1,includeAssignableBots:!0}),r[0]=t):t=r[0];let u=t;return r[1]!==d?(n=JSON.stringify(d),r[1]=d,r[2]=n):n=r[2],r[3]!==c||r[4]!==o||r[5]!==l||r[6]!==n?(a=["copilot-immersive-assignees",n,u,o,l,c],r[3]=c,r[4]=o,r[5]=l,r[6]=n,r[7]=a):a=r[7],r[8]!==c||r[9]!==d||r[10]!==o||r[11]!==l?(i=async()=>o&&l&&c?await (0,iA.fH)(d,{owner:o,repo:l,assignees:c,capabilities:u}):[],r[8]=c,r[9]=d,r[10]=o,r[11]=l,r[12]=i):i=r[12],r[13]!==a||r[14]!==i?(s={queryKey:a,queryFn:i},r[13]=a,r[14]=i,r[15]=s):s=r[15],(0,tr.I)(s)}(i),T=(null!=e.assignees||!e.isStreaming)&&!I;f[11]!==N||f[12]!==T?(s=()=>{N&&!T&&(v.current=!0)},r=[N,T],f[11]=N,f[12]=T,f[13]=s,f[14]=r):(s=f[13],r=f[14]),(0,x.useEffect)(s,r),f[15]!==w?(o=(e,t)=>{void 0!==j.current&&(0,am.A)(j.current,e)||(w({assignees:e.map(iP)},t),j.current=e)},f[15]=w,f[16]=o):o=f[16];let E=o;f[17]!==N||f[18]!==T||f[19]!==E||f[20]!==g||f[21]!==k||f[22]!==_?(c=()=>{N&&T&&null!=k&&(g?.viewerIssueCreationPermissions?.assignable?(_(k),E(k,!0)):null!=g&&(_([]),E([],!0)))},l=[N,T,E,g,k,_],f[17]=N,f[18]=T,f[19]=E,f[20]=g,f[21]=k,f[22]=_,f[23]=l,f[24]=c):(l=f[23],c=f[24]),(0,x.useEffect)(c,l),f[25]!==y||f[26]!==N||f[27]!==T||f[28]!==g||f[29]!==k?(d=()=>{if(!v.current||void 0===j.current||!N||!T||null==k||!g)return;let e=g.viewerIssueCreationPermissions?.assignable;e&&y===k?v.current=!1:e||0!==y.length||(v.current=!1)},f[25]=y,f[26]=N,f[27]=T,f[28]=g,f[29]=k,f[30]=d):d=f[30],f[31]!==e.id||f[32]!==y||f[33]!==N||f[34]!==T||f[35]!==g||f[36]!==k?(u=[e.id,N,T,k,g,y],f[31]=e.id,f[32]=y,f[33]=N,f[34]=T,f[35]=g,f[36]=k,f[37]=u):u=f[37],(0,x.useEffect)(d,u),f[38]!==y||f[39]!==E?(m=()=>{v.current||E(y,!1)},h=[y,E],f[38]=y,f[39]=E,f[40]=m,f[41]=h):(m=f[40],h=f[41]),(0,x.useEffect)(m,h)}(f),!function(e){let t,n,a,i,s,r,o,l,c,d,u,m,h,f=(0,p.c)(42),{repository:g,labels:y,setLabels:_}=(0,tB.u)(),v=(0,x.useRef)(!0),b=(0,x.useRef)(e.id),j=(0,x.useRef)(void 0),w=iD(e);f[0]!==e.id?(t=()=>{b.current!==e.id&&(v.current=!0,j.current=void 0,b.current=e.id)},f[0]=e.id,f[1]=t):t=f[1],f[2]!==e.id||f[3]!==y?(n=[e.id,y],f[2]=e.id,f[3]=y,f[4]=n):n=f[4],(0,x.useEffect)(t,n),g?.nameWithOwner;let N=e.repository&&g?.nameWithOwner===e.repository,S=g?.owner.login,C=g?.name;f[5]!==e.labels?(a=e.labels??[],f[5]=e.labels,f[6]=a):a=f[6],f[7]!==S||f[8]!==C||f[9]!==a?(i={owner:S,repo:C,labels:a},f[7]=S,f[8]=C,f[9]=a,f[10]=i):i=f[10];let{isLoading:I,data:k}=function(e){let t,n,a,i,s=(0,p.c)(15),{owner:r,repo:o,labels:l}=e,c=(0,t9.useRelayEnvironment)();return s[0]!==c?(t=JSON.stringify(c),s[0]=c,s[1]=t):t=s[1],s[2]!==l||s[3]!==r||s[4]!==o||s[5]!==t?(n=["copilot-immersive-labels",t,r,o,l],s[2]=l,s[3]=r,s[4]=o,s[5]=t,s[6]=n):n=s[6],s[7]!==c||s[8]!==l||s[9]!==r||s[10]!==o?(a=async()=>{if(!r||!o||!l)return[];let e=await (0,iM.SD)({environment:c,query:iO,variables:{owner:r,repo:o,labelNames:l.join(","),count:l.length}}).toPromise();return(e?.repository?.labels?.nodes??[]).filter(iU).map(iF)},s[7]=c,s[8]=l,s[9]=r,s[10]=o,s[11]=a):a=s[11],s[12]!==n||s[13]!==a?(i={queryKey:n,queryFn:a},s[12]=n,s[13]=a,s[14]=i):i=s[14],(0,tr.I)(i)}(i),T=(null!=e.labels||!e.isStreaming)&&!I;f[11]!==N||f[12]!==T?(s=()=>{N&&!T&&(v.current=!0)},r=[N,T],f[11]=N,f[12]=T,f[13]=s,f[14]=r):(s=f[13],r=f[14]),(0,x.useEffect)(s,r),f[15]!==w?(o=(e,t)=>{void 0!==j.current&&(0,am.A)(j.current,e)||(w({labels:e.map(iV)},t),j.current=e)},f[15]=w,f[16]=o):o=f[16];let E=o;f[17]!==N||f[18]!==T||f[19]!==E||f[20]!==g||f[21]!==k||f[22]!==_?(c=()=>{N&&T&&null!=k&&(g?.viewerIssueCreationPermissions?.labelable?(_(k),E(k,!0)):null!=g&&(_([]),E([],!0)))},l=[N,T,E,g,k,_],f[17]=N,f[18]=T,f[19]=E,f[20]=g,f[21]=k,f[22]=_,f[23]=l,f[24]=c):(l=f[23],c=f[24]),(0,x.useEffect)(c,l),f[25]!==y||f[26]!==N||f[27]!==T||f[28]!==g||f[29]!==k?(d=()=>{if(!v.current||void 0===j.current||!N||!T||null==k||!g)return;let e=g.viewerIssueCreationPermissions?.labelable;e&&y===k?v.current=!1:e||0!==y.length||(v.current=!1)},f[25]=y,f[26]=N,f[27]=T,f[28]=g,f[29]=k,f[30]=d):d=f[30],f[31]!==e.id||f[32]!==y||f[33]!==N||f[34]!==T||f[35]!==g||f[36]!==k?(u=[e.id,N,T,k,g,y],f[31]=e.id,f[32]=y,f[33]=N,f[34]=T,f[35]=g,f[36]=k,f[37]=u):u=f[37],(0,x.useEffect)(d,u),f[38]!==y||f[39]!==E?(m=()=>{v.current||E(y,!1)},h=[y,E],f[38]=y,f[39]=E,f[40]=m,f[41]=h):(m=f[40],h=f[41]),(0,x.useEffect)(m,h)}(f),!function(e){let t,n,a,i,s,r,o,l,c,d,u,m,h,f=(0,p.c)(45),{repository:g,issueType:y,setIssueType:_}=(0,tB.u)(),v=(0,x.useRef)(!0),b=(0,x.useRef)(e.id),j=(0,x.useRef)(void 0),w=iD(e);f[0]!==e.id?(t=()=>{b.current!==e.id&&(v.current=!0,j.current=void 0,b.current=e.id)},f[0]=e.id,f[1]=t):t=f[1],f[2]!==e.id||f[3]!==y?(n=[e.id,y],f[2]=e.id,f[3]=y,f[4]=n):n=f[4],(0,x.useEffect)(t,n),g?.nameWithOwner;let N=e.repository&&g?.nameWithOwner===e.repository,S=g?.owner.login,C=g?.name;f[5]!==S||f[6]!==C?(a={owner:S,repo:C},f[5]=S,f[6]=C,f[7]=a):a=f[7];let{isLoading:I,data:k}=function(e){let t,n,a,i,s=(0,p.c)(13),{owner:r,repo:o}=e,l=(0,t9.useRelayEnvironment)();return s[0]!==l?(t=JSON.stringify(l),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==o||s[4]!==t?(n=["copilot-immersive-issue-types",t,r,o],s[2]=r,s[3]=o,s[4]=t,s[5]=n):n=s[5],s[6]!==l||s[7]!==r||s[8]!==o?(a=async()=>r&&o?await (0,iY.RX)(l,{owner:r,repo:o,pageSize:25}):[],s[6]=l,s[7]=r,s[8]=o,s[9]=a):a=s[9],s[10]!==n||s[11]!==a?(i={queryKey:n,queryFn:a},s[10]=n,s[11]=a,s[12]=i):i=s[12],(0,tr.I)(i)}(a);e:{let t;if(I||!e.issueType){i=null;break e}f[8]!==e.issueType||f[9]!==k?(t=k?.find(t=>iJ(t.name,e.issueType))||null,f[8]=e.issueType,f[9]=k,f[10]=t):t=f[10],i=t}let T=i,E=(null!=e.issueType||!e.isStreaming)&&!I;f[11]!==N||f[12]!==E?(s=()=>{N&&!E&&(v.current=!0)},r=[N,E],f[11]=N,f[12]=E,f[13]=s,f[14]=r):(s=f[13],r=f[14]),(0,x.useEffect)(s,r),f[15]!==w?(o=(e,t)=>{void 0!==j.current&&iJ(j.current?.name,e?.name)||(w({issueType:e?.name},t),j.current=e)},f[15]=w,f[16]=o):o=f[16];let L=o;f[17]!==N||f[18]!==E||f[19]!==L||f[20]!==g||f[21]!==T||f[22]!==k||f[23]!==_?(c=()=>{N&&E&&null!=k&&(g?.viewerIssueCreationPermissions?.typeable?(_(T),L(T,!0)):null!=g&&(_(null),L(null,!0)))},l=[N,E,L,g,T,k,_],f[17]=N,f[18]=E,f[19]=L,f[20]=g,f[21]=T,f[22]=k,f[23]=_,f[24]=l,f[25]=c):(l=f[24],c=f[25]),(0,x.useEffect)(c,l),f[26]!==y||f[27]!==N||f[28]!==E||f[29]!==g||f[30]!==T||f[31]!==k?(d=()=>{if(!v.current||void 0===j.current||!N||!E||null==k||!g)return;let e=g.viewerIssueCreationPermissions?.typeable;e&&y===T?v.current=!1:e||null!==y||(v.current=!1)},f[26]=y,f[27]=N,f[28]=E,f[29]=g,f[30]=T,f[31]=k,f[32]=d):d=f[32],f[33]!==e.id||f[34]!==y||f[35]!==N||f[36]!==E||f[37]!==g||f[38]!==T||f[39]!==k?(u=[e.id,N,E,k,T,g,y],f[33]=e.id,f[34]=y,f[35]=N,f[36]=E,f[37]=g,f[38]=T,f[39]=k,f[40]=u):u=f[40],(0,x.useEffect)(d,u),f[41]!==y||f[42]!==L?(m=()=>{v.current||L(y,!1)},h=[y,L],f[41]=y,f[42]=L,f[43]=m,f[44]=h):(m=f[43],h=f[44]),(0,x.useEffect)(m,h)}(f),!function(e){let t,n,a,i,s,r,o,l,c,d,u,m,h=(0,p.c)(43),{repository:f,milestone:g,setMilestone:y}=(0,tB.u)(),_=(0,x.useRef)(!0),v=(0,x.useRef)(e.id),b=(0,x.useRef)(void 0),j=iD(e);h[0]!==e.id?(t=()=>{v.current!==e.id&&(_.current=!0,b.current=void 0,v.current=e.id)},h[0]=e.id,h[1]=t):t=h[1],h[2]!==e.id||h[3]!==g?(n=[e.id,g],h[2]=e.id,h[3]=g,h[4]=n):n=h[4],(0,x.useEffect)(t,n),f?.nameWithOwner;let w=e.repository&&f?.nameWithOwner===e.repository,N=f?.owner.login,S=f?.name;h[5]!==e.milestone||h[6]!==N||h[7]!==S?(a={owner:N,repo:S,milestone:e.milestone},h[5]=e.milestone,h[6]=N,h[7]=S,h[8]=a):a=h[8];let{isLoading:C,data:I}=function({owner:e,repo:t,milestone:n}){let a=(0,t9.useRelayEnvironment)(),i=(0,ts.jE)();return(0,G.G7)("item_picker_milestone_tsq_migration")?(0,tr.I)({queryKey:["copilot-immersive-milestones",JSON.stringify(i),e,t,n],queryFn:async()=>e&&t&&n?(await (0,iW.U)(i,{owner:e,repo:t,query:n,count:1})).milestones:[]}):(0,tr.I)({queryKey:["copilot-immersive-milestones",JSON.stringify(a),e,t,n],queryFn:async()=>e&&t&&n?await (0,i$.Ud)(a,{owner:e,repo:t,query:n,count:1}):[]})}(a),k=I?.[0]??null,T=(null!=e.milestone||!e.isStreaming)&&!C;h[9]!==w||h[10]!==T?(i=()=>{w&&!T&&(_.current=!0)},s=[w,T],h[9]=w,h[10]=T,h[11]=i,h[12]=s):(i=h[11],s=h[12]),(0,x.useEffect)(i,s),h[13]!==j?(r=(e,t)=>{var n,a;(void 0===b.current||(n=b.current?.title,a=e?.title,n?.toLowerCase()!==a?.toLowerCase()))&&(j({milestone:e?.title},t),b.current=e)},h[13]=j,h[14]=r):r=h[14];let E=r;h[15]!==w||h[16]!==T||h[17]!==E||h[18]!==f||h[19]!==k||h[20]!==I||h[21]!==y?(o=()=>{w&&T&&null!=I&&(f?.viewerIssueCreationPermissions?.milestoneable?(y(k),E(k,!0)):null!=f&&(y(null),E(null,!0)))},l=[w,T,E,f,k,I,y],h[15]=w,h[16]=T,h[17]=E,h[18]=f,h[19]=k,h[20]=I,h[21]=y,h[22]=o,h[23]=l):(o=h[22],l=h[23]),(0,x.useEffect)(o,l),h[24]!==g||h[25]!==w||h[26]!==T||h[27]!==f||h[28]!==k||h[29]!==I?(c=()=>{if(!_.current||void 0===b.current||!w||!T||null==I||!f)return;let e=f.viewerIssueCreationPermissions?.milestoneable;e&&g===k?_.current=!1:e||null!==g||(_.current=!1)},h[24]=g,h[25]=w,h[26]=T,h[27]=f,h[28]=k,h[29]=I,h[30]=c):c=h[30],h[31]!==e.id||h[32]!==g||h[33]!==w||h[34]!==T||h[35]!==f||h[36]!==k||h[37]!==I?(d=[e.id,w,T,I,k,f,g],h[31]=e.id,h[32]=g,h[33]=w,h[34]=T,h[35]=f,h[36]=k,h[37]=I,h[38]=d):d=h[38],(0,x.useEffect)(c,d),h[39]!==g||h[40]!==E?(u=()=>{_.current||E(g,!1)},m=[g,E],h[39]=g,h[40]=E,h[41]=u,h[42]=m):(u=h[41],m=h[42]),(0,x.useEffect)(u,m)}(f),!function(e){let t,n,a,i,s,r,o,l,c,d,u,m,h=(0,p.c)(40),{repository:f,projects:g,setProjects:y}=(0,tB.u)(),_=(0,x.useRef)(!0),v=(0,x.useRef)(e.id),b=(0,x.useRef)(void 0),j=iD(e);h[0]!==e.id?(t=()=>{v.current!==e.id&&(_.current=!0,b.current=void 0,v.current=e.id)},h[0]=e.id,h[1]=t):t=h[1],h[2]!==e.id||h[3]!==g?(n=[e.id,g],h[2]=e.id,h[3]=g,h[4]=n):n=h[4],(0,x.useEffect)(t,n),f?.nameWithOwner;let w=e.repository&&f?.nameWithOwner===e.repository,N=f?.owner.login,S=f?.name;h[5]!==e.projects||h[6]!==N||h[7]!==S?(a={owner:N,repo:S,projects:e.projects},h[5]=e.projects,h[6]=N,h[7]=S,h[8]=a):a=h[8];let{isLoading:C,data:I}=function(e){let t,n,a,i,s=(0,p.c)(15),{owner:r,repo:o,projects:l}=e,c=(0,t9.useRelayEnvironment)();return s[0]!==c?(t=JSON.stringify(c),s[0]=c,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==o||s[5]!==t?(n=["copilot-immersive-projects",t,r,o,l],s[2]=r,s[3]=l,s[4]=o,s[5]=t,s[6]=n):n=s[6],s[7]!==c||s[8]!==r||s[9]!==l||s[10]!==o?(a=async()=>{if(!r||!o||!l||!l.length)return[];let{repositoryProjects:e,recentRepositoryProjects:t,ownerProjects:n,recentOwnerProjects:a}=await (0,iH.vj)(c,{owner:r,repo:o,query:l.join(",")}),i=[...[...e,...t,...n,...a].reduce(iK,new Map).values()],s=new Set(l.map(iG));return i.filter(iz).filter(iq).filter(e=>s.has(e.title.toLowerCase()))},s[7]=c,s[8]=r,s[9]=l,s[10]=o,s[11]=a):a=s[11],s[12]!==n||s[13]!==a?(i={queryKey:n,queryFn:a},s[12]=n,s[13]=a,s[14]=i):i=s[14],(0,tr.I)(i)}(a),k=(null!=e.projects||!e.isStreaming)&&!C;h[9]!==w||h[10]!==k?(i=()=>{w&&!k&&(_.current=!0)},s=[w,k],h[9]=w,h[10]=k,h[11]=i,h[12]=s):(i=h[11],s=h[12]),(0,x.useEffect)(i,s),h[13]!==j?(r=(e,t)=>{void 0!==b.current&&(0,am.A)(b.current,e)||(j({projects:e.map(iQ)},t),b.current=e)},h[13]=j,h[14]=r):r=h[14];let T=r;h[15]!==w||h[16]!==k||h[17]!==T||h[18]!==f||h[19]!==I||h[20]!==y?(o=()=>{w&&k&&null!=I&&(f?.viewerIssueCreationPermissions?.triageable?(y(I),T(I,!0)):null!=f&&(y([]),T([],!0)))},l=[w,k,T,f,I,y],h[15]=w,h[16]=k,h[17]=T,h[18]=f,h[19]=I,h[20]=y,h[21]=o,h[22]=l):(o=h[21],l=h[22]),(0,x.useEffect)(o,l),h[23]!==g||h[24]!==w||h[25]!==k||h[26]!==f||h[27]!==I?(c=()=>{if(!_.current||void 0===b.current||!w||!k||null==I||!f)return;let e=f.viewerIssueCreationPermissions?.triageable;e&&g===I?_.current=!1:e||0!==g.length||(_.current=!1)},h[23]=g,h[24]=w,h[25]=k,h[26]=f,h[27]=I,h[28]=c):c=h[28],h[29]!==e.id||h[30]!==g||h[31]!==w||h[32]!==k||h[33]!==f||h[34]!==I?(d=[e.id,w,k,I,f,g],h[29]=e.id,h[30]=g,h[31]=w,h[32]=k,h[33]=f,h[34]=I,h[35]=d):d=h[35],(0,x.useEffect)(c,d),h[36]!==g||h[37]!==T?(u=()=>{_.current||T(g,!1)},m=[g,T],h[36]=g,h[37]=T,h[38]=u,h[39]=m):(u=h[38],m=h[39]),(0,x.useEffect)(u,m)}(f),null==E){let e;if(void 0===f.repository&&f.isStreaming||v){let e;return h[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tI.Q,{optionConfig:{useViewportQueries:!1}}),h[10]=e):e=h[10],e}return h[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tL,{title:"Repository required",description:"Please select a repository above to continue creating your issue.",icon:ef.IssueDraftIcon}),h[11]=e):e=h[11],e}let V=B.messages.at(-1);if(V&&im(V,["switch-issue-template","switch-issue-repo"])){let e;return h[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tI.Q,{optionConfig:{useViewportQueries:!1}}),h[12]=e):e=h[12],e}let $=B.messages;if(h[13]!==k||h[14]!==f.messageId||h[15]!==O||h[16]!==B.isWaitingOnCopilot||h[17]!==B.messages||h[18]!==y){s=Symbol.for("react.early_return_sentinel");e:{let e=$.find(e=>e.id===f.messageId),t=e?.parentMessageIndex!==void 0?B.messages[e.parentMessageIndex]:void 0;if(e&&t){let n=y&&(0,nh.GQ)(y.data),a=0===Object.keys(k||{}).length,i=!B.isWaitingOnCopilot,r=e.messageIndex===B.messages.length-1,o="assistant"===e.role,l=im(t,["automatic-retry"]);if(n&&a)if(i)if(r&&o&&!l){let t;O(e,"Copilot failed to use the issue template, retrying\u2026"),h[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(tI.Q,{optionConfig:{useViewportQueries:!1}}),h[21]=t):t=h[21],s=t;break e}else{let e;h[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tL,{title:"Copilot failed to create an issue",description:"Copilot failed to use the issue template. Please retry or choose a different template.",icon:ef.IssueDraftIcon}),h[22]=e):e=h[22],s=e;break e}else{let e;h[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tI.Q,{optionConfig:{useViewportQueries:!1}}),h[20]=e):e=h[20],s=e;break e}}}h[13]=k,h[14]=f.messageId,h[15]=O,h[16]=B.isWaitingOnCopilot,h[17]=B.messages,h[18]=y,h[19]=s}else s=h[19];return s!==Symbol.for("react.early_return_sentinel")?s:(h[23]!==j?(r=e=>{R(e),j?.({name:e})},o=e=>{P(e),j?.({body:e})},h[23]=j,h[24]=r,h[25]=o):(r=h[24],o=h[25]),h[26]!==b?(l=e=>{let{issue:t}=e;return b?.(t)},h[26]=b,h[27]=l):l=h[27],h[28]!==k||h[29]!==D||h[30]!==f.messageId||h[31]!==_||h[32]!==N||h[33]!==F||h[34]!==S||h[35]!==E||h[36]!==l||h[37]!==r||h[38]!==o||h[39]!==y||h[40]!==A?(c=(0,m.jsx)(nG.e,{repository:E,title:A,body:D,setTitle:r,setBody:o,clearOnCreate:F,issueFormRef:_,onCreateSuccess:l,onCreateError:nK.l,onCancel:F,onBeforeCreate:N,defaultValuesById:k,selectedTemplate:y,onFieldChange:S,clientMutationId:f.messageId}),h[28]=k,h[29]=D,h[30]=f.messageId,h[31]=_,h[32]=N,h[33]=F,h[34]=S,h[35]=E,h[36]=l,h[37]=r,h[38]=o,h[39]=y,h[40]=A,h[41]=c):c=h[41],h[42]!==g?(d=g&&(0,m.jsx)(iE,{issueNode:g}),h[42]=g,h[43]=d):d=h[43],h[44]!==c||h[45]!==d?(u=(0,m.jsxs)(m.Fragment,{children:[c,d]}),h[44]=c,h[45]=d,h[46]=u):u=h[46],u)}try{iX.displayName||(iX.displayName="CreateIssueForm")}catch{}let iZ={container:"CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",toolbar:"CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",toolbarLeft:"CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",toolbarActions:"CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",feedbackLink:"CreateIssuePreview-module__feedbackLink--LbrC8",parentSelectorAnchor:"CreateIssuePreview-module__parentSelectorAnchor--qiqro",truncateText:"CreateIssuePreview-module__truncateText--Cyrbf",form:"CreateIssuePreview-module__form--X4Vwp",viewerContainer:"CreateIssuePreview-module__viewerContainer--bRxNh"};function i0({node:e,onItemSelected:t}){let n=(0,x.useMemo)(()=>{let t=[],n=e;for(;n;)t.push(n),n=n.parent;return t.reverse()},[e]);if(e.parent)return(0,m.jsxs)(eX.W,{children:[(0,m.jsxs)(eX.W.Button,{variant:"invisible",className:iZ.parentSelectorAnchor,children:[(0,m.jsx)("span",{className:"fgColor-muted",children:"Parent:"})," ",e?.parent?.item.name]}),(0,m.jsx)(eX.W.Overlay,{width:"large",children:(0,m.jsx)(ev.lF,{children:n.map((n,a)=>(0,m.jsxs)(ev.lF.Item,{active:n.item.tag===e.item.tag,onSelect:()=>t(n),sx:{paddingLeft:`calc(${a} * var(--base-size-12))`},children:[(0,m.jsx)(ev.lF.LeadingVisual,{children:(0,m.jsx)(tW,{...n.item})}),(0,m.jsx)("div",{className:iZ.truncateText,children:n.item.name})]},n.item.tag))})})]})}try{i0.displayName||(i0.displayName="ParentSelector")}catch{}var i1=n(3398);let i2={container:"RepositoryPicker-module__container--codNO",label:"RepositoryPicker-module__label--WplGo",ssoBanner:"RepositoryPicker-module__ssoBanner--TbTWl"};function i3(e){let t,n,a,i,s,r,o,l,c=(0,p.c)(23),{draftIssue:d,resolvedDraftIssueRepo:u,loadingDraftIssueRepo:h,topRepos:f}=e,[g,y]=(0,x.useState)(void 0),{repository:v,setRepository:b}=(0,tB.u)(),j=iD(d),w=function(e){let t,n=(0,p.c)(5),a=(0,W.b)(),i=(0,U.Pk)(),{updateItem:s}=(0,eY.xx)();return n[0]!==e||n[1]!==a||n[2]!==i||n[3]!==s?(t=async(t,n)=>{let r=`${n}/${t}`,o=[{type:"text",name:`timeline-event: {"type": "switch-issue-repo", "markdownContent": "Changing repository to ${r}\u{2026}"}`,text:`Update draft issue with tag \`${e.tag}\` to use the \`${r}\` repository. DO NOT ask the user for a template. If there is a template in the new repository that makes sense to use, use it. If you cannot find a template, draft a blank issue. Regenerate the title and description. Maintain all conversation context. Update the metadata to follow the new repository and template. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...r&&{repository:r},isUserEdited:!1};s(t),o.push((0,tR.PO)(t))}await a.sendChatMessage({thread:(0,nL.W)(i),content:`Use the ${r} repository`,references:[...o,...i.currentReferences],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},n[0]=e,n[1]=a,n[2]=i,n[3]=s,n[4]=t):t=n[4],t}(d);c[0]!==j||c[1]!==w||c[2]!==b?(t=e=>{null!=e&&(tu.W.draftIssueCodeSearch?w(e.name,e.owner.login):j({repository:e.nameWithOwner,template:void 0},!1),b(e))},c[0]=j,c[1]=w,c[2]=b,c[3]=t):t=c[3];let N=t;!function(e,t,n,a){let i,s,r,o,l,c,d,u,m,h,f,g=(0,p.c)(32),{repository:y,setRepository:_}=(0,tB.u)(),v=(0,x.useRef)(!0),b=(0,x.useRef)(null),j=(0,x.useRef)(void 0),w=iD(e);g[0]!==e.id?(i=()=>{b.current!==e.id&&(v.current=!0,j.current=void 0,b.current=e.id)},g[0]=e.id,g[1]=i):i=g[1],g[2]!==e.id||g[3]!==y?(s=[e.id,y],g[2]=e.id,g[3]=y,g[4]=s):s=g[4],(0,x.useEffect)(i,s);let N=(null!=e.repository||!e.isStreaming)&&!n;g[5]!==N?(r=()=>{N||(v.current=!0)},o=[N],g[5]=N,g[6]=r,g[7]=o):(r=g[6],o=g[7]),(0,x.useEffect)(r,o),g[8]!==w?(l=(e,t)=>{var n,a;(void 0===j.current||(n=j.current?.nameWithOwner,a=e?.nameWithOwner,n?.toLowerCase()!==a?.toLowerCase()))&&(w({repository:e?.nameWithOwner},t),j.current=e??null)},g[8]=w,g[9]=l):l=g[9];let S=l;g[10]!==N||g[11]!==S||g[12]!==t||g[13]!==_||g[14]!==a?(c=()=>{N&&(null!=t?(_(t),S(t,!0)):a.length>0?(_(a[0]),S(a[0],!0)):(_(void 0),S(void 0,!0)))},d=[N,S,t,_,a],g[10]=N,g[11]=S,g[12]=t,g[13]=_,g[14]=a,g[15]=c,g[16]=d):(c=g[15],d=g[16]),(0,x.useEffect)(c,d),g[17]!==y||g[18]!==N||g[19]!==t||g[20]!==a?(u=()=>{v.current&&void 0!==j.current&&N&&(null!=t&&t===y||null==t&&a.length>0&&y===a[0]?v.current=!1:null==t&&a.length<=0&&void 0===y&&(v.current=!1))},g[17]=y,g[18]=N,g[19]=t,g[20]=a,g[21]=u):u=g[21],g[22]!==e.id||g[23]!==y||g[24]!==N||g[25]!==t||g[26]!==a?(m=[e.id,N,t,a,y],g[22]=e.id,g[23]=y,g[24]=N,g[25]=t,g[26]=a,g[27]=m):m=g[27],(0,x.useEffect)(u,m),g[28]!==y||g[29]!==S?(f=()=>{v.current||S(y,!1)},h=[y,S],g[28]=y,g[29]=S,g[30]=h,g[31]=f):(h=g[30],f=g[31]),(0,x.useEffect)(f,h)}(d,u,h,f),c[4]!==v||c[5]!==h||c[6]!==f?(n=()=>{h||null==v||null==f||f.find(e=>e.id===v.id)||y(v.id)},a=[v,h,f],c[4]=v,c[5]=h,c[6]=f,c[7]=n,c[8]=a):(n=c[7],a=c[8]),(0,x.useEffect)(n,a);let{ssoOrganizations:S}=(0,U.Pk)();c[9]!==S?(i=S?.map(i5)??[],c[9]=S,c[10]=i):i=c[10];let C=i,I=v??f?.[0],k=d.isStreaming||h;return c[11]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(i1.A,{className:(0,_.$)(i2.label,"sr-only"),required:!0,children:"Repository"}),c[11]=s):s=c[11],c[12]!==k?(r={hasIssuesEnabled:!0,readonly:k},c[12]=k,c[13]=r):r=c[13],c[14]!==C?(o=(0,G.G7)("global_sso_banner")?void 0:(0,m.jsx)(V.x,{className:i2.ssoBanner,forceWrap:!0,protectedOrgs:C,maxVisibleOrgNames:0,redirectURI:i4}),c[14]=C,c[15]=o):o=c[15],c[16]!==g||c[17]!==N||c[18]!==I||c[19]!==r||c[20]!==o||c[21]!==f?(l=(0,m.jsxs)("div",{className:i2.container,children:[s,(0,m.jsx)(t6.f0,{initialRepository:I,onSelect:N,options:r,topRepositories:f,enforceAtleastOneSelected:!0,subtitle:o},g)]}),c[16]=g,c[17]=N,c[18]=I,c[19]=r,c[20]=o,c[21]=f,c[22]=l):l=c[22],l}function i4(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function i5(e){return e.login}try{i3.displayName||(i3.displayName="RepositoryPicker")}catch{}let i6=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s=[n,a,i,{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],r=[n,a,i,{alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerForm",selections:s,args:null,argumentDefinitions:[]}],storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerTemplate",selections:r,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:s,storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:r,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"453f03781d915408c3c338e5d346e0be",metadata:{},name:"TemplatePickerQuery",operationKind:"query",text:null}}}();i6.hash="582a468668cd62a5a95ad0f91f7ea5e5";let i7={kind:"InlineDataFragment",name:"TemplatePickerForm"};i7.hash="277026edd019ed6ef2c9d27b3d3d6c4a";let i8={kind:"InlineDataFragment",name:"TemplatePickerTemplate"};i8.hash="fa6038bb9389af7bff23ba3491dd0507";var i9=n(86391),se=n(69487);function st(e,t){return e.filename.localeCompare(t.filename)}function sn(e){return(0,se.readInlineData)(i7,e)}function sa(e){return(0,se.readInlineData)(i8,e)}function si(e){let t,n,a,i,s=(0,p.c)(10),{draftIssue:r}=e,{repository:o}=(0,tB.u)(),l=o?.owner.login,c=o?.name;s[0]!==l||s[1]!==c?(t={owner:l,repo:c},s[0]=l,s[1]=c,s[2]=t):t=s[2];let{data:d}=function(e){let t,n,a,i,s=(0,p.c)(13),{owner:r,repo:o}=e,l=(0,t9.useRelayEnvironment)();return s[0]!==l?(t=JSON.stringify(l),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==o||s[4]!==t?(n=["copilot-immersive-templates",t,r,o],s[2]=r,s[3]=o,s[4]=t,s[5]=n):n=s[5],s[6]!==l||s[7]!==r||s[8]!==o?(a=async()=>{if(!r||!o)return[];let e=await (0,se.fetchQuery)(l,i6,{owner:r,repo:o}).toPromise();return[...(e?.repository?.issueTemplates||[]).map(sa),...(e?.repository?.issueForms||[]).map(sn)].sort(st)},s[6]=l,s[7]=r,s[8]=o,s[9]=a):a=s[9],s[10]!==n||s[11]!==a?(i={queryKey:n,queryFn:a},s[10]=n,s[11]=a,s[12]=i):i=s[12],(0,tr.I)(i)}(t);if(null==d||0===d.length)return null;s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("span",{children:"/"}),s[3]=n):n=s[3],s[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(i1.A,{className:(0,_.$)(i2.label,"sr-only"),children:"Template"}),s[4]=a):a=s[4];let u=o?.nameWithOwner,h=o?.isBlankIssuesEnabled;return s[5]!==r||s[6]!==u||s[7]!==h||s[8]!==d?(i=(0,m.jsxs)(m.Fragment,{children:[n,(0,m.jsxs)("div",{className:i2.container,children:[a,(0,m.jsx)(ss,{templates:d,draftIssue:r,repositoryNwo:u,isBlankIssuesEnabled:h})]})]}),s[5]=r,s[6]=u,s[7]=h,s[8]=d,s[9]=i):i=s[9],i}function ss(e){let t,n,a,i,s,r,o,l,c=(0,p.c)(23),{templates:d,draftIssue:u,isBlankIssuesEnabled:h,repositoryNwo:f}=e,[g,y]=(0,x.useState)("");e:{let e;if(!g){t=d;break e}c[0]!==g||c[1]!==d?(e=d?.filter(e=>e.name?.toLowerCase().includes(g.toLowerCase())),c[0]=g,c[1]=d,c[2]=e):e=c[2],t=e}let _=t,[v,b]=(0,x.useState)(void 0);c[3]!==u.template||c[4]!==d?(n=()=>{if(!u.template)return void b(void 0);let e=u.template.split("/").findLast(Boolean);b(d?.find(t=>t.filename===e))},a=[d,u.template],c[3]=u.template,c[4]=d,c[5]=n,c[6]=a):(n=c[5],a=c[6]),(0,x.useEffect)(n,a);let j=function(){let e,t=(0,p.c)(4),n=(0,W.b)(),a=(0,U.Pk)(),{updateItem:i}=(0,eY.xx)();return t[0]!==n||t[1]!==a||t[2]!==i?(e=async(e,t,s)=>{let r=[{type:"text",name:`timeline-event: {"type": "switch-issue-template", "markdownContent": "${t?`Changing template to '${t.name}'\u{2026}`:"Removing template\u2026"}"}`,text:t?`Update the draft issue with tag \`${e.tag}\` with the \`${t.filename}\` template${s?` in the \`${s}\` repository`:""}. Regenerate the title and description following the new template. Maintain all conversation context. Update the metadata to follow the new template. DO NOT change the \`tag\` or \`parentTag\` fields.`:`Update draft issue with tag \`${e.tag}\` to remove the template formatting. Regenerate the title and description to follow a generic format. Maintain all conversation context. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...s&&{repository:s},isUserEdited:!1};i(t),r.push((0,tR.PO)(t))}await n.sendChatMessage({thread:(0,nL.W)(a),content:t?`Use the '${t.name}' template`:"Remove the template",references:[...r,...a.currentReferences],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},t[0]=n,t[1]=a,t[2]=i,t[3]=e):e=t[3],e}(),w=(0,x.useRef)(null),N="new-issue"===u.type&&null!=h&&!h;return c[7]!==_?(i=_??[],c[7]=_,c[8]=i):i=c[8],c[9]!==v?(s=v?[v]:[],c[9]=v,c[10]=s):s=c[10],c[11]!==v||c[12]!==N?(r=e=>(0,m.jsxs)(tn.Q,{trailingVisual:ef.TriangleDownIcon,...e,ref:w,children:[v?(0,m.jsx)("span",{children:v.name}):"Select a template",N&&(0,m.jsx)("span",{style:{color:"red",marginLeft:4},children:"*"})]}),c[11]=v,c[12]=N,c[13]=r):r=c[13],c[14]!==u||c[15]!==j||c[16]!==f?(o=async e=>{let[t]=e;b(t),await j(u,t,f)},c[14]=u,c[15]=j,c[16]=f,c[17]=o):o=c[17],c[18]!==i||c[19]!==s||c[20]!==r||c[21]!==o?(l=(0,m.jsx)(i9.O,{items:i,initialSelectedItems:s,placeholderText:"Search",selectionVariant:"single",filterItems:y,title:"Select a template",renderAnchor:r,getItemKey:so,convertToItemProps:sr,onSelectionChange:o,selectPanelRef:w,height:"large",width:"medium"}),c[18]=i,c[19]=s,c[20]=r,c[21]=o,c[22]=l):l=c[22],l}function sr(e){return{id:e.filename,text:e.name,description:("IssueTemplate"===e.__typename?e.about:e.description)||void 0,descriptionVariant:"block",source:e}}function so(e){return e.filename}try{si.displayName||(si.displayName="TemplatePicker")}catch{}try{ss.displayName||(ss.displayName="TemplatePickerInternal")}catch{}var sl=n(10286);function sc(e,t){return(0,x.useCallback)((n,a,i)=>{let s=n||`${sl.y}-${a}`;if(e.defaultValuesById&&e.defaultValuesById[s]===i)return;let r={...e,defaultValuesById:{...e.defaultValuesById}};r.defaultValuesById[s]=i,t(r,!1)},[e,t])}function sd(e){let t,n,a,i,s=(0,p.c)(13),{owner:r,repo:o}=e,l=(0,t9.useRelayEnvironment)();return s[0]!==l?(t=JSON.stringify(l),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==o||s[4]!==t?(n=["copilot-immersive-current-repo",t,r,o],s[2]=r,s[3]=o,s[4]=t,s[5]=n):n=s[5],s[6]!==l||s[7]!==r||s[8]!==o?(a=async()=>r&&o?await (0,t6.tZ)(l,r,o):null,s[6]=l,s[7]=r,s[8]=o,s[9]=a):a=s[9],s[10]!==n||s[11]!==a?(i={queryKey:n,queryFn:a},s[10]=n,s[11]=a,s[12]=i):i=s[12],(0,tr.I)(i)}function su(e){var t;let n,a,i,s,r,o,l,c,d,u,h,f,g,y,_,v,b,j,w,N,S,C,I,k,T,E,L,A=(0,p.c)(88),{isPreviewOpening:R,issue:D,onClose:P}=e,{openItem:O}=(0,eY.xx)(),B=nn();A[0]!==D.tag||A[1]!==B?(n=B.get(D.tag),A[0]=D.tag,A[1]=B,A[2]=n):n=A[2];let M=n,[F,V]=(0,x.useState)(R);A[3]!==F?(a=()=>{if(F){let e=setTimeout(()=>V(!1),400);return()=>clearTimeout(e)}},i=[F],A[3]=F,A[4]=a,A[5]=i):(a=A[4],i=A[5]),(0,x.useEffect)(a,i);let{selectedThreadID:$}=(0,U.Pk)(),{isLoading:W,data:H}=function(){let e,t,n,a,i=(0,p.c)(9),s=(0,t9.useRelayEnvironment)();return i[0]!==s?(e=JSON.stringify(s),i[0]=s,i[1]=e):e=i[1],i[2]!==e?(t=["copilot-immersive-top-repos",e],i[2]=e,i[3]=t):t=i[3],i[4]!==s?(n=async()=>await (0,t6.St)(s,{first:10,hasIssuesEnabled:!0}),i[4]=s,i[5]=n):n=i[5],i[6]!==t||i[7]!==n?(a={queryKey:t,queryFn:n},i[6]=t,i[7]=n,i[8]=a):a=i[8],(0,tr.I)(a)}();A[6]!==D.repository?(s=D.repository?.split("/")??[],A[6]=D.repository,A[7]=s):s=A[7];let[q,z]=s;A[8]!==q||A[9]!==z?(r={owner:q,repo:z},A[8]=q,A[9]=z,A[10]=r):r=A[10];let{isLoading:G,data:Y}=sd(r),[J,X]=(0,x.useState)(Y);A[11]!==Y?(o=()=>{Y&&X(Y)},l=[Y],A[11]=Y,A[12]=o,A[13]=l):(o=A[12],l=A[13]),(0,x.useEffect)(o,l);let Z=null!=J&&(!J.hasIssuesEnabled||null!=J.viewerInteractionLimitReasonHTML&&J.viewerInteractionLimitReasonHTML?.length>0),ee=nd(),et=nR();A[14]!==D.assignees||A[15]!==D.blockedByTags||A[16]!==D.parentTag||A[17]!==D.tag||A[18]!==D.template||A[19]!==D.type||A[20]!==et?(c=async e=>{await et([{draftType:D.type,tag:D.tag,parentTag:D.parentTag,blockedByTags:D.blockedByTags,template:D.template,repository:{databaseId:e.repository.databaseId,name:e.repository.name,owner:{login:e.repository.owner.login}},number:e.number,title:e.title,url:e.url,assignees:D.assignees??[]}])},A[14]=D.assignees,A[15]=D.blockedByTags,A[16]=D.parentTag,A[17]=D.tag,A[18]=D.template,A[19]=D.type,A[20]=et,A[21]=c):c=A[21];let en=c,ea=iD(D),ei=sc(D,ea),es=(0,x.useRef)(null),er=function(e){let t,n=(0,p.c)(2);n[0]!==e?(t=()=>!e.current||e.current.clientWidth<1024,n[0]=e,n[1]=t):t=n[1];let a=t;return(0,x.useSyncExternalStore)(sm,a)}(es),eo=M?.parent!=null,el=(0,x.useRef)(null),ec=Y?.id??"",ed=D.template||"";A[22]!==ed||A[23]!==ec?(d={repoId:ec,filename:ed},A[22]=ed,A[23]=ec,A[24]=d):d=A[24];let{isLoading:eu,data:em}=nN(d),ep=Y??void 0;A[25]!==ep?(u={repository:ep},A[25]=ep,A[26]=u):u=A[26];let eh=u;if(F||W||eu){let e;return A[27]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tI.Q,{optionConfig:{useViewportQueries:!1}}),A[27]=e):e=A[27],e}let eg=`${D.id}@${$}`;return A[28]!==er||A[29]!==eg?(h=(0,tS.S)({storageKeyPrefix:eg,insidePortal:er}),A[28]=er,A[29]=eg,A[30]=h):h=A[30],A[31]===Symbol.for("react.memo_cache_sentinel")?(f=(0,tk.G)("create-issue-preview"),A[31]=f):f=A[31],A[32]!==D?(g=(0,m.jsx)("div",{children:(0,m.jsx)(tP,{item:D})}),A[32]=D,A[33]=g):g=A[33],A[34]!==M||A[35]!==O||A[36]!==eo?(y=eo&&(0,m.jsx)("div",{children:(0,m.jsx)(i0,{node:M,onItemSelected:e=>O(e.item.id,!0)})}),A[34]=M,A[35]=O,A[36]=eo,A[37]=y):y=A[37],A[38]!==g||A[39]!==y?(_=(0,m.jsxs)("div",{className:iZ.toolbarLeft,children:[g,y]}),A[38]=g,A[39]=y,A[40]=_):_=A[40],A[41]===Symbol.for("react.memo_cache_sentinel")?(v=(0,m.jsx)(Q.A,{href:"https://gh.io/copilot-create-issues-feedback",className:iZ.feedbackLink,children:"Give feedback"}),A[41]=v):v=A[41],A[42]!==M||A[43]!==Z||A[44]!==P||A[45]!==em?(b=(0,m.jsxs)("div",{className:iZ.toolbarActions,children:[v,(0,m.jsx)(nz,{issueTemplate:em,issueNode:M,issueFormRef:el,noRepoAccess:Z,onClose:P})]}),A[42]=M,A[43]=Z,A[44]=P,A[45]=em,A[46]=b):b=A[46],A[47]!==_||A[48]!==b?(j=(0,m.jsxs)("div",{className:iZ.toolbar,children:[_,b]}),A[47]=_,A[48]=b,A[49]=j):j=A[49],A[50]!==H?(w=H||[],A[50]=H,A[51]=w):w=A[51],A[52]!==D||A[53]!==Y||A[54]!==G||A[55]!==w?(N=(0,m.jsx)(i3,{draftIssue:D,resolvedDraftIssueRepo:Y,loadingDraftIssueRepo:G,topRepos:w}),A[52]=D,A[53]=Y,A[54]=G,A[55]=w,A[56]=N):N=A[56],A[57]!==D?(S=(0,m.jsx)(si,{draftIssue:D}),A[57]=D,A[58]=S):S=A[58],A[59]!==N||A[60]!==S?(C=(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[N,S]}),A[59]=N,A[60]=S,A[61]=C):C=A[61],A[62]!==Y||A[63]!==Z?(I=Z&&((t=Y)&&!t.hasIssuesEnabled?(0,m.jsx)(tL,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue creating your issue.",icon:ef.IssueDraftIcon}):t&&t.viewerInteractionLimitReasonHTML?(0,m.jsx)(tL,{title:"You cannot create issues in this repository",description:t.viewerInteractionLimitReasonHTML,icon:ef.IssueDraftIcon}):void 0),A[62]=Y,A[63]=Z,A[64]=I):I=A[64],A[65]!==M||A[66]!==D||A[67]!==Y||A[68]!==G||A[69]!==Z||A[70]!==ea||A[71]!==P||A[72]!==en||A[73]!==ei||A[74]!==em||A[75]!==ee?(k=!Z&&(0,m.jsx)(iX,{draftIssue:D,issueNode:M,template:em??void 0,issueFormRef:el,loadingDraftIssueRepo:G,onCreate:en,onChange:ea,onClose:P,onBeforeCreate:e=>ee(Y,e),onFieldChange:ei}),A[65]=M,A[66]=D,A[67]=Y,A[68]=G,A[69]=Z,A[70]=ea,A[71]=P,A[72]=en,A[73]=ei,A[74]=em,A[75]=ee,A[76]=k):k=A[76],A[77]!==C||A[78]!==I||A[79]!==k?(T=(0,m.jsxs)("div",{className:iZ.form,children:[C,I,k]}),A[77]=C,A[78]=I,A[79]=k,A[80]=T):T=A[80],A[81]!==j||A[82]!==T?(E=(0,m.jsxs)("div",{className:iZ.container,ref:es,children:[j,T]}),A[81]=j,A[82]=T,A[83]=E):E=A[83],A[84]!==eh||A[85]!==h||A[86]!==E?(L=(0,m.jsx)(tC.S,{optionConfig:h,preselectedData:eh,...f,children:E}),A[84]=eh,A[85]=h,A[86]=E,A[87]=L):L=A[87],L}function sm(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{su.displayName||(su.displayName="CreateIssuePreview")}catch{}var sp=n(5378),sh=n(76158);function sf({isPreviewOpening:e,issue:t,onClose:n}){let[a,i]=(0,x.useState)(e),{openItem:s}=(0,eY.xx)(),r=nn().get(t.tag);(0,x.useEffect)(()=>{if(a){let e=setTimeout(()=>i(!1),400);return()=>clearTimeout(e)}},[a]);let o=(0,x.useMemo)(()=>(0,m.jsx)(e1.K,{icon:ef.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(t.href,"_blank")}}),[t.href]),l=(0,x.useMemo)(()=>({navigate:nK.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,titleAs:"h2",useViewportQueries:!1,withLiveUpdates:!0,onIssueDelete:n,additionalHeaderActions:o,showRepositoryPill:!0}),[n,o]),c=(0,x.useMemo)(()=>{let[e,n]=t.repository.split("/");if(e&&n)return{owner:e,repo:n,number:t.number,type:"Issue"}},[t.number,t.repository]);return a||!c?(0,m.jsx)(tI.Q,{optionConfig:l}):(0,m.jsxs)("div",{className:iZ.container,children:[(0,m.jsxs)("div",{className:iZ.toolbar,children:[(0,m.jsx)("div",{className:iZ.toolbarLeft,children:r.parent&&(0,m.jsx)(i0,{node:r,onItemSelected:e=>s(e.item.id,!0)})}),(0,m.jsxs)("div",{className:iZ.toolbarActions,children:[(0,m.jsx)(Q.A,{href:"https://gh.io/copilot-create-issues-feedback",className:iZ.feedbackLink,children:"Give feedback"}),(0,m.jsx)(nq,{issueNode:r,onSuccess:n})]})]}),(0,m.jsx)("div",{className:iZ.viewerContainer,children:(0,m.jsx)(sh.e,{children:(0,m.jsx)(sp.cI,{itemIdentifier:c,optionConfig:l})})})]})}try{sf.displayName||(sf.displayName="ExistingIssuePreview")}catch{}let sg=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"updateIssueMutationGetUpdatedIssueQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[n,a,i,s,r,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[n,o,l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[c],storageKey:null}],storageKey:null}],type:"Issue",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"updateIssueMutationGetUpdatedIssueQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[d,n,{kind:"InlineFragment",selections:[a,i,s,r,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[n,o,l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[d,c,n],storageKey:null}],storageKey:null}],type:"Issue",abstractKey:null}],storageKey:null}]},params:{id:"3afd88af9dfb245f31b08959a4ac24ae",metadata:{},name:"updateIssueMutationGetUpdatedIssueQuery",operationKind:"query",text:null}}}();sg.hash="60fe740f3e19e398a60bbbfacf43f61a";let sy=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateIssuePayload",kind:"LinkedField",name:"updateIssue",plural:!1,selections:[{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bodyVersion",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"updateIssueMutationContentOnlyMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"updateIssueMutationContentOnlyMutation",selections:t},params:{id:"d1d9840a47a7be6dd0ad285ce57f1c7f",metadata:{},name:"updateIssueMutationContentOnlyMutation",operationKind:"mutation",text:null}}}();sy.hash="470cf4272c31ec8565dec1240c55030a";let s_=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"DeleteProjectV2ItemPayload",kind:"LinkedField",name:"deleteProjectV2Item",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"deletedItemId",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"updateIssueMutationDeleteProjectMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"updateIssueMutationDeleteProjectMutation",selections:t},params:{id:"ad9e6eaf34525daacc17362653e63272",metadata:{},name:"updateIssueMutationDeleteProjectMutation",operationKind:"mutation",text:null}}}();s_.hash="f03ef95aad392077538992e2c84a9752";var sx=n(1667),sv=n(5547),sb=n(21052),sj=n(25779),sw=n(99892);async function sN({environment:e,currentIssue:t,proposedIssue:n,onCompleted:a,onError:i}){let s=t.assignees?.nodes?.filter(e=>null!=e).map(e=>e.login)||[],r=n.assignees?.map(e=>e.login)||[],o=void 0!==n.assignees&&!(0,am.A)(s.sort(),r.sort()),l=t.labels?.nodes?.filter(e=>null!=e).map(e=>e.name)||[],c=n.labels?.map(e=>e.name)||[],d=void 0!==n.labels&&!(0,am.A)(l.sort(),c.sort()),u=void 0!==n.milestone&&(n.milestone?.title||null)!==(t.milestone?.title||null),m=void 0!==n.issueTypeId,p=t.projectItems?.nodes?.filter(e=>null!=e).map(e=>e.project).filter(e=>null!=e).map(e=>e.id).filter(Boolean)||[],h=n.projects?.map(e=>e.id)||[],f=void 0!==n.projects&&!(0,am.A)(p.sort(),h.sort()),g=void 0!==n.title&&n.title!==t.title,y=void 0!==n.body&&n.body!==(t.body||""),_=[],x=async()=>{if(!a)return;let i={id:t.id,title:n.title??t.title,body:n.body??t.body,number:0,url:"",repository:{id:"",databaseId:0,name:"",owner:{login:""}}};try{let n=await (0,t9.fetchQuery)(e,sg,{id:t.id}).toPromise();n?.node&&n.node.repository?a({issue:n.node}):a({issue:i})}catch{a({issue:i})}};if(d){let a=new Promise((a,s)=>{(0,sb.N)({environment:e,input:{labelableId:t.id,labels:n.labels||[],labelableTypeName:"Issue"},onCompleted:()=>{a()},onError:e=>{i?.(e),s(e)}})});_.push(a)}if(o){let a=new Promise((a,s)=>{(0,sx.j)({environment:e,input:{issueId:t.id,assignedActors:n.assignees||[],participants:[]},onCompleted:()=>{a()},onError:e=>{i?.(e),s(e)}})});_.push(a)}if(u){let a=new Promise((a,s)=>{(0,sj.v)({environment:e,input:{issueId:t.id,milestone:n.milestone??null},onCompleted:()=>{a()},onError:e=>{i?.(e),s(e)}})});_.push(a)}if(m){let a=new Promise((a,s)=>{(0,sv._)({environment:e,input:{issueId:t.id,issueTypeId:n.issueTypeId||null},onCompleted:()=>{a()},onError:e=>{i?.(e),s(e)}})});_.push(a)}if(f){let a=new Promise((a,s)=>{let r=t.projectItems?.nodes||[];(async()=>{try{await sS(t.id,n.projects||[],r,e),a()}catch(n){let e=n instanceof Error?n.message:"Project update failed",t=Error(`Project update failed: ${e}`);i?.(t),s(t)}})()});_.push(a)}if(g||y){let a=new Promise((a,s)=>{(0,t9.commitMutation)(e,{mutation:sy,variables:{input:{id:t.id,clientMutationId:`update-issue-content-${Date.now()}`,...g&&{title:n.title},...y&&{body:n.body,bodyVersion:n.bodyVersion}}},onCompleted:()=>{a()},onError:e=>{i?.(e),s(e)}})});_.push(a)}if(0===_.length){a&&a({issue:{id:t.id,title:t.title,body:t.body,number:t.databaseId,url:"",repository:{id:"",databaseId:0,name:"",owner:{login:""}}}});return}try{await Promise.all(_),await x()}catch{}}async function sS(e,t,n,a){let i=n.filter(e=>null!=e&&null!=e.project),s=t.filter(e=>!i.some(t=>t?.project.id===e.id)),r=i.filter(e=>!t.some(t=>t.id===e?.project.id));if(0===s.length&&0===r.length)return;let o=[],l=[];for(let t of s){let n=new Promise(n=>{(0,sw.Z)({environment:a,projectId:t.id,issueId:e,onCompleted:()=>{n()},onError:e=>{o.push({projectId:t.id,projectTitle:t.title,operation:"add",error:e.message}),n()}})});l.push(n)}for(let e of r){let t=new Promise(t=>{(0,t9.commitMutation)(a,{mutation:s_,variables:{input:{itemId:e?.id,projectId:e?.project.id}},onCompleted:()=>{t()},onError:n=>{o.push({projectId:e?.project.id||"unknown",projectTitle:e?.project.title||"unknown",operation:"remove",error:n.message}),t()}})});l.push(t)}if(await Promise.all(l),o.length>0){let e=`Failed to update ${o.length} project(s): ${o.map(e=>`${e.operation} "${e.projectTitle}" (${e.error})`).join(", ")}`,t=Error("Unable to update issue projects");throw t.projectErrors=o,t.detailedMessage=e,t}}function sC({issueRepo:e,draftIssue:t,existingIssue:n,template:a,issueFormRef:i,onUpdate:s,onUpdateError:r,onClose:o}){let l=(0,t9.useRelayEnvironment)(),[c,d]=(0,x.useState)(!1),{clearSessionData:u,assignees:p,labels:h,milestone:f,issueType:g,projects:y}=(0,tB.u)(),_=(0,x.useCallback)(()=>{let t=e.viewerIssueCreationPermissions;return{assignees:t?.assignable?p:void 0,labels:t?.labelable?h:void 0,milestone:t?.milestoneable?f:void 0,issueTypeId:t?.typeable?g?.id||null:void 0,projects:t?.triageable?y:void 0}},[e.viewerIssueCreationPermissions,p,h,f,g,y]),v=(0,x.useCallback)(()=>{u(),i.current?.clearSessionStorage()},[u,i]),b=(0,x.useCallback)(()=>{v(),o?.()},[v,o]),j=nd(),w=(0,x.useCallback)(async c=>{c.preventDefault(),d(!0);try{let c=t.name,u=(0,np.O_)(c);if(!u.isValid)return void r?.({type:"INVALID_TITLE",message:u.errorMessage});let m=t.body??"";if(a&&(0,nh.GQ)(a.data)&&i.current){let e=i.current.getInvalidInputs();if(e.length>0){r?.({type:"INVALID_FORM_INPUTS",message:"Please fix the highlighted errors in the form."}),e[0]?.focus();return}m=i.current.markdown()??""}m=await j(e,m);let p=_(),h={id:n.id,title:c,body:m,bodyVersion:t.bodyVersion,assignees:p.assignees,labels:p.labels,milestone:p.milestone,issueTypeId:p.issueTypeId,projects:p.projects},f=sN({environment:l,currentIssue:n,proposedIssue:h,onCompleted:({issue:e})=>{b(),o(),s?.(e)},onError:e=>{d(!1),r?.(e)}});await f}catch{r?.({type:"OTHER"})}finally{d(!1)}},[b,t.body,t.bodyVersion,t.name,l,n,_,i,e,o,s,r,a,j]);return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(tn.Q,{variant:"primary","data-testid":"update-issue-button",onClick:w,disabled:c||!t.bodyVersion,children:c?"Updating...":"Update"})})}try{sC.displayName||(sC.displayName="UpdateIssueButton")}catch{}function sI({isPreviewOpening:e,issue:t,onClose:n}){var a,i,s,r;let[o,l]=(0,x.useState)(e),[c,d]=(0,x.useState)(null);(0,x.useEffect)(()=>{if(o){let e=setTimeout(()=>l(!1),400);return()=>clearTimeout(e)}},[o]);let{selectedThreadID:u}=(0,U.Pk)(),h=null!=t.repository||!t.isStreaming,f=null!=t.issueNumber||!t.isStreaming,g=(null!=t.bodyVersion||!t.isStreaming)&&!t.bodyVersion,[y,_]=t.repository?.split("/")??[],{isLoading:v,data:b}=sd({owner:y,repo:_}),{isLoading:j,data:w,forceFetchFromNetwork:N}=function(e){let t,n,a,i,s,r,o=(0,p.c)(23),{owner:l,repo:c,issueNumber:d}=e,u=(0,t9.useRelayEnvironment)();o[0]!==u?(t=JSON.stringify(u),o[0]=u,o[1]=t):t=o[1],o[2]!==d||o[3]!==l||o[4]!==c||o[5]!==t?(n=["copilot-immersive-issue",t,l,c,d],o[2]=d,o[3]=l,o[4]=c,o[5]=t,o[6]=n):n=o[6],o[7]!==u||o[8]!==d||o[9]!==l||o[10]!==c?(a=async()=>l&&c&&d?await nb(u,l,c,d):null,o[7]=u,o[8]=d,o[9]=l,o[10]=c,o[11]=a):a=o[11],o[12]!==n||o[13]!==a?(i={queryKey:n,queryFn:a},o[12]=n,o[13]=a,o[14]=i):i=o[14];let m=(0,tr.I)(i);o[15]!==u||o[16]!==d||o[17]!==l||o[18]!==c?(s=async()=>l&&c&&d?await nb(u,l,c,d,!0):null,o[15]=u,o[16]=d,o[17]=l,o[18]=c,o[19]=s):s=o[19];let h=s;return o[20]!==h||o[21]!==m?(r={...m,forceFetchFromNetwork:h},o[20]=h,o[21]=m,o[22]=r):r=o[22],r}({owner:y,repo:_,issueNumber:t.issueNumber}),{isLoading:S,data:C}=nN({repoId:b?.id??"",filename:t.template||""}),I=(0,x.useMemo)(()=>null!=b&&(!b.hasIssuesEnabled||null!=b.viewerInteractionLimitReasonHTML&&b.viewerInteractionLimitReasonHTML?.length>0),[b]),k=nd(),T=(0,x.useMemo)(()=>{if(!b?.viewerIssueCreationPermissions||j||!w)return t;let e=b.viewerIssueCreationPermissions,n={...t};return!e.assignable&&w.assignees?.nodes&&(n.assignees=w.assignees.nodes.filter(e=>!!e).map(e=>e.login)),!e.labelable&&w.labels?.nodes&&(n.labels=w.labels.nodes.filter(e=>!!e).map(e=>e.name)),!e.milestoneable&&w.milestone&&(n.milestone=w.milestone.title),!e.typeable&&w.issueType&&(n.issueType=w.issueType.name),!e.triageable&&w.projectItems?.nodes&&(n.projects=w.projectItems.nodes.filter(e=>!!e).map(e=>e.project.title)),n},[t,b?.viewerIssueCreationPermissions,w,j]),E=nR(),L=(0,x.useCallback)(async e=>{await N(),await E([{draftType:t.type,tag:t.tag,parentTag:t.parentTag,blockedByTags:t.blockedByTags,repository:{databaseId:e.repository.databaseId,name:e.repository.name,owner:{login:e.repository.owner.login}},number:e.number,title:e.title,url:e.url,template:void 0,assignees:t.assignees??[]}])},[E,t.type,t.tag,t.parentTag,t.blockedByTags,t.assignees,N]),A=(0,x.useCallback)(e=>{let n="OTHER";e instanceof Error?(e.cause&&Array.isArray(e.cause)&&e.cause.length>0&&(n=e.cause[0].type),(0,tm.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:e.message,issueId:t.id,errorType:n}),d({type:n})):(n=e.type,(0,tm.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:`Issue update failed: ${e.type}`,draftIssueId:t.id,sourceIssueId:w?.databaseId,repository:t.repository,errorType:n,...e.projectErrors&&{projectErrorCount:e.projectErrors.length,projectErrors:JSON.stringify(e.projectErrors.map(e=>e.error))}}),d(e))},[w?.databaseId,t.id,t.repository]),R=iD(t),D=sc(t,R),P=(0,x.useRef)(null),O=function(e){let t,n=(0,p.c)(2);n[0]!==e?(t=()=>!e.current||e.current.clientWidth<1024,n[0]=e,n[1]=t):t=n[1];let a=t;return(0,x.useSyncExternalStore)(sk,a)}(P),B=(0,x.useRef)(null),M=(0,x.useMemo)(()=>{let e,t;if(!c)return null;switch(c.type){case"FORBIDDEN":e="Permission Denied",t="You don't have permission to update this issue. Please contact the repo owner.";break;case"NOT_FOUND":e="Issue Not Found",t="The issue you are trying to update could not be found or no longer exists.";break;case"INVALID_TITLE":e="Invalid issue title",t=c.message;break;case"INVALID_FORM_INPUTS":e="Invalid form inputs",t=c.message;break;case"STALE_DATA":e="Issue Outdated",t="The issue you are editing has changed. Please copy your edits and have Copilot draft a new update.";break;case"PROJECT_UPDATE_FAILED":{e="Failed to update project assignment";let n=c.projectErrors??[];if(n.length>0){let e=n.filter(e=>"add"===e.operation),a=n.filter(e=>"remove"===e.operation),i=[];e.length>0&&i.push(`Failed to add to ${e.length} project(s): ${e.map(e=>`"${e.projectTitle}"`).join(", ")}`),a.length>0&&i.push(`Failed to remove ${a.length} project(s): ${a.map(e=>`"${e.projectTitle}"`).join(", ")}`),t=`The issue was updated successfully, but there were problems with project assignments. ${i.join(". ")}.`}else t="The issue was updated successfully, but there were problems with project assignments.";break}default:e="An error has occurred",t="Please try again later."}let n="PROJECT_UPDATE_FAILED"===c.type?"warning":"critical";return(0,m.jsx)(q.l,{variant:n,title:e,description:t})},[c]),F=(0,x.useMemo)(()=>({repository:b??void 0}),[b]);return o||!h||!f||j||v||S?(0,m.jsx)(tI.Q,{optionConfig:{useViewportQueries:!1}}):b?I?(a=b).hasIssuesEnabled?a.viewerInteractionLimitReasonHTML?(0,m.jsx)(tL,{title:"You cannot update issues in this repository",description:a.viewerInteractionLimitReasonHTML,icon:ef.IssueDraftIcon}):void 0:(0,m.jsx)(tL,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue updating your issue.",icon:ef.IssueDraftIcon}):w?g?(0,m.jsx)(tL,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:ef.IssueDraftIcon}):(0,m.jsx)(tC.S,{optionConfig:(0,tS.S)({storageKeyPrefix:`${t.id}@${u}`,insidePortal:O}),preselectedData:F,...(0,tk.G)("update-issue-preview"),children:(0,m.jsxs)("div",{className:iZ.container,ref:P,children:[(0,m.jsxs)("div",{className:iZ.toolbar,children:[(0,m.jsx)("div",{className:iZ.toolbarLeft,children:(0,m.jsx)(tP,{item:t})}),(0,m.jsxs)("div",{className:iZ.toolbarActions,children:[(0,m.jsx)(Q.A,{href:"https://gh.io/copilot-create-issues-feedback",className:iZ.feedbackLink,children:"Give feedback"}),(0,m.jsx)(sC,{issueRepo:b,draftIssue:t,existingIssue:w,template:C??void 0,issueFormRef:B,onUpdate:L,onUpdateError:A,onClose:n})]})]}),(0,m.jsxs)("div",{className:iZ.form,children:[c&&M,(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[(0,m.jsx)(ef.RepoIcon,{}),(0,m.jsx)("b",{children:`${b.owner.login}/${b.name}`}),(0,m.jsx)(si,{draftIssue:T})]}),(0,m.jsx)(iX,{draftIssue:T,template:C??void 0,issueFormRef:B,onChange:R,onClose:n,onBeforeCreate:e=>k(b,e),onFieldChange:D})]})]})}):(i=t.repository,(s=t.issueNumber)?(0,m.jsx)(tL,{title:`The target issue ${i}#${s} is not found`,description:"Please verify if the issue exists and is accessible before trying again.",icon:ef.IssueDraftIcon}):(0,m.jsx)(tL,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:ef.IssueDraftIcon})):(r=t.repository)?(0,m.jsx)(tL,{title:`${r} is not found`,description:"Please verify if the repository exists and is accessible before trying again.",icon:ef.IssueDraftIcon}):(0,m.jsx)(tL,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:ef.IssueDraftIcon})}function sk(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{sI.displayName||(sI.displayName="UpdateIssuePreview")}catch{}var sT=n(98755);function sE(e,t,n){let a="head"===n?e.headFile:e.baseFile,i=a.reference,s=(0,W.b)(),{isLoading:r,isError:o,data:l}=(0,tr.I)({queryKey:["copilot-reference-preview","copilot","references","file",i?(0,nQ.Vb)(i):void 0,n],queryFn:async()=>{if(!i||"file"!==i.type||""!==a.value)return null;let r=await s.service.hydrateReference(i);return r.ok?(t({...e,["head"===n?"headFile":"baseFile"]:{...a,value:r.payload.contents,isStreaming:!1}}),r.payload):null},staleTime:1/0});return(0,x.useEffect)(()=>{l?.contents&&a.value!==l.contents&&t({...e,["head"===n?"headFile":"baseFile"]:{...a,value:l.contents,isStreaming:!1}})},[l?.contents,e,t,a,n]),{isLoading:r,isError:o,data:l}}function sL(e){let t,n,a,i,s=(0,p.c)(12);if(s[0]!==e.language||s[1]!==e.value){let i,r,o=new Blob([e.value]).size;s[5]===Symbol.for("react.memo_cache_sentinel")?(i=new Set(["markdown","html"]),s[5]=i):i=s[5];let l=i;s[6]!==e.value?(r=e.value.split(`
`),s[6]=e.value,s[7]=r):r=s[7],t=r.length,n=l.has(e.language),a=function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(o),s[0]=e.language,s[1]=e.value,s[2]=t,s[3]=n,s[4]=a}else t=s[2],n=s[3],a=s[4];return s[8]!==t||s[9]!==n||s[10]!==a?(i={linesOfCode:t,isPreviewable:n,size:a},s[8]=t,s[9]=n,s[10]=a,s[11]=i):i=s[11],i}let sA={container:"DiffPreview-module__container--BN04s",toolbar:"DiffPreview-module__toolbar--RiBuK",toolbarLeft:"DiffPreview-module__toolbarLeft--o4LQ6",toolbarLoC:"DiffPreview-module__toolbarLoC--xR8Qi",toolbarActions:"DiffPreview-module__toolbarActions--EAoyT"};var sR=n(83510),sD=n(34522);let sP={container:"CodeMirrorDiff-module__container--RCtmx",newFile:"CodeMirrorDiff-module__newFile--vX9DQ",deletedFile:"CodeMirrorDiff-module__deletedFile--_w4wx"};var sO=n(53839),sB=n(63133),sM=n(98325),sF=n(71381),sU=n(74713),sV=n(11636),s$=n(18351),sW=n(24774),sH=n(41185);function sq(e){return e.left&&e.right?"split"===e.view?(0,m.jsx)(sz,{...e}):(0,m.jsx)(sG,{...e}):(0,m.jsx)(sK,{...e})}function sz(e){let t=(0,x.useRef)(null);return!function({fileName:e,left:t,leftLabelledBy:n,parentRef:a,right:i,rightLabelledBy:s,spacing:r}){let o=(0,x.useRef)(null),l=(0,x.useMemo)(()=>new sO.xx,[]),c=(0,x.useMemo)(()=>new sO.xx,[]),d=(0,x.useMemo)(()=>new sO.xx,[]),[u,m]=(0,x.useMemo)(()=>{let e=[...sM.o,...(0,sF.u)(r),(0,sU.h)(),c.of([]),l.of([]),d.of([(0,sV.O)()]),(0,sH.T)()],t=[(0,s$.I)(n),sW.Lz.contentAttributes.of({"aria-labelledby":n})],a=[(0,s$.I)(s),sW.Lz.contentAttributes.of({"aria-labelledby":s})];return[e.concat(t),e.concat(a)]},[r,c,l,d,n,s]);(0,x.useEffect)(()=>{let n=a.current;if(n)return o.current=new sR.SV({a:{doc:t,extensions:u},b:{doc:i,extensions:m},parent:n,gutter:!1}),(0,sB.r)({autoCompleteCompartment:l,fileName:e,languageCompartment:c,managedExtensions:[],themeCompartment:d,view:o.current?.a,viewB:o.current?.b}),()=>o.current?.destroy()},[])}({...e,parentRef:t}),(0,m.jsx)("div",{ref:t,className:sP.container})}function sG(e){let t=(0,x.useMemo)(()=>[(0,sR.ex)({original:e.left,mergeControls:!1,gutter:!1})],[e.left]);return(0,m.jsx)(sD.default,{ariaLabelledBy:e.unifiedLabelledBy,containerClassName:sP.container,fileName:e.fileName,height:"100%",isReadOnly:!0,spacing:e.spacing,value:e.right,onChange:nK.l,placeholder:"Loading...",hideHelp:!0,extensions:t})}function sK(e){let t=""===e.left?sP.newFile:sP.deletedFile,n=e.right||e.left;return(0,m.jsx)(sD.default,{ariaLabelledBy:e.unifiedLabelledBy,containerClassName:t,fileName:e.fileName,height:"100%",isReadOnly:!0,spacing:e.spacing,value:n,onChange:nK.l,placeholder:"Loading...",hideHelp:!0})}try{sq.displayName||(sq.displayName="CodeMirrorDiff")}catch{}try{sz.displayName||(sz.displayName="CodeMirrorDiffSplit")}catch{}try{sG.displayName||(sG.displayName="CodeMirrorDiffUnified")}catch{}try{sK.displayName||(sK.displayName="CodeMirrorDiffNewOrDeletedFile")}catch{}function sQ(e){let t,n,a=(0,p.c)(7),{language:i,value:s}=e;a[0]!==i||a[1]!==s?(t=function({language:e,value:t}){var n;let a=(n=t,/^\t/m.test(n)?"tab":"space");return{indentUnit:function(e,t){if("space"!==t)return 4;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,a),indentWithTabs:"tab"===a,lineWrapping:function(e){let t=(0,n6.vL)(e);return t?.wrap??!1}(e)}}({language:i,value:s}),a[0]=i,a[1]=s,a[2]=t):t=a[2];let r=t;return a[3]!==r.indentUnit||a[4]!==r.indentWithTabs||a[5]!==r.lineWrapping?(n={indentUnit:r.indentUnit,indentWithTabs:r.indentWithTabs,lineWrapping:r.lineWrapping},a[3]=r.indentUnit,a[4]=r.indentWithTabs,a[5]=r.lineWrapping,a[6]=n):n=a[6],n}function sY(e){let t,n,a,i,s,r=(0,p.c)(24),{left:o,right:l,view:c}=e,d=(0,x.useId)(),u=(0,x.useId)(),h=(0,x.useId)(),f=sQ(o);return r[0]!==o.name||r[1]!==d?(t=(0,m.jsxs)("span",{id:d,className:"sr-only",children:[o.name," original file contents"]}),r[0]=o.name,r[1]=d,r[2]=t):t=r[2],r[3]!==l.name||r[4]!==u?(n=(0,m.jsxs)("span",{id:u,className:"sr-only",children:[l.name," modified file contents"]}),r[3]=l.name,r[4]=u,r[5]=n):n=r[5],r[6]!==o.name||r[7]!==l.name||r[8]!==h?(a=(0,m.jsxs)("span",{id:h,className:"sr-only",children:[o.name," and ",l.name," unified diff view"]}),r[6]=o.name,r[7]=l.name,r[8]=h,r[9]=a):a=r[9],r[10]!==f||r[11]!==o.name||r[12]!==o.value||r[13]!==d||r[14]!==l.value||r[15]!==u||r[16]!==h||r[17]!==c?(i=(0,m.jsx)(sq,{fileName:o.name,left:o.value,leftLabelledBy:d,right:l.value,rightLabelledBy:u,spacing:f,unifiedLabelledBy:h,view:c}),r[10]=f,r[11]=o.name,r[12]=o.value,r[13]=d,r[14]=l.value,r[15]=u,r[16]=h,r[17]=c,r[18]=i):i=r[18],r[19]!==t||r[20]!==n||r[21]!==a||r[22]!==i?(s=(0,m.jsxs)("div",{children:[t,n,a,i]}),r[19]=t,r[20]=n,r[21]=a,r[22]=i,r[23]=s):s=r[23],s}try{sY.displayName||(sY.displayName="DiffView")}catch{}function sJ(e){let t,n,a,i,s,r,o,l=(0,p.c)(15),{isUnifiedDiff:c,setIsUnifiedDiff:d}=e;l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(e1.K,{icon:ef.GearIcon,"aria-label":"Open diff view settings",variant:"invisible"})}),l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(eZ.l.GroupHeading,{children:"Layout"}),l[1]=n):n=l[1],l[2]!==d?(a=()=>d(!0),l[2]=d,l[3]=a):a=l[3],l[4]!==c||l[5]!==a?(i=(0,m.jsx)(eZ.l.Item,{selected:c,onSelect:a,children:"Unified"}),l[4]=c,l[5]=a,l[6]=i):i=l[6];let u=!c;return l[7]!==d?(s=()=>d(!1),l[7]=d,l[8]=s):s=l[8],l[9]!==u||l[10]!==s?(r=(0,m.jsx)(eZ.l.Item,{selected:u,onSelect:s,children:"Split"}),l[9]=u,l[10]=s,l[11]=r):r=l[11],l[12]!==i||l[13]!==r?(o=(0,m.jsxs)(eX.W,{children:[t,(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsx)(eZ.l,{children:(0,m.jsxs)(eZ.l.Group,{selectionVariant:"single",children:[n,i,r]})})})]}),l[12]=i,l[13]=r,l[14]=o):o=l[14],o}try{sJ.displayName||(sJ.displayName="DiffViewSettings")}catch{}let sX=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)};function sZ(e){let t,n,a,i,s,r,o,l,c,d=(0,p.c)(29),{fileDiff:u}=e,{updateItem:h}=(0,eY.xx)(),f=u.baseFile,g=u.headFile,[y,_]=(0,x.useState)(!0),v=f.value&&g.value,b=!f.value&&g.value,j=f.value&&!g.value,{linesOfCode:w,size:N}=sL(b||v?g:f),S=`${b?"Added: ":j?"Deleted: ":""} ${w} `;sE(u,h,"base"),sE(u,h,"head");let C=1===w?"line":"lines";d[0]!==S||d[1]!==N||d[2]!==C?(t=(0,m.jsx)("div",{className:sA.toolbarLeft,children:(0,m.jsxs)("p",{className:sA.toolbarLoC,children:[S," ",C," \xb7 ",N]})}),d[0]=S,d[1]=N,d[2]=C,d[3]=t):t=d[3],d[4]!==f.reference?(n=f.reference&&"url"in f.reference&&(0,m.jsx)(e1.K,{as:"a","aria-label":"Go to the file",icon:ef.LinkExternalIcon,variant:"invisible",href:f.reference.url}),d[4]=f.reference,d[5]=n):n=d[5],d[6]!==g.value?(a=(0,m.jsx)(sT.T,{textToCopy:g.value,ariaLabel:"Copy code",onCopy:s0}),d[6]=g.value,d[7]=a):a=d[7],d[8]!==g.name||d[9]!==g.value?(i=(0,m.jsx)(e1.K,{"aria-label":"Download code",icon:ef.DownloadIcon,variant:"invisible",onClick:()=>{let e=g.name;sX(new File([g.value],e)),(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),d[8]=g.name,d[9]=g.value,d[10]=i):i=d[10],d[11]!==v||d[12]!==y?(s=v&&(0,m.jsx)(sJ,{setIsUnifiedDiff:_,isUnifiedDiff:y}),d[11]=v,d[12]=y,d[13]=s):s=d[13],d[14]!==n||d[15]!==a||d[16]!==i||d[17]!==s?(r=(0,m.jsxs)("div",{className:sA.toolbarActions,children:[n,a,i,s]}),d[14]=n,d[15]=a,d[16]=i,d[17]=s,d[18]=r):r=d[18],d[19]!==t||d[20]!==r?(o=(0,m.jsxs)("div",{className:sA.toolbar,children:[t,r]}),d[19]=t,d[20]=r,d[21]=o):o=d[21];let I=y?"unified":"split";return d[22]!==f||d[23]!==g||d[24]!==I?(l=(0,m.jsx)(sY,{left:f,right:g,view:I}),d[22]=f,d[23]=g,d[24]=I,d[25]=l):l=d[25],d[26]!==l||d[27]!==o?(c=(0,m.jsxs)("div",{className:sA.container,children:[o,l]}),d[26]=l,d[27]=o,d[28]=c):c=d[28],c}function s0(){return(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}try{sZ.displayName||(sZ.displayName="DiffPreview")}catch{}var s1=n(72439),s2=n(59121),s3=n(23125),s4=n(41649);let s5={container:"FilePreview-module__container--P2h3J",previewContainer:"FilePreview-module__previewContainer--KRQup",codeMirrorContainer:"FilePreview-module__codeMirrorContainer--lxGn_",toolbar:"FilePreview-module__toolbar--ZZWN1",toolbarLeft:"FilePreview-module__toolbarLeft--RCKxW",toolbarLoC:"FilePreview-module__toolbarLoC--I7tcY",toolbarActions:"FilePreview-module__toolbarActions--h04aW",content:"FilePreview-module__content--HoIot",footer:"FilePreview-module__footer--o2xcM"};var s6=n(74807);let s7={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function s8(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}let s9={container:"SandboxView-module__container--PAb4m",iframe:"SandboxView-module__iframe--r6S4N"},re={error:"ErrorMessage-module__error--xol56",errorIcon:"ErrorMessage-module__errorIcon--ODD8l",errorHeader:"ErrorMessage-module__errorHeader--hmJF7"};function rt(e){let t,n=(0,p.c)(4),{error:a}=e;if(n[0]!==a){let e,i,s=a?.split(`
`)??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("span",{className:re.errorIcon,children:(0,m.jsx)(ef.StopIcon,{size:24})}),i=(0,m.jsx)("h2",{className:re.errorHeader,children:"HTML rendering failed"}),n[2]=e,n[3]=i):(e=n[2],i=n[3]),t=(0,m.jsxs)("div",{className:re.error,children:[e,i,s.length>0?(0,m.jsx)("p",{children:s.map(rn)}):(0,m.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=a,n[1]=t}else t=n[1];return t}function rn(e){return(0,m.jsxs)(m.Fragment,{children:[e,(0,m.jsx)("br",{})]},`error-line-${e}}`)}try{rt.displayName||(rt.displayName="ErrorMessage")}catch{}function ra(e){let t,n,a,i,s=(0,p.c)(14),{content:r,inlineScripts:o,inlineStyles:l,headScripts:c,bodyScripts:d,styles:u,viewscreenUrl:h}=e,f=(0,G.G7)("viewscreen_sandbox");s[0]!==h?(n=new URL("view/sandbox?url=client://sandbox",h).toString(),t=new URL(n,e7.fV.origin),s[0]=h,s[1]=t,s[2]=n):(t=s[1],n=s[2]);let g=t.origin,y=(0,x.useRef)(null),_=(0,x.useRef)(null);s[3]!==d||s[4]!==r||s[5]!==c||s[6]!==o||s[7]!==l||s[8]!==u?(a={content:r,headScripts:c,bodyScripts:d,inlineScripts:o,inlineStyles:l,styles:u},s[3]=d,s[4]=r,s[5]=c,s[6]=o,s[7]=l,s[8]=u,s[9]=a):a=s[9];let{renderState:v,errorMessage:b}=function(e,t,n,a){let i,s,r,o,l,c,d=(0,p.c)(16),[u,m]=(0,x.useState)(s7.LOADING),[h,f]=(0,x.useState)();d[0]!==t||d[1]!==e||d[2]!==a?(i=n=>(function(e,t,n,a,i,s){let r=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!r)return;let o=r.body,l=n.current?.contentWindow;switch(o){case"hello":s8(l,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),s8(l,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":s(s7.ERROR),r.payload?.error&&i(r.payload.error);break;case"loading":s(s7.LOADING);break;case"loaded":if(!n.current||!a.current)return;s(s7.LOADED);break;case"ready":if(!n.current||!a.current)return;s(s7.READY)}})(n,0,e,t,f,m),d[0]=t,d[1]=e,d[2]=a,d[3]=i):i=d[3];let g=i;return d[4]!==g?(s=()=>(window.addEventListener("message",g),()=>window.removeEventListener("message",g)),r=[g],d[4]=g,d[5]=s,d[6]=r):(s=d[5],r=d[6]),(0,x.useEffect)(s,r),d[7]!==t||d[8]!==e||d[9]!==n||d[10]!==u?(o=()=>{u===s7.READY&&e.current&&t.current&&function(e,t,n){let a={type:"render:cmd",body:{cmd:"sandbox:data","sandbox:data":{...n}}};s8(e.contentWindow,a)}(e.current,t.current,n)},l=[t,e,n,u],d[7]=t,d[8]=e,d[9]=n,d[10]=u,d[11]=o,d[12]=l):(o=d[11],l=d[12]),(0,x.useEffect)(o,l),d[13]!==h||d[14]!==u?(c={renderState:u,errorMessage:h},d[13]=h,d[14]=u,d[15]=c):c=d[15],c}(y,_,a,g);if(!f)return null;for(let e of((0,tm.BI)("sandbox_view.activate",{target:"SANDBOX_INITIALIZED",enabled:f}),Array.from(new Set([...c||[],...d||[],...u||[]].map(e=>{try{return new URL(e,g).origin}catch{return null}}).filter(Boolean)))))(0,tm.BI)("sandbox_view.activate",{target:"SANDBOX_RESOURCE_ORIGIN",origin:e});return s[10]!==b||s[11]!==v||s[12]!==n?(i=(0,m.jsx)("div",{ref:_,className:s9.container,children:v===s7.ERROR?(0,m.jsx)(rt,{error:b}):(0,m.jsx)("iframe",{ref:y,className:s9.iframe,sandbox:"allow-scripts allow-same-origin",title:"Preview page for the user provided code",src:n})}),s[10]=b,s[11]=v,s[12]=n,s[13]=i):i=s[13],i}try{ra.displayName||(ra.displayName="SandboxView")}catch{}let ri={loadingContainer:"HtmlPreview-module__loadingContainer--t3YC7",loadingHead:"HtmlPreview-module__loadingHead--XAabR",loadingText:"HtmlPreview-module__loadingText--WYn1B"};function rs(e,t,n){let a=`file:${e}`;if(!n.has(a))return null;let i=n.get(a)??[],s=i[i.length-1];if(!s)return null;let r=t.get(s);return r&&"file"===r.type?r:null}function rr(e){let t,n,a=(0,p.c)(15),{file:i}=e,{previewUrl:s}=(0,M.X)(),{items:r,versionedItems:o}=(0,eY.xx)(),{scripts:l,styles:c,files:d}=function(e,t,n){let a=Array.from(e.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>rs(e,t,n)),i=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(e).map(e=>rs(e,t,n)),s=Array.from(e.matchAll(/<script(?![^>]*\bsrc=).*?>(.*?)<\/script>/gms)).map(e=>e[1]).filter(e=>void 0!==e);return{scripts:[...a.map(e=>e?.value??""),...s,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join(`
`),styles:i.map(e=>e?.value??"").join(`
`),files:a.concat(i)}}(i.value,r,o),[u,h]=(0,x.useState)(!1),f=(i.isStreaming||d.some(ro))&&!u;a[0]!==f||a[1]!==h?(t=()=>{if(f){let e=setTimeout(()=>{h(!0)},3e3);return()=>clearTimeout(e)}},a[0]=f,a[1]=h,a[2]=t):t=a[2],(0,x.useEffect)(t),a[3]!==i.value?(n=function(e){let t=Array.from(e.matchAll(/<script.*?src="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[],a=[];for(let i of t)e.substring(e.indexOf("<head"),e.indexOf("</head>")).includes(i)?n.push(i):a.push(i);return{headScripts:n,bodyScripts:a,styles:Array.from(e.matchAll(/<link rel="stylesheet" href="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e)}}(i.value),a[3]=i.value,a[4]=n):n=a[4];let{headScripts:g,bodyScripts:y,styles:_}=n;if(f){let e;return a[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)("div",{className:ri.loadingContainer,children:[(0,m.jsx)("div",{className:ri.loadingHead,children:(0,m.jsx)(s6.N,{animationType:"thinking",loopAnimation:!0})}),(0,m.jsx)("p",{className:ri.loadingText,children:"Preparing your preview\u2026"})]}),a[5]=e):e=a[5],e}{let e;return a[6]!==y||a[7]!==_||a[8]!==i.id||a[9]!==i.value||a[10]!==g||a[11]!==s||a[12]!==l||a[13]!==c?(e=(0,m.jsx)(ra,{inlineScripts:l,inlineStyles:c,headScripts:g,bodyScripts:y,styles:_,content:i.value,viewscreenUrl:s},i.id),a[6]=y,a[7]=_,a[8]=i.id,a[9]=i.value,a[10]=g,a[11]=s,a[12]=l,a[13]=c,a[14]=e):e=a[14],e}}function ro(e){return!e||e.isStreaming}try{rr.displayName||(rr.displayName="HtmlPreview")}catch{}var rl=n(24880),rc=n(73017);let rd={markdownPreview:"MarkdownPreview-module__markdownPreview--KrJBX",spinner:"MarkdownPreview-module__spinner--rHtSt",error:"MarkdownPreview-module__error--Kjmwv",errorIcon:"MarkdownPreview-module__errorIcon--msbkW",errorHeader:"MarkdownPreview-module__errorHeader--yOGh9",hideHeadingAnchors:"MarkdownPreview-module__hideHeadingAnchors--wU3US"};function ru(e){let t,n,a,i,s=(0,p.c)(14),{content:r,className:o,fallbackToRaw:l,hideHeadingAnchors:c}=e,d=void 0!==l&&l,u=function(e,t,n){let a,i,s,r=(0,p.c)(8),[o,l]=(0,x.useState)(e),[c,d]=(0,x.useState)(t);2e3!==r[0]?(a=(0,tc.A)(l,n),r[0]=n,r[1]=a):a=r[1];let u=a;return r[2]!==c||r[3]!==t||r[4]!==u||r[5]!==e?(i=()=>{t!==c?(u.cancel(),l(e),d(t)):u(e)},s=[u,e,t,c],r[2]=c,r[3]=t,r[4]=u,r[5]=e,r[6]=i,r[7]=s):(i=r[6],s=r[7]),(0,x.useEffect)(i,s),o}(r.value,r.name,2e3);s[0]!==r.name||s[1]!==u?(t={queryKey:["copilot-immersive","MarkdownPreview",u,r.name],queryFn:async()=>{let e=await (0,t8.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:u,filename:r.name}});if(!e.ok)throw Error(`Failed to load rendered markdown (${e.status} on ${e.url})`);return await e.json()},placeholderData:rl.rX,staleTime:1/0},s[0]=r.name,s[1]=u,s[2]=t):t=s[2];let{status:h,data:f}=(0,tr.I)(t),g=void 0!==c&&c&&rd.hideHeadingAnchors;return s[3]!==o||s[4]!==g?(n=(0,_.$)("readme html-blob blob",rd.markdownPreview,g,o),s[3]=o,s[4]=g,s[5]=n):n=s[5],s[6]!==r||s[7]!==f||s[8]!==d||s[9]!==h?(a="pending"===h?(0,m.jsx)("div",{className:rd.spinner,children:(0,m.jsx)(tU.A,{srText:"Loading Markdown preview\u2026"})}):"error"===h?d?(0,m.jsx)(rm,{content:r}):(0,m.jsxs)("div",{className:rd.error,children:[(0,m.jsx)("span",{className:rd.errorIcon,children:(0,m.jsx)(ef.StopIcon,{size:24})}),(0,m.jsx)("h2",{className:rd.errorHeader,children:"Markdown rendering failed"}),(0,m.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,m.jsx)(rc.$6,{className:"markdown-body",html:f.html}),s[6]=r,s[7]=f,s[8]=d,s[9]=h,s[10]=a):a=s[10],s[11]!==n||s[12]!==a?(i=(0,m.jsx)("div",{className:n,children:a}),s[11]=n,s[12]=a,s[13]=i):i=s[13],i}function rm(e){let t,n,a,i,s=(0,p.c)(13),{content:r}=e,o=(0,x.useId)();s[0]!==r.value?(t={value:r.value,language:"markdown"},s[0]=r.value,s[1]=t):t=s[1];let l=sQ(t);return s[2]!==r.name||s[3]!==o?(n=(0,m.jsxs)("span",{id:o,className:"sr-only",children:[r.name," raw markdown contents"]}),s[2]=r.name,s[3]=o,s[4]=n):n=s[4],s[5]!==l||s[6]!==r.name||s[7]!==r.value||s[8]!==o?(a=(0,m.jsx)(sD.default,{ariaLabelledBy:o,fileName:r.name,isReadOnly:!0,spacing:l,value:r.value,onChange:nK.l,hideHelp:!0}),s[5]=l,s[6]=r.name,s[7]=r.value,s[8]=o,s[9]=a):a=s[9],s[10]!==n||s[11]!==a?(i=(0,m.jsxs)(m.Fragment,{children:[n,a]}),s[10]=n,s[11]=a,s[12]=i):i=s[12],i}try{ru.displayName||(ru.displayName="MarkdownPreview")}catch{}try{rm.displayName||(rm.displayName="RawMarkdownPreview")}catch{}function rp(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,_,v,b,j,w,N,S=(0,p.c)(67),{isPreviewOpening:C,file:I,onClose:k}=e,{updateItem:T,items:E,versionedItems:L}=(0,eY.xx)(),A=(0,U.Pk)();S[0]!==I.isStreaming||S[1]!==I.messageId||S[2]!==A.messages?(t=I.isStreaming?A.messages[A.messages.length-1]:A.messages.find(e=>e.id===I.messageId),S[0]=I.isStreaming,S[1]=I.messageId,S[2]=A.messages,S[3]=t):t=S[3];let R=t,{linesOfCode:D,isPreviewable:P,size:O}=sL(I);!function(e,t){let n,a,i,s,r,o,l,c=(0,p.c)(25),{reference:d}=e,u=(0,W.b)(),m=d?.type;c[0]!==d?(n=d?(0,nQ.Vb)(d):void 0,c[0]=d,c[1]=n):n=c[1],c[2]!==m||c[3]!==n?(a=["copilot-reference-preview","copilot","references",m,n],c[2]=m,c[3]=n,c[4]=a):a=c[4],c[5]!==e||c[6]!==u||c[7]!==d||c[8]!==t?(i=async()=>{if(!d||"file"!==d.type||e.value)return null;let n=await u.service.hydrateReference(d);return n.ok?(t({...e,value:n.payload.contents,isStreaming:!1}),n.payload):null},c[5]=e,c[6]=u,c[7]=d,c[8]=t,c[9]=i):i=c[9],c[10]!==a||c[11]!==i?(s={queryKey:a,queryFn:i,staleTime:1/0},c[10]=a,c[11]=i,c[12]=s):s=c[12];let{isLoading:h,isError:f,data:g}=(0,tr.I)(s);c[13]!==g||c[14]!==e||c[15]!==t?(r=()=>{g?.contents&&e.value!==g.contents&&t({...e,value:g.contents,isStreaming:!1})},c[13]=g,c[14]=e,c[15]=t,c[16]=r):r=c[16];let y=g?.contents;c[17]!==e||c[18]!==y||c[19]!==t?(o=[y,e,t],c[17]=e,c[18]=y,c[19]=t,c[20]=o):o=c[20],(0,x.useEffect)(r,o),c[21]!==g||c[22]!==f||c[23]!==h?(l={isLoading:h,isError:f,data:g},c[21]=g,c[22]=f,c[23]=h,c[24]=l):l=c[24]}(I,T);let[B,M]=(0,x.useState)("code"),[F,V]=(0,x.useState)(!0),[$,H]=(0,x.useState)(void 0);S[4]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{H(e)},S[4]=n):n=S[4];let q=n;S[5]!==I||S[6]!==E||S[7]!==L?(a=(0,tR.SX)(I,E,L),S[5]=I,S[6]=E,S[7]=L,S[8]=a):a=S[8];let z=a,G=tu.W.hyperspaceDiffView&&!!z;S[9]!==R?.error?.type||S[10]!==k?(i=()=>{(R?.error?.type==="publicCode"||R?.error?.type==="filtered")&&k()},S[9]=R?.error?.type,S[10]=k,S[11]=i):i=S[11];let K=R?.error;if(S[12]!==k||S[13]!==K?(s=[K,k],S[12]=k,S[13]=K,S[14]=s):s=S[14],(0,x.useEffect)(i,s),S[15]!==G||S[16]!==P||S[17]!==B){if(r=[["code","Code"]],o="code",P&&(r.unshift(["preview","Preview"]),o="preview"===B?"preview":"code"),G){let e;S[20]===Symbol.for("react.memo_cache_sentinel")?(e=["diff","Diff"],S[20]=e):e=S[20],r.push(e),o="diff"===B?"diff":o}S[15]=G,S[16]=P,S[17]=B,S[18]=r,S[19]=o}else r=S[18],o=S[19];e:{var Q;if("object"==typeof(Q=I.reference)&&null!==Q&&"repoOwner"in Q&&"repoName"in Q&&"string"==typeof Q.repoOwner&&"string"==typeof Q.repoName){l=`${I.reference.repoOwner}/${I.reference.repoName}/${I.name}`;break e}l=I.name}let Y=l;S[21]!==r||S[22]!==G||S[23]!==P||S[24]!==B?(c=(P||G)&&(0,m.jsx)(s2.I,{"aria-label":"File view",onChange:e=>{let t=r[e]?.[0]||"code";M(t),(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:r.map(e=>{let[t,n]=e;return(0,m.jsx)(s2.I.Button,{selected:B===t,children:n},t)})}),S[21]=r,S[22]=G,S[23]=P,S[24]=B,S[25]=c):c=S[25],S[26]!==I?(d=(0,m.jsx)(tP,{item:I,onVersionSelect:q}),S[26]=I,S[27]=d):d=S[27];let J=1===D?"line":"lines";return S[28]!==D||S[29]!==O||S[30]!==J?(u=(0,m.jsxs)("p",{className:s5.toolbarLoC,children:[D," ",J," \xb7 ",O]}),S[28]=D,S[29]=O,S[30]=J,S[31]=u):u=S[31],S[32]!==u||S[33]!==c||S[34]!==d?(h=(0,m.jsxs)("div",{className:s5.toolbarLeft,children:[c,d,u]}),S[32]=u,S[33]=c,S[34]=d,S[35]=h):h=S[35],S[36]!==I.reference?(f=I.reference&&"url"in I.reference&&(0,m.jsx)(e1.K,{as:"a","aria-label":"Go to the file",icon:ef.LinkExternalIcon,variant:"invisible",href:I?.reference?.url}),S[36]=I.reference,S[37]=f):f=S[37],S[38]!==I.value?(g=(0,m.jsx)(sT.T,{textToCopy:I.value,ariaLabel:"Copy code",onCopy:rh}),S[38]=I.value,S[39]=g):g=S[39],S[40]!==I.name||S[41]!==I.value||S[42]!==$?(y=(0,m.jsx)(e1.K,{"aria-label":"Download code",icon:ef.DownloadIcon,variant:"invisible",onClick:()=>{let e=(()=>{let e=I.name.lastIndexOf(".");if(e>0){let t=I.name.substring(0,e),n=I.name.substring(e);return void 0!==$?`${t}_${$}${n}`:I.name}return void 0!==$?`${I.name}_${$}`:I.name})();sX(new File([I.value],e)),(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),S[40]=I.name,S[41]=I.value,S[42]=$,S[43]=y):y=S[43],S[44]!==o||S[45]!==F?(_="diff"===o&&(0,m.jsx)(sJ,{isUnifiedDiff:F,setIsUnifiedDiff:V}),S[44]=o,S[45]=F,S[46]=_):_=S[46],S[47]!==f||S[48]!==g||S[49]!==y||S[50]!==_?(v=(0,m.jsxs)("div",{className:s5.toolbarActions,children:[f,g,y,_]}),S[47]=f,S[48]=g,S[49]=y,S[50]=_,S[51]=v):v=S[51],S[52]!==h||S[53]!==v?(b=(0,m.jsxs)("div",{className:s5.toolbar,children:[h,v]}),S[52]=h,S[53]=v,S[54]=b):b=S[54],S[55]!==o||S[56]!==I||S[57]!==C||S[58]!==F||S[59]!==z?(j=(0,m.jsx)("div",{className:s5.content,children:"preview"===o?(0,m.jsx)(ry,{file:I}):"diff"===o?(0,m.jsx)(sY,{left:z,right:I,view:F?"unified":"split"}):(0,m.jsx)(rg,{file:I,isPreviewOpening:C})}),S[55]=o,S[56]=I,S[57]=C,S[58]=F,S[59]=z,S[60]=j):j=S[60],S[61]!==Y?(w=(0,m.jsx)("footer",{className:s5.footer,children:(0,m.jsx)("span",{"aria-live":"polite",children:Y})}),S[61]=Y,S[62]=w):w=S[62],S[63]!==b||S[64]!==j||S[65]!==w?(N=(0,m.jsxs)("div",{className:s5.container,children:[b,j,w]}),S[63]=b,S[64]=j,S[65]=w,S[66]=N):N=S[66],N}function rh(){return(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}let rf=(0,s3.A)((e,t,n)=>{n({...e,value:t})},500,{leading:!1,trailing:!0});function rg({file:e,isPreviewOpening:t}){let{openItem:n,updateItem:a,versionedItems:i}=(0,eY.xx)(),s=(0,W.b)(),r=(0,x.useRef)(!1),o=function(e,t){let n=e.get((0,tR.oy)(t.id))??[];return n[n.length-1]===t.id}(i,e),l=!e.reference||"thread-scoped-file"===e.reference.type,c=l&&!e.isStreaming&&o,d=(0,x.useId)(),u=sQ(e),[p,h]=(0,x.useState)(),f=p?.id===e.id?p.value:e.value,[g,y]=(0,x.useState)(!0),{messages:_,currentReferences:v}=(0,U.Pk)(),b=(0,x.useRef)(""),j=(0,x.useRef)(null),[w,N]=(0,x.useState)(void 0);(0,x.useEffect)(()=>{v&&(v.some(t=>"thread-scoped-snippet"===t.type&&t.name===e.name)||N(null))},[v,e.name]);let S=(0,x.useMemo)(()=>{if(!tu.W.selectionAttachments)return;let t=s1.E.getAttachmentSizeLimit();return{debounceMs:0,onSelection:({view:n,text:a,fromLine:i,toLine:r})=>{if(!a||""===a.trim()||!s)return;let o=n.state.doc.line(i),l=n.state.doc.line(r),c=o.from,d=l.to,u=n.state.doc.sliceString(c,d),m=`${e.id}:${c}-${d}:${e.value.length}`;if(b.current===m||new Blob([u]).size>t)return;let p={type:"thread-scoped-snippet",name:e.name,snippetText:u,language:e.language||"text",range:{start:i,end:r}};j.current?s.replaceReference(j.current,p):s.addReference(p,"immersive-selection"),j.current=p,N({from:c,to:d}),b.current=m},onClear:()=>{b.current&&(s&&j.current&&s.removeReference(j.current),b.current="",j.current=null,N(null))}}},[e.id,e.name,e.value,e.language,s]);(0,x.useEffect)(()=>{s&&j.current&&s.removeReference(j.current),j.current=null,b.current="",N(null)},[e.id,s]),(0,x.useEffect)(()=>()=>{s&&j.current&&s.removeReference(j.current),j.current=null,b.current=""},[s]),(0,x.useEffect)(()=>{y(!1)},[]),(0,x.useEffect)(()=>{t&&(r.current=!0)},[t]);let C=(0,s4.K)((0,x.useCallback)(t=>{if(c&&t!==e.value)if(e.isUserEdited)h({value:t,id:e.id}),rf(e,t,a);else{let i={...e,messageId:nE.Wp,id:`file:${e.name}#${_.length}`,timestamp:new Date,isUserEdited:!0,value:t};a(i),n(i.id),h({value:t,id:i.id})}},[e,c,_.length,n,a]));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("span",{id:d,className:"sr-only",children:[e.name," file contents"]}),(0,m.jsx)(sD.default,{ariaLabelledBy:d,containerClassName:s5.codeMirrorContainer,fileName:e.name,height:"100%",isReadOnly:!c,spacing:u,value:g?"":f,onChange:C,focusNextRenderRef:r,placeholder:"Loading...",hideHelp:!0,selectionListenerOptions:S,selectionAttachmentRange:w}),l&&!o&&(0,m.jsx)("div",{className:s5.footer,children:"Switch to the latest version to edit this file."})]})}function ry(e){let t=(0,p.c)(4),{file:n}=e;if("markdown"===n.language){let e;return t[0]!==n?(e=(0,m.jsx)("div",{className:s5.previewContainer,children:(0,m.jsx)(ru,{content:n})}),t[0]=n,t[1]=e):e=t[1],e}if("html"!==n.language)return null;{let e;return t[2]!==n?(e=(0,m.jsx)("div",{className:s5.previewContainer,children:(0,m.jsx)(rr,{file:n})}),t[2]=n,t[3]=e):e=t[3],e}}try{rp.displayName||(rp.displayName="FilePreview")}catch{}try{rg.displayName||(rg.displayName="CodeMirrorView")}catch{}try{ry.displayName||(ry.displayName="PreviewComponent")}catch{}let r_={container:"ImagePreview-module__container--lxQZb",imageElement:"ImagePreview-module__imageElement--WTRgY"};function rx(e){let t,n=(0,p.c)(3),{image:a}=e;return n[0]!==a.altText||n[1]!==a.url?(t=(0,m.jsx)("div",{className:r_.container,children:(0,m.jsx)("img",{className:r_.imageElement,src:a.url,alt:a.altText})}),n[0]=a.altText,n[1]=a.url,n[2]=t):t=n[2],t}try{rx.displayName||(rx.displayName="ImagePreview")}catch{}let rv={container:"IssuePreview-module__container--O4xBI"},rb=(0,x.memo)(function(e){let t,n,a,i,s,r,o=(0,p.c)(17),{isPreviewOpening:l,issue:c,onClose:d}=e,[u,h]=(0,x.useState)(l);o[0]!==u?(t=()=>{if(u){let e=setTimeout(()=>h(!1),400);return()=>clearTimeout(e)}},n=[u],o[0]=u,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,x.useEffect)(t,n),o[3]!==c.href?(a=(0,m.jsx)(e1.K,{icon:ef.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(c.href,"_blank")}}),o[3]=c.href,o[4]=a):a=o[4];let f=a;o[5]!==d||o[6]!==f?(i={navigate:nK.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,titleAs:"h2",useViewportQueries:!1,withLiveUpdates:!0,onIssueDelete:d,additionalHeaderActions:f,showRepositoryPill:!0},o[5]=d,o[6]=f,o[7]=i):i=o[7];let g=i;o[8]!==c.number||o[9]!==c.owner||o[10]!==c.repo?(s={owner:c.owner,repo:c.repo,number:c.number,type:"Issue"},o[8]=c.number,o[9]=c.owner,o[10]=c.repo,o[11]=s):s=o[11];let y=s;if(u){let e;return o[12]!==g?(e=(0,m.jsx)(tI.Q,{optionConfig:g}),o[12]=g,o[13]=e):e=o[13],e}return o[14]!==y||o[15]!==g?(r=(0,m.jsx)("div",{className:rv.container,children:(0,m.jsx)(sh.e,{children:(0,m.jsx)(sp.cI,{itemIdentifier:y,optionConfig:g})})}),o[14]=y,o[15]=g,o[16]=r):r=o[16],r});try{rb.displayName||(rb.displayName="IssuePreview")}catch{}let rj={container:"PlanningTaskPreview-module__container--eGhPC"},rw={toolbar:"PullRequestToolbar-module__toolbar--zgT1V FilePreview-module__toolbar--ZZWN1",toolbarLeft:"PullRequestToolbar-module__toolbarLeft--ogxm0 FilePreview-module__toolbarLeft--RCKxW",toolbarActions:"PullRequestToolbar-module__toolbarActions--HVS9s FilePreview-module__toolbarActions--h04aW",toolbarRepo:"PullRequestToolbar-module__toolbarRepo--avvWN"};function rN(e){let t,n,a,i,s,r=(0,p.c)(12),{pullRequest:o}=e;r[0]!==o.repository_nwo?(t=(0,m.jsx)("div",{className:rw.toolbarLeft,children:(0,m.jsx)(eG.A,{variant:"accent",size:"large",className:rw.toolbarRepo,children:o.repository_nwo})}),r[0]=o.repository_nwo,r[1]=t):t=r[1];let l=`/${o.repository_nwo}/pull/${o.number}/agent-sessions`;r[2]!==l?(n=(0,m.jsx)(tn.Q,{as:"a",href:l,variant:"primary",size:"small",children:"View sessions"}),r[2]=l,r[3]=n):n=r[3];let c=`/${o.repository_nwo}/pull/${o.number}`;return r[4]!==c?(a=(0,m.jsx)(tn.Q,{as:"a",href:c,variant:"primary",size:"small",children:"View pull request"}),r[4]=c,r[5]=a):a=r[5],r[6]!==n||r[7]!==a?(i=(0,m.jsxs)("div",{className:rw.toolbarActions,children:[n,a]}),r[6]=n,r[7]=a,r[8]=i):i=r[8],r[9]!==t||r[10]!==i?(s=(0,m.jsxs)("div",{className:rw.toolbar,children:[t,i]}),r[9]=t,r[10]=i,r[11]=s):s=r[11],s}try{rN.displayName||(rN.displayName="PullRequestToolbar")}catch{}var rS=n(73783);let rC={toolbar:"TaskOptionsToolbar-module__toolbar--BNV21 FilePreview-module__toolbar--ZZWN1",toolbarActions:"TaskOptionsToolbar-module__toolbarActions--xcgtE FilePreview-module__toolbarActions--h04aW",taskOptionsButtonGroup:"TaskOptionsToolbar-module__taskOptionsButtonGroup--YcURI",taskOptionsDivider:"TaskOptionsToolbar-module__taskOptionsDivider--jHPfb",taskOptionsMenuButton:"TaskOptionsToolbar-module__taskOptionsMenuButton--ckDeH",taskOptionsButton:"TaskOptionsToolbar-module__taskOptionsButton--E70_k"};function rI(e){return e.isLoading||null==e.pullRequest||"merged"!==e.pullRequest.state}function rk(e){return null!=e}function rT(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,_,v,b,j,w,N,S,C,I,k=(0,p.c)(69),{task:T,disabledStartTask:E}=e;k[0]!==T.repository?(t=T.repository?.split("/")??[],k[0]=T.repository,k[1]=t):t=k[1];let[L,A]=t,[R,D]=(0,x.useState)(!1),[P,O]=(0,x.useState)(void 0),{start:B}=function(e){let{selectedThreadID:t}=(0,U.Pk)(),n=function(e){let t,n=(0,p.c)(3),a=(0,U.Pk)();return n[0]!==a.selectedThreadID||n[1]!==e.tag?(t=a4(a.selectedThreadID,e.tag),n[0]=a.selectedThreadID,n[1]=e.tag,n[2]=t):t=n[2],t}(e),{createTask:a,isCreating:i}=(0,Y.Z)({}),s=e.name,r=e.repository,o=(0,x.useMemo)(()=>((e.name?`${e.name}

${e.description}`:e.description)||e.tag).trim(),[e.name,e.description,e.tag]);return{start:(0,x.useCallback)(()=>{if(!i){(0,tm.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_START",mode:"immersive",threadId:t});try{if(!r)throw Error("Repository is required to start a task");let e=r.split("/");if(2!==e.length||!e[0]||!e[1])throw Error('Invalid repository format. Expected "owner/repo"');if(!n)throw Error("Unable to generate task ID - thread or task tag missing");a({nwo:r,problemStatement:o,title:s,eventType:a3},n)}catch{}}},[i,t,n,a,r,o,s]),isStarting:i}}(T),{updateItem:M}=(0,eY.xx)(),F=(0,t9.useRelayEnvironment)(),{convertToDraftIssue:V}=function(e){let t,n,a=(0,p.c)(6),i=(0,W.b)(),s=(0,U.Pk)();a[0]!==i||a[1]!==e||a[2]!==s?(t=async()=>{let t=e.name||e.tag;(0,tm.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ISSUE",mode:"immersive",threadId:(0,nL.W)(s)?.id});let n={type:"text",name:`timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting task '${t}' as an issue..."}`},a=e.repository?` in repository ${e.repository}`:"",r=`
Create a draft issue using the content of the ${e.tag} task${a}.
`;await i.sendChatMessage({thread:(0,nL.W)(s),content:r,references:[n],topic:s.currentTopic,context:s.context,customInstructions:s.customInstructions,model:s.model,intent:nE.wh.planningAgent})},a[0]=i,a[1]=e,a[2]=s,a[3]=t):t=a[3];let r=t;return a[4]!==r?(n={convertToDraftIssue:r},a[4]=r,a[5]=n):n=a[5],n}(T),$=(0,x.useRef)(null),[H,q]=(0,x.useState)(!1),z=function(e){let t,n,a=(0,p.c)(6),{items:i,versionedItems:s}=(0,eY.xx)();a[0]!==i||a[1]!==e.dependencyTags||a[2]!==s?(t=e.dependencyTags?.map(e=>{let t=s.get(`planning-task:${e}`);return void 0===t||t?.length===0?null:i.get(t.at(-1))}).filter(rk)??[],a[0]=i,a[1]=e.dependencyTags,a[2]=s,a[3]=t):t=a[3];let r=a5(t);return a[4]!==r?(n=r.some(rI),a[4]=r,a[5]=n):n=a[5],n}(T);k[2]!==F?(n=JSON.stringify(F),k[2]=F,k[3]=n):n=k[3],k[4]!==n?(a=["copilot-immersive-top-repos",n],k[4]=n,k[5]=a):a=k[5],k[6]!==F?(i=async()=>await (0,t6.St)(F,{first:10}),k[6]=F,k[7]=i):i=k[7],k[8]!==a||k[9]!==i?(s={queryKey:a,queryFn:i},k[8]=a,k[9]=i,k[10]=s):s=k[10];let{data:G,isLoading:K}=(0,tr.I)(s);k[11]!==G?(r=void 0===G?[]:G,k[11]=G,k[12]=r):r=k[12];let Q=r;k[13]!==F?(o=JSON.stringify(F),k[13]=F,k[14]=o):o=k[14],k[15]!==L||k[16]!==A||k[17]!==o?(l=["copilot-immersive-current-repo",o,L,A],k[15]=L,k[16]=A,k[17]=o,k[18]=l):l=k[18],k[19]!==F||k[20]!==L||k[21]!==A?(c=async()=>L&&A?await (0,t6.tZ)(F,L,A):null,k[19]=F,k[20]=L,k[21]=A,k[22]=c):c=k[22],k[23]!==c||k[24]!==l?(d={queryKey:l,queryFn:c},k[23]=c,k[24]=l,k[25]=d):d=k[25];let{data:J,isLoading:X}=(0,tr.I)(d);k[26]!==T||k[27]!==M?(u=e=>{O(e),e&&M({...T,repository:e.nameWithOwner,isUserEdited:!0})},k[26]=T,k[27]=M,k[28]=u):u=k[28];let Z=u;k[29]!==Z||k[30]!==X||k[31]!==P||k[32]!==J||k[33]!==Q?(h=()=>{if(J&&J!==P)return void O(J);!P&&!X&&Q&&Q.length>0&&Z(Q[0])},f=[Z,P,J,Q,X],k[29]=Z,k[30]=X,k[31]=P,k[32]=J,k[33]=Q,k[34]=h,k[35]=f):(h=k[34],f=k[35]),(0,x.useEffect)(h,f);let ee=E||K;k[36]!==z||k[37]!==P||k[38]!==B?(g=()=>P?z?void q(!0):void B():(0,nK.l)(),k[36]=z,k[37]=P,k[38]=B,k[39]=g):g=k[39];let et=g;k[40]===Symbol.for("react.memo_cache_sentinel")?(y={includeForks:!0},k[40]=y):y=k[40],k[41]!==Z||k[42]!==ee||k[43]!==P||k[44]!==Q?(_=(0,m.jsx)(t6.f0,{enforceAtleastOneSelected:!0,hideContainer:ee,initialRepository:P,onSelect:Z,options:y,responsiveOnNarrow:!0,topRepositories:Q}),k[41]=Z,k[42]=ee,k[43]=P,k[44]=Q,k[45]=_):_=k[45];let en=!P;k[46]!==E||k[47]!==et||k[48]!==en?(v=(0,m.jsx)(tn.Q,{ref:$,variant:"primary",onClick:et,className:rC.taskOptionsButton,loading:E,loadingAnnouncement:"Starting task\u2026",inactive:en,leadingVisual:ef.AgentIcon,children:"Start agent task"}),k[46]=E,k[47]=et,k[48]=en,k[49]=v):v=k[49],k[50]!==P||k[51]!==B||k[52]!==H?(b=H&&(0,m.jsx)(tF.l,{title:"Unmerged dependencies",onClose:()=>q(!1),returnFocusRef:$,footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>q(!1)},{buttonType:"danger",content:"Proceed to PR creation",onClick:()=>P?B():(0,nK.l)()}],children:"This task has unmerged dependencies. Please consider waiting until all dependencies are completed before starting the task."}),k[50]=P,k[51]=B,k[52]=H,k[53]=b):b=k[53],k[54]===Symbol.for("react.memo_cache_sentinel")?(j=(0,m.jsx)("div",{className:rC.taskOptionsDivider}),k[54]=j):j=k[54],k[55]===Symbol.for("react.memo_cache_sentinel")?(w=(0,m.jsx)(eX.W.Anchor,{"aria-label":"Task options",children:(0,m.jsx)(e1.K,{variant:"primary",icon:ef.TriangleDownIcon,"aria-label":"Task options\u2026",className:rC.taskOptionsMenuButton})}),k[55]=w):w=k[55];let ea=P?.hasIssuesEnabled===!1?void 0:V,ei=P?.hasIssuesEnabled===!1;return k[56]!==ea||k[57]!==ei?(N=(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsx)(eZ.l,{children:(0,m.jsx)(eZ.l.Item,{onSelect:ea,disabled:ei,children:"Draft issue"})})}),k[56]=ea,k[57]=ei,k[58]=N):N=k[58],k[59]!==R||k[60]!==N?(S=(0,m.jsxs)(eX.W,{open:R,onOpenChange:D,children:[w,N]}),k[59]=R,k[60]=N,k[61]=S):S=k[61],k[62]!==v||k[63]!==b||k[64]!==S?(C=(0,m.jsxs)(rS.A,{className:rC.taskOptionsButtonGroup,children:[v,b,j,S]}),k[62]=v,k[63]=b,k[64]=S,k[65]=C):C=k[65],k[66]!==_||k[67]!==C?(I=(0,m.jsx)("div",{className:rC.toolbar,children:(0,m.jsxs)("div",{className:rC.toolbarActions,children:[_,C]})}),k[66]=_,k[67]=C,k[68]=I):I=k[68],I}try{rT.displayName||(rT.displayName="TaskOptionsToolbar")}catch{}function rE(e){let t,n=(0,p.c)(2),{task:a}=e;return n[0]!==a?(t=(0,m.jsx)(F.Fn,{children:(0,m.jsx)(rL,{task:a})}),n[0]=a,n[1]=t):t=n[1],t}function rL(e){let t,n=(0,p.c)(4),{task:a}=e,{pullRequest:i,isLoading:s}=function(e){let t,n=(0,p.c)(2);return n[0]!==e?(t=[e],n[0]=e,n[1]=t):t=n[1],a5(t)[0]}(a);return n[0]!==s||n[1]!==i||n[2]!==a?(t=i?(0,m.jsx)(rN,{pullRequest:i}):(0,m.jsx)(rT,{task:a,disabledStartTask:s}),n[0]=s,n[1]=i,n[2]=a,n[3]=t):t=n[3],t}try{rE.displayName||(rE.displayName="PlanningTaskToolbar")}catch{}try{rL.displayName||(rL.displayName="PlanningTaskToolbarContent")}catch{}function rA(e){let t,n,a,i=(0,p.c)(8),{task:s}=e,r=s.name?`# ${s.name}

${s.description}`:s.description;i[0]!==s?(t=(0,m.jsx)(rE,{task:s}),i[0]=s,i[1]=t):t=i[1];let o=`${s.tag}.md`;return i[2]!==r||i[3]!==o?(n=(0,m.jsx)(ru,{content:{value:r,name:o},fallbackToRaw:!0,hideHeadingAnchors:!0}),i[2]=r,i[3]=o,i[4]=n):n=i[4],i[5]!==t||i[6]!==n?(a=(0,m.jsxs)("div",{className:rj.container,children:[t,n]}),i[5]=t,i[6]=n,i[7]=a):a=i[7],a}try{rA.displayName||(rA.displayName="PlanningTaskPreview")}catch{}var rR=n(2087),rD=n(59523),rP=n(98091);let rO={container:"TaskDiffPreview-module__container--xEvS1",emptyState:"TaskDiffPreview-module__emptyState--qe0Z0",emptyStateContent:"TaskDiffPreview-module__emptyStateContent--oruLe",emptyStateTitle:"TaskDiffPreview-module__emptyStateTitle--Hkzg5",emptyStateText:"TaskDiffPreview-module__emptyStateText--YItv4",diffFiles:"TaskDiffPreview-module__diffFiles--VwqKO",diffTable:"TaskDiffPreview-module__diffTable--zqN13",diffFileSection:"TaskDiffPreview-module__diffFileSection--RORXL",taskDiffHeader:"TaskDiffPreview-module__taskDiffHeader--oeHQ4",plainTextStatus:"TaskDiffPreview-module__plainTextStatus--cUJ9x"};function rB(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:rO.plainTextStatus,children:a}),n[0]=a,n[1]=t):t=n[1],t}function rM(e){let t,n,a,i=(0,p.c)(9),{diffEntry:s,tabSize:r}=e;i[0]!==s.diffLines?(t=s.diffLines.map(e=>({__id:e.__id||`${e.type}-${e.left}-${e.right}`,left:e.left,right:e.right,type:e.type,html:e.html.substring(1),text:e.text.substring(1)})),i[0]=s.diffLines,i[1]=t):t=i[1];let o=t;if(i[2]!==s){let e;s.isBinary?e="Binary file not shown.":(0,rD.dK)(s)?e="File renamed without changes.":(0,rD.Jc)(s)?e="File copied without changes.":(0,rD.Sn)(s,s.status,s.oldTreeEntry?.mode,s.newTreeEntry?.mode)?e="File mode changed.":(0,rD.HI)(s)?e=(0,rD.l_)(s.truncatedReason):(0,rD.s8)(s)?e="Whitespace-only changes.":(0,rD.lO)(s)?e="This file was deleted.":(0,rD.xW)(s)?e="Some generated files are not rendered by default.":s.isTooBig&&(e="File is too large to render."),n=e,i[2]=s,i[3]=n}else n=i[3];let l=n;if(l){let e;return i[4]!==l?(e=(0,m.jsx)(rB,{children:l}),i[4]=l,i[5]=e):e=i[5],e}return i[6]!==o||i[7]!==r?(a=(0,m.jsx)(rP.i,{diffLines:o,tabSize:r,className:rO.diffFiles,diffTableClassName:rO.diffTable}),i[6]=o,i[7]=r,i[8]=a):a=i[8],a}function rF(e){let t,n,a,i,s,r,o=(0,p.c)(23),{diffEntry:l,tabSize:c}=e,[d,u]=(0,x.useState)(!1);o[0]!==l.diffLines?(t=l.diffLines.filter(rV),o[0]=l.diffLines,o[1]=t):t=o[1];let h=t.length;o[2]!==l.diffLines?(n=l.diffLines.filter(rU),o[2]=l.diffLines,o[3]=n):n=o[3];let f=n.length,g=l.diffLines.length,y=l.newTreeEntry?.path,_=l.oldTreeEntry?.path;return o[4]!==d?(a=()=>u(!d),o[4]=d,o[5]=a):a=o[5],o[6]!==l.path||o[7]!==l.status||o[8]!==d||o[9]!==h||o[10]!==g||o[11]!==f||o[12]!==y||o[13]!==_||o[14]!==a?(i=(0,m.jsx)(rR.B,{className:rO.taskDiffHeader,isCollapsed:d,linesAdded:h,linesChanged:g,linesDeleted:f,newPath:y,oldPath:_,onToggleFileCollapsed:a,patchStatus:l.status,path:l.path}),o[6]=l.path,o[7]=l.status,o[8]=d,o[9]=h,o[10]=g,o[11]=f,o[12]=y,o[13]=_,o[14]=a,o[15]=i):i=o[15],o[16]!==l||o[17]!==d||o[18]!==c?(s=!d&&(0,m.jsx)(rM,{diffEntry:l,tabSize:c}),o[16]=l,o[17]=d,o[18]=c,o[19]=s):s=o[19],o[20]!==i||o[21]!==s?(r=(0,m.jsxs)("div",{className:rO.diffFileSection,children:[i,s]}),o[20]=i,o[21]=s,o[22]=r):r=o[22],r}function rU(e){return"DELETION"===e.type}function rV(e){return"ADDITION"===e.type}function r$(e){let t,n=(0,p.c)(4),{taskDiff:a}=e,{diffEntries:i,tabSize:s}=a,r=i&&i.length>0;return n[0]!==i||n[1]!==r||n[2]!==s?(t=(0,m.jsx)("div",{className:rO.container,children:r?(0,m.jsx)("div",{className:rO.diffFiles,children:i.map(e=>(0,m.jsx)(rF,{diffEntry:e,tabSize:s},e.path))}):(0,m.jsx)("div",{className:rO.emptyState,children:(0,m.jsxs)("div",{className:rO.emptyStateContent,children:[(0,m.jsx)(ef.FileIcon,{size:48}),(0,m.jsx)("h3",{className:rO.emptyStateTitle,children:"No code changes"}),(0,m.jsx)("p",{className:rO.emptyStateText,children:"There are no file changes to display."})]})})}),n[0]=i,n[1]=r,n[2]=s,n[3]=t):t=n[3],t}try{rB.displayName||(rB.displayName="PlainTextStatus")}catch{}try{rM.displayName||(rM.displayName="DiffContent")}catch{}try{rF.displayName||(rF.displayName="DiffFileSection")}catch{}try{r$.displayName||(r$.displayName="TaskDiffPreview")}catch{}function rW(e){let t,n=(0,p.c)(33),{isOpening:a,onClose:i,previewItem:s}=e,r=(0,tN.qw)(),o=null;switch(s.type){case"file":{let e;n[0]!==a||n[1]!==i||n[2]!==s?(e=(0,m.jsx)(rp,{isPreviewOpening:a,file:s,onClose:i}),n[0]=a,n[1]=i,n[2]=s,n[3]=e):e=n[3],o=e;break}case"file-diff":{let e;n[4]!==s?(e=(0,m.jsx)(sZ,{fileDiff:s}),n[4]=s,n[5]=e):e=n[5],o=e;break}case"issue":{let e;n[6]!==a||n[7]!==i||n[8]!==s?(e=(0,m.jsx)(rb,{isPreviewOpening:a,issue:s,onClose:i}),n[6]=a,n[7]=i,n[8]=s,n[9]=e):e=n[9],o=e;break}case"new-issue":{let e;n[10]!==a||n[11]!==i||n[12]!==s?(e=(0,m.jsx)(su,{isPreviewOpening:a,issue:s,onClose:i}),n[10]=a,n[11]=i,n[12]=s,n[13]=e):e=n[13],o=e;break}case"update-issue":{let e;n[14]!==a||n[15]!==i||n[16]!==s?(e=(0,m.jsx)(sI,{isPreviewOpening:a,issue:s,onClose:i}),n[14]=a,n[15]=i,n[16]=s,n[17]=e):e=n[17],o=e;break}case"existing-issue":{let e;n[18]!==a||n[19]!==i||n[20]!==s?(e=(0,m.jsx)(sf,{isPreviewOpening:a,issue:s,onClose:i}),n[18]=a,n[19]=i,n[20]=s,n[21]=e):e=n[21],o=e;break}case"image":{let e;n[22]!==s?(e=(0,m.jsx)(rx,{image:s}),n[22]=s,n[23]=e):e=n[23],o=e;break}case"planning-task":{let e;n[24]!==s?(e=(0,m.jsx)(rA,{task:s}),n[24]=s,n[25]=e):e=n[25],o=e;break}case"task-diff":{let e;n[26]!==s?(e=(0,m.jsx)(r$,{taskDiff:s}),n[26]=s,n[27]=e):e=n[27],o=e;break}case"plugin-content":if(n[28]!==r||n[29]!==s.reference){for(let e of r){let t=e.previewComponents?.[s.reference.type];if(t){o=(0,m.jsx)(t,{reference:s.reference});break}}n[28]=r,n[29]=s.reference,n[30]=o}else o=n[30]}return n[31]!==o?(t=o?(0,m.jsx)(tf.t,{fallback:(0,m.jsx)(tj,{regionName:"This workbench item"}),children:o}):null,n[31]=o,n[32]=t):t=n[32],t}try{rW.displayName||(rW.displayName="ContentPreviewItem")}catch{}let rH={tabContainer:"ContentPreviewTab-module__tabContainer--ApaB_",tabContent:"ContentPreviewTab-module__tabContent--xe28k",isActive:"ContentPreviewTab-module__isActive--Pi2gz",mainButton:"ContentPreviewTab-module__mainButton--vLx58",icon:"ContentPreviewTab-module__icon--lefqk",title:"ContentPreviewTab-module__title--l571P",closeButton:"ContentPreviewTab-module__closeButton--SByWv",trailingComponent:"ContentPreviewTab-module__trailingComponent--lAh8u"};function rq(e){let t=(0,p.c)(3),{file:n}=e;if(n.isStreaming){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tU.A,{size:"small"}),t[0]=e):e=t[0],e}if("markdown"===n.language){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.MarkdownIcon,{}),t[1]=e):e=t[1],e}{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.CodeIcon,{}),t[2]=e):e=t[2],e}}function rz(e){let t=(0,p.c)(9),{item:n}=e;switch(n.type){case"file":{let e;return t[0]!==n?(e=(0,m.jsx)(rq,{file:n}),t[0]=n,t[1]=e):e=t[1],e}case"file-diff":case"task-diff":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.FileDiffIcon,{}),t[2]=e):e=t[2],e}case"image":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.ImageIcon,{}),t[3]=e):e=t[3],e}case"issue":{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueOpenedIcon,{}),t[4]=e):e=t[4],e}case"new-issue":{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueDraftIcon,{}),t[5]=e):e=t[5],e}case"update-issue":{let e;return t[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueDraftIcon,{}),t[6]=e):e=t[6],e}case"existing-issue":{let e;return t[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.IssueOpenedIcon,{}),t[7]=e):e=t[7],e}case"planning-task":{let e;return t[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.TasklistIcon,{}),t[8]=e):e=t[8],e}case"plugin-content":return n.icon;default:return null}}let rG=(0,x.forwardRef)(function(e,t){let n,a,i,s,r,o,l,c,d,u,h,f,g,y,v,b,j,w,N,S,C=(0,p.c)(52);C[0]!==e?({onClick:s,onClose:r,isActive:a,item:i,controlHintId:n,tabPanelId:l,...o}=e,C[0]=e,C[1]=n,C[2]=a,C[3]=i,C[4]=s,C[5]=r,C[6]=o,C[7]=l):(n=C[1],a=C[2],i=C[3],s=C[4],r=C[5],o=C[6],l=C[7]);let[I,k]=(0,x.useState)(!1),T=(0,x.useRef)(null),E=!i.disableCloseButton;C[8]!==r?(c=()=>{r&&r(),(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},C[8]=r,C[9]=c):c=C[9];let L=c,A=(0,x.useRef)(null),R=i.name;C[10]!==I?(d=()=>{let e=T.current;if(!e)return;let t=e.scrollWidth>e.clientWidth;t!==I&&k(t)},C[10]=I,C[11]=d):d=C[11];let D=d,P=`content-preview-tab-${i.id}`;C[12]!==D||C[13]!==P||C[14]!==R?(u=(0,m.jsx)("span",{className:rH.title,"data-title":R,"data-testid":P,ref:T,onMouseEnter:D,children:R}),C[12]=D,C[13]=P,C[14]=R,C[15]=u):u=C[15];let O=u;C[16]!==a?(h=(0,_.$)(rH.tabContent,{[rH.isActive]:a}),C[16]=a,C[17]=h):h=C[17];let B=a?"true":void 0;return C[18]!==s?(f=e=>{s&&s(e),(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},C[18]=s,C[19]=f):f=C[19],C[20]!==L||C[21]!==E?(g=e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":E&&L();break;case"tab":if(e.shiftKey)break;E&&(e.preventDefault(),A.current?.focus())}},y=e=>{1===e.button&&E&&L()},C[20]=L,C[21]=E,C[22]=g,C[23]=y):(g=C[22],y=C[23]),C[24]!==i?(v=(0,m.jsx)("span",{className:rH.icon,children:(0,m.jsx)(rz,{item:i})}),C[24]=i,C[25]=v):v=C[25],C[26]!==I||C[27]!==R||C[28]!==O?(b=I?(0,m.jsx)(th.m,{text:R,position:"bottom",children:O}):O,C[26]=I,C[27]=R,C[28]=O,C[29]=b):b=C[29],C[30]!==i.trailingComponent?(j=i.trailingComponent?(0,m.jsx)("div",{className:rH.trailingComponent,children:i.trailingComponent}):null,C[30]=i.trailingComponent,C[31]=j):j=C[31],C[32]!==n||C[33]!==t||C[34]!==o||C[35]!==v||C[36]!==b||C[37]!==j||C[38]!==B||C[39]!==f||C[40]!==g||C[41]!==y||C[42]!==l?(w=(0,m.jsxs)("button",{className:rH.mainButton,type:"button",role:"tab","aria-selected":B,"aria-describedby":n,"aria-controls":l,onClick:f,onKeyDown:g,onAuxClick:y,ref:t,...o,children:[v,b,j]}),C[32]=n,C[33]=t,C[34]=o,C[35]=v,C[36]=b,C[37]=j,C[38]=B,C[39]=f,C[40]=g,C[41]=y,C[42]=l,C[43]=w):w=C[43],C[44]!==L||C[45]!==E||C[46]!==R?(N=E&&(0,m.jsx)("div",{className:rH.closeButton,children:(0,m.jsx)(e1.K,{icon:ef.XIcon,size:"small",variant:"invisible","aria-label":`Close ${R}`,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:L,ref:A})}),C[44]=L,C[45]=E,C[46]=R,C[47]=N):N=C[47],C[48]!==w||C[49]!==N||C[50]!==h?(S=(0,m.jsx)("div",{className:rH.tabContainer,children:(0,m.jsxs)("div",{className:h,children:[w,N]})}),C[48]=w,C[49]=N,C[50]=h,C[51]=S):S=C[51],S});try{rq.displayName||(rq.displayName="CodeTabIcon")}catch{}try{rz.displayName||(rz.displayName="TabIcon")}catch{}try{rG.displayName||(rG.displayName="ContentPreviewTab")}catch{}function rK(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,m.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{rK.displayName||(rK.displayName="DiceIcon")}catch{}let rQ={container:"EmptyState-module__container--LAYqE",icon:"EmptyState-module__icon--Ur91O",heading:"EmptyState-module__heading--fStvv",subtitle:"EmptyState-module__subtitle--tjaBc"};function rY(e){let t,n,a,i,s,r,o,l,c,d,u,h,f=(0,p.c)(23),{isOpening:g}=e,y=(0,W.b)(),_=(0,U.Pk)(),v=(0,Z.zy)(),b=(0,x.useRef)(null);f[0]!==_?(t=(0,nL.W)(_),f[0]=_,f[1]=t):t=f[1];let j=t,w=(0,M.X)();f[2]===Symbol.for("react.memo_cache_sentinel")?(n=[],f[2]=n):n=f[2];let[N,S]=(0,x.useState)(n);f[3]!==w.icebreakers?(a=()=>{var e;if(Array.isArray(e=w.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=w.icebreakers.find(rJ);e&&e.data.length>0&&S(e.data)}},f[3]=w.icebreakers,f[4]=a):a=f[4],f[5]!==v||f[6]!==w.icebreakers?(i=[w.icebreakers,v],f[5]=v,f[6]=w.icebreakers,f[7]=i):i=f[7],(0,x.useEffect)(a,i),f[8]!==g?(s=()=>{g&&b.current&&window.requestAnimationFrame(()=>{b.current?.focus({preventScroll:!0})})},r=[g],f[8]=g,f[9]=s,f[10]=r):(s=f[9],r=f[10]),(0,x.useEffect)(s,r),f[11]!==j||f[12]!==N||f[13]!==y||f[14]!==_?(o=()=>{if(0===N.length)return;let e=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(N),t=0===_.messages.length?j:(0,nL.W)(_),n=_.currentUserLogin,a=e.message;y.sendChatMessage({thread:t,content:a.replaceAll("$$USERNAME$$",n),references:_.currentReferences,topic:_.currentTopic,context:_.context,customInstructions:_.customInstructions,model:_.model}),(0,tm.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:_.currentTopic?.name,mode:"immersive",suggestionId:e.id})},f[11]=j,f[12]=N,f[13]=y,f[14]=_,f[15]=o):o=f[15];let C=o;return f[16]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(ef.BrowserIcon,{size:24,className:rQ.icon}),u=(0,m.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),l=(0,m.jsx)("h2",{className:rQ.heading,children:"View files directly within Copilot"}),c=(0,m.jsx)("p",{className:rQ.subtitle,children:"Ask to generate a file or app, or use the button below to try it yourself."}),f[16]=l,f[17]=c,f[18]=d,f[19]=u):(l=f[16],c=f[17],d=f[18],u=f[19]),f[20]!==C||f[21]!==_.isWaitingOnCopilot?(h=(0,m.jsxs)("div",{className:rQ.container,children:[d,u,l,c,(0,m.jsx)(tn.Q,{ref:b,leadingVisual:rK,onClick:C,disabled:_.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]}),f[20]=C,f[21]=_.isWaitingOnCopilot,f[22]=h):h=f[22],h}function rJ(e){return"interactional"===e.type}try{rY.displayName||(rY.displayName="EmptyState")}catch{}let rX={container:"LoadingState-module__container--dKvYJ"};function rZ(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:rX.container,children:(0,m.jsx)(tU.A,{size:"large"})}),t[0]=e):e=t[0],e}try{rZ.displayName||(rZ.displayName="LoadingState")}catch{}function r0(e,t,n={}){(0,tm.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function r1({returnFocusRef:e}){let t=(0,eY.tZ)(),n=(0,eY.wI)(),{selectedThreadID:a}=(0,U.bP)("selectedThreadID"),i=(0,tg.S)(a),{items:s,allOpenItems:r,selectedItem:o,openItem:l,closeItem:c,closeItems:d,closePreviewPane:u,showLoadingState:p,openResourcePanel:h}=(0,eY.xx)(),f=(0,tg.S)(t),g=t&&!f,y=f&&!t,v=r.map(e=>s.get(e)).filter(e=>e?.type==="file"),b=(0,x.useId)(),j=(0,x.useId)(),w=(0,x.useId)(),N=r.map(e=>s.get(e)).filter(e=>!!e),S=N.find(e=>e.id===o)??N[0];(0,x.useEffect)(()=>{(y||tu.W.focusTextAreaInsteadOfWorkbench&&S&&"file"===S.type&&!g)&&e.current?.focus()},[y,g,e,S]),(0,x.useEffect)(()=>{void 0!==i&&i!==a&&u()},[u,i,a]);let C=async()=>{let e=v.map(e=>new File([e.value],e.name));sX(new File([await (0,tx._6)(e).blob()],"files.zip"))},I=(0,x.useCallback)((e=!1)=>{if(S){let t=e&&1===N.length;c(S.id),t&&(u(),(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},[c,u,N.length,S]),k=(0,x.useRef)([]),T=(0,x.useRef)(null);(0,t_.G)({containerRef:T,focusableElementFilter:e=>"tab"===e.role,bindKeys:ty.z0.ArrowHorizontal|ty.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},[N]);let E=!(0,td.g)(T);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:tw.toolbar,children:[(!tu.W.copilotResourcePanel||!n)&&(0,m.jsx)("div",{className:(0,_.$)(tw.actions,tw.rightDivider),children:tu.W.copilotResourcePanel?n?null:(0,m.jsx)(e1.K,{icon:ef.ListUnorderedIcon,"aria-label":"Open resource panel",onClick:h,variant:"invisible"}):(0,m.jsx)(r2,{})}),(0,m.jsx)("div",{className:tw.tabsContainer,children:(0,m.jsxs)("div",{className:tw.tabs,role:"tablist","aria-label":"Workbench items",ref:T,tabIndex:-1,onWheel:e=>{e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft+=e.deltaY)},children:[N.map((e,t)=>(0,m.jsx)(rG,{id:e.id===o?b:void 0,tabPanelId:e.id===o?j:void 0,controlHintId:w,isActive:e.id===o,onClick:()=>{l(e.id),r0("filePreviewTab.click",e)},onClose:()=>(e=>{let t=N[e];if(!t)return;let n=k.current[e+1]??k.current[e-1]??T.current;n?.focus();let a=1===N.length;c(t.id),a&&u(),r0("filePreviewTab.close",t)})(t),item:e,ref:e=>{k.current[t]=e}},e.id)),(0,m.jsx)("span",{id:w,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),(0,m.jsx)("span",{})]})}),r.length>0&&(0,m.jsx)("div",{className:(0,_.$)(tw.actions,E&&tw.leftDivider),children:(0,m.jsxs)(eX.W,{children:[(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(e1.K,{icon:ef.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsxs)(eZ.l,{children:[v.length>0&&(0,m.jsxs)(eZ.l.Item,{onSelect:C,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.FileZipIcon,{})}),"Download all files"]}),(0,m.jsxs)(eZ.l.Item,{onSelect:()=>{d(),u(),(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.XIcon,{})}),"Close all tabs"]})]})})]})}),(0,m.jsx)("div",{className:tw.actions,children:tu.W.copilotResourcePanel?(0,m.jsx)(e1.K,{variant:"invisible",icon:ef.XIcon,"aria-label":"Close workbench",onClick:u}):null})," "]}),(0,m.jsx)("div",{className:tw.content,role:"tabpanel",id:j,"aria-labelledby":b,children:p?(0,m.jsx)(rZ,{}):S?(0,m.jsx)(rW,{isOpening:g,previewItem:S,onClose:I}):(0,m.jsx)(rY,{isOpening:g})})]})}function r2(){let e,t,n=(0,p.c)(3),{closePreviewPane:a}=(0,eY.xx)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ef.SidebarCollapseIcon,{}),n[0]=e):e=n[0],n[1]!==a?(t=(0,m.jsx)(th.m,{text:"Close workbench",position:"bottom",relationship:"label",children:(0,m.jsx)(tp.$,{iconOnly:!0,icon:e,onClick:()=>{a(),(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"})}})}),n[1]=a,n[2]=t):t=n[2],t}function r3(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:tw.toolbar,children:(0,m.jsx)("div",{className:(0,_.$)(tw.actions,tw.rightDivider),children:(0,m.jsx)(r2,{})})}),(0,m.jsx)("div",{className:(0,_.$)(tw.content),children:(0,m.jsx)(tj,{regionName:"The workbench"})})]}),t[0]=e):e=t[0],e}function r4(e){let t,n,a,i,s,r=(0,p.c)(13),o=(0,x.useId)(),{contentPreviewRef:l}=(0,eY.xx)(),c=(0,eY.tZ)(),d=(0,eY.wI)()&&tw.resourcePanelOpen;r[0]!==d?(t=(0,_.$)(tw.container,d),r[0]=d,r[1]=t):t=r[1];let u=c?l:void 0;return r[2]!==o?(n=(0,m.jsx)("h2",{id:o,className:"sr-only",children:"Workbench"}),r[2]=o,r[3]=n):n=r[3],r[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(r3,{}),r[4]=a):a=r[4],r[5]!==e?(i=(0,m.jsx)(tf.t,{fallback:a,children:(0,m.jsx)(r1,{...e})}),r[5]=e,r[6]=i):i=r[6],r[7]!==o||r[8]!==t||r[9]!==u||r[10]!==n||r[11]!==i?(s=(0,m.jsxs)("div",{"aria-labelledby":o,className:t,tabIndex:-1,"data-testid":"content-preview",role:"dialog",ref:u,children:[n,i]}),r[7]=o,r[8]=t,r[9]=u,r[10]=n,r[11]=i,r[12]=s):s=r[12],s}try{r1.displayName||(r1.displayName="ContentPreviewInner")}catch{}try{r2.displayName||(r2.displayName="CloseContentPreviewButton")}catch{}try{r3.displayName||(r3.displayName="ContentPreviewFallback")}catch{}try{r4.displayName||(r4.displayName="ContentPreview")}catch{}var r5=n(44296);let r6={container:"TaskChat-module__container--n3jVO",scrollContainer:"TaskChat-module__scrollContainer--ENR5a",chatBottom:"TaskChat-module__chatBottom--LvyVq"};var r7=n(34001),r8=n(12360),r9=n(7104),oe=n(4908),ot=n(23398);let on={detailsContainer:"TaskView-module__detailsContainer--lDDCj"};var oa=n(58706),oi=n(88984),os=n(23302),or=n(12385),oo=n(27566);function ol(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,_=(0,p.c)(43),{nwo:x,currentUserCanPush:v,isCollapsed:b,onModifierClick:j}=e,{session:w}=(0,r5.Lg)(),N=x??null;_[0]!==w.workflow_run_id||_[1]!==N?(t=(0,oo.A)(N,w.workflow_run_id),_[0]=w.workflow_run_id,_[1]=N,_[2]=t):t=_[2];let S=t;_[3]!==b||_[4]!==j?(n=e=>{if((e.altKey||e.metaKey)&&j)return e.preventDefault(),e.stopPropagation(),j(!!b),!1},_[3]=b,_[4]=j,_[5]=n):n=_[5];let C=n,I=!b;return _[6]!==b?(a=b?(0,m.jsx)(ef.ChevronRightIcon,{}):(0,m.jsx)(ef.ChevronDownIcon,{}),_[6]=b,_[7]=a):a=_[7],_[8]!==w.name?(i=(0,m.jsx)("span",{className:"overflow-hidden text-truncate",children:w.name}),_[8]=w.name,_[9]=i):i=_[9],_[10]!==w.state?(s=(0,oi.Q)(w.state),_[10]=w.state,_[11]=s):s=_[11],_[12]!==w.state?(r=(0,e_.wG)(w.state),_[12]=w.state,_[13]=r):r=_[13],_[14]!==r?(o=(0,m.jsx)("span",{className:"ml-2 text-semibold",children:r}),_[14]=r,_[15]=o):o=_[15],_[16]!==s||_[17]!==o?(l=(0,m.jsxs)(K.B,{gap:"none",direction:"horizontal",className:"flex-items-center",children:[s,o]}),_[16]=s,_[17]=o,_[18]=l):l=_[18],_[19]!==w.completed_at||_[20]!==w.created_at||_[21]!==w.state?(c="queued"!==w.state&&(0,m.jsxs)(K.B,{gap:"none",direction:"horizontal",className:"flex-items-center",children:[(0,m.jsx)("span",{className:"text-small fgColor-muted mr-1",children:"Duration:"}),(0,m.jsx)("span",{role:"timer",className:"text-semibold",children:(0,m.jsx)(os.A,{createdAt:w.created_at,completedAt:w.completed_at,state:w.state})})]}),_[19]=w.completed_at,_[20]=w.created_at,_[21]=w.state,_[22]=c):c=_[22],_[23]!==l||_[24]!==c||_[25]!==i?(d=(0,m.jsxs)(K.B,{direction:"horizontal",gap:"spacious",wrap:"wrap",className:"flex-items-center",children:[i,l,c]}),_[23]=l,_[24]=c,_[25]=i,_[26]=d):d=_[26],_[27]!==v||_[28]!==x?(u=(0,m.jsx)(or.l,{nwo:x,currentUserCanPush:v}),_[27]=v,_[28]=x,_[29]=u):u=_[29],_[30]!==S?(h=S&&(0,m.jsxs)(eX.W,{children:[(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(e1.K,{icon:ef.KebabHorizontalIcon,"aria-label":"Open menu"})}),(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsx)(eZ.l,{children:(0,m.jsx)(eZ.l.LinkItem,{href:S,children:"View verbose logs"})})})]}),_[30]=S,_[31]=h):h=_[31],_[32]!==u||_[33]!==h?(f=(0,m.jsxs)(K.B,{direction:"horizontal",gap:"condensed",className:"flex-items-center",align:"center",children:[u,h]}),_[32]=u,_[33]=h,_[34]=f):f=_[34],_[35]!==d||_[36]!==f?(g=(0,m.jsxs)(K.B,{direction:"horizontal",gap:"spacious",wrap:"wrap",justify:"space-between",align:"center",children:[d,f]}),_[35]=d,_[36]=f,_[37]=g):g=_[37],_[38]!==C||_[39]!==g||_[40]!==I||_[41]!==a?(y=(0,m.jsx)(tn.Q,{as:"summary",block:!0,alignContent:"start","aria-expanded":I,"aria-labelledby":"session-header-title",leadingVisual:a,onClick:C,children:g}),_[38]=C,_[39]=g,_[40]=I,_[41]=a,_[42]=y):y=_[42],y}try{ol.displayName||(ol.displayName="SessionHeader")}catch{}let oc="session-global-toggle";function od({defaultOpen:e=!1}){let{getDetailsProps:t,setOpen:n}=(0,oe.A)({defaultOpen:e}),{currentUserCanPush:a,pull:i,logsPollingInterval:s}=(0,M.X)(),r=(0,x.useRef)(null),o=(0,x.useRef)({}),l=(0,x.useRef)(null);return l.current=e=>{e.detail.excludeInstance!==o.current&&n(e.detail.expand)},(0,x.useEffect)(()=>{let e=e=>{l.current?.(e)};document.addEventListener(oc,e);let t=r.current,n=null;return t&&(n=e=>{e.target!==t&&e.stopPropagation()},t.addEventListener("toggle",n,!0)),()=>{document.removeEventListener(oc,e),t&&n&&t.removeEventListener("toggle",n,!0)}},[]),(0,m.jsxs)(ot.A,{...t(),ref:r,className:`${on.detailsContainer} border rounded overflow-hidden bgColor-default`,children:[(0,m.jsx)(ol,{nwo:i.repository_nwo,currentUserCanPush:a,isCollapsed:!t().open,onModifierClick:e=>{n(e);let t=new CustomEvent(oc,{detail:{expand:e,excludeInstance:o.current}});document.dispatchEvent(t)}}),(0,m.jsx)(oa.U,{logsPollingInterval:s??3e3})]})}try{od.displayName||(od.displayName="Session")}catch{}var ou=n(30938);let om={inputContainer:"TaskChatInput-module__inputContainer--EVPrU",extraToolbarText:"TaskChatInput-module__extraToolbarText--MRY2J"};function op(){let e,t,n=(0,p.c)(2),a=(0,x.useRef)(null);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[{name:"Agent",supportsMCP:!1,supportsAttachments:!1,supportsModelSwitching:!1,supportsAutocompletion:!1,supportsSpaces:!1,icon:(0,m.jsx)(ef.AgentIcon,{}),placeholder:"What would you like to change?"}],n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("div",{className:om.inputContainer,children:(0,m.jsx)(ou.V,{textAreaRef:a,modes:e,size:"large",isStreaming:!1,extraToolbar:(0,m.jsx)("p",{className:om.extraToolbarText,children:"Submitting will post a pull request comment"})})}),n[1]=t):t=n[1],t}try{op.displayName||(op.displayName="TaskChatInput")}catch{}function oh(){let e,t,n,a=(0,p.c)(11),[i]=(0,Z.ok)();a[0]!==i?(e=i.get("session_id"),a[0]=i,a[1]=e):e=a[1];let s=e,{pull:r,sessions:o,sessionsPollingInterval:l}=(0,M.X)(),c=(0,x.useRef)(null);a[2]!==r.id||a[3]!==o||a[4]!==l?(t={pullId:r.id,initialData:o,sessionsPollingInterval:l},a[2]=r.id,a[3]=o,a[4]=l,a[5]=t):t=a[5];let{data:d,isError:u,timedOut:h}=(0,r7.t)(t);if(a[6]!==d||a[7]!==u||a[8]!==h||a[9]!==s){let e=d?[...d].sort(of):[];n=d?u&&h?(0,m.jsx)("p",{children:"Error"}):d.length?(0,m.jsxs)("div",{className:r6.container,children:[(0,m.jsx)(r9.$,{containerRef:c,disabled:!1,className:r6.scrollContainer,children:(0,m.jsxs)(K.B,{direction:"vertical",gap:"spacious",justify:"end",className:r6.chatBottom,children:[(0,m.jsxs)(K.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"end",children:[(0,m.jsx)(ef.CheckIcon,{className:"fgColor-muted"}),(0,m.jsx)("p",{className:"m-0",children:"User started the task"})]}),(0,m.jsxs)(K.B,{direction:"horizontal",gap:"condensed",align:"center",children:[(0,m.jsx)(r8.C,{size:"medium",minimal:!0}),(0,m.jsx)("p",{className:"m-0",children:"Copilot started work"})]}),e.map((t,n)=>{var a;return(0,m.jsx)(r5.PS,{session:t,sessionOwner:void 0,children:(0,m.jsx)(od,{defaultOpen:(a=t.id,s?a===s:n===e.length-1)})},t.id)})]})}),(0,m.jsx)(op,{})]}):(0,m.jsx)("p",{children:"Empty"}):(0,m.jsx)("p",{children:"Loading..."}),a[6]=d,a[7]=u,a[8]=h,a[9]=s,a[10]=n}else n=a[10];return n}function of(e,t){return new Date(e.created_at).getTime()-new Date(t.created_at).getTime()}try{oh.displayName||(oh.displayName="TaskChat")}catch{}var og=n(35898);function oy(){let e,t,n=(0,p.c)(3),{currentUser:a}=(0,M.X)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(o_,{}),n[0]=e):e=n[0],n[1]!==a?(t=(0,m.jsx)(F.Fn,{children:(0,m.jsx)(eY.BH,{children:(0,m.jsx)(og.Q,{user:a,children:e})})}),n[1]=a,n[2]=t):t=n[2],t}function o_(){let e,t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,_,v,b=(0,p.c)(54),{pull:j}=(0,M.X)(),w=(0,eY.tZ)(),{openPreviewPane:N,closePreviewPane:S,openItem:C,updateItem:I}=(0,eY.xx)();b[0]!==j.id?(e={pullRequestId:j.id,includeDiff:!0,includeBody:!0},b[0]=j.id,b[1]=e):e=b[1];let{data:k,refetchDiffs:T,refetchBody:E,refetchTitle:L}=function(e){let t,n,a,i,s,r,o,l=(0,p.c)(29),{pullRequestId:c,includeDiff:d,includeBody:u}=e,m=void 0!==d&&d,h=void 0!==u&&u,f=(0,ts.jE)();l[0]!==h||l[1]!==m||l[2]!==c?(t=["pull-request",c,m,h],l[0]=h,l[1]=m,l[2]=c,l[3]=t):t=l[3];let g=t;l[4]!==h||l[5]!==m||l[6]!==c?(n=()=>to(c,{includeDiff:m,includeBody:h}),l[4]=h,l[5]=m,l[6]=c,l[7]=n):n=l[7];let y=n;l[8]!==y||l[9]!==g?(a={queryKey:g,queryFn:y},l[8]=y,l[9]=g,l[10]=a):a=l[10];let{data:_,refetch:x}=(0,tr.I)(a);l[11]!==c||l[12]!==f||l[13]!==g?(i=async()=>{let e=await to(c,{includeDiff:!0,includeBody:!1});f.setQueryData(g,t=>t?{...t,diffs:e.diffs}:e)},l[11]=c,l[12]=f,l[13]=g,l[14]=i):i=l[14];let v=i;l[15]!==c||l[16]!==f||l[17]!==g?(s=async()=>{let e=await to(c,{includeDiff:!1,includeBody:!0});f.setQueryData(g,t=>t?{...t,body:e.body}:e)},l[15]=c,l[16]=f,l[17]=g,l[18]=s):s=l[18];let b=s;l[19]!==c||l[20]!==f||l[21]!==g?(r=async()=>{let e=await to(c,{includeDiff:!1,includeBody:!1});f.setQueryData(g,t=>t?{...t,title:e.title}:e)},l[19]=c,l[20]=f,l[21]=g,l[22]=r):r=l[22];let j=r;return l[23]!==_||l[24]!==x||l[25]!==b||l[26]!==v||l[27]!==j?(o={data:_,refetch:x,refetchDiffs:v,refetchBody:b,refetchTitle:j},l[23]=_,l[24]=x,l[25]=b,l[26]=v,l[27]=j,l[28]=o):o=l[28],o}(e);!function(e,t,n,a){let i,s,r,o,l=(0,p.c)(10);l[0]!==t?(i=(0,tc.A)(t,2e3,{leading:!1,trailing:!0}),l[0]=t,l[1]=i):i=l[1];let c=i;l[2]!==n?(s=(0,tc.A)(n,2e3,{leading:!1,trailing:!0}),l[2]=n,l[3]=s):s=l[3];let d=s;l[4]!==a?(r=(0,tc.A)(a,2e3,{leading:!1,trailing:!0}),l[4]=a,l[5]=r):r=l[5];let u=r;l[6]!==d||l[7]!==c||l[8]!==u?(o=e=>{e.event_updates?.git_updated&&c(),e.event_updates?.body_updated&&d(),e.event_updates?.title_updated&&u()},l[6]=d,l[7]=c,l[8]=u,l[9]=o):o=l[9];let m=o;(0,tl.x)(e,m)}(k?.aliveChannel,T,E,L);let A=(0,x.useRef)(!1),R=(0,x.useRef)(!1),D=(0,x.useRef)(!1);b[2]!==C||b[3]!==N||b[4]!==k||b[5]!==I?(t=()=>{if(k?.body){let e={body:k.body,title:k.title,type:"pr-overview"},t={...(0,tR.Bx)(e,nE.Wp),disableCloseButton:!0,icon:(0,m.jsx)(ef.NoteIcon,{})};I(t),R.current||D.current||(C(t.id,!0),N(),D.current=!0),R.current=!0}},b[2]=C,b[3]=N,b[4]=k,b[5]=I,b[6]=t):t=b[6];let P=k?.body,O=k?.title;b[7]!==C||b[8]!==N||b[9]!==P||b[10]!==O||b[11]!==I?(n=[P,O,I,C,N],b[7]=C,b[8]=N,b[9]=P,b[10]=O,b[11]=I,b[12]=n):n=b[12],(0,x.useEffect)(t,n),b[13]!==C||b[14]!==N||b[15]!==j.id||b[16]!==k?.body||b[17]!==k?.diffs||b[18]!==I?(a=()=>{let e=k?.diffs??[];if(e.length>0){let t={...(0,tR.GJ)(e,String(j.id)),disableCloseButton:!0,trailingComponent:(0,m.jsx)(tH.A,{children:e.length})};if(I(t),!A.current){let e=!!k?.body,n=!e&&!D.current;C(t.id,n),e||(N(),D.current=!0)}A.current=!0}},b[13]=C,b[14]=N,b[15]=j.id,b[16]=k?.body,b[17]=k?.diffs,b[18]=I,b[19]=a):a=b[19];let B=k?.diffs,F=k?.body;b[20]!==C||b[21]!==N||b[22]!==j.id||b[23]!==B||b[24]!==F||b[25]!==I?(i=[B,F,j.id,I,C,N],b[20]=C,b[21]=N,b[22]=j.id,b[23]=B,b[24]=F,b[25]=I,b[26]=i):i=b[26],(0,x.useEffect)(a,i);let V=(0,W.b)(),$=(0,eQ.U)();b[27]!==S||b[28]!==N?(s=e=>{e?N():S()},b[27]=S,b[28]=N,b[29]=s):s=b[29];let q=s;b[30]===Symbol.for("react.memo_cache_sentinel")?(r=[],b[30]=r):r=b[30],(0,x.useEffect)(ov,r),b[31]!==V?(o=()=>{V.selectThread(null,{includeThreads:!1,clearTopic:!0})},l=[V],b[31]=V,b[32]=o,b[33]=l):(o=b[32],l=b[33]),(0,x.useEffect)(o,l);let{ssoOrganizations:z}=(0,U.Pk)();b[34]!==z?(c=z.map(ox),b[34]=z,b[35]=c):c=b[35];let G=c;return b[36]!==G?(d=()=>{let e=sessionStorage.getItem("PROTECTED_ORGS");JSON.stringify(G)!==e&&(new H.l().removeLocalStorageAuthToken(),sessionStorage.setItem("PROTECTED_ORGS",JSON.stringify(G)))},u=[G],b[36]=G,b[37]=d,b[38]=u):(d=b[37],u=b[38]),(0,x.useEffect)(d,u),b[39]!==w||b[40]!==q?(h=[w,q],b[39]=w,b[40]=q,b[41]=h):h=b[41],b[42]!==w||b[43]!==N||b[44]!==j?(f=(0,m.jsx)(J.P.Header,{children:(0,m.jsx)(ti,{pull:j,isContentPreviewOpen:w,openPreviewPane:N})}),b[42]=w,b[43]=N,b[44]=j,b[45]=f):f=b[45],b[46]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsx)(J.P.Sidebar,{children:(0,m.jsx)(X.U,{})}),b[46]=g):g=b[46],b[47]===Symbol.for("react.memo_cache_sentinel")?(y=(0,m.jsx)(J.P.ColumnLeft,{children:(0,m.jsx)(oh,{})}),b[47]=y):y=b[47],b[48]!==$?(_=(0,m.jsx)(J.P.ColumnRight,{children:(0,m.jsx)(r4,{returnFocusRef:$})}),b[48]=$,b[49]=_):_=b[49],b[50]!==h||b[51]!==f||b[52]!==_?(v=(0,m.jsxs)(J.P,{mainColumn:"left","data-hpc":!0,secondaryColumnState:h,children:[f,g,y,_]}),b[50]=h,b[51]=f,b[52]=_,b[53]=v):v=b[53],v}function ox(e){return e.login}function ov(){(0,g.D)("Task \xb7 GitHub Copilot")}try{oy.displayName||(oy.displayName="TaskViewWrapper")}catch{}try{o_.displayName||(o_.displayName="TaskView")}catch{}var ob=n(80679),oj=n(71205);let ow={empty:"TaskList-module__empty--Rep1M",emptyStateHeading:"TaskList-module__emptyStateHeading--P4BVB",clockIcon:"TaskList-module__clockIcon--kx3d1",stopIcon:"TaskList-module__stopIcon--O5nlX",checkCircleIcon:"TaskList-module__checkCircleIcon--fj_E_",dotFillIcon:"TaskList-module__dotFillIcon--x5Tte",skipIcon:"TaskList-module__skipIcon--niuIE"};function oN(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(F.Fn,{children:(0,m.jsx)(oS,{})}),t[0]=e):e=t[0],e}function oS(){let e,t=(0,p.c)(3),{tasks:n,isLoading:a}=(0,O.si)();if(t[0]!==a||t[1]!==n){let i=n.filter(oI),s=0===i.length;e=(0,m.jsx)(m.Fragment,{children:s&&!a?(0,m.jsx)("div",{className:ow.empty,children:(0,m.jsx)("div",{className:ow.emptyStateHeading,children:"No recent tasks"})}):(0,m.jsx)(m.Fragment,{children:i.map(oC)})}),t[0]=a,t[1]=n,t[2]=e}else e=t[2];return e}function oC(e){return(0,m.jsx)(oj.W,{href:(0,eI.U)(e.resource_global_id),text:e.isOptimistic?e.problemStatement:e.pull.title,leadingVisual:()=>(function(e){let t=e.latest_session_state,n=e.pull?.state??"unknown";if("queued"===t)return(0,m.jsx)(ef.ClockIcon,{className:ow.clockIcon});if("open"===n){if("waiting_for_user"===t||"completed"===t)return(0,m.jsx)(ef.CheckCircleFillIcon,{className:ow.checkCircleIcon});if("failed"===t||"timed_out"===t)return(0,m.jsx)(ef.StopIcon,{className:ow.stopIcon});if("in_progress"===t)return(0,m.jsx)(ob.gX,{animated:!0});if("idle"===t)return(0,m.jsx)(ef.DotFillIcon,{className:ow.dotFillIcon});if("cancelled"===t)return(0,m.jsx)(ef.SkipIcon,{className:ow.skipIcon})}return(0,m.jsx)(ef.DotFillIcon,{className:ow.dotFillIcon})})(e)},e.resource_id)}function oI(e){return!e.pull||"merged"!==e.pull.state&&"closed"!==e.pull.state}try{oN.displayName||(oN.displayName="TasksListWrapper")}catch{}try{oS.displayName||(oS.displayName="TasksList")}catch{}var ok=n(56833);let oT={title:"PullRequestOverviewPreview-module__title--Csd4m"};function oE(e){let t,n,a,i=(0,p.c)(8),{title:s,body:r,className:o}=e;return i[0]!==s?(t=(0,m.jsx)(ok.z,{children:(0,m.jsx)(ok.z.TitleArea,{children:(0,m.jsx)(ok.z.Title,{as:"h1",className:oT.title,children:s})})}),i[0]=s,i[1]=t):t=i[1],i[2]!==r?(n=r&&(0,m.jsx)(ru,{content:{value:r,name:"pull-request-body.md"},hideHeadingAnchors:!0,fallbackToRaw:!0}),i[2]=r,i[3]=n):n=i[3],i[4]!==o||i[5]!==t||i[6]!==n?(a=(0,m.jsxs)("div",{className:o,children:[t,n]}),i[4]=o,i[5]=t,i[6]=n,i[7]=a):a=i[7],a}try{oE.displayName||(oE.displayName="PullRequestOverviewPreview")}catch{}function oL(e){let t,n=(0,p.c)(3),{reference:a}=e;return"pr-overview"!==a.type?null:(n[0]!==a.body||n[1]!==a.title?(t=(0,m.jsx)(oE,{title:a.title,body:a.body}),n[0]=a.body,n[1]=a.title,n[2]=t):t=n[2],t)}try{oL.displayName||(oL.displayName="PullRequestOverviewPluginPreview")}catch{}let oA=/\/copilot\/tasks\/pull\/([a-zA-Z0-9-_]+)/;let TasksPlugin=class TasksPlugin{get previewComponents(){return{"pr-overview":oL}}constructor(){(0,f._)(this,"id",eq.v),(0,f._)(this,"displayName",eq.Ns),(0,f._)(this,"activityItems",[{displayName:"Tasks",Component:oN}]),(0,f._)(this,"skipSyncRouteToThread",!0),(0,f._)(this,"components",[{id:eq.kF,Component:oy,routes:[oA]}])}};var oR=n(37294),oD=n(60460),oP=n(65411),oO=n(82590),oB=n(46857);let oM={container:"LoopBlock-module__container--F3X80",streaming:"LoopBlock-module__streaming--kzTU_",header:"LoopBlock-module__header--Bmyfz",headerCollapsed:"LoopBlock-module__headerCollapsed--Yoo66",expandButton:"LoopBlock-module__expandButton--kYkwN",buttonText:"LoopBlock-module__buttonText--pH2DI",content:"LoopBlock-module__content--SQW7_",node:"LoopBlock-module__node--GZLd9",iconContainer:"LoopBlock-module__iconContainer--QF1t5",checkIcon:"LoopBlock-module__checkIcon--_Toxw",nodeTitle:"LoopBlock-module__nodeTitle--upYDV"};function oF(e){let t,n,a,i,s,r,o,l,c,d=(0,p.c)(26),{loop:u,headerButton:h,isStreaming:f}=e,[g,y]=(0,x.useState)(!0);if(!u)return null;d[0]!==g?(t=()=>y(!g),d[0]=g,d[1]=t):t=d[1];let v=t,b=f&&oM.streaming;d[2]!==b?(n=(0,_.$)(oM.container,b),d[2]=b,d[3]=n):n=d[3];let j=!g&&oM.headerCollapsed;return d[4]!==j?(a=(0,_.$)(oM.header,j),d[4]=j,d[5]=a):a=d[5],d[6]!==g?(i=g?(0,m.jsx)(ef.ChevronDownIcon,{size:16}):(0,m.jsx)(ef.ChevronRightIcon,{size:16}),d[6]=g,d[7]=i):i=d[7],d[8]!==u.title?(s=(0,m.jsx)("span",{className:oM.buttonText,children:u.title}),d[8]=u.title,d[9]=s):s=d[9],d[10]!==i||d[11]!==s||d[12]!==v?(r=(0,m.jsx)(tn.Q,{variant:"invisible",onClick:v,className:oM.expandButton,leadingVisual:i,children:s}),d[10]=i,d[11]=s,d[12]=v,d[13]=r):r=d[13],d[14]!==h||d[15]!==a||d[16]!==r?(o=(0,m.jsxs)("div",{className:a,children:[r,h]}),d[14]=h,d[15]=a,d[16]=r,d[17]=o):o=d[17],d[18]!==g||d[19]!==f||d[20]!==u.nodes?(l=g&&(0,m.jsx)("div",{className:oM.content,children:u.nodes.map((e,t)=>{let n=f&&t===u.nodes.length-1;return(0,m.jsxs)("div",{className:oM.node,children:[(0,m.jsx)("div",{className:oM.iconContainer,children:(0,m.jsx)(ef.CheckCircleFillIcon,{size:16,className:oM.checkIcon})}),n&&!e.title?null:(0,m.jsx)("span",{className:oM.nodeTitle,children:e.title})]},e.id)})}),d[18]=g,d[19]=f,d[20]=u.nodes,d[21]=l):l=d[21],d[22]!==l||d[23]!==n||d[24]!==o?(c=(0,m.jsxs)("div",{className:n,children:[o,l]}),d[22]=l,d[23]=n,d[24]=o,d[25]=c):c=d[25],c}try{oF.displayName||(oF.displayName="LoopBlockContent")}catch{}var oU=n(91348),oV=n(12465),o$=n(37510),oW=n(99993);function oH(e){let t,n,a,i,s=(0,p.c)(15),{isStreaming:r}=e,o=function(){let{message:e}=(0,n4.V)(),t=(0,oB.O)(e);return t?.pipeline??null}(),{mutate:l}=(0,oV.P)(),{data:c}=(0,oW._N)();s[0]!==c||s[1]!==o||s[2]!==l?(t=()=>{if(!c||!o)return;let e=(0,oU.kX)({...o,id:c.id},[]);l({loopID:c.id,updateFn:()=>e})},s[0]=c,s[1]=o,s[2]=l,s[3]=t):t=s[3];let d=t;s[4]!==r||s[5]!==c||s[6]!==o?(n=c&&!r&&!(0,o$.S)(c,o),s[4]=r,s[5]=c,s[6]=o,s[7]=n):n=s[7];let u=n;s[8]!==d||s[9]!==u?(a=u?(0,m.jsx)(tn.Q,{variant:"invisible",onClick:d,children:"Restore"}):null,s[8]=d,s[9]=u,s[10]=a):a=s[10];let h=a;return s[11]!==r||s[12]!==o||s[13]!==h?(i=(0,m.jsx)(oF,{loop:o,headerButton:h,isStreaming:r}),s[11]=r,s[12]=o,s[13]=h,s[14]=i):i=s[14],i}try{oH.displayName||(oH.displayName="LoopBlock")}catch{}let oq="data-loop-block",oz=(0,n2.F)(oq),oG={div:(e,t)=>{let n=(0,n2.k)(e,oq);return n?(0,m.jsx)(oH,{...n}):t}};function oK(){return{transformMarkdown:e=>(0,n3.YR)(e,"code",e=>{"loop"===e.lang&&(e.data={hName:"div",hProperties:{[oz]:JSON.stringify({isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,n3.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&oz in a.properties&&n.children.splice(t,1,a)}),reactComponents:oG}}var oQ=n(54908),oY=n(35750),oJ=n(18150),oX=n(85242),oZ=n(88243),o0=n(16213),o1=n(46062),o2=new WeakMap,o3=new WeakMap,o4=new WeakMap,o5=new WeakSet,o6=new WeakMap;let ChatCompletionsClient=class ChatCompletionsClient{async *getChatCompletion(e,t,n){let a=(0,o1.wv)(),i=t??a.id,s=await (0,oY._)(this,o2).getAuthToken(),r=await (0,nQ.p)({basePath:(0,oY._)(this,o3),body:{messages:e,model:i,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:s,integrationId:(0,oY._)(this,o6).integrationID,realIp:(0,oY._)(this,o4),signal:n});if(!r.ok){let e=await r.response?.text()??"Unknown error",t=e;try{let n=JSON.parse(e);t=n.error?.message||r.error}catch(e){}throw(0,tm.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}!n?.aborted&&r.body&&(yield*(0,oZ._)(this,o5,o7).call(this,r.body,n))}constructor(e,t,n=""){(0,o0._)(this,o5),(0,oJ._)(this,o6,{get:o8,set:void 0}),(0,oJ._)(this,o2,{writable:!0,value:void 0}),(0,oJ._)(this,o3,{writable:!0,value:void 0}),(0,oJ._)(this,o4,{writable:!0,value:void 0}),(0,oX._)(this,o3,e),(0,oX._)(this,o2,t),(0,oX._)(this,o4,n)}};async function*o7(e,t){let n=new TextDecoder("utf-8"),a=e.getReader(),i="";try{for(;;){if(t?.aborted)return;let{done:e,value:s}=await a.read();if(e)break;for(i+=n.decode(s);;){if(i.startsWith("data: [DONE]"))return;let e=i.indexOf(`

`);if(-1===e)break;let t=i.slice(0,e).replace(/^data:\s+/,"");if(""===t){i=i.slice(e+2);continue}try{let e=JSON.parse(t),n=e.choices?.[0]?.delta?.content??"",a=e.model,i=e.usage?{prompt_tokens:e.usage.prompt_tokens,completion_tokens:e.usage.completion_tokens,total_tokens:e.usage.total_tokens,model:a}:void 0;(n||i)&&(yield{content:n,usage:i})}catch{}i=i.slice(e+2)}}}finally{a.releaseLock()}}function o8(){return{integrationID:"copilot-chat"}}var o9=n(21046);let le=["SAML"],lt={FORBIDDEN:["SAML error"]};var ln=new WeakMap,la=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t){let n={"X-Copilot-Api-Token":(await (0,oY._)(this,la).getAuthToken()).value},a={query:e};t?.nodeExecution&&(a.loopId=t.nodeExecution.loopId,a.version=t.nodeExecution.version,a.executionId=t.nodeExecution.executionId,a.nodeId=t.nodeExecution.nodeId);let i=await (0,t8.Sr)((0,oY._)(this,ln),{method:"POST",body:a,headers:n,signal:t?.signal});if(i.ok){let e=await i.json();if(function(e,t){var n;if("errors"in(e="errors"in(n=e)?{...n,errors:n.errors.filter(e=>!le.includes(e.type)&&!lt[e.type]?.includes(e.message))}:n)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,tm.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let n=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw(0,o9.vV)(n),(0,tm.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:n}),Error("Failed to fetch data.")}return!0}(e,i.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e,t){(0,oJ._)(this,ln,{writable:!0,value:void 0}),(0,oJ._)(this,la,{writable:!0,value:void 0}),(0,oX._)(this,ln,e),(0,oX._)(this,la,t)}};let li={header:"LoopsView-module__header--ZnQDC",input:"LoopsView-module__input--HBzte",noResultsMessage:"LoopsView-module__noResultsMessage--OkrMA",searchContainer:"LoopsView-module__searchContainer--ypqMb"};var ls=n(80770),lr=n(46747),lo=n(36284),ll=n(99511);let lc={searchContainer:"SearchInput-module__searchContainer--r7MLn",searchInputWrapper:"SearchInput-module__searchInputWrapper--fhRw6",searchInput:"SearchInput-module__searchInput--PKKMu"};function ld(e){let t,n,a,i,s,r,o=(0,p.c)(20),{onSearch:l,placeholder:c,"aria-label":d,disabled:u,debounceDelay:h}=e,f=void 0===c?"Search...":c,g=void 0===d?"Search":d,y=void 0!==u&&u,[_,v]=(0,x.useState)(""),b=(0,lr.d)(l,void 0===h?200:h);o[0]!==b||o[1]!==l?(t=e=>{let t=e.currentTarget.value;v(t),""===t.trim()?l(""):b(t)},o[0]=b,o[1]=l,o[2]=t):t=o[2];let j=t;o[3]!==l?(n=()=>{v(""),l("")},o[3]=l,o[4]=n):n=o[4];let w=n;return o[5]!==g?(a=(0,m.jsx)(lo.A.Label,{visuallyHidden:!0,children:g}),o[5]=g,o[6]=a):a=o[6],o[7]!==w||o[8]!==y||o[9]!==_?(i=""!==_?(0,m.jsx)(e1.K,{icon:ef.XCircleFillIcon,onClick:w,"aria-label":"Clear search",variant:"invisible",size:"small",disabled:y}):void 0,o[7]=w,o[8]=y,o[9]=_,o[10]=i):i=o[10],o[11]!==j||o[12]!==f||o[13]!==_||o[14]!==i?(s=(0,m.jsx)(ll.A,{className:lc.searchInput,placeholder:f,value:_,onChange:j,leadingVisual:ef.SearchIcon,trailingAction:i}),o[11]=j,o[12]=f,o[13]=_,o[14]=i,o[15]=s):s=o[15],o[16]!==y||o[17]!==a||o[18]!==s?(r=(0,m.jsx)("div",{className:lc.searchContainer,children:(0,m.jsxs)(lo.A,{className:lc.searchInputWrapper,disabled:y,children:[a,s]})}),o[16]=y,o[17]=a,o[18]=s,o[19]=r):r=o[19],r}try{ld.displayName||(ld.displayName="SearchInput")}catch{}var lu=n(58615),lm=n(49912),lp=n(17005);let lh={header:"LoopsViewHeader-module__header--miwmH",rightControls:"LoopsViewHeader-module__rightControls--tpwkz"};function lf(){let e,t,n,a,i=(0,p.c)(4),s=(0,x.useRef)(null),r=(0,x.useRef)(null);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(e1.K,{icon:ef.KebabHorizontalIcon,"aria-label":"Menu",onClick:ly})}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{s.current?.openDialog(),(0,tm.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsxs)(eZ.l.Item,{onSelect:t,children:["Give feedback",(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.CommentIcon,{})})]}),i[2]=n):n=i[2],i[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("div",{className:lh.header,children:(0,m.jsxs)("div",{className:lh.rightControls,children:[(0,m.jsxs)(eX.W,{anchorRef:r,children:[e,(0,m.jsx)(eX.W.Overlay,{width:"small",children:(0,m.jsx)(eZ.l,{children:(0,m.jsxs)(eZ.l.Group,{children:[n,(0,m.jsxs)(eZ.l.LinkItem,{href:"/settings/copilot",onClick:lg,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.GearIcon,{})}),"Settings"]})]})})})]}),(0,m.jsx)(lp.l,{ref:s,mode:"immersive",returnFocusRef:r})]})}),i[3]=a):a=i[3],a}function lg(){return(0,tm.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"})}function ly(){return(0,tm.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"})}try{lf.displayName||(lf.displayName="LoopsViewHeader")}catch{}let l_=[{altText:"GitHub Battle Royale report",assetPath:"/images/modules/loops/BattleRoyal.png",loop:{title:"GitHub Battle Royale",description:"Compare two GitHub users based on their pull request contributions and metrics",nodes:[{id:"1",type:"text",title:"Start Date",description:"The date 30 days ago from today",content:"@today-30d",metadata:{inputType:"date"}},{id:"2",type:"text",title:"First Username",description:"GitHub username for the first contestant",content:"jonrohan",metadata:{inputType:"text"}},{id:"3",type:"text",title:"Second Username",description:"GitHub username for the second contestant",content:"colebemis",metadata:{inputType:"text"}},{id:"4",type:"text",title:"Repository",description:"The repository to analyze (in owner/name format)",content:"primer/react",metadata:{inputType:"text"}},{id:"5",type:"github-graphql",title:"First User PRs",description:"Fetch PRs for the first user",content:`query {
  search(query: "repo:{{4}} author:{{2}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Second User PRs",description:"Fetch PRs for the second user",content:`query {
  search(query: "repo:{{4}} author:{{3}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"7",type:"prompt",title:"Battle Analysis",description:"Compare the two users and determine a winner",content:`You're a GitHub Battle Royale announcer. Compare the following metrics between these two contestants based on their pull request data:

# Battle Royal \u{1F934}\u{1F5E1}\u{FE0F}\u{1F478}

1. Total PRs created
2. PR merge rate
3. Lines of code changed (additions + deletions)
4. Average commits per PR
5. PR velocity (PRs per month)

User 1 ({{2}}) data: {{5}}
User 2 ({{3}}) data: {{6}}

Analyze each metric and assign points (1-10) for each category. Then declare an overall winner with a dramatic announcement. Format your response as an exciting battle commentary.`}]}},{altText:"Battle Royale report",assetPath:"/images/modules/loops/FirstResponder.png",loop:{title:"First Responder Activity Report",description:"Generates a summary of a first responder's activity including new issues, PR reviews, and issue involvement from the past week",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-1w",metadata:{inputType:"date"}},{id:"repo",type:"text",title:"Repository",description:"The full repository name (e.g. owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week",content:`query {
  search(query: "repo:{{repo}} author:{{1}} is:issue created:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week",content:`query {
  search(query: "repo:{{repo}} is:pr reviewed-by:{{1}} updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week",content:`query {
  search(query: "repo:{{repo}} involves:{{1}} is:issue updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Activity Summary",description:"Summary report of the first responder's activity",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity in the {{repo}} repository over the past week. Include their issue creation, PR review activities, and issue involvement.

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers)
2. Issue Activity
   - Created Issues
   - Issue Involvement (comments, assignments)
3. PR Review Activity (highlight significant reviews)
4. Key Observations

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift.`}]}},{altText:"GitHub repo feature announcement magazine",assetPath:"/images/modules/loops/NewsFlash.png",loop:{title:"Multi-Repo GitHub Feature Announcement Magazine",description:"Creates a tabloid-style frontpage focusing on new features and enhancements across multiple GitHub repositories",nodes:[{id:"repo1",type:"text",title:"Repository 1",description:"First repository to analyze (format: owner/repo)",content:"facebook/react",metadata:{inputType:"text"}},{id:"repo2",type:"text",title:"Repository 2",description:"Second repository to analyze (format: owner/repo)",content:"microsoft/vscode",metadata:{inputType:"text"}},{id:"repo3",type:"text",title:"Repository 3",description:"Third repository to analyze (format: owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"days",type:"text",title:"Days Limit",description:"Number of days to look back for data",content:"@today-30d",metadata:{inputType:"date"}},{id:"3",type:"github-graphql",title:"Feature PRs - Repository 1",description:"Fetch recent feature/enhancement pull requests from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"Feature PRs - Repository 2",description:"Fetch recent feature/enhancement pull requests from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"github-graphql",title:"Feature PRs - Repository 3",description:"Fetch recent feature/enhancement pull requests from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Feature Requests - Repository 1",description:"Fetch recent feature request issues from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:issue label:\\"Type: Feature Request\\" created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"7",type:"github-graphql",title:"Feature Requests - Repository 2",description:"Fetch recent feature request issues from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"8",type:"github-graphql",title:"Feature Requests - Repository 3",description:"Fetch recent feature request issues from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"9",type:"text",title:"Magazine Style",description:"Define the style of the feature announcement magazine",content:`\u{2728}\u{1F4AB} \u{1F31F} OPEN SOURCE NEWS FLASH \u{1F31F} \u{1F4AB} \u{2728}
\u{1F680} BREAKING UPDATES \u{1F680} EXCLUSIVE FEATURES \u{1F3AF} HOT RELEASES \u{1F525}

Your #1 source for hot new features in your favorite open source projects! \u{1F308}`,metadata:{inputType:"text"}},{id:"10",type:"prompt",title:"Feature Magazine Content",description:"Generate tabloid-style headlines focusing on new features",content:`You are a tech magazine writer specializing in new feature announcements. Create an exciting frontpage covering the latest features and enhancements from these repositories: {{repo1}}, {{repo2}}, and {{repo3}}.

Use this data for each repository:
Repository 1:
- PRs: {{3}}
- Issues: {{6}}

Repository 2:
- PRs: {{4}}
- Issues: {{7}}

Repository 3:
- PRs: {{5}}
- Issues: {{8}}

Start with this header:
{{9}}

For each repository:
1. Create a section with an appropriate emoji
2. Include 2-3 exciting headlines about new features or requests
3. Focus on user impact and benefits
4. Include the original URLs as 'READ MORE' links
5. Mention scope of changes for PRs (additions + deletions)

End with a 'FEATURE FORECAST' section comparing the most exciting upcoming features across repositories.

Format everything in markdown and use emojis liberally.`}]}}];var lx=n(99519),lv=n(43134);let lb=(0,x.lazy)(async()=>({default:(await Promise.all([n.e("primer-react"),n.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),n.e("vendors-node_modules_d3-drag_src_nodrag_js-node_modules_d3-selection_src_pointer_js-node_modu-e1c806"),n.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_lz-string_libs_lz-string_js-6649eb"),n.e("packages_copilot-loops_components_Loop_tsx")]).then(n.bind(n,76899))).Loop}));try{lb.displayName||(lb.displayName="LazyLoop")}catch{}function lj(e){let t,n,a,i,s=(0,p.c)(10),{value:r,onChange:o}=e;s[0]!==o?(t=e=>{o(0===e?"list":"output")},s[0]=o,s[1]=t):t=s[1];let l=t,c="list"===r;s[2]!==c?(n=(0,m.jsx)(s2.I.IconButton,{"aria-label":"List view",selected:c,icon:ef.ThreeBarsIcon}),s[2]=c,s[3]=n):n=s[3];let d="output"===r;return s[4]!==d?(a=(0,m.jsx)(s2.I.IconButton,{"aria-label":"Output view",selected:d,icon:ef.RowsIcon}),s[4]=d,s[5]=a):a=s[5],s[6]!==l||s[7]!==n||s[8]!==a?(i=(0,m.jsxs)(s2.I,{"aria-label":"Loops overview view mode",onChange:l,children:[n,a]}),s[6]=l,s[7]=n,s[8]=a,s[9]=i):i=s[9],i}try{lj.displayName||(lj.displayName="ListModeToggle")}catch{}var lw=n(70324),lN=n(14303);function lS(e){let t,n,a,i=(0,p.c)(14),{onDelete:s,onCopyLoop:r,onDuplicate:o,onShare:l,onEdit:c,onCopyOutput:d,loopId:u,variant:h,hasOutput:f}=e,g=void 0===h?"invisible":h,y=(0,x.useRef)(null);return u?(i[0]!==g?(t=(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(e1.K,{icon:ef.KebabHorizontalIcon,"aria-label":"Manage loop",variant:g})}),i[0]=g,i[1]=t):t=i[1],i[2]!==f||i[3]!==u||i[4]!==r||i[5]!==d||i[6]!==s||i[7]!==o||i[8]!==c||i[9]!==l?(n=(0,m.jsx)(lN.r,{onDelete:s,onCopyLoop:r,onDuplicate:o,onShare:l,onEdit:c,onCopyOutput:d,hasOutput:f,loopId:u,returnFocusRef:y}),i[2]=f,i[3]=u,i[4]=r,i[5]=d,i[6]=s,i[7]=o,i[8]=c,i[9]=l,i[10]=n):n=i[10],i[11]!==t||i[12]!==n?(a=(0,m.jsxs)(eX.W,{anchorRef:y,children:[t,n]}),i[11]=t,i[12]=n,i[13]=a):a=i[13],a):null}try{lS.displayName||(lS.displayName="LoopsContextMenu")}catch{}var lC=n(33026),lI=n(5533);function lk(e,t){return["loop-execution",e,t]}var lT=n(93364),lE=n(48057),lL=n(90122);let lA={panel:"LoopOutput-module__panel--MrOXo",header:"LoopOutput-module__header--fcRKQ",title:"LoopOutput-module__title--pNloU",actions:"LoopOutput-module__actions--S7bni",body:"LoopOutput-module__body--fhlUk"};var lR=n(19336);function lD(e){let t,n,a,i,s,r,o,l,c,d,u,h,f=(0,p.c)(41),{loop:g}=e,{runLoop:y,stopLoop:_,isPreparing:v}=function(){let e=(0,lx.EY)(),t=(0,ts.jE)(),[n,a]=(0,x.useState)(!1);return{runLoop:(0,x.useCallback)(async n=>{a(!0);try{let i=await e.createExecution(n.id,n.version||lC.kj);if(!i.success)throw Error(`Failed to create execution: ${i.error}`);let s=i.data,r=(0,lE.wu)(n.id,n.version||lC.kj),o=lk(n.id,n.version||lC.kj);t.setQueryData(r,s),t.setQueryData(o,s),a(!1),await e.runPipeline(n,s.id,e=>{let a=(0,lE.wu)(n.id,n.version||lC.kj),i=lk(n.id,n.version||lC.kj);switch(e.type){case"UPDATE_NODE_VALUE":case"UPDATE_NODE_VALUE_PARTIAL":{let n=t=>t?{...t,nodes:{...t.nodes,[e.nodeID]:{...t.nodes[e.nodeID],value:e.value,completedAt:"UPDATE_NODE_VALUE"===e.type?Date.now():void 0}}}:null;t.setQueryData(a,n),t.setQueryData(i,n)}break;case"UPDATE_NODE_ERROR":{let n=t=>t?{...t,nodes:{...t.nodes,[e.nodeID]:{...t.nodes[e.nodeID],error:e.error,completedAt:Date.now()}}}:null;t.setQueryData(a,n),t.setQueryData(i,n)}break;case"SET_RUNNING":{let n=t=>t?{...t,nodes:{...t.nodes,[e.nodeID]:{...t.nodes[e.nodeID],completedAt:void 0,startedAt:Date.now()}}}:null;t.setQueryData(a,n),t.setQueryData(i,n)}}},(e,n,a)=>{let i=(0,lE.wu)(e,n),s=t.getQueryData(i);return Promise.resolve(s?(0,lT.$j)(s):(0,lT.YD)("execution not found"))})}catch(e){throw a(!1),(0,o9.vV)("Error running loop:",e),e}},[e,t]),stopLoop:(0,x.useCallback)(n=>{let a=(0,lE.wu)(n.id,n.version||lC.kj),i=t.getQueryData(a);i&&e.stopPipeline(i.id,()=>{t.invalidateQueries({queryKey:a}),t.invalidateQueries({queryKey:lk(n.id,n.version||lC.kj)})})},[e,t]),isPreparing:n}}(),b=(0,oU.FT)(g)[0],{data:j}=function(e,t){let n,a,i,s,r=(0,p.c)(13),o=(0,lx.EY)(),l=e.id,c=e.version??"";return r[0]!==l||r[1]!==c?(n=lk(l,c),r[0]=l,r[1]=c,r[2]=n):n=r[2],r[3]!==l||r[4]!==c||r[5]!==o?(a=async()=>{let e=await o.getExecution(l,c,lC.qD);if(!e.success)return null;let t=e.data;return o.isExecutionRunning(t.id)!==(0,lI.y)(t)?null:t},r[3]=l,r[4]=c,r[5]=o,r[6]=a):a=r[6],void 0!==r[7]?(i=void 0,r[7]=t,r[8]=i):i=r[8],r[9]!==n||r[10]!==a||r[11]!==i?(s={queryKey:n,queryFn:a,enabled:!0,...i,staleTime:3e5},r[9]=n,r[10]=a,r[11]=i,r[12]=s):s=r[12],(0,tr.I)(s)}(g),w=b?j?.nodes[b.id]:void 0,N=w?.value??null,S=w?.error||null;f[0]!==j?(t=(0,lI.y)(j),f[0]=j,f[1]=t):t=f[1];let C=t,I=v||C;f[2]!==N?(n=(0,lL.DO)(N),f[2]=N,f[3]=n):n=f[3];let k=n;f[4]!==g||f[5]!==y?(a=async()=>{await y(g),(0,tm.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_RUN",mode:"loops"})},f[4]=g,f[5]=y,f[6]=a):a=f[6];let T=a;f[7]!==g||f[8]!==_?(i=()=>{_(g),(0,tm.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_STOP",mode:"loops"})},f[7]=g,f[8]=_,f[9]=i):i=f[9];let E=i;f[10]!==N||f[11]!==k?(s=async()=>{if(N)try{await navigator.clipboard.writeText(k),(0,tm.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_COPY_OUTPUT",mode:"loops"})}catch{}},f[10]=N,f[11]=k,f[12]=s):s=f[12];let L=s,A=`${nQ.Jz}/l/${g.id}`;f[13]!==g.title||f[14]!==A?(r=(0,m.jsx)("h3",{className:lA.title,children:(0,m.jsx)(tp.$,{variant:"invisible",condensed:!0,to:A,onClick:lP,children:g.title})}),f[13]=g.title,f[14]=A,f[15]=r):r=f[15],f[16]!==T||f[17]!==E||f[18]!==I||f[19]!==N?(o=(0,m.jsx)(lw.c,{isLoading:I,onClick:T,onStop:E,value:N,variant:"invisible",iconOnly:!0}),f[16]=T,f[17]=E,f[18]=I,f[19]=N,f[20]=o):o=f[20];let R=!!N;f[21]!==L||f[22]!==g.id||f[23]!==R?(l=(0,m.jsx)(lS,{loopId:g.id,onEdit:lP,onCopyOutput:L,hasOutput:R}),f[21]=L,f[22]=g.id,f[23]=R,f[24]=l):l=f[24],f[25]!==l||f[26]!==o?(c=(0,m.jsxs)("div",{className:lA.actions,children:[o,l]}),f[25]=l,f[26]=o,f[27]=c):c=f[27],f[28]!==c||f[29]!==r?(d=(0,m.jsxs)("div",{className:lA.header,children:[r,c]}),f[28]=c,f[29]=r,f[30]=d):d=f[30];let D=!!b;return f[31]!==T||f[32]!==E||f[33]!==I||f[34]!==S||f[35]!==N||f[36]!==D?(u=(0,m.jsx)("div",{className:lA.body,children:(0,m.jsx)(lR.G,{outputNodeExists:D,isRunning:I,nodeValue:N,nodeError:S,onRun:T,onStop:E})}),f[31]=T,f[32]=E,f[33]=I,f[34]=S,f[35]=N,f[36]=D,f[37]=u):u=f[37],f[38]!==d||f[39]!==u?(h=(0,m.jsxs)("div",{className:lA.panel,children:[d,u]}),f[38]=d,f[39]=u,f[40]=h):h=f[40],h}function lP(){(0,tm.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"})}try{lD.displayName||(lD.displayName="LoopOutput")}catch{}let lO={list:"LoopsOutputList-module__list--DoC1u"};var lB=n(76219);function lM(e){let t,n,a,i,s,r,o=(0,p.c)(11),{chatState:l,plugin:c}=e;if(!c||!(0,lm.j)(c))throw Error("LoopsView can only be used with a LoopsPlugin");return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(J.P.Header,{children:(0,m.jsx)(lf,{})}),o[0]=t):t=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(J.P.Sidebar,{children:(0,m.jsx)(X.U,{})}),o[1]=n):n=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(a=[],o[2]=a):a=o[2],o[3]!==l?(i=(0,m.jsx)(lU,{chatState:l}),o[3]=l,o[4]=i):i=o[4],o[5]!==c.service||o[6]!==i?(s=(0,m.jsx)(lx.qT,{value:c.service,children:i}),o[5]=c.service,o[6]=i,o[7]=s):s=o[7],o[8]!==c.previewUrl||o[9]!==s?(r=(0,m.jsxs)(J.P,{"data-testid":"loops-layout",children:[t,n,(0,m.jsx)(J.P.ColumnLeft,{children:(0,m.jsx)(lB.Q,{previewUrl:c.previewUrl,availableModels:a,sendChatMessage:lF,children:s})})]}),o[8]=c.previewUrl,o[9]=s,o[10]=r):r=o[10],r}function lF(){}function lU(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y=(0,p.c)(37),{chatState:_}=e,{data:v,isLoading:b}=(0,ls.C)(),j=(0,W.b)(),w=(0,Z.Zp)(),N=(0,lx.EY)(),S=(0,o1.GF)(_.availableModels),[C,I]=(0,lu.M)("loopsOverviewViewMode","output"),[k,T]=(0,x.useState)("");e:{let e;if(!v||!k.trim()){t=v;break e}if(y[0]!==v||y[1]!==k){let t=k.toLowerCase().trim();e=v.filter(e=>e.title.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)),y[0]=v,y[1]=k,y[2]=e}else e=y[2];t=e}let E=t;y[3]===Symbol.for("react.memo_cache_sentinel")?(n=[],y[3]=n):n=y[3],(0,x.useEffect)(lH,n),y[4]!==j?(a=()=>{j.selectThread(null,{includeThreads:!1,clearTopic:!0})},i=[j],y[4]=j,y[5]=a,y[6]=i):(a=y[5],i=y[6]),(0,x.useEffect)(a,i),y[7]!==S||y[8]!==N||y[9]!==j||y[10]!==w?(s=async e=>{let t=e.trim();if(""===t)return;(0,tm.BI)("dotcom_chat.activate",{target:"OVERVIEW_INITIAL_CREATE",mode:"loops"});let n=crypto.randomUUID(),a={scopeId:oO.S$},i=await j.createThread(a);await N.createLoop(n),(0,lv.aq)(n,i.id);let s={content:t,model:S,references:[],thread:i,mode:oO.lh};j.sendChatMessage(s),w(`${nQ.Jz}/l/${n}`)},y[7]=S,y[8]=N,y[9]=j,y[10]=w,y[11]=s):s=y[11];let L=s;y[12]!==N||y[13]!==w?(r=async e=>{await N.createLoop(e),w(`${nQ.Jz}/l/${e.id}`)},y[12]=N,y[13]=w,y[14]=r):r=y[14];let A=r;y[15]!==I?(o=e=>{I(e)},y[15]=I,y[16]=o):o=y[16];let R=o;y[17]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{T(e),(0,tm.BI)("dotcom_chat.activate",{target:"LOOPS_SEARCH",mode:"loops"})},y[17]=l):l=y[17];let P=l;return y[18]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsxs)(D.Header,{children:[(0,m.jsx)(D.Title,{children:"Loops"}),(0,m.jsx)(D.Description,{children:"Automate repetitive tasks by simply describing them using natural language. Automate once. Loop forever."})]}),y[18]=c):c=y[18],y[19]===Symbol.for("react.memo_cache_sentinel")?(d=[{name:"Loop",icon:(0,m.jsx)(ef.LoopIcon,{}),submitLabel:"Automate",placeholder:"What would you like to automate?"}],y[19]=d):d=y[19],y[20]!==L?(u=(0,m.jsxs)("div",{className:li.header,children:[c,(0,m.jsx)("div",{className:li.input,children:(0,m.jsx)(ou.V,{modes:d,size:"large",onSubmit:L})})]}),y[20]=L,y[21]=u):u=y[21],y[22]!==E||y[23]!==R||y[24]!==b||y[25]!==v||y[26]!==k||y[27]!==C?(h=b||v&&v.length>0?(0,m.jsxs)(D.Section,{children:[(0,m.jsxs)("div",{className:li.searchContainer,children:[(0,m.jsx)(ld,{onSearch:P,placeholder:"Search loops...","aria-label":"Search loops",debounceDelay:300}),(0,m.jsx)(lj,{value:C,onChange:R})]}),k&&E&&0===E.length?(0,m.jsxs)("div",{className:li.noResultsMessage,children:["No loops found matching \u201C",k,"\u201D"]}):"list"===C?(0,m.jsx)(en,{children:(0,m.jsx)(en.List,{loading:b,children:E?.map(l$)})}):(0,m.jsx)("div",{className:lO.list,children:(E||[]).map(lV)})]}):null,y[22]=E,y[23]=R,y[24]=b,y[25]=v,y[26]=k,y[27]=C,y[28]=h):h=y[28],y[29]!==A||y[30]!==b||y[31]!==v?(f=!b&&(!v||0===v.length)&&(0,m.jsxs)(D.Section,{children:[(0,m.jsx)(D.Section.Title,{children:"Examples"}),(0,m.jsx)(en,{children:(0,m.jsx)(en.List,{loading:b,children:l_.map(e=>{let{loop:t}=e;return(0,m.jsxs)(en.Item,{onClick:()=>{(0,tm.BI)("dotcom_chat.activate",{target:"OVERVIEW_EXAMPLE_LOOP_SELECT",mode:"loops"}),A({...t,id:crypto.randomUUID(),updatedAt:Date.now(),owned:!0,visibility:"private"})},children:[(0,m.jsx)(en.Item.Title,{children:t.title}),(0,m.jsx)(en.Item.Description,{children:t.description})]},t.title)})})})]}),y[29]=A,y[30]=b,y[31]=v,y[32]=f):f=y[32],y[33]!==u||y[34]!==h||y[35]!==f?(g=(0,m.jsxs)(D.Container,{width:"small",children:[u,h,f]}),y[33]=u,y[34]=h,y[35]=f,y[36]=g):g=y[36],g}function lV(e){return(0,m.jsx)(lD,{loop:e},e.id)}function l$(e){return(0,m.jsxs)(en.Item,{href:`${nQ.Jz}/l/${e.id}`,onClick:lW,children:[(0,m.jsx)(en.Item.Title,{children:e.title}),(0,m.jsx)(en.Item.Description,{children:e.description}),(0,m.jsx)(en.Item.Actions,{children:(0,m.jsx)(lS,{loopId:e.id})})]},e.id)}function lW(){return(0,tm.BI)("dotcom_chat.activate",{target:"OVERVIEW_USER_LOOP_SELECT",mode:"loops"})}function lH(){(0,g.D)("Loops \xb7 GitHub Copilot"),Promise.all([n.e("primer-react"),n.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),n.e("vendors-node_modules_d3-drag_src_nodrag_js-node_modules_d3-selection_src_pointer_js-node_modu-e1c806"),n.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_lz-string_libs_lz-string_js-6649eb"),n.e("packages_copilot-loops_components_Loop_tsx")]).then(n.bind(n,76899))}try{lM.displayName||(lM.displayName="LoopsView")}catch{}try{lU.displayName||(lU.displayName="LoopsViewInner")}catch{}var lq=n(49851),lz=new WeakMap,lG=new WeakMap,lK=new WeakSet;let LoopsClient=class LoopsClient{listLoops(){return(0,oZ._)(this,lK,lQ).call(this,{operation:"list-loops"})}listLoopVersions(e){return(0,oZ._)(this,lK,lQ).call(this,{operation:"list-loop-versions",loopID:e})}createLoop(e){return(0,oZ._)(this,lK,lQ).call(this,{operation:"create-loop",loop:e})}updateLoop(e,t,n){return(0,oZ._)(this,lK,lQ).call(this,{operation:"update-loop",loopID:e,version:t,loop:n})}getLoop(e,t){return(0,oZ._)(this,lK,lQ).call(this,{operation:"get-loop",loopID:e,versionConstraint:t})}deleteLoop(e){return(0,oZ._)(this,lK,lQ).call(this,{operation:"delete-loop",loopID:e})}createExecution(e,t,n,a,i){return(0,oZ._)(this,lK,lQ).call(this,{operation:"create-execution",loopID:e,version:t,executionInit:{inputValues:a,nodes:n},shareID:i})}getExecution(e,t,n){return(0,oZ._)(this,lK,lQ).call(this,{operation:"get-execution",loopID:e,version:t,executionID:n})}updateNodeExecution(e,t,n,a,i,s){return(0,oZ._)(this,lK,lQ).call(this,{operation:"update-node-execution",loopID:e,version:t,executionID:n,nodeID:a,nodeExecution:i,shareID:s})}shareLoop(e){return(0,oZ._)(this,lK,lQ).call(this,{operation:"share-loop",loopID:e})}unshareLoop(e){return(0,oZ._)(this,lK,lQ).call(this,{operation:"unshare-loop",loopID:e})}constructor(e,t){(0,o0._)(this,lK),(0,oJ._)(this,lz,{writable:!0,value:void 0}),(0,oJ._)(this,lG,{writable:!0,value:void 0}),(0,oX._)(this,lz,e),(0,oX._)(this,lG,t)}};async function lQ(e){let t={"Content-Type":"application/json"};if("get-execution"===e.operation&&(0,oY._)(this,lG)){let e=await (0,oY._)(this,lG).getAuthToken();t["X-Copilot-Api-Token"]=e.value}let n=await (0,t8.DI)((0,oY._)(this,lz),{method:"POST",body:JSON.stringify(e),headers:t});if(!n.ok){let e=await n.text();try{return(0,lT.YD)(JSON.parse(e),n)}catch(e){return(0,lT.YD)(e,n)}}let a=204===n.status?void 0:await n.json();return(0,lT.$j)(a)}var lY=n(18096);let lJ={itemDescription:"LoopExecutionAttachmentMenuItem-module__itemDescription--yZ8xi"};function lX(e){let t,n,a=(0,p.c)(3),{onSelect:i}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(lq.LP,{})}),a[0]=t):t=a[0],a[1]!==i?(n=(0,m.jsxs)(eZ.l.Item,{onSelect:i,children:[t,"Loops\u2026"]}),a[1]=i,a[2]=n):n=a[2],n}function lZ(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,_,v=(0,p.c)(48),{onSubmit:b,onDismiss:j,client:w}=e,N=(0,W.b)(),{data:S,isError:C,isLoading:I}=function(e){let t,n,a=(0,p.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=["loop-execution-references"],a[0]=t):t=a[0],a[1]!==e?(n={queryKey:t,queryFn:()=>l2(e)},a[1]=e,a[2]=n):n=a[2],(0,tr.I)(n)}(w),[k,T]=(0,x.useState)("");v[0]!==N||v[1]!==b||v[2]!==S?(t=e=>{if(!S)return;let t=S.find(t=>t.executionID===e);t&&N.addReference(t,"loop-executions-select-panel"),b()},v[0]=N,v[1]=b,v[2]=S,v[3]=t):t=v[3];let E=t;if(v[4]!==k||v[5]!==C||v[6]!==I||v[7]!==j||v[8]!==E||v[9]!==b||v[10]!==S){let e,t,p=S?S.map(l0).filter(e=>e.text.toLowerCase().includes(k.toLowerCase())):[];a=lY.X,d=!0,u="modal",h="large",f="instant",g="Select Loop output",i=j,s=b,v[24]===Symbol.for("react.memo_cache_sentinel")?(e=e=>T(e.currentTarget.value),v[24]=e):e=v[24],v[25]!==I?(r=(0,m.jsx)(lY.X.Header,{children:(0,m.jsx)(lY.X.SearchInput,{loading:I,onChange:e,placeholder:"Search loops","aria-label":"Search loops"})}),v[25]=I,v[26]=r):r=v[26],n=eZ.l,v[27]!==C||v[28]!==I?(o=!I&&C&&(0,m.jsx)(lY.X.Message,{variant:"error",size:"inline",children:"An error occurred"}),v[27]=C,v[28]=I,v[29]=o):o=v[29],l=!I&&0===p.length&&(0,m.jsx)(lY.X.Message,{variant:"empty",title:"No loop output found",children:"Try creating and running a loop to see output here"}),v[30]!==E?(t=e=>(0,m.jsxs)(eZ.l.Item,{onSelect:()=>E(e.key),children:[e.text,(0,m.jsx)(eZ.l.Description,{variant:"block",className:lJ.itemDescription,children:e.description})]},e.key),v[30]=E,v[31]=t):t=v[31],c=p.map(t),v[4]=k,v[5]=C,v[6]=I,v[7]=j,v[8]=E,v[9]=b,v[10]=S,v[11]=n,v[12]=a,v[13]=i,v[14]=s,v[15]=r,v[16]=o,v[17]=l,v[18]=c,v[19]=d,v[20]=u,v[21]=h,v[22]=f,v[23]=g}else n=v[11],a=v[12],i=v[13],s=v[14],r=v[15],o=v[16],l=v[17],c=v[18],d=v[19],u=v[20],h=v[21],f=v[22],g=v[23];return v[32]!==n||v[33]!==o||v[34]!==l||v[35]!==c?(y=(0,m.jsxs)(n,{children:[o,l,c]}),v[32]=n,v[33]=o,v[34]=l,v[35]=c,v[36]=y):y=v[36],v[37]!==a||v[38]!==i||v[39]!==s||v[40]!==r||v[41]!==y||v[42]!==d||v[43]!==u||v[44]!==h||v[45]!==f||v[46]!==g?(_=(0,m.jsxs)(a,{open:d,variant:u,width:h,selectionVariant:f,title:g,onCancel:i,onSubmit:s,children:[r,y]}),v[37]=a,v[38]=i,v[39]=s,v[40]=r,v[41]=y,v[42]=d,v[43]=u,v[44]=h,v[45]=f,v[46]=g,v[47]=_):_=v[47],_}function l0(e){var t;return{text:e.loopTitle,key:e.executionID,description:"string"==typeof(t=e.output[0]?.value)?t:JSON.stringify(t)}}let l1=[404,403];async function l2(e){let t=await e.listLoops();if(!t.success)throw Error(t.error);return(await Promise.all(t.data.map(async t=>{if(!t.version)return null;let n=await e.getExecution(t.id,t.version,"latest");if(!n.success){if(l1.includes(n.httpStatus))return null;throw Error(n.error)}return n.data}))).filter(e=>!!e).map(e=>{let n=t.data.find(t=>t.id===e?.loopID);if(!n)return null;let a=(0,oU.FT)(n).map(t=>({nodeID:t.id,type:t.type,title:t.title,value:e.nodes[t.id]?.value}));return{type:"loop-execution",loopTitle:n.title,loopID:e.loopID,createdAt:e.createdAt,version:e.loopVersion,executionID:e.id,output:a}}).filter(e=>!!e)}try{lX.displayName||(lX.displayName="LoopExecutionAttachmentMenuItem")}catch{}try{(i=LoopExecutionsSelectPanel).displayName||(i.displayName="LoopExecutionsSelectPanel")}catch{}try{lZ.displayName||(lZ.displayName="LoopExecutionsSelectPanelInner")}catch{}var l3=n(12357);try{(s=LoopExecutionPreview).displayName||(s.displayName="LoopExecutionPreview")}catch{}let LoopsPlugin=class LoopsPlugin{get attachmentMenuContribution(){if(tu.W.loopExecutionReferences){var e;return{attachmentType:"loop-execution",MenuItemComponent:lX,PanelComponent:(e=this.client,function(t){return(0,m.jsx)(lZ,{...t,client:e})})}}}get previewComponents(){if(tu.W.loopExecutionReferences){var e;return{"loop-execution":(e=this.previewUrl,function({reference:t}){return"loop-execution"!==t.type?null:(0,m.jsx)(lB.Q,{previewUrl:e,availableModels:[],sendChatMessage:()=>{},children:(0,m.jsx)(l3.U,{isRunning:!1,nodeValue:t.output[0]?.value})})})}}}async overrideCreateMessageOptions(e){return{...e,mode:oO.lh}}constructor(e,t,n,a,i,s){(0,f._)(this,"id",oO.S$),(0,f._)(this,"displayName",oO.Os),(0,f._)(this,"service",void 0),(0,f._)(this,"client",void 0),(0,f._)(this,"previewUrl",void 0),(0,f._)(this,"markdownExtensions",[oK]),(0,f._)(this,"skipSyncRouteToThread",!0),(0,f._)(this,"components",[{id:"loops-list",Component:lM,routes:[oO.qe]},{id:"loop-detail",Component:lb,routes:[oO.bW,oO.lN,oO.ZS]}]),(0,f._)(this,"navigationItems",[{id:oO.S$,displayName:"Loops",href:oO.QK,icon:lq.LP}]);let r=new oP.J(a);this.client=new LoopsClient(n,r),this.service=new oQ.J(this.client,new GraphQLClient(t,r),new ChatCompletionsClient(e,r,s)),this.previewUrl=i}};var l4=n(94195),l5=n(51625);let SparkPlugin=class SparkPlugin{constructor(){(0,f._)(this,"id",l5.eu),(0,f._)(this,"displayName",l5._x),(0,f._)(this,"navigationItems",[{id:l5.eu,displayName:"Spark",href:l5.cP,icon:ef.SparkleIcon,label:(0,x.createElement)(eG.A,{variant:"success"},"Preview"),external:!0}])}};var l6=n(78328),l7=n(73077);let l8={container:"ImmersiveDisabled-module__container--MY4uP",content:"ImmersiveDisabled-module__content--ZhI_r",footer:"ImmersiveDisabled-module__footer--PVto2",bannerContainer:"ImmersiveDisabled-module__bannerContainer--QHoXa"};function l9(){let e,t,n=(0,p.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:l8.content,children:(0,m.jsx)(l6.A,{})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:l8.container,children:[e,(0,m.jsx)("div",{className:l8.footer,children:(0,m.jsx)("div",{className:l8.bannerContainer,children:(0,m.jsx)(q.l,{variant:"upsell",title:"Copilot is disabled",hideTitle:!0,description:"Copilot on GitHub is currently disabled by your organization.",primaryAction:(0,m.jsx)(l7.z,{as:"a",href:"https://github.com/settings/copilot",onClick:ce,children:"Settings"})})})})]}),n[1]=t):t=n[1],t}function ce(){return(0,tm.BI)("dotcom_chat.activate",{target:"NO_ACCESS_SETTING_DISABLED",mode:"immersive"})}try{l9.displayName||(l9.displayName="ImmersiveDisabled")}catch{}var ct=n(27359),cn=n(38627),ca=n(23657),ci=n(84646),cs=n(79184),cr=n(8939),co=n(14521),cl=n(79064),cc=n(17485);function cd(){let e,t=(0,p.c)(2),n=(0,Z.zy)().pathname;return t[0]!==n?(e=n.includes("/share/"),t[0]=n,t[1]=e):e=t[1],e}function cu(){let{threadID:e}=(0,Z.g)();return e??null}function cm(e,t){let n,a,i=(0,p.c)(17),s=(0,U.Pk)(),{currentReferences:r,context:o}=s,l=(0,W.b)(),{reloadQuota:c}=(0,cs.xR)();i[0]!==s?(n=(0,nL.W)(s),i[0]=s,i[1]=n):n=i[1];let d=n,{updateItem:u}=(0,eY.xx)(),m=cd(),h=cu(),{activeCopilotSpaceId:f}=(0,cc.C)();return i[2]!==o||i[3]!==r||i[4]!==e||i[5]!==f||i[6]!==m||i[7]!==l||i[8]!==t||i[9]!==c||i[10]!==s.customInstructions||i[11]!==s.model||i[12]!==s.skillOptions||i[13]!==d||i[14]!==h||i[15]!==u?(a=async(n,a)=>{if(c("handle_message_submit"),""===n.trim())return;for(let e of r){let n=(0,tR.oR)({ref:e,messageIndex:t});null!=n&&u({...n,isUserEdited:!1})}let i={thread:d,content:n,references:[...r,...a||[]],topic:e.current,context:o,customInstructions:s.customInstructions,model:s.model,customCopilotId:f,skillOptions:s.skillOptions};if(m){let e=await l.continueSharedThread(h);if(e){let{thread:t,messages:n}=e,a=n.at(-1)?.id;await l.sendChatMessage({...i,thread:t,parentMessageId:a})}}else await l.sendChatMessage(i)},i[2]=o,i[3]=r,i[4]=e,i[5]=f,i[6]=m,i[7]=l,i[8]=t,i[9]=c,i[10]=s.customInstructions,i[11]=s.model,i[12]=s.skillOptions,i[13]=d,i[14]=h,i[15]=u,i[16]=a):a=i[16],a}var cp=n(84802);function ch(){let e=(0,U.A3)("messagesLoading")?.missingOrgIds,t=(0,U.A3)("ssoOrganizations"),n=e?.map(e=>{let n=t?.find(t=>t.id===String(e));return n?.login})?.filter(e=>!!e);return{needsSsoAuthentication:!!(e&&e.length>0),ssoOrgNames:n||[]}}let cf={chatInputContainer:"Layout-module__chatInputContainer--ty1RG"};var cg=n(97315);let cy={notificationsSection:"NotificationsSection-module__notificationsSection--K0_2c",spaceBannerContainer:"NotificationsSection-module__spaceBannerContainer--G0_MH",banner:"NotificationsSection-module__banner--a4C8F"},c_={container:"FreeChatExceededBanner-module__container--iiSMU"};function cx(){let e,t,n=(0,p.c)(3),{resetDate:a}=(0,cs.xR)(),i=`You have reached your free plan limit. Limit resets on ${a}.`;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(l7.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:cv,children:"Upgrade"}),n[0]=e):e=n[0];let s=e;return n[1]!==i?(t=(0,m.jsx)("div",{className:c_.container,children:(0,m.jsx)(q.l,{variant:"upsell",title:"Limit reached",description:i,hideTitle:!0,primaryAction:s})}),n[1]=i,n[2]=t):t=n[2],t}function cv(){(0,tm.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{cx.displayName||(cx.displayName="FreeChatExceededBanner")}catch{}let cb={container:"QuotaExceededBanner-module__container--ETlPC"};function cj(){return cl.Jt.getQuotaExceededBannerFlag()??!1}function cw(e){let t,n,a=(0,p.c)(9),{onDismiss:i}=e,{plan:s,canUpgradePlan:r,resetDate:o}=(0,cs.xR)(),l=null,c=null;if(s===nE.UH.IndividualFree){let e;l=`You have used all requests available this month. Upgrade your plan to increase your limit. Limit resets on ${o}.`,a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(l7.z,{as:"a",href:nQ.Zs,onClick:cC,children:"Upgrade"}),a[0]=e):e=a[0],c=e}else if(s===nE.UH.IndividualPro||s===nE.UH.IndividualProPlus)if(r){let e;l=`You have used all premium requests available this month. Upgrade your plan to increase your limit. Limit resets on ${o}.`,a[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(l7.z,{as:"a",href:nQ.Zs,onClick:cS,children:"Upgrade"}),a[1]=e):e=a[1],c=e}else{let e;l=`You have used all premium requests available this month. Enable additional requests to get more. Limit resets on ${o}.`,a[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(l7.z,{as:"a",href:nQ.pF,onClick:cN,children:"Enable additional requests"}),a[2]=e):e=a[2],c=e}else(s===nE.UH.Business||s===nE.UH.Enterprise)&&(l=`You have reached your monthly limit for premium requests. Ask your admin to increase your limit. Limit resets on ${o}.`);return a[3]!==i?(t=()=>{i(),(0,tm.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_DISMISS",mode:"immersive"})},a[3]=i,a[4]=t):t=a[4],a[5]!==l||a[6]!==c||a[7]!==t?(n=(0,m.jsx)("div",{className:cb.container,children:(0,m.jsx)(q.l,{variant:"upsell",title:"Limit reached",description:l,hideTitle:!0,primaryAction:c,onDismiss:t})}),a[5]=l,a[6]=c,a[7]=t,a[8]=n):n=a[8],n}function cN(){(0,tm.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function cS(){(0,tm.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function cC(){(0,tm.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{cw.displayName||(cw.displayName="QuotaExceededBanner")}catch{}let cI=tu.W.premiumRequestQuotasEnabled?nQ.mF:10;function ck(){return cl.Jt.getMeterBannerFlag()??!1}function cT(e){let t,n,a,i,s,r=(0,p.c)(18),{onDismiss:o,className:l}=e,{isLicensedLimited:c,canUpgradePlan:d,canPurchaseAdditionalQuota:u,premiumInteractionsQuotaExceeded:h,resetDate:f}=(0,cs.xR)(),g=c?`You have used ${100-cI}% of your free requests this month.`:h?`You have used all premium requests available this month. You will be charged per additional premium request until the limit resets on ${f}.`:`You have used ${100-cI}% of your premium responses this month. ${d?"Upgrade to increase your limit.":"Enable additional requests to get more usage after the limit is reached."}`;r[0]!==u||r[1]!==d||r[2]!==h?(t=d&&!h?(0,m.jsx)(l7.z,{as:"a",href:nQ.Zs,onClick:cR,children:"Upgrade"}):u&&!h?(0,m.jsx)(l7.z,{as:"a",href:nQ.pF,onClick:cA,children:"Enable additional requests"}):u&&(0,m.jsx)(l7.z,{as:"a",href:nQ.MB,onClick:cL,children:"Manage billing"}),r[0]=u,r[1]=d,r[2]=h,r[3]=t):t=r[3];let y=t;r[4]!==u||r[5]!==d||r[6]!==h?(n=d&&u&&!h?(0,m.jsx)(Q.A,{as:"a",href:nQ.Zs,onClick:cE,children:"Enable additional requests"}):null,r[4]=u,r[5]=d,r[6]=h,r[7]=n):n=r[7];let _=n;return r[8]!==o?(a=()=>{o(),(0,tm.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_DISMISS",mode:"immersive"})},r[8]=o,r[9]=a):a=r[9],r[10]!==g||r[11]!==y||r[12]!==_||r[13]!==a?(i=(0,m.jsx)(q.l,{variant:"info",title:"Limit reached soon",description:g,hideTitle:!0,primaryAction:y,secondaryAction:_,onDismiss:a}),r[10]=g,r[11]=y,r[12]=_,r[13]=a,r[14]=i):i=r[14],r[15]!==l||r[16]!==i?(s=(0,m.jsx)("div",{className:l,children:i}),r[15]=l,r[16]=i,r[17]=s):s=r[17],s}function cE(){(0,tm.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function cL(){(0,tm.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_MANAGE_BILLING",mode:"immersive"})}function cA(){(0,tm.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function cR(){(0,tm.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{cT.displayName||(cT.displayName="QuotaMeterBanner")}catch{}function cD(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(q.l,{title:"Chat is disabled",variant:"warning",description:"Conversation unavailable. The linked space may have been deleted, or you might be signed out of your organization.",hideTitle:!0}),t[0]=e):e=t[0],e}function cP(e){let t,n=(0,p.c)(3),{customCopilot:a}=e,i=(0,Z.Zp)();return n[0]!==a||n[1]!==i?(t=a&&(0,m.jsx)(q.l,{title:"Chat is disabled",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue chatting.",hideTitle:!0,primaryAction:(0,m.jsx)(l7.z,{as:"a",href:(0,ca.Cb)(a),onClick:e=>{e.preventDefault(),i((0,ca.Cb)(a))},children:"Edit"})}),n[0]=a,n[1]=i,n[2]=t):t=n[2],t}function cO(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(q.l,{title:"Reference size exceeded",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}function cB(e){let t,n,a=(0,p.c)(6),{errorMessages:i,onDismiss:s,className:r}=e,o=void 0===r?"":r;if(0===i.length)return null;if(a[0]!==i){let e=Array.from(new Set(i));t=1===e.length?e[0]:(0,m.jsxs)(m.Fragment,{children:["Errors during attachment upload:",(0,m.jsx)("ul",{style:{paddingLeft:"1.2em"},children:e.map(cM)})]}),a[0]=i,a[1]=t}else t=a[1];let l=t;return a[2]!==o||a[3]!==l||a[4]!==s?(n=(0,m.jsx)(q.l,{variant:"critical",description:l,title:"Error during attachment upload",hideTitle:!0,className:o,onDismiss:s}),a[2]=o,a[3]=l,a[4]=s,a[5]=n):n=a[5],n}function cM(e){return(0,m.jsx)("li",{children:e},e)}try{cD.displayName||(cD.displayName="SpaceDeletedBanner")}catch{}try{cP.displayName||(cP.displayName="SpaceSizeExceededBanner")}catch{}try{cO.displayName||(cO.displayName="ReferenceSizeExceededBanner")}catch{}try{(r=function(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(q.l,{title:"Reference not found",variant:"critical",description:"We couldn't access that repository. Make sure it exists and that you have permission to use it.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}).displayName||(r.displayName="AssociatedRepositoryReferenceNotFoundBanner")}catch{}try{cB.displayName||(cB.displayName="UploadErrorBanner")}catch{}let cF={spaceHomepage:"spaceHomepage",customCopilotDisabled:"customCopilotDisabled",customCopilotSizeExceeded:"customCopilotSizeExceeded"};function cU(e,t){let n,a,i=(0,p.c)(9),{isPending:s,data:r,error:o}=(0,ci.Ao)(e),l=o instanceof ci.i9,c=o instanceof ci.OW;if(o&&!l&&!c)throw o;let d=s||l||c||!r?void 0:r;i[0]!==d||i[1]!==e||i[2]!==s||i[3]!==t?(n=function(e,t,n,a){if(e&&!a)return cF.spaceHomepage;if(n)return null;let i=!!t;return e&&!i?cF.customCopilotDisabled:(0,ca.Hh)(t)?cF.customCopilotSizeExceeded:null}(e,d,s,t),i[0]=d,i[1]=e,i[2]=s,i[3]=t,i[4]=n):n=i[4];let u=n;return i[5]!==d||i[6]!==s||i[7]!==u?(a={variant:u,customCopilot:d,isLoading:s},i[5]=d,i[6]=s,i[7]=u,i[8]=a):a=i[8],a}try{(o=function(e){let t=(0,p.c)(4),{variant:n,customCopilot:a}=e;switch(n){case cF.customCopilotDisabled:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(cD,{}),t[0]=e):e=t[0],e}case cF.customCopilotSizeExceeded:{let e;return t[1]!==a?(e=(0,m.jsx)(cP,{customCopilot:a}),t[1]=a,t[2]=e):e=t[2],e}case cF.spaceHomepage:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(m.Fragment,{}),t[3]=e):e=t[3],e}default:return null}}).displayName||(o.displayName="SpaceConversationBanner")}catch{}function cV(){let e,t,n=(0,p.c)(16),{ambientError:a,customCopilots:i,selectedThreadID:s}=(0,U.Pk)(),r=(0,co.G)();n[0]!==r||n[1]!==i?(e=(0,ca.JB)(i,r),n[0]=r,n[1]=i,n[2]=e):e=n[2];let o=!!e,{chatQuotaExceeded:l,isLicensedLimited:c}=(0,cs.xR)(),{variant:d,customCopilot:u}=cU(r,s),h=(!d||o)&&!(c&&l),f=function(){let e,t,n,a,i=(0,p.c)(10),{isLicensedLimited:s,chatQuotaRemaining:r,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,cs.xR)(),[d,u]=(0,x.useState)(ck);i[0]!==r||i[1]!==s||i[2]!==c||i[3]!==o||i[4]!==l?(e=()=>{if((s||tu.W.premiumRequestQuotasEnabled)&&void 0!==r){let e=cl.Jt.getMeterBannerFlag();r>0&&r<=cI||!s&&o>0&&o<=cI||!s&&l&&c?null===e?(cl.Jt.setMeterBannerFlag(!0),u(!0)):u(e):(cl.Jt.removeMeterBannerFlag(),u(!1))}},t=[s,r,o,c,l],i[0]=r,i[1]=s,i[2]=c,i[3]=o,i[4]=l,i[5]=e,i[6]=t):(e=i[5],t=i[6]),(0,x.useEffect)(e,t),i[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{cl.Jt.setMeterBannerFlag(!1),u(!1)},i[7]=n):n=i[7];let m=n,h=d&&void 0!==r&&(s||tu.W.premiumRequestQuotasEnabled);return i[8]!==h?(a={visible:h,onDismiss:m},i[8]=h,i[9]=a):a=i[9],a}(),g=function(){let e,t,n,a,i=(0,p.c)(12),{isLicensedLimited:s,chatQuotaRemaining:r,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,cs.xR)(),[d,u]=(0,x.useState)(cj);i[0]!==r||i[1]!==c||i[2]!==l?(e=()=>{if(tu.W.premiumRequestQuotasEnabled&&void 0!==r){let e=cl.Jt.getQuotaExceededBannerFlag();tu.W.premiumRequestQuotasEnabled&&!c&&l?null===e?(cl.Jt.setQuotaExceededBannerFlag(!0),u(!0)):u(e):(cl.Jt.removeQuotaExceededBannerFlag(),u(!1))}},i[0]=r,i[1]=c,i[2]=l,i[3]=e):e=i[3],i[4]!==r||i[5]!==c||i[6]!==o||i[7]!==l?(t=[r,o,c,l],i[4]=r,i[5]=c,i[6]=o,i[7]=l,i[8]=t):t=i[8],(0,x.useEffect)(e,t),i[9]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{cl.Jt.setQuotaExceededBannerFlag(!1),u(!1)},i[9]=n):n=i[9];let m=n,h=d&&!s&&void 0!==r&&tu.W.premiumRequestQuotasEnabled;return i[10]!==h?(a={visible:h,onDismiss:m},i[10]=h,i[11]=a):a=i[11],a}(),y=d===cF.customCopilotDisabled,_=d===cF.customCopilotSizeExceeded,v=h&&a,b=h&&g.visible,j=h&&f.visible,w=!h,N=y||_,S=y||_||v||b||j||w;return n[3]!==a||n[4]!==u||n[5]!==g||n[6]!==f||n[7]!==v||n[8]!==w||n[9]!==b||n[10]!==j||n[11]!==S||n[12]!==y||n[13]!==N||n[14]!==_?(t=S&&(0,m.jsxs)("section",{"aria-label":"Notifications",className:cy.notificationsSection,children:[N&&(0,m.jsxs)("div",{className:cy.spaceBannerContainer,children:[y&&(0,m.jsx)(cD,{}),_&&(0,m.jsx)(cP,{customCopilot:u})]}),v&&(0,m.jsx)(cg.P,{ambientError:a,useLargerBorderRadius:!0}),!N&&(0,m.jsxs)(m.Fragment,{children:[b&&(0,m.jsx)(cw,{onDismiss:g.onDismiss}),j&&(0,m.jsx)(cT,{className:cy.banner,onDismiss:f.onDismiss}),w&&(0,m.jsx)(cx,{})]})]}),n[3]=a,n[4]=u,n[5]=g,n[6]=f,n[7]=v,n[8]=w,n[9]=b,n[10]=j,n[11]=S,n[12]=y,n[13]=N,n[14]=_,n[15]=t):t=n[15],t}try{cV.displayName||(cV.displayName="NotificationsSection")}catch{}function c$(e){let t,n,a,i,s,r=(0,p.c)(20),{textAreaRef:o,handleUserSubmit:l,nextMessageIndex:c}=e,d=(0,U.Pk)(),{chatQuotaExceeded:u,isLicensedLimited:h}=(0,cs.xR)(),{needsSsoAuthentication:f}=ch(),g=(0,co.G)(),y=f&&g,_=(0,cp.G)(),x=function(){let e,t=(0,p.c)(2),{figmaAuthUrl:n}=(0,M.X)();if(n){if(t[0]!==n){let a=new URL(n,location.origin);a.searchParams.set("return_url",location.pathname+location.search),e=a.toString(),t[0]=n,t[1]=e}else e=t[1];return e}}();r[0]!==c?(t={messageIndex:c},r[0]=c,r[1]=t):t=r[1];let v=nJ(t),{versionedItems:b,items:j}=(0,eY.xx)();if(r[2]!==j){for(let[,e]of(n=new Set,j))"file"===e.type&&n.add(e.name);r[2]=j,r[3]=n}else n=r[3];let w=n,N=!(h&&u)&&!y,S=!g&&(!d.selectedThreadID||d.usePlanningIntent);return r[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(cV,{}),r[4]=a):a=r[4],r[5]!==N||r[6]!==w||r[7]!==x||r[8]!==l||r[9]!==_||r[10]!==c||r[11]!==v||r[12]!==g||r[13]!==S||r[14]!==d||r[15]!==o||r[16]!==b?(i=N&&(0,m.jsx)(ou.V,{modes:[{name:"Chat",supportsMCP:!g,supportsAttachments:!0,supportsModelSwitching:!0,supportsSpaces:!0,supportsAutocompletion:!0,icon:(0,m.jsx)(ef.CommentIcon,{}),placeholder:d.usePlanningIntent&&!d.selectedThreadID?"What would you like to create?":"How can I help you?"}],onNewThreadSelected:_,textAreaRef:o,onSubmit:l,isStreaming:!!d.streamingMessage,size:"large",showPlanningToggle:S,onSelectReference:v,getReferenceVersion:e=>(0,tR.wt)(e,c,b),existingFileNames:w,figmaAuthUrl:x}),r[5]=N,r[6]=w,r[7]=x,r[8]=l,r[9]=_,r[10]=c,r[11]=v,r[12]=g,r[13]=S,r[14]=d,r[15]=o,r[16]=b,r[17]=i):i=r[17],r[18]!==i?(s=(0,m.jsxs)("div",{className:cf.chatInputContainer,children:[a,i]}),r[18]=i,r[19]=s):s=r[19],s}try{c$.displayName||(c$.displayName="ChatInputContainer")}catch{}let cW={root:"ConversationView-module__root--k4AIo",container:"ConversationView-module__container--XaY36",footer:"ConversationView-module__footer--xr6HB"};var cH=n(63262),cq=n(87419),cz=n(88392),cG=n(88431),cK=n(59524),cQ=n(32744),cY=n(82178),cJ=n(94517),cX=n(34363),cZ=n(11633),c0=n(31958),c1=n(42983),c2=n(95896),c3=n(82151),c4=n(45244),c5=n(52940),c6=n(16946),c7=n(72206),c8=n(31223),c9=n(55009);let de={imageAttachment:"ChatImageAttachment-module__imageAttachment--Kt80m"},dt=e=>{let t,n,a,i,s=(0,p.c)(18),{messageId:r,src:o,alt:l,name:c,mode:d,squareView:u}=e,{openPreviewPane:h,openItem:f,updateItem:g}=(0,eY.xx)(),y=`image:${o}`;s[0]!==y||s[1]!==f||s[2]!==h?(t=e=>{e.metaKey||e.ctrlKey||((0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_IMAGE_OPENED",mode:"immersive"}),f(y),h(),e.preventDefault())},s[0]=y,s[1]=f,s[2]=h,s[3]=t):t=s[3];let _=t;return s[4]!==l||s[5]!==y||s[6]!==r||s[7]!==c||s[8]!==o||s[9]!==g?(n=()=>{g({altText:l,id:y,messageId:r,name:c,type:"image",url:o})},a=[y,l,r,c,o,g],s[4]=l,s[5]=y,s[6]=r,s[7]=c,s[8]=o,s[9]=g,s[10]=n,s[11]=a):(n=s[10],a=s[11]),(0,x.useEffect)(n,a),s[12]!==l||s[13]!==d||s[14]!==_||s[15]!==u||s[16]!==o?(i=(0,m.jsx)("div",{className:de.imageAttachment,children:(0,m.jsx)(c9.o,{src:o,alt:l,onClick:_,mode:d,useOverlay:!0,squareView:u})}),s[12]=l,s[13]=d,s[14]=_,s[15]=u,s[16]=o,s[17]=i):i=s[17],i},dn=(0,x.memo)(dt);try{dt.displayName||(dt.displayName="ChatImageAttachmentUnmemoized")}catch{}try{dn.displayName||(dn.displayName="ChatImageAttachment")}catch{}let da={chatMessage:"ChatMessage-module__chatMessage--mrG0f",user:"ChatMessage-module__user--D7H_T",editing:"ChatMessage-module__editing--yOYer",content:"ChatMessage-module__content--sWQll",imageGrid:"ChatMessage-module__imageGrid--yEdjI",imageRow:"ChatMessage-module__imageRow--NNiyM",references:"ChatMessage-module__references--Pi5OH",messageArea:"ChatMessage-module__messageArea--gxJTG",userMessage:"ChatMessage-module__userMessage--K0oH6",messageSubthreadIndicator:"ChatMessage-module__messageSubthreadIndicator--fjOXe",actions:"ChatMessage-module__actions--CS2_w",ai:"ChatMessage-module__ai--l6YpD",latest:"ChatMessage-module__latest--AGxtS",actionsPlaceholder:"ChatMessage-module__actionsPlaceholder--gN7Zq",avatar:"ChatMessage-module__avatar--hKTWx",sharedThreadActions:"ChatMessage-module__sharedThreadActions--j7Y3f ChatMessage-module__actions--CS2_w",skillExecutionText:"ChatMessage-module__skillExecutionText--Jbpi1",errorFallback:"ChatMessage-module__errorFallback--h1kRS"},di={container:"ChatPagingComponent-module__container--HQpDa",disabledButton:"ChatPagingComponent-module__disabledButton--qwjg3",pageIndicator:"ChatPagingComponent-module__pageIndicator--hEqlR"};function ds(e){let t,n,a,i,s,r,o=(0,p.c)(23),{currentPage:l,totalPages:c,onPrev:d,onNext:u,isUserMessage:h}=e,f=(0,U.A3)("isWaitingOnCopilot");if(l<1)throw Error("currentPage must be greater than or equal to 1");if(c<1)throw Error("totalPages must be greater than or equal to 1");if(l>c)throw Error("currentPage must be less than or equal to totalPages");let g=1===l||f,y=l===c||f,_=g?di.disabledButton:"",x=y?di.disabledButton:"";o[0]!==l||o[1]!==h||o[2]!==d||o[3]!==g?(t=()=>{if(g)return;let e=h?"USER_MESSAGE_ACTION_PREVIOUS_RESPONSE":"RESPONSE_ACTION_PREVIOUS_RESPONSE";(0,tm.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),d(l-1)},o[0]=l,o[1]=h,o[2]=d,o[3]=g,o[4]=t):t=o[4];let v=t;o[5]!==l||o[6]!==h||o[7]!==y||o[8]!==u?(n=()=>{if(y)return;let e=h?"USER_MESSAGE_ACTION_NEXT_RESPONSE":"RESPONSE_ACTION_NEXT_RESPONSE";(0,tm.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),u(l+1)},o[5]=l,o[6]=h,o[7]=y,o[8]=u,o[9]=n):n=o[9];let b=n;return o[10]!==v||o[11]!==_?(a=(0,m.jsx)(e1.K,{variant:"invisible","aria-label":"Previous response",onClick:v,icon:ef.ChevronLeftIcon,className:_}),o[10]=v,o[11]=_,o[12]=a):a=o[12],o[13]!==l||o[14]!==c?(i=(0,m.jsxs)("span",{className:di.pageIndicator,children:[l,"/",c]}),o[13]=l,o[14]=c,o[15]=i):i=o[15],o[16]!==b||o[17]!==x?(s=(0,m.jsx)(e1.K,{variant:"invisible","aria-label":"Next response",onClick:b,icon:ef.ChevronRightIcon,className:x}),o[16]=b,o[17]=x,o[18]=s):s=o[18],o[19]!==a||o[20]!==i||o[21]!==s?(r=(0,m.jsxs)("div",{className:di.container,"data-testid":"chat-paging-component",children:[a,i,s]}),o[19]=a,o[20]=i,o[21]=s,o[22]=r):r=o[22],r}try{ds.displayName||(ds.displayName="ChatPagingComponent")}catch{}let dr={container:"ClientConfirmations-module__container--rZT37",text:"ClientConfirmations-module__text--KBSlX"};function dl(e){let t,n,a,i=(0,p.c)(5),{authorName:s,clientConfirmations:r}=e,o=r?.[0],l=o?.state;return s=o?.userLogin||s,i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,_.$)("my-1",dr.container),i[0]=t):t=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(ef.CheckIcon,{}),i[1]=n):n=i[1],i[2]!==s||i[3]!==l?(a=(0,m.jsx)("div",{className:t,children:(0,m.jsxs)("span",{className:dr.text,children:[n," ",s," ",l," the action"]})}),i[2]=s,i[3]=l,i[4]=a):a=i[4],a}try{dl.displayName||(dl.displayName="ClientConfirmations")}catch{}let dc={container:"UserMessageEdit-module__container--wVL0b",input:"UserMessageEdit-module__input--cgkv0",inputContainer:"UserMessageEdit-module__inputContainer--iXdUm",actions:"UserMessageEdit-module__actions--GxMb3"},dd=e=>{let t,n,a,i,s,r,o,l,c,d,u,h,f,g=(0,p.c)(25),{messageContent:y,onSubmit:_,onCancel:v}=e,b=(0,U.A3)("isWaitingOnCopilot"),[j,w]=(0,x.useState)(y),N=(0,x.useRef)(null);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{N.current&&(N.current.style.height="auto",N.current.style.height=`${N.current.scrollHeight}px`)},g[0]=t):t=g[0],g[1]!==j?(n=[j],g[1]=j,g[2]=n):n=g[2],(0,x.useEffect)(t,n),g[3]!==j||g[4]!==_?(a=()=>{(0,tm.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_SUBMIT",mode:"immersive"}),_(j)},g[3]=j,g[4]=_,g[5]=a):a=g[5];let S=a;g[6]!==y||g[7]!==v?(i=()=>{v(),w(y),(0,tm.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_CANCEL",mode:"immersive"})},g[6]=y,g[7]=v,g[8]=i):i=g[8];let C=i,I=b?void 0:S;return g[9]!==C||g[10]!==I?(s={"copilot-chat:send-message":I,"github:cancel":C},g[9]=C,g[10]=I,g[11]=s):s=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(r=(0,tk.G)("user-message-edit-box"),g[12]=r):r=g[12],g[13]===Symbol.for("react.memo_cache_sentinel")?(o=e=>w(e.target.value),g[13]=o):o=g[13],g[14]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{N.current&&(N.current.style.height="auto",N.current.style.height=`${N.current.scrollHeight}px`)},g[14]=l):l=g[14],g[15]!==j?(c=(0,m.jsx)("div",{className:dc.inputContainer,children:(0,m.jsx)("textarea",{ref:N,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",rows:1,placeholder:"Ask Copilot",value:j,onChange:o,className:dc.input,autoFocus:!0,onInput:l,onFocus:du})}),g[15]=j,g[16]=c):c=g[16],g[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(tM.cQ,{commandId:"github:cancel",children:"Cancel"}),g[17]=d):d=g[17],g[18]===Symbol.for("react.memo_cache_sentinel")?(u=(0,tk.G)("user-message-edit-submit"),g[18]=u):u=g[18],g[19]!==b?(h=(0,m.jsxs)("div",{className:dc.actions,children:[d,(0,m.jsx)(tM.cQ,{commandId:"copilot-chat:send-message",showKeybindingHint:!0,variant:"primary",...u,disabled:b,children:"Send"})]}),g[19]=b,g[20]=h):h=g[20],g[21]!==c||g[22]!==h||g[23]!==s?(f=(0,m.jsxs)(tM.tL,{commands:s,className:dc.container,...r,children:[c,h]}),g[21]=c,g[22]=h,g[23]=s,g[24]=f):f=g[24],f};try{dd.displayName||(dd.displayName="UserMessageEdit")}catch{}function du(e){return e.target.setSelectionRange(0,e.target.value.length)}let dm=({excludeFeedback:e,inputRef:t,isLatestMessage:n,isLatestUserMessage:a,isFirstReply:i,isStreaming:s,parentMessage:r,messageIndex:o,autoOpenPreviewPane:l,...c})=>{let{message:d}=(0,n4.V)(),u=(0,x.useMemo)(()=>(0,nQ.H2)(d.references??[]),[d.references]),p=(0,W.b)(),h=(0,U.bP)("customCopilots","editingMessage","mode","wrapCodeLines"),f=(0,c7.tD)(),{items:g,versionedItems:y,openItem:v,removeItems:b,getOpenItems:j,openItemsBeforeSubthreadChange:w,setOpenItemsBeforeSubthreadChange:N,enableLoadingState:S,disableLoadingState:C}=(0,eY.xx)(),I=nJ({messageIndex:o,messageId:d.id,messageTimestamp:d.createdAt}),k=(0,x.useCallback)(()=>{let e=f(),t=[],n=d;for(;null!=n;)t.push(n.id),n=void 0!==n.selectedChildIndex?e.messages[n.selectedChildIndex]:void 0;let a=new Map;for(let[e,t]of g){let n=a.get(t.messageId)||[];n.push(e),a.set(t.messageId,n)}let i=[];for(let e of t){let t=a.get(e);if(t)for(let e of t)i.push(e)}for(let[e,t]of g)t.messageId===nE.Wp&&i.push(e);let s=j();N([...s]),i.some(e=>s.includes(e))&&S(),b(i)},[g,S,f,d,j,b,N]),{author:T,handleConfirmationAction:E,handleRetryErrorMessage:L,handleRetryCopilotResponse:A,handleEditUserMessage:R,hasClientConfirmations:D,isAgentError:P,isAI:O,isCopilot:B,isError:M,isInterrupted:F,isUser:V,myRef:$,rendererConfig:H,renderFeedback:q,shouldShowMessageActions:z,skillExecutionToUseForRespondingText:G,showRetryButton:K}=(0,c5.p)({excludeFeedback:e,inputRef:t,isLatestMessage:n,isStreaming:s,removeOutdatedContentPreviewItems:k}),Q=cd(),Y=h.editingMessage===d.id,J=s&&!M&&!d.confirmations&&!z&&n&&(!e||O),X=(r?.childMessageIndexes?.findIndex(e=>e===o)||0)+1||1,Z=r?.childMessageIndexes?.length||1,ee=Z>=c6.L9,et=p.maxMessagesReached(),en=Z>1,ea=(0,x.useMemo)(()=>d.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[d.mediaContent]),ei=(0,x.useMemo)(()=>!!ea?.length,[ea]),es=z&&Q&&(B||en),er=(0,x.useRef)(null),eo=(0,c8.M)(e=>{let t=y.get((0,tR.oy)(e))?.at(-1);t&&v(t,!1)});(0,x.useEffect)(()=>{if(d.error?.type!=="publicCode")return;let e=[];for(let[t,n]of g)(n.messageId===d.id||n.messageId===er.current)&&e.push(t);e.length>0&&b(e)},[d.error?.type,d.id,g,b]),(0,x.useEffect)(()=>{if(er.current!==d.id&&n&&w.length>0){let e=setTimeout(()=>{for(let e of w)eo.current(e);C(),N([])});return()=>clearTimeout(e)}er.current=d.id},[C,d.id,w,n,N,eo]);let el=(0,x.useCallback)(()=>{let{messages:e}=f(),t=X-1;p.setSelectedMessage(e[r.childMessageIndexes[t-1]]),k()},[X,p,r,k,f]),ec=(0,x.useCallback)(()=>{let{messages:e}=f(),t=X-1;p.setSelectedMessage(e[r.childMessageIndexes[t+1]]),k()},[X,p,r,k,f]),ed=(0,cp.G)(),{model:eu,availableModels:em}=(0,U.bP)("model","availableModels"),ep=eu;d.model&&(ep=(em??[ep]).find(e=>e.id===d.model)||ep);let eh=()=>p.startEditingMessage(d.id),eg=(0,co.G)(),ey=!!(0,ca.JB)(h.customCopilots,eg),{selectedThreadID:e_}=(0,U.bP)("selectedThreadID"),{variant:ex}=cU(eg,e_),ev=ex===cF.customCopilotSizeExceeded,eb=ee||et||!!eg&&!ey||ev,ej=B&&s&&n&&!d.content,ew=(0,x.useCallback)(e=>{p.setWrapCodeLines(e)},[p]),eN=s?il:ic;return(0,m.jsxs)("div",{className:(0,_.$)("message-container",da.chatMessage,V&&da.user,O&&da.ai,Y?da.editing:"",n&&da.latest),ref:$,...(0,tk.G)(`message-${M?"error":s?"streaming":d.id}`),children:[O?(0,m.jsx)(cY.W,{isLoading:s&&n,isLoadingSkills:(d.skillExecutions??[]).length>0&&s&&""===d.content&&n,isError:M&&d.error?.type!=="agentUnauthorized",className:da.avatar,mode:h.mode,isFirstMessage:i,message:d.content||"",createdAt:d.createdAt}):null,V&&ei&&(0,m.jsx)("div",{className:ea?.length===4?da.imageGrid:da.imageRow,children:ea?.map(e=>(0,m.jsx)(dn,{name:e?.name||"Uploaded image",messageId:d.id,src:e?.url||"",alt:`Uploaded image${e?.name?`: ${e.name}`:""}`,mode:h.mode,squareView:ea?.length>=2},e?.url||""))}),V&&d.references&&d.references.length>0&&(0,m.jsx)(nX,{className:da.references,messageId:d.id,messageTimestamp:d.createdAt,messageIndex:o,references:d.references,size:"medium"}),!Y&&(0,m.jsx)("div",{className:da.content,children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:(0,_.$)("js-snippet-clipboard-copy-unpositioned",da.messageArea),children:[D?(0,m.jsx)(dl,{authorName:T.name,clientConfirmations:d.clientConfirmations??[]}):V?(0,m.jsx)(c3.R,{accessibleHeader:(0,nQ.hV)("You",d.content??""),className:da.userMessage}):(0,m.jsxs)(m.Fragment,{children:[ej&&(0,m.jsx)(c4.b,{className:(0,_.$)(da.skillExecutionText,"mb-2"),children:`${(0,cZ.WA)(G)}...`}),d.references&&d.references.length>0&&d.content&&(0,m.jsx)(nY.s,{className:"mb-2",references:d.references,isImmersive:!0,onClick:(e,t)=>{("draft-issue"===e.type||"draft-update-issue"===e.type)&&I(e,t)}}),"assistant"===d.role&&(u.length?(0,m.jsx)(cK.Q,{mcpToolResults:u}):null),!D&&d.content&&(0,m.jsx)(dp,{children:(0,m.jsx)(eN,{autoOpenPreviewPane:l,markdown:d.content,messageId:d.id,messageIndex:o,messageTimestamp:d.createdAt,accessibleHeader:(0,nQ.hV)("Copilot",d.content??""),copilotAnnotations:d.copilotAnnotations,wrapCodeLines:h.wrapCodeLines,onWrapCodeLinesChange:ew,...H})}),M?(0,m.jsx)(cJ.K,{manager:p}):null,P&&d.agentErrors&&(0,m.jsx)(cJ.h,{errors:d.agentErrors}),F?(0,m.jsx)(c0.h,{messageHasContent:!!d.content||!!d.skillExecutions?.length}):null,O&&!ej&&(0,nQ.Ye)(d.confirmations).map((e,t)=>"indexrepo"===e.confirmation.name?null:(0,m.jsx)(cQ.m,{confirmation:e,handleConfirmation:E,isLatestMessage:n},t))]}),en&&!n&&(0,m.jsxs)("div",{className:da.messageSubthreadIndicator,"data-testid":"chat-paging-indicator",children:[X,"/",Z]})]}),J&&(0,m.jsx)("div",{className:da.actionsPlaceholder}),!z&&K&&(0,m.jsx)(c1.$,{handleRetryMessage:L,disabled:eb}),z&&!Q&&(0,m.jsxs)(c2.M,{"aria-label":"Message tools",className:da.actions,"data-testid":"nonshared-toolbar",children:[V&&(a?(0,m.jsx)(tM.N5,{commandId:"copilot-chat:edit-last-message",variant:"invisible","aria-label":"Edit message",onClick:eh,icon:ef.PencilIcon,disabled:eb,...(0,tk.G)("edit-message-button")}):(0,m.jsx)(e1.K,{variant:"invisible","aria-label":"Edit message",onClick:eh,icon:ef.PencilIcon,disabled:eb,...(0,tk.G)("edit-message-button")})),B&&(0,m.jsxs)(m.Fragment,{children:[q&&(0,m.jsx)(cX.G,{iconSize:"medium"}),!!d.content&&!s&&(0,m.jsx)(sT.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center",onCopy:()=>(0,tm.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})]}),K&&M?(0,m.jsx)(c1.$,{handleRetryMessage:L,disabled:eb}):O&&!M&&!d.clientSide&&(0,m.jsx)(c1.$,{handleRetryMessage:A,disabled:eb,showModelPicker:!!em&&em.length>1,model:ep,navigateToNewThread:ed}),en&&(0,m.jsx)(ds,{currentPage:X,totalPages:Z,onPrev:el,onNext:ec,isUserMessage:V})]}),es&&(0,m.jsxs)(c2.M,{"aria-label":"Message tools",className:da.sharedThreadActions,"data-testid":"shared-toolbar",children:[B&&(0,m.jsx)(m.Fragment,{children:!!d.content&&!s&&(0,m.jsx)(sT.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center actions",onCopy:()=>(0,tm.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})}),en&&(0,m.jsx)(ds,{currentPage:X,totalPages:Z,onPrev:el,onNext:ec,isUserMessage:V})]})]})}),Y&&(0,m.jsx)(dd,{messageContent:d.content||"",onSubmit:R,onCancel:()=>p.cancelEditingMessage()})]})},dp=e=>{let t,n,a=(0,p.c)(3),{children:i}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(q.l,{className:da.errorFallback,variant:"warning",title:"Message cannot be displayed",description:"An unknown error occurred while attempting to display this message."}),a[0]=t):t=a[0],a[1]!==i?(n=(0,m.jsx)(tf.t,{fallback:t,children:i}),a[1]=i,a[2]=n):n=a[2],n},dh=e=>{let t,n,a,i,s,r,o,l,c=(0,p.c)(23);c[0]!==e?({message:a,messageIndex:i,isSharedMessage:n,isLatestMessage:t,...s}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=a,c[4]=i,c[5]=s):(t=c[1],n=c[2],a=c[3],i=c[4],s=c[5]);let d=cd();return c[6]!==t||c[7]!==n||c[8]!==d||c[9]!==a||c[10]!==i||c[11]!==s?(r=!im(a)&&(0,m.jsx)(dm,{...s,messageIndex:i,isSharedMessage:n,isLatestMessage:t,isViewingSharedThread:d}),c[6]=t,c[7]=n,c[8]=d,c[9]=a,c[10]=i,c[11]=s,c[12]=r):r=c[12],c[13]!==t||c[14]!==n||c[15]!==d||c[16]!==a||c[17]!==i?(o=(0,m.jsx)(ip,{message:a,messageIndex:i,isViewingSharedThread:d,isSharedMessage:n,isLatestMessage:t}),c[13]=t,c[14]=n,c[15]=d,c[16]=a,c[17]=i,c[18]=o):o=c[18],c[19]!==a||c[20]!==r||c[21]!==o?(l=(0,m.jsxs)(n4.$,{message:a,children:[r,o]}),c[19]=a,c[20]=r,c[21]=o,c[22]=l):l=c[22],l},df=(0,x.memo)(dh),dg=e=>{let t,n,a=(0,p.c)(7),{message:i}=e,s=(0,U.Pk)();a[0]!==i||a[1]!==s.messages?(t=(0,nc.CX)(s.messages,i),a[0]=i,a[1]=s.messages,a[2]=t):t=a[2];let r=t,o="user"===i.role&&s.messages.findLast(d_)?.id===i.id;return a[3]!==o||a[4]!==r||a[5]!==e?(n=(0,m.jsx)(df,{...e,parentMessage:r,isLatestUserMessage:o}),a[3]=o,a[4]=r,a[5]=e,a[6]=n):n=a[6],n},dy=e=>{let t,n=(0,p.c)(2);return n[0]!==e?(t=(0,m.jsx)(dp,{children:(0,m.jsx)(dg,{...e})}),n[0]=e,n[1]=t):t=n[1],t};try{dm.displayName||(dm.displayName="InnerChatMessage")}catch{}try{dp.displayName||(dp.displayName="MessageErrorBoundary")}catch{}try{dh.displayName||(dh.displayName="ChatMessageUnmemoized")}catch{}try{df.displayName||(df.displayName="ChatMessageMemoized")}catch{}try{dg.displayName||(dg.displayName="ChatMessageWrapped")}catch{}try{dy.displayName||(dy.displayName="ChatMessage")}catch{}function d_(e){return"user"===e.role}var dx=n(81945);let dv={ConversationLoader:"ConversationLoader-module__ConversationLoader--kdZTM",ConversationLoader__assistantGroup:"ConversationLoader-module__ConversationLoader__assistantGroup--sA3MD",ConversationLoader__userGroup:"ConversationLoader-module__ConversationLoader__userGroup--sBc4O",ConversationLoader__assistantAvatar:"ConversationLoader-module__ConversationLoader__assistantAvatar--Bt7IA",assistantAvatarSkeleton:"ConversationLoader-module__assistantAvatarSkeleton--f2f7n"};function db(){let e,t,n=(0,p.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:dv.ConversationLoader__userGroup,children:(0,m.jsx)(dx.O,{variant:"rounded",height:"20px",width:"random"})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:dv.ConversationLoader,"data-testid":"conversation-loader",children:[e,(0,m.jsxs)("div",{className:dv.ConversationLoader__assistantGroup,children:[(0,m.jsx)(dx.O,{className:(0,_.$)(dv.ConversationLoader__assistantAvatar,dv.assistantAvatarSkeleton),variant:"elliptical"}),Array.from({length:Math.floor(4*Math.random())+2}).map(dj)]})]}),n[1]=t):t=n[1],t}function dj(e,t){return(0,m.jsx)(dx.O,{variant:"rounded",height:"20px",width:"random"},t)}try{db.displayName||(db.displayName="ConversationLoader")}catch{}let dw={container:"ErrorState-module__container--FoMc5",icon:"ErrorState-module__icon--ykhTC",description:"ErrorState-module__description--zsnez",sso:"ErrorState-module__sso--Q4Ig1"};function dN(e){let t,n,a,i,s,r=(0,p.c)(11),{title:o,description:l,ssoOrgs:c}=e,d=c&&c.length>0&&!(0,G.G7)("global_sso_banner");return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(tv.E.Visual,{children:(0,m.jsx)(ef.AlertIcon,{size:"medium",className:dw.icon})}),r[1]=n):n=r[1],r[2]!==o?(a=(0,m.jsx)(tv.E.Heading,{as:"h2",children:o}),r[2]=o,r[3]=a):a=r[3],r[4]!==l||r[5]!==d||r[6]!==c?(i=(void 0!==l||d)&&(0,m.jsxs)("div",{className:dw.description,children:[(0,m.jsx)(tv.E.Description,{children:(0,m.jsx)("span",{children:l})}),(0,m.jsx)("div",{className:dw.sso,children:d&&(0,m.jsx)(V.x,{protectedOrgs:c})})]}),r[4]=l,r[5]=d,r[6]=c,r[7]=i):i=r[7],r[8]!==a||r[9]!==i?(s=(0,m.jsxs)("div",{className:dw.container,children:[t,(0,m.jsxs)(tv.E,{border:!1,children:[n,a,i]})]}),r[8]=a,r[9]=i,r[10]=s):s=r[10],s}function dS(e){let t,n,a,i,s,r,o,l=(0,p.c)(9),{mode:c}=e,{helpUrl:d}=(0,M.X)();l[0]!==c?(t=()=>{c&&(0,tm.BI)("dotcom_chat.activate.error",{target:"ERROR_SHARED_THREAD_NO_ACCESS",mode:c,message:"Shared thread no access"})},n=[c],l[0]=c,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,x.useEffect)(t,n),l[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),l[3]=a):a=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(tv.E.Visual,{children:(0,m.jsx)(ef.LockIcon,{size:"medium",className:dw.icon})}),s=(0,m.jsx)(tv.E.Heading,{as:"h2",children:"You don't have access to this shared conversation"}),l[4]=i,l[5]=s):(i=l[4],s=l[5]),l[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(tv.E.Description,{children:(0,m.jsx)("span",{children:"To view this shared link, you must have permissions to all resources referenced in the conversation."})}),l[6]=r):r=l[6];let u=`${d}/copilot/using-github-copilot/copilot-chat/asking-github-copilot-questions-in-github#sharing-copilot-chat-conversations`;return l[7]!==u?(o=(0,m.jsxs)("div",{className:dw.container,children:[a,(0,m.jsxs)(tv.E,{border:!1,children:[i,s,(0,m.jsxs)("div",{className:dw.description,children:[r,(0,m.jsx)(Q.A,{inline:!0,href:u,children:"Learn more"})]})]})]}),l[7]=u,l[8]=o):o=l[8],o}try{dN.displayName||(dN.displayName="ErrorState")}catch{}try{dS.displayName||(dS.displayName="SharedThreadForbidden")}catch{}let dC={container:"ImmersiveChat-module__container--h_Pmt",emptyContent:"ImmersiveChat-module__emptyContent--a_vXm",messageContent:"ImmersiveChat-module__messageContent--JE3f_",scrollToBottomButton:"ImmersiveChat-module__scrollToBottomButton--FbWSF",hidden:"ImmersiveChat-module__hidden--b_DNj"},dI=e=>{let t,n,a,i,s,r,o,l,c,d,u,h,f,g=(0,p.c)(48),{inputRef:y,isMobile:_}=e,{scrollToBottom:v}=(0,r9.b)(),b=(0,U.Pk)(),{isWaitingOnCopilot:j,messagesLoading:w,streamingMessage:N,messages:S}=b,{reloadQuota:C,premiumChatQuotaRemaining:I,isLicensedLimited:k}=(0,cs.xR)();g[0]!==b?(n=(0,nL.W)(b),t=(0,nQ.CB)(n),g[0]=b,g[1]=t,g[2]=n):(t=g[1],n=g[2]);let T=t,E=n?.sharedMessageID,{messages:L,groupedMessages:A}=(0,cz.a)(b);g[3]!==L?(a=L.find(dR)?.id,g[3]=L,g[4]=a):a=g[4];let R=a,D=(0,W.b)();g[5]!==v?(i=()=>v("instant"),s=[v],g[5]=v,g[6]=i,g[7]=s):(i=g[6],s=g[7]),(0,cG.N)(i,s);let P=(0,tg.S)(b.streamingMessage);g[8]!==k||g[9]!==j||g[10]!==L.length||g[11]!==w.state||g[12]!==I||g[13]!==P||g[14]!==C||g[15]!==N?(r=()=>{L.length>0&&!k&&tu.W.premiumRequestQuotasEnabled&&I<=nQ.aX&&!j&&"loaded"===w.state&&P&&!N&&C("quota_low_trigger")},o=[k,j,L.length,w.state,I,P,C,N],g[8]=k,g[9]=j,g[10]=L.length,g[11]=w.state,g[12]=I,g[13]=P,g[14]=C,g[15]=N,g[16]=r,g[17]=o):(r=g[16],o=g[17]),(0,x.useEffect)(r,o);let O=L[0];if(g[18]!==O?.intent||g[19]!==D?(l=()=>{O?.intent===nE.wh.planningAgent&&D.setUsePlanningIntent(!0)},g[18]=O?.intent,g[19]=D,g[20]=l):l=g[20],g[21]!==O||g[22]!==D?(c=[D,O],g[21]=O,g[22]=D,g[23]=c):c=g[23],(0,x.useEffect)(l,c),g[24]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)("h1",{children:"Copilot Chat"}),g[24]=d):d=g[24],g[25]!==T?(u=(0,m.jsxs)("div",{className:"sr-only",children:[d,(0,m.jsx)("h2",{children:T})]}),g[25]=T,g[26]=u):u=g[26],g[27]!==S||g[28]!==R||g[29]!==A||g[30]!==y||g[31]!==_||g[32]!==j||g[33]!==E||g[34]!==N?.id){let e;g[36]!==S||g[37]!==R||g[38]!==A.length||g[39]!==y||g[40]!==_||g[41]!==j||g[42]!==E||g[43]!==N?.id?(e=(e,t)=>(0,m.jsx)(cH.i,{isLastGroup:t===A.length-1,children:e.map((n,a)=>{let i=-1===n.messageIndex?S.length:n.messageIndex,s=t===A.length-1&&a===e.length-1;return(0,m.jsx)(dy,{isLatestMessage:s,isSharedMessage:n.id===E,isFirstReply:n.id===R,message:n,messageIndex:i,inputRef:y,isStreaming:n.id===N?.id||s&&j,autoOpenPreviewPane:!_},a)})},t),g[36]=S,g[37]=R,g[38]=A.length,g[39]=y,g[40]=_,g[41]=j,g[42]=E,g[43]=N?.id,g[44]=e):e=g[44],h=A.map(e),g[27]=S,g[28]=R,g[29]=A,g[30]=y,g[31]=_,g[32]=j,g[33]=E,g[34]=N?.id,g[35]=h}else h=g[35];return g[45]!==u||g[46]!==h?(f=(0,m.jsxs)("div",{children:[u,h]}),g[45]=u,g[46]=h,g[47]=f):f=g[47],f},dk=()=>{let e,t,n,a=(0,p.c)(4),{mode:i}=(0,U.Pk)();return a[0]!==i?(e=()=>{(0,tm.BI)("dotcom_chat.activate.error",{target:"ERROR_CONVERSATION_FAILED_TO_LOAD",mode:i,message:"Conversation failed to load"})},t=[i],a[0]=i,a[1]=e,a[2]=t):(e=a[1],t=a[2]),(0,x.useEffect)(e,t),a[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(dN,{title:"Conversation failed to load",description:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Q.A,{href:"",onClick:dD,inline:!0,children:"Reload the page"})," ","to try again."]})}),a[3]=n):n=a[3],n},dT=()=>{let e,t,n,a=(0,p.c)(4),{mode:i}=(0,U.Pk)();return a[0]!==i?(e=()=>{(0,tm.BI)("dotcom_chat.activate.error",{target:"ERROR_ACCESS_DENIED",mode:i,message:"Access denied"})},t=[i],a[0]=i,a[1]=e,a[2]=t):(e=a[1],t=a[2]),(0,x.useEffect)(e,t),a[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(dN,{title:"Access denied",description:"You do not have permission to view this."}),a[3]=n):n=a[3],n},dE=e=>{let t,n,a,i=(0,p.c)(9),{isSharedThread:s}=e,{mode:r}=(0,U.Pk)(),{needsSsoAuthentication:o,ssoOrgNames:l}=ch(),c=(0,co.G)(),d=s?"Shared conversation not found":"Conversation not found",u=o?`This URL may be incorrect, you may be signed out of your organization or the ${c?"space":"conversation"} may have been deleted.`:"This URL may be incorrect or the conversation may have been deleted.";return i[0]!==s||i[1]!==r||i[2]!==d?(t=()=>{(0,tm.BI)("dotcom_chat.activate.error",{target:s?"ERROR_SHARED_CONVERSATION_NOT_FOUND":"ERROR_CONVERSATION_NOT_FOUND",mode:r,message:d})},n=[r,s,d],i[0]=s,i[1]=r,i[2]=d,i[3]=t,i[4]=n):(t=i[3],n=i[4]),(0,x.useEffect)(t,n),i[5]!==u||i[6]!==l||i[7]!==d?(a=(0,m.jsx)(dN,{title:d,description:u,ssoOrgs:l}),i[5]=u,i[6]=l,i[7]=d,i[8]=a):a=i[8],a},dL=e=>{let t,n,a,i,s,r=(0,p.c)(20),{inputRef:o,isMobile:l}=e,c=(0,U.Pk)(),{messagesLoading:d,threadsLoading:u,messages:h,showTopicPicker:f,pendingFirstMessage:g}=c,y=(0,nL.W)(c),{textAreaRef:_}=(0,cq.Y)(o),x=cd(),v=null,b=null;if((0,nc.B)(h,g).length&&"loaded"===d.state){let e;r[0]!==l||r[1]!==_?(e=(0,m.jsx)(dI,{inputRef:_,isMobile:l}),r[0]=l,r[1]=_,r[2]=e):e=r[2],v=e}else if(("loading"===d.state||"pending"===d.state)&&c.selectedThreadID&&!f){let e;r[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(db,{}),r[3]=e):e=r[3],v=e}else if("error"===d.state&&c.selectedThreadID&&(null===y&&"error"!==u.state||d.notFound))if(x&&c.fetchSharedThreads?.ok===!1&&(403===c.fetchSharedThreads.status||401===c.fetchSharedThreads.status)){let e;r[4]!==c.mode?(e=(0,m.jsx)(dS,{mode:c.mode}),r[4]=c.mode,r[5]=e):e=r[5],b=e}else{let e;r[6]!==x?(e=(0,m.jsx)(dE,{isSharedThread:x}),r[6]=x,r[7]=e):e=r[7],b=e}else if("error"===d.state||"error"===u.state){let e;r[8]!==u.status?(e=403===u.status?(0,m.jsx)(dT,{}):(0,m.jsx)(dk,{}),r[8]=u.status,r[9]=e):e=r[9],b=e}let j=(0,eQ.U)();return r[10]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(dA,{}),r[10]=t):t=r[10],r[11]!==b?(n=b&&(0,m.jsx)("div",{className:dC.emptyContent,children:b}),r[11]=b,r[12]=n):n=r[12],r[13]!==v?(a=v&&(0,m.jsxs)("div",{className:dC.messageContent,children:[v,(0,m.jsx)(a2.Cb,{})]}),r[13]=v,r[14]=a):a=r[14],r[15]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(a2.zc,{}),r[15]=i):i=r[15],r[16]!==j||r[17]!==n||r[18]!==a?(s=(0,m.jsxs)(r9.$,{className:dC.container,containerRef:j,children:[t,n,a,i]}),r[16]=j,r[17]=n,r[18]=a,r[19]=s):s=r[19],s},dA=()=>{let e,t,n,a=(0,p.c)(7),{isScrolledUp:i,scrollToBottom:s}=(0,r9.b)(),r=!i&&dC.hidden;return a[0]!==r?(e=(0,_.$)(dC.scrollToBottomButton,r),a[0]=r,a[1]=e):e=a[1],a[2]!==s?(t=()=>s("smooth"),a[2]=s,a[3]=t):t=a[3],a[4]!==e||a[5]!==t?(n=(0,m.jsx)(e1.K,{"aria-label":"Scroll to bottom",className:e,onClick:t,icon:ef.ArrowDownIcon,tooltipDirection:"n"}),a[4]=e,a[5]=t,a[6]=n):n=a[6],n};try{dI.displayName||(dI.displayName="Messages")}catch{}try{dk.displayName||(dk.displayName="FailedToLoadThreadError")}catch{}try{dT.displayName||(dT.displayName="AccessDeniedError")}catch{}try{dE.displayName||(dE.displayName="NotFoundError")}catch{}try{dL.displayName||(dL.displayName="ImmersiveChat")}catch{}try{dA.displayName||(dA.displayName="ScrollToBottomButton")}catch{}function dR(e){return"assistant"===e.role}function dD(e){e.preventDefault(),window.location.reload()}var dP=n(93412),dO=n(91747),dB=n(52870);function dM(e){let t,n,a,i,s,r=(0,p.c)(12),{className:o}=e,[l,c]=(0,x.useState)(s6.L.Static),[d,u]=(0,x.useState)(!0),{safeSetTimeout:h}=(0,dB.A)();return r[0]!==h?(t=()=>{let e=h(()=>{cl.Jt.getProPlusAnimationFlag()?(c(s6.L.Activate),u(!1)):(c(s6.L.Idle),u(!0))},1e3);return()=>clearTimeout(e)},n=[h],r[0]=h,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,x.useEffect)(t,n),r[3]!==l?(a=()=>{l===s6.L.Activate&&(c(s6.L.Idle),u(!0),cl.Jt.removeProPlusAnimationFlag())},r[3]=l,r[4]=a):a=r[4],r[5]!==l||r[6]!==d||r[7]!==a?(i=(0,m.jsx)(s6.N,{animationType:l,onAnimationEnd:a,loopAnimation:d,size:48}),r[5]=l,r[6]=d,r[7]=a,r[8]=i):i=r[8],r[9]!==o||r[10]!==i?(s=(0,m.jsx)("div",{className:o,children:i}),r[9]=o,r[10]=i,r[11]=s):s=r[11],s}try{dM.displayName||(dM.displayName="CopilotEmptyStateAnimation")}catch{}let dF={scrollContainer:"NewConversation-module__scrollContainer--pS_a1",container:"NewConversation-module__container--fMmET",banner:"NewConversation-module__banner--binRv",main:"NewConversation-module__main--P10kO",content:"NewConversation-module__content--cXGzS",alignTop:"NewConversation-module__alignTop--iiUdY",innerContainer:"NewConversation-module__innerContainer--u29kY",footer:"NewConversation-module__footer--HIKDz",starters:"NewConversation-module__starters--zi_Nb"},dU={banner:"ChatInputBanners-module__banner--itq1j"};var dV=n(95280),d$=n(56487),dW=n(60429);let dH={container:"EditorUpsellBanner-module__container--uh3A5",banner:"EditorUpsellBanner-module__banner--_Z7mQ",title:"EditorUpsellBanner-module__title--CWcJI",description:"EditorUpsellBanner-module__description--LaCyW",actions:"EditorUpsellBanner-module__actions--BLcz6",editorButton:"EditorUpsellBanner-module__editorButton--_UqZv",closeButton:"EditorUpsellBanner-module__closeButton--MQTXP"};function dq(){let e,t,n,a,i,s=(0,p.c)(10),r=(0,U.A3)("isEditorUpsellBannerDismissed"),o=(0,W.b)(),{isLicensedLimited:l}=(0,cs.xR)(),c=(0,x.useId)(),d=dz;return r||!l?null:(s[0]!==c?(e=(0,m.jsx)("h2",{className:dH.title,id:c,children:"Install Copilot in your favorite code editor"}),s[0]=c,s[1]=e):e=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("p",{className:dH.description,children:"Copilot is available for a multitude of editors to fit your needs"}),n=tu.W.freeToPaidSettingsUpgrade?(0,m.jsx)(dV.B,{menuLocation:"editor_upsell_banner",mode:"immersive"}):(0,m.jsxs)(rS.A,{className:dH.actions,children:[(0,m.jsx)(l7.z,{className:dH.editorButton,href:dW.A.vscode.url,leadingVisual:(0,m.jsx)("img",{src:dW.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{d("vscode","ide_menu_primary_button_click")},children:dW.A.vscode.name}),(0,m.jsxs)(eX.W,{children:[(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(e1.K,{"aria-label":"More editors",icon:ef.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{d("menu","ide_menu_open")}})}),(0,m.jsx)(eX.W.Overlay,{align:"end",children:(0,m.jsx)(eZ.l,{children:(0,m.jsx)(d$.t,{menuLocation:"editor_upsell_banner",mode:"immersive"})})})]})]}),s[2]=t,s[3]=n):(t=s[2],n=s[3]),s[4]!==o?(a=(0,m.jsx)(e1.K,{variant:"invisible",className:dH.closeButton,icon:ef.XIcon,"aria-label":"Dismiss banner",onClick:()=>{o.dismissEditorUpsellBanner(),(0,tm.BI)("dotcom_chat.activate",{target:"EDITOR_UPSELL_BANNER_DISMISS",mode:"immersive"})}}),s[4]=o,s[5]=a):a=s[5],s[6]!==e||s[7]!==a||s[8]!==c?(i=(0,m.jsx)("div",{className:dH.container,children:(0,m.jsxs)("section",{className:dH.banner,"aria-labelledby":c,children:[e,t,n,a]})}),s[6]=e,s[7]=a,s[8]=c,s[9]=i):i=s[9],i)}function dz(e,t){tu.W.freeToPaidTelemetry?(0,d$.F)({eventName:e,menuLocation:"editor_upsell_banner",mode:"immersive",action:t}):(0,tm.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${e.toUpperCase()}`,mode:"immersive"})}try{dq.displayName||(dq.displayName="EditorUpsellBanner")}catch{}function dG(){return cl.Jt.getProPlusSuccessBannerFlag()??!1}function dK(e){let t,n,a=(0,p.c)(5),{onDismiss:i,className:s}=e;return a[0]!==i?(t=(0,m.jsx)(q.l,{variant:"success",title:"Copilot Pro+ activated",description:"Your Copilot Pro+ subscription is now active.",hideTitle:!0,onDismiss:()=>{i(),(0,tm.BI)("dotcom_chat.activate",{target:"PRO_PLUS_SUCCESS_BANNER_DISMISS",mode:"immersive"})}}),a[0]=i,a[1]=t):t=a[1],a[2]!==s||a[3]!==t?(n=(0,m.jsx)("div",{className:s,children:t}),a[2]=s,a[3]=t,a[4]=n):n=a[4],n}try{dK.displayName||(dK.displayName="ProPlusSuccessBanner")}catch{}function dQ(){return(cl.Jt.getTrialSuccessBannerFlag()&&!cl.Jt.getProPlusSuccessBannerFlag())??!1}function dY(e){let t,n,a=(0,p.c)(5),{onDismiss:i,className:s}=e;return a[0]!==i?(t=(0,m.jsx)(q.l,{variant:"success",title:"Copilot Pro trial activated",description:"Your 30-day Copilot Pro trial is now active.",hideTitle:!0,onDismiss:()=>{i(),(0,tm.BI)("dotcom_chat.activate",{target:"TRIAL_SUCCESS_BANNER_DISMISS",mode:"immersive"})}}),a[0]=i,a[1]=t):t=a[1],a[2]!==s||a[3]!==t?(n=(0,m.jsx)("div",{className:s,children:t}),a[2]=s,a[3]=t,a[4]=n):n=a[4],n}try{dY.displayName||(dY.displayName="TrialSuccessBanner")}catch{}function dJ(){let e,t,n,a,i=(0,p.c)(12),s=(0,cs.xR)().licenseType,r=function(){let e,t,n=(0,p.c)(3),[a,i]=(0,x.useState)(dQ);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{cl.Jt.removeTrialSuccessBannerFlag(),i(!1)},n[0]=e):e=n[0];let s=e;return n[1]!==a?(t={visible:a,onDismiss:s},n[1]=a,n[2]=t):t=n[2],t}(),o=function(){let e,t,n=(0,p.c)(3),[a,i]=(0,x.useState)(dG);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{cl.Jt.removeProPlusSuccessBannerFlag(),cl.Jt.removeTrialSuccessBannerFlag(),i(!1)},n[0]=e):e=n[0];let s=e;return n[1]!==a?(t={visible:a,onDismiss:s},n[1]=a,n[2]=t):t=n[2],t}(),l=o.visible,c=!l&&r.visible&&s===nE.mF.LicensedFull,d=!l&&!c;return i[0]!==d?(e=d&&(0,m.jsx)(dq,{}),i[0]=d,i[1]=e):e=i[1],i[2]!==c||i[3]!==r?(t=c&&(0,m.jsx)(dY,{className:dU.banner,onDismiss:r.onDismiss}),i[2]=c,i[3]=r,i[4]=t):t=i[4],i[5]!==o.onDismiss||i[6]!==l?(n=l&&(0,m.jsx)(dK,{className:dU.banner,onDismiss:o.onDismiss}),i[5]=o.onDismiss,i[6]=l,i[7]=n):n=i[7],i[8]!==e||i[9]!==t||i[10]!==n?(a=(0,m.jsxs)(m.Fragment,{children:[e,t,n]}),i[8]=e,i[9]=t,i[10]=n,i[11]=a):a=i[11],a}try{dJ.displayName||(dJ.displayName="NewConversationBanners")}catch{}var dX=n(58376),dZ=n(29765);function d0(e){let t,n,a,i,s,r,o,l,c,d,u,h,f=(0,p.c)(26),{textAreaRef:g,handleUserSubmit:y,nextMessageIndex:_}=e,x=(0,W.b)(),v=(0,U.Pk)();f[0]!==v?(t=(0,nL.W)(v),f[0]=v,f[1]=t):t=f[1];let b=t;f[2]!==b||f[3]!==x||f[4]!==v?(n=e=>{let t=0===v.messages.length?b:(0,nL.W)(v),n=v.currentUserLogin||"",a=e.message.replaceAll("$$USERNAME$$",n);x.sendChatMessage({thread:t,content:a,references:v.currentReferences,topic:v.currentTopic,context:v.context,customInstructions:v.customInstructions,model:v.model}),(0,tm.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_STARTER_MENU_ITEM",topic:v.currentTopic?.name,mode:"immersive",starterId:e.id})},f[2]=b,f[3]=x,f[4]=v,f[5]=n):n=f[5];let j=n;f[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("div",{className:dF.banner,children:(0,m.jsx)(dJ,{})}),f[6]=a):a=f[6];let w=(0,dO.u)("copilot_pro_plus_animation")?(0,m.jsx)(dM,{}):(0,m.jsx)(l6.A,{hidden:!0});return f[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),f[7]=i):i=f[7],f[8]!==y||f[9]!==_||f[10]!==g?(s=(0,m.jsx)(c$,{textAreaRef:g,handleUserSubmit:y,nextMessageIndex:_}),f[8]=y,f[9]=_,f[10]=g,f[11]=s):s=f[11],f[12]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)("h2",{className:"sr-only",children:"Sample prompts to try"}),f[12]=r):r=f[12],f[13]!==j?(o=(0,dX.M)().map(e=>(0,m.jsx)(dZ.I,{group:e,onEntrySelect:j},e.id)),f[13]=j,f[14]=o):o=f[14],f[15]!==o?(l=(0,m.jsx)("ul",{className:dF.starters,children:o}),f[15]=o,f[16]=l):l=f[16],f[17]!==s||f[18]!==l?(c=(0,m.jsxs)("div",{className:dF.innerContainer,children:[i,s,r,l]}),f[17]=s,f[18]=l,f[19]=c):c=f[19],f[20]!==c||f[21]!==w?(d=(0,m.jsx)("div",{className:dF.main,children:(0,m.jsx)("div",{className:dF.content,children:(0,m.jsxs)("div",{className:dF.alignTop,children:[w,c]})})}),f[20]=c,f[21]=w,f[22]=d):d=f[22],f[23]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.jsx)("div",{className:dF.footer,children:(0,m.jsx)(dP.h,{})}),f[23]=u):u=f[23],f[24]!==d?(h=(0,m.jsx)("div",{className:dF.scrollContainer,children:(0,m.jsxs)("div",{className:dF.container,children:[a,d,u]})}),f[24]=d,f[25]=h):h=f[25],h}try{d0.displayName||(d0.displayName="NewConversation")}catch{}let d1={container:"QuotaExceededEmptyState-module__container--WOGM3",main:"QuotaExceededEmptyState-module__main--kc9CL",copy:"QuotaExceededEmptyState-module__copy--S4GE7",heading:"QuotaExceededEmptyState-module__heading--mfW4i",description:"QuotaExceededEmptyState-module__description--JR0Bv",footer:"QuotaExceededEmptyState-module__footer--ckJFW"};function d2(){let e,t,n,a,i,s,r,o,l,c,d,u,h=(0,p.c)(21),{resetDate:f,eligibleForTrial:g}=(0,cs.xR)(),[y,_]=(0,x.useState)(!1),[v,b]=(0,x.useState)(!1);h[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{_(!0),b(!0)},h[0]=e):e=h[0];let j=e;h[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{_(!1)},h[1]=t):t=h[1];let w=t;h[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{b(!1)},h[2]=n):n=h[2];let N=n,S=y||v;h[3]!==y||h[4]!==S?(a=S?(0,m.jsx)(s6.N,{animationType:"jumpWiggle",loopAnimation:y,size:96,onAnimationEnd:N}):(0,m.jsx)(s6.N,{animationType:"static",loopAnimation:!1,size:96}),h[3]=y,h[4]=S,h[5]=a):a=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)("h2",{className:d1.heading,children:"You\u2019ve reached your free plan limit"}),h[6]=i):i=h[6],h[7]!==f?(s=(0,m.jsxs)("p",{className:d1.description,children:["Your limits will reset on ",f,"."]}),h[7]=f,h[8]=s):s=h[8];let C=g?"Try Copilot Pro free for 30 days":"Upgrade to Pro";return h[9]!==C?(r=(0,m.jsx)(l7.z,{as:"a",variant:"primary",size:"large",href:"https://github.com/github-copilot/pro",onMouseEnter:j,onMouseLeave:w,onClick:d3,children:C}),h[9]=C,h[10]=r):r=h[10],h[11]!==s||h[12]!==r?(o=(0,m.jsxs)("div",{className:d1.copy,children:[i,s,r]}),h[11]=s,h[12]=r,h[13]=o):o=h[13],h[14]!==a||h[15]!==o?(l=(0,m.jsxs)("div",{className:d1.main,children:[a,o]}),h[14]=a,h[15]=o,h[16]=l):l=h[16],h[17]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsx)("strong",{children:"Part of an organization?"}),h[17]=c):c=h[17],h[18]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsxs)("div",{className:d1.footer,children:[c,(0,m.jsxs)("span",{children:["Upgrade to"," ",(0,m.jsx)(Q.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]}),h[18]=d):d=h[18],h[19]!==l?(u=(0,m.jsxs)("div",{className:d1.container,children:[l,d]}),h[19]=l,h[20]=u):u=h[20],u}function d3(){(0,tm.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"immersive"})}try{d2.displayName||(d2.displayName="QuotaExceededEmptyState")}catch{}function d4(e){let t,n,a,i,s,r,o,l=(0,p.c)(22),{isMobile:c,textAreaRef:d}=e,u=(0,U.Pk)(),h=(0,oR.Kf)(),{messages:f,messagesLoading:g,threadsLoading:y}=u,{chatQuotaExceeded:_}=(0,cs.xR)(),v=(0,co.G)();l[0]!==v||l[1]!==u.customCopilots?(t=(0,ca.JB)(u.customCopilots,v),l[0]=v,l[1]=u.customCopilots,l[2]=t):t=l[2];let b=!!t,{variant:j}=cU(v,u.selectedThreadID),w=j===cF.customCopilotSizeExceeded,N=(!j||b)&&!w,S=(0,x.useRef)(u.currentTopic),C=cd(),I=!u.selectedThreadID&&cl.Jt.getEntrypointMessage();e:{if(u.selectedThreadID||u.pendingFirstMessage||I||v||_||"error"===g.state||"error"===y.state){n=!1;break e}n=!0}let k=n,T=f.length,E=cm(S,T);return l[3]!==u.currentTopic?(a=()=>{S.current=u.currentTopic},i=[u.currentTopic],l[3]=u.currentTopic,l[4]=a,l[5]=i):(a=l[4],i=l[5]),(0,x.useEffect)(a,i),l[6]!==_||l[7]!==E?(s=()=>{let e=cl.Jt.getEntrypointMessage();e&&!_&&(cl.Jt.setEntrypointMessage(null),setTimeout(()=>{E(e.message,e.references)},100))},r=[E,_],l[6]=_,l[7]=E,l[8]=s,l[9]=r):(s=l[8],r=l[9]),(0,x.useEffect)(s,r),l[10]!==_||l[11]!==E||l[12]!==c||l[13]!==C||l[14]!==T||l[15]!==k||l[16]!==N||l[17]!==u.selectedThreadID||l[18]!==u.sharedThreadChannel||l[19]!==d||l[20]!==h?(o=(0,m.jsx)("div",{className:cW.root,children:!u.selectedThreadID&&_?(0,m.jsx)(d2,{}):h.traceInfo?.visible?(0,m.jsx)(cr.k,{sharedThreadChannel:u.sharedThreadChannel,threadId:u.selectedThreadID}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:cW.container,children:k?(0,m.jsx)(d0,{textAreaRef:d,handleUserSubmit:E,nextMessageIndex:T}):(0,m.jsx)(dL,{inputRef:d,isMobile:c})}),(!C||tu.W.copilotDuplicateThread)&&!k&&(0,m.jsxs)("div",{className:cW.footer,children:[!N&&(0,m.jsx)(cV,{}),N&&(0,m.jsx)(c$,{textAreaRef:d,handleUserSubmit:E,nextMessageIndex:T})]})]})}),l[10]=_,l[11]=E,l[12]=c,l[13]=C,l[14]=T,l[15]=k,l[16]=N,l[17]=u.selectedThreadID,l[18]=u.sharedThreadChannel,l[19]=d,l[20]=h,l[21]=o):o=l[21],o}function d5(e){let t,n=(0,p.c)(2);return n[0]!==e?(t=(0,m.jsx)(d6,{children:(0,m.jsx)(d4,{...e})}),n[0]=e,n[1]=t):t=n[1],t}function d6(e){let t,n,a,i,s,r=(0,p.c)(8),{selectedThreadID:o}=(0,U.bP)("selectedThreadID"),[l,c]=(0,x.useState)(0),d=(0,x.useRef)(!1);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{d.current=!0},r[0]=t):t=r[0];let u=t;return r[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{tu.W.stableConversationView&&d.current&&(c(d7),d.current=!1)},r[1]=n):n=r[1],r[2]!==o?(a=[o],r[2]=o,r[3]=a):a=r[3],(0,x.useEffect)(n,a),r[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(tj,{regionName:"This conversation"}),r[4]=i):i=r[4],r[5]!==l||r[6]!==e.children?(s=(0,m.jsx)(tf.t,{fallback:i,onError:u,children:e.children},l),r[5]=l,r[6]=e.children,r[7]=s):s=r[7],s}function d7(e){return e+1}try{d4.displayName||(d4.displayName="ConversationViewInner")}catch{}try{d5.displayName||(d5.displayName="ConversationView")}catch{}try{d6.displayName||(d6.displayName="ConversationViewErrorBoundary")}catch{}var d8=n(40683),d9=n(93380);let ue={container:"Header-module__container--x6PHc",leftControls:"Header-module__leftControls--LaO7p",rightControls:"Header-module__rightControls--yQ1vI",hideOnMobile:"Header-module__hideOnMobile--OHZqN"},ut={newChatButtonContainer:"NewChatButton-module__newChatButtonContainer--JlmNy"};function un(){let e,t,n,a=(0,p.c)(5),i=(0,cp.G)();a[0]!==i?(e=async()=>{await i({clearTopic:!0,includeThreads:!1})},a[0]=i,a[1]=e):e=a[1];let s=e;return a[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(lq.KJ,{}),a[2]=t):t=a[2],a[3]!==s?(n=(0,m.jsx)("div",{className:ut.newChatButtonContainer,children:(0,m.jsx)(tp.$,{icon:t,iconOnly:!0,onClick:s,"aria-label":"New chat"})}),a[3]=s,a[4]=n):n=a[4],n}try{un.displayName||(un.displayName="NewChatButton")}catch{}var ua=n(61767);let ui=()=>{let e=(0,U.Pk)(),t=(0,co.G)(),n=(0,ca.JB)(e.customCopilots,t),a=(0,ca.mM)(),i=(0,ca.FQ)(),s=a||n,r=!i&&n;return{updateGlobalNavigationBreadcrumbs:()=>{let e=[{label:"Copilot",href:"/copilot"}];s&&e.push({label:"Spaces",href:nQ.VR}),r&&n&&e.push({label:n.name,href:(0,ca.Cb)(n)}),(0,ua.FC)(e)}}};var us=n(79575),ur=n(11083);let uo={container:"TraceButtons-module__container--QKBPy"};function ul(){let e,t,n,a,i,s,r,o,l,c,d,u=(0,p.c)(31),h=(0,oD.y)(),{traceInfo:f}=(0,oR.Kf)(),g=function(){let e,t=(0,p.c)(2),n=(0,U.bP)("selectedThreadID","threads");return t[0]!==n?(e=(0,nL.W)(n),t[0]=n,t[1]=e):e=t[1],e}(),y=cd(),[_,v]=(0,x.useState)(!1),[b,j]=(0,cl.iI)("getTracingRequestedFlag","setTracingRequestedFlag"),w=tu.W.requestTracing&&(0,ur.X)();f?.traces,g?.id;let N=(0,us.$1)(f?.traces,g?.id,y),S=!!f?.visible;u[0]!==S||u[1]!==h?(e=()=>{h.showTraceDisplay(!S)},u[0]=S,u[1]=h,u[2]=e):e=u[2];let C=e;u[3]!==j||u[4]!==b?(t=()=>{b?j(!1):v(!0)},u[3]=j,u[4]=b,u[5]=t):t=u[5];let I=t;if(!w)return null;let k=b?"danger":void 0;u[6]!==k?(n=(0,m.jsx)(eX.W.Button,{"aria-label":"Tracing",icon:ef.ToolsIcon,variant:k}),u[6]=k,u[7]=n):n=u[7];let T=b?"danger":void 0;u[8]!==b?(a=(0,m.jsx)(eZ.l.LeadingVisual,{children:b?(0,m.jsx)(ef.SquareCircleIcon,{}):(0,m.jsx)(ef.ToolsIcon,{})}),u[8]=b,u[9]=a):a=u[9];let E=b?"Stop tracing":"Start tracing";u[10]!==I||u[11]!==T||u[12]!==a||u[13]!==E?(i=(0,m.jsxs)(eZ.l.Item,{onSelect:I,variant:T,children:[a,E]}),u[10]=I,u[11]=T,u[12]=a,u[13]=E,u[14]=i):i=u[14];let L=!N;return u[15]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.LogIcon,{})}),u[15]=s):s=u[15],u[16]!==C||u[17]!==L?(r=(0,m.jsxs)(eZ.l.Item,{onSelect:C,disabled:L,children:[s,"View trace"]}),u[16]=C,u[17]=L,u[18]=r):r=u[18],u[19]!==r||u[20]!==i?(o=(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsxs)(eZ.l,{children:[i,r]})}),u[19]=r,u[20]=i,u[21]=o):o=u[21],u[22]!==o||u[23]!==n?(l=(0,m.jsxs)(eX.W,{children:[n,o]}),u[22]=o,u[23]=n,u[24]=l):l=u[24],u[25]!==j||u[26]!==_?(c=_&&(0,m.jsx)(tF.l,{footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>v(!1)},{buttonType:"primary",content:"Enable tracing",onClick:()=>{j(!0),v(!1)}}],onClose:()=>v(!1),title:"Enable tracing",children:"Enabling tracing will capture additional diagnostic information to secure storage. This will include the entire contents of the conversation and references used in it."}),u[25]=j,u[26]=_,u[27]=c):c=u[27],u[28]!==l||u[29]!==c?(d=(0,m.jsxs)("div",{className:uo.container,children:[l,c]}),u[28]=l,u[29]=c,u[30]=d):d=u[30],d}try{ul.displayName||(ul.displayName="TraceButtons")}catch{}function uc(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,y,_,v=(0,p.c)(49),{showPreviewPaneButton:b,conversationSpecificItems:j,customButtons:w,defaultName:N}=e,S=void 0===b||b,C=void 0===N?"":N,I=(0,U.Pk)(),{selectedThreadID:k,threads:T,messagesLoading:E,messages:L}=I,A=(0,U.pn)(ud);v[0]!==A?(t=(0,nQ.CB)(A),v[0]=A,v[1]=t):t=v[1];let R=t,D=cd(),P=cu(),O=(0,co.G)(),B=(0,ca.JB)(I.customCopilots,O),F=(0,ci.BV)(),V=(0,ca.mM)(),$=(0,ct.v)(),[,W,H]=(0,d9.B)(!1);v[2]!==k||v[3]!==T?(n=T.get(k),v[2]=k,v[3]=T,v[4]=n):n=v[4];let q=n,z=!!(D?P:q?.sharedID),{updateGlobalNavigationBreadcrumbs:G}=ui();v[5]!==G?(a=()=>{G()},v[5]=G,v[6]=a):a=v[6],v[7]!==O||v[8]!==G?(i=[G,O],v[7]=O,v[8]=G,v[9]=i):i=v[9],(0,x.useEffect)(a,i),v[10]!==D||v[11]!==P||v[12]!==k?(s=()=>k?D&&P?`/copilot/share/${P}`:`/copilot/c/${k}`:nQ.Jz,v[10]=D,v[11]=P,v[12]=k,v[13]=s):s=v[13];let K=s;$?.id;let Q=V&&!O||!k&&!$?.id&&!V,Y=(0,x.useRef)(null),[J,X]=(0,x.useState)(null),{canShareThread:Z}=(0,M.X)(),ee="loaded"===E.state,et=Z&&!D&&k&&!O&&ee,en=(0,nQ.Q7)(L).length>0;v[14]!==L?(r=(0,nQ.UM)(L),v[14]=L,v[15]=r):r=v[15];let ea=r,ei=en||ea;v[16]!==ei||v[17]!==X?(o=()=>{ei||X("share")},v[16]=ei,v[17]=X,v[18]=o):o=v[18];let es=o;B?A?(0,g.D)(`${R} \xb7 ${B.name} \xb7 GitHub Copilot Spaces`):(0,g.D)(`${B.name} \xb7 GitHub Copilot Spaces`):V?(0,g.D)("Spaces \xb7 GitHub Copilot"):D?(0,g.D)("Shared conversation \xb7 GitHub Copilot"):(0,g.D)(`${R} \xb7 GitHub Copilot`),v[19]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)(un,{}),v[19]=l):l=v[19];let er=!Q&&(0,m.jsx)(eJ.B,{children:F&&(B||C)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(eJ.B.Item,{href:nQ.VR,children:"Spaces"}),k||!j?(0,m.jsx)(eJ.B.Item,{href:B?(0,ca.Cb)(B):nQ.VR,children:B?.name||C}):(0,m.jsx)(eJ.B.ItemWithMenu,{menuOverlay:(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsx)(eZ.l,{children:j})}),children:B?.name||C}),k&&(0,m.jsx)(eJ.B.ItemWithMenu,{menuOverlay:(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsx)(eZ.l,{children:(0,m.jsx)(d8.V,{onOpenDialog:X,isShared:z,showShare:!O,hideShareOnDesktop:!0})})}),children:R})]}):$?(0,m.jsx)(eJ.B.Item,{href:`/copilot/${$.id}`,children:$.displayName||"Plugin"}):k&&!D?(0,m.jsx)(eJ.B.ItemWithMenu,{menuOverlay:(0,m.jsx)(eX.W.Overlay,{children:(0,m.jsx)(eZ.l,{children:(0,m.jsx)(d8.V,{onOpenDialog:X,isShared:z,showShare:!O,hideShareOnDesktop:!0})})}),children:R}):D?(0,m.jsx)(eJ.B.Item,{href:K(),children:R}):null});return v[20]!==ue.leftControls||v[21]!==l||v[22]!==er?(c=(0,m.jsxs)("div",{className:ue.leftControls,children:[l,er]}),v[20]=ue.leftControls,v[21]=l,v[22]=er,v[23]=c):c=v[23],v[24]!==z||v[25]!==ei||v[26]!==es||v[27]!==et?(d=et&&(0,m.jsx)("div",{className:ue.hideOnMobile,children:(0,m.jsx)(tp.$,{icon:z?(0,m.jsx)(ef.UnlockIcon,{}):(0,m.jsx)(ef.LockIcon,{}),disabled:ei,onClick:es,children:"Share"})}),v[24]=z,v[25]=ei,v[26]=es,v[27]=et,v[28]=d):d=v[28],v[29]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.jsx)(ul,{}),v[29]=u):u=v[29],v[30]!==k||v[31]!==S?(h=S&&k&&(0,m.jsx)(uu,{}),v[30]=k,v[31]=S,v[32]=h):h=v[32],v[33]!==w||v[34]!==d||v[35]!==h?(f=(0,m.jsxs)("div",{className:ue.rightControls,children:[d,u,w,h]}),v[33]=w,v[34]=d,v[35]=h,v[36]=f):f=v[36],v[37]!==J||v[38]!==k||v[39]!==X||v[40]!==W||v[41]!==H||v[42]!==R?(y=k&&(0,m.jsx)(d8.p,{visibleDialog:J,onClose:()=>{(0,ny.flushSync)(()=>X(null)),Y.current?.focus()},threadName:R,threadId:k,selectedThreadId:k,onStartLoading:W,onFinishLoading:H,returnFocusRef:Y}),v[37]=J,v[38]=k,v[39]=X,v[40]=W,v[41]=H,v[42]=R,v[43]=y):y=v[43],v[44]!==ue.container||v[45]!==c||v[46]!==f||v[47]!==y?(_=(0,m.jsxs)("div",{className:ue.container,children:[c,f,y]}),v[44]=ue.container,v[45]=c,v[46]=f,v[47]=y,v[48]=_):_=v[48],_}function ud(e){return(0,nL.W)(e)}function uu(){let e,t=(0,p.c)(4),n=(0,eY.tZ)(),{openPreviewPane:a}=(0,eY.xx)(),i=(0,eQ.U)();return t[0]!==i||t[1]!==a||t[2]!==n?(e=!n&&(0,m.jsx)(tp.$,{iconOnly:!0,icon:(0,m.jsx)(ef.SidebarExpandIcon,{}),"aria-label":"Open workbench",onClick:()=>{(0,tm.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),a()},ref:i}),t[0]=i,t[1]=a,t[2]=n,t[3]=e):e=t[3],e}try{uc.displayName||(uc.displayName="Header")}catch{}try{uu.displayName||(uu.displayName="PreviewPaneButton")}catch{}var um=n(31078),up=n(53552),uh=n(54030),uf=n(87086),ug=n(54114),uy=n(39176),u_=n(78314),ux=n(25791);let uv={resourcePanel:"ResourcePanel-module__resourcePanel--QFUYz",resourcePanelHeader:"ResourcePanel-module__resourcePanelHeader--xpYIo",resourcePanelHeaderRow:"ResourcePanel-module__resourcePanelHeaderRow--U3piY",resourcePanelContent:"ResourcePanel-module__resourcePanelContent--zjIvl",resourcePanelPlaceholder:"ResourcePanel-module__resourcePanelPlaceholder--Tzewz",resourcePanelRepoButton:"ResourcePanel-module__resourcePanelRepoButton--W2AOy",resourcePanelNavItem:"ResourcePanel-module__resourcePanelNavItem--Q9A53"};function ub(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,v,b,j,w,N,S,C=(0,p.c)(44),{className:I}=e,{closeResourcePanel:k}=(0,eY.xx)(),[T,E]=(0,x.useState)(!1),[L,A]=(0,x.useState)("Select Repo"),[R,D]=(0,x.useState)(null),[P,O]=(0,x.useState)("files"),[B,M]=(0,x.useState)(""),F=(0,W.b)(),U=(0,x.useRef)(null);C[0]!==I?(t=(0,_.$)(uv.resourcePanel,I),C[0]=I,C[1]=t):t=C[1],C[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>E(!0),C[2]=n):n=C[2],C[3]!==L?(a=(0,m.jsx)(tn.Q,{ref:U,onClick:n,variant:"invisible",trailingVisual:ef.ChevronDownIcon,className:uv.resourcePanelRepoButton,children:L}),C[3]=L,C[4]=a):a=C[4],C[5]===Symbol.for("react.memo_cache_sentinel")?(i=new Set,C[5]=i):i=C[5],C[6]!==F?(s=async e=>{if(!e)return;let t=await F.service.fetchRepo(e);t.ok&&t.payload?(A(`${t.payload.ownerLogin}/${t.payload.name}`),D(t.payload)):t.error&&M(t.error)},C[6]=F,C[7]=s):s=C[7],C[8]!==T||C[9]!==s?(r=(0,m.jsx)(uf.X1,{selectionVariant:"instant",open:T,onOpenChange:E,selectedRepoIds:i,onSelectRepo:s,submitReturnFocusRef:U,cancelReturnFocusRef:U,anchorRef:U,includeForks:!0}),C[8]=T,C[9]=s,C[10]=r):r=C[10],C[11]!==k?(o=(0,m.jsx)("div",{className:"d-flex flex-justify-end",children:(0,m.jsx)(e1.K,{size:"small",icon:ef.SidebarCollapseIcon,"aria-label":"Close resource panel",onClick:k,variant:"invisible"})}),C[11]=k,C[12]=o):o=C[12],C[13]!==a||C[14]!==r||C[15]!==o?(l=(0,m.jsxs)("div",{className:uv.resourcePanelHeaderRow,children:[a,r,o]}),C[13]=a,C[14]=r,C[15]=o,C[16]=l):l=C[16];let V="files"===P?"location":void 0;C[17]===Symbol.for("react.memo_cache_sentinel")?(c=e=>{O("files"),e.preventDefault()},C[17]=c):c=C[17],C[18]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(ef.CodeIcon,{}),C[18]=d):d=C[18],C[19]!==V?(u=(0,m.jsx)(ux.O.Item,{"aria-current":V,"aria-label":"Files",onSelect:c,className:uv.resourcePanelNavItem,children:d}),C[19]=V,C[20]=u):u=C[20];let $="pull-requests"===P?"location":void 0;C[21]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{O("pull-requests"),e.preventDefault()},C[21]=h):h=C[21],C[22]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)(ef.GitPullRequestIcon,{}),C[22]=f):f=C[22],C[23]!==$?(g=(0,m.jsx)(ux.O.Item,{"aria-current":$,"aria-label":"Pull requests",onSelect:h,className:uv.resourcePanelNavItem,children:f}),C[23]=$,C[24]=g):g=C[24];let H="issues"===P?"location":void 0;return C[25]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{O("issues"),e.preventDefault()},C[25]=y):y=C[25],C[26]===Symbol.for("react.memo_cache_sentinel")?(v=(0,m.jsx)(ef.IssueOpenedIcon,{}),C[26]=v):v=C[26],C[27]!==H?(b=(0,m.jsx)(ux.O.Item,{"aria-current":H,"aria-label":"Issues",onSelect:y,className:uv.resourcePanelNavItem,children:v}),C[27]=H,C[28]=b):b=C[28],C[29]!==u||C[30]!==g||C[31]!==b?(j=(0,m.jsxs)(ux.O,{"aria-label":"Resource panel navigation",children:[u,g,b]}),C[29]=u,C[30]=g,C[31]=b,C[32]=j):j=C[32],C[33]!==j||C[34]!==l?(w=(0,m.jsxs)("div",{className:uv.resourcePanelHeader,children:[l,j]}),C[33]=j,C[34]=l,C[35]=w):w=C[35],C[36]!==R||C[37]!==B||C[38]!==P?(N=(0,m.jsx)("div",{className:uv.resourcePanelContent,children:"files"===P?R?(0,m.jsx)("div",{children:(0,m.jsx)(u_.d,{repository:R,children:(0,m.jsx)(um.Ck,{children:(0,m.jsx)(up.qV,{refInfo:{name:R.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:R.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,m.jsx)(uj,{currentRepo:R,fetchError:B})})})})}):(0,m.jsx)("div",{className:uv.resourcePanelPlaceholder,children:"Select a repository to view files"}):(0,m.jsx)("div",{className:uv.resourcePanelPlaceholder,children:"Coming soon..."})}),C[36]=R,C[37]=B,C[38]=P,C[39]=N):N=C[39],C[40]!==t||C[41]!==w||C[42]!==N?(S=(0,m.jsxs)("div",{className:t,"data-testid":"resource-panel",children:[w,N]}),C[40]=t,C[41]=w,C[42]=N,C[43]=S):S=C[43],S}function uj(e){let t,n,a,i,s,r=(0,p.c)(21),{currentRepo:o,fetchError:l}=e,{openPreviewPane:c,openItem:d,updateItem:u}=(0,eY.xx)(),h=(0,W.b)(),{list:f,directories:g,loading:y}=(0,uh.o)(o.commitOID,!0);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],r[0]=t):t=r[0];let[_,v]=(0,x.useState)(t),[b,j]=(0,x.useState)(uS);r[1]!==o.id||r[2]!==o.refInfo||r[3]!==h||r[4]!==d||r[5]!==c||r[6]!==u?(n=async e=>{if(0===e.size)return;let t=Array.from(e)[0],n=await h.service.fetchFileContents(o.id,o.refInfo.name,t);if(n.ok&&n.payload){let e={messageId:nE.Wp,id:`file:${t}#0`,timestamp:new Date,isUserEdited:!1,value:n.payload?.content,type:"file",name:t,isStreaming:!1,language:n.payload?.language??"plaintext"};u(e),d(e.id),c()}j(new Set([t]))},r[1]=o.id,r[2]=o.refInfo,r[3]=h,r[4]=d,r[5]=c,r[6]=u,r[7]=n):n=r[7];let w=n;r[8]!==g||r[9]!==f?(a=()=>{v((0,uy.k)({paths:f,directories:g}))},r[8]=g,r[9]=f,r[10]=a):a=r[10],r[11]!==o.commitOID||r[12]!==g||r[13]!==f?(i=[f,g,v,o.commitOID],r[11]=o.commitOID,r[12]=g,r[13]=f,r[14]=i):i=r[14],(0,x.useEffect)(a,i);let N=y||!1,S=!!l;return r[15]!==w||r[16]!==_||r[17]!==b||r[18]!==N||r[19]!==S?(s=(0,m.jsx)(ug.Rw,{rootItems:_,expandedPath:"",setRootItems:v,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:b,onSelectionChange:w,loading:N,fetchError:S,sortDirectoryItems:uw,singleSelect:!0}),r[15]=w,r[16]=_,r[17]=b,r[18]=N,r[19]=S,r[20]=s):s=r[20],s}function uw(e){return e.sort(uN)}function uN(e,t){return e.data.name.localeCompare(t.data.name)}function uS(){return new Set}try{ub.displayName||(ub.displayName="ResourcePanel")}catch{}try{uj.displayName||(uj.displayName="ResourcePanelFileTree")}catch{}var uC=n(15033),uI=n(96459),uk=n(72511),uT=n(72011),uE=n(40928),uL=n(51563),uA=n(40260),uR=n(69497);let uD=(e,t)=>{let n,a,i,s,r,o,l,c,d,u,m,h,f,g,y,_,x,v=(0,p.c)(48),b=(0,ts.jE)(),j=(0,ca.Cb)({id:t,owner:e}),w=`${j}/permissions`;v[0]!==w?(n={queryKey:["copilotSpaceCollaborators",w],queryFn:async()=>{let e=await (0,t8.lS)(w),t=await e.json();if(!e.ok)throw t.errorMessages;return t}},v[0]=w,v[1]=n):n=v[1];let{data:N,isLoading:S}=(0,tr.I)(n);v[2]!==w?(a=async e=>{let t=await (0,t8.lS)(w,{method:"POST",body:{permission:e}}),n=await t.json();if(!t.ok)throw n.errorMessages;return n},v[2]=w,v[3]=a):a=v[3],v[4]!==w||v[5]!==b||v[6]!==t||v[7]!==e?(i=()=>(b.invalidateQueries({queryKey:(0,uT.dp)({id:t,owner:e})}),b.invalidateQueries({queryKey:["copilotSpaceCollaborators",w]})),v[4]=w,v[5]=b,v[6]=t,v[7]=e,v[8]=i):i=v[8],v[9]!==a||v[10]!==i?(s={mutationFn:a,onSuccess:i},v[9]=a,v[10]=i,v[11]=s):s=v[11];let C=(0,t7.n)(s);v[12]!==C?({mutateAsync:r,...o}=C,v[12]=C,v[13]=r,v[14]=o):(r=v[13],o=v[14]),v[15]!==w?(l=async e=>{let t=await (0,t8.lS)(w,{method:"PUT",body:{permission:e}}),n=await t.json();if(!t.ok)throw n.errorMessages;return n},v[15]=w,v[16]=l):l=v[16],v[17]!==w||v[18]!==b?(c=()=>b.invalidateQueries({queryKey:["copilotSpaceCollaborators",w]}),v[17]=w,v[18]=b,v[19]=c):c=v[19],v[20]!==l||v[21]!==c?(d={mutationFn:l,onSuccess:c},v[20]=l,v[21]=c,v[22]=d):d=v[22];let I=(0,t7.n)(d);v[23]!==I?({mutateAsync:u,...m}=I,v[23]=I,v[24]=u,v[25]=m):(u=v[24],m=v[25]),v[26]!==w?(h=async e=>{let t=await (0,t8.lS)(w,{method:"DELETE",body:{permission:e}});if(!t.ok)throw(await t.json()).errorMessages},v[26]=w,v[27]=h):h=v[27],v[28]!==w||v[29]!==b||v[30]!==t||v[31]!==e?(f=()=>(b.invalidateQueries({queryKey:(0,uT.dp)({id:t,owner:e})}),b.invalidateQueries({queryKey:["copilotSpaceCollaborators",w]})),v[28]=w,v[29]=b,v[30]=t,v[31]=e,v[32]=f):f=v[32],v[33]!==f||v[34]!==h?(g={mutationFn:h,onSuccess:f},v[33]=f,v[34]=h,v[35]=g):g=v[35];let k=(0,t7.n)(g);return v[36]!==k?({mutateAsync:y,..._}=k,v[36]=k,v[37]=y,v[38]=_):(y=v[37],_=v[38]),v[39]!==r||v[40]!==o||v[41]!==N||v[42]!==S||v[43]!==y||v[44]!==_||v[45]!==u||v[46]!==m?(x={collaborators:N,isLoading:S,addCollaborator:r,updateCollaborator:u,removeCollaborator:y,isAddPending:o.isPending,isUpdatePending:m.isPending,isRemovePending:_.isPending,...o,...m,..._},v[39]=r,v[40]=o,v[41]=N,v[42]=S,v[43]=y,v[44]=_,v[45]=u,v[46]=m,v[47]=x):x=v[47],x};function uP(e){if("user"in e)return{...e.user,actor_type:"user"};if("team"in e)return{...e.team,actor_type:"team"};throw Error("suggestion has a value, but the types suggest this should not be possible. Did we account for all possible options properly in the typings?")}let uO={copyLinkSection:"SpaceCollaborators-module__copyLinkSection--G8YCd",spacesSuggestionsList:"SpaceCollaborators-module__spacesSuggestionsList--oqwht"};function uB({copilotSpace:e,onError:t}){let n=(0,W.b)(),[a,i]=(0,x.useState)(""),[s,r]=(0,x.useState)(!1),o=(0,x.useRef)(null),l=tu.W.copilotSpacesReadAccessToUserOwnedSpaces,{data:c,isLoading:d}=(e=>{let t,n,a,i,s,r,o=(0,p.c)(17),{input:l}=e;o[0]!==l?(t=["suggestedSpaceCollaborators",l],o[0]=l,o[1]=t):t=o[1],o[2]!==l.allUsers||o[3]!==l.query||o[4]!==l.spaceId||o[5]!==l.spaceOwner?(n=async()=>{let e=(0,ca.Cb)({id:l.spaceId,owner:l.spaceOwner}),t=l.allUsers?`${e}/suggested_collaborators?q=${encodeURIComponent(l.query)}&all_users=true`:`${e}/suggested_collaborators?q=${encodeURIComponent(l.query)}`,n=await (0,t8.lS)(t);if(!n.ok)throw Error("Failed to fetch suggested collaborators");return(await n.json()).suggestions.map(uP)},o[2]=l.allUsers,o[3]=l.query,o[4]=l.spaceId,o[5]=l.spaceOwner,o[6]=n):n=o[6];let c=!!l.query;o[7]!==t||o[8]!==n||o[9]!==c?(a={queryKey:t,queryFn:n,enabled:c},o[7]=t,o[8]=n,o[9]=c,o[10]=a):a=o[10];let d=(0,tr.I)(a);return o[11]!==d?({data:i,...s}=d,o[11]=d,o[12]=i,o[13]=s):(i=o[12],s=o[13]),o[14]!==i||o[15]!==s?(r={data:i,...s},o[14]=i,o[15]=s,o[16]=r):r=o[16],r})({input:{query:(0,x.useDeferredValue)(a.startsWith("@")?a.trim().slice(1):a.trim()),spaceOwner:e.owner,spaceId:e.id,allUsers:l&&!e.ownerIsOrg}}),{collaborators:u,addCollaborator:h,error:f,isLoading:g}=uD(e.owner,e.id);async function y(a){if(u?.some(e=>e.actor_id===a.id&&e.actor_type===a.actor_type)){i(""),r(!1);return}try{await h({actor_id:a.id,role_name:"custom_copilot_reader",actor_type:a.actor_type}),i(""),!e.ownerIsOrg&&u&&u?.length<=1&&n.dispatch({type:"SET_CUSTOM_COPILOT",partial:!0,customCopilot:{...e,collaborative:!0}}),r(!1)}catch{t({base:"An error occurred while adding a collaborator."})}}return(0,x.useEffect)(()=>{function e(e){o.current&&!o.current.contains(e.target)&&r(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,x.useEffect)(()=>{r(!!(a&&!d&&c&&c.length>0))},[a,c,d]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(K.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted mb-1",children:"People with access"}),(0,m.jsxs)("div",{className:uO.copyLinkSection,style:{position:"relative"},children:[(0,m.jsx)(ll.A,{block:!0,placeholder:e.ownerIsOrg?`Search people within ${e.owner}`:"Search for any GitHub user",value:a,onChange:e=>i(e.target.value),className:"color-fg-default","aria-label":e.ownerIsOrg?"Search for users or teams to share this space with":"Search for any GitHub user to share this space with"}),s&&c&&(0,m.jsx)("div",{ref:o,children:(0,m.jsx)(u$,{items:c,onSelect:y})})]})]}),g?(0,m.jsx)("div",{className:"d-flex flex-justify-center p-2",children:(0,m.jsx)(tU.A,{})}):f?(0,m.jsx)(q.l,{variant:"critical",title:"There was a problem with loading this Space's collaborators."}):u&&u.length>0?(0,m.jsx)(K.B,{direction:"vertical",gap:"condensed",align:"start",children:u.map(n=>(0,m.jsx)(uM,{actor:n,copilotSpace:e,collaboratorsCount:u.length,onError:t},`${n.actor_type}-${n.actor_id}`))}):(0,m.jsx)("span",{className:"text-small color-fg-muted p-2",children:"This Space isn't shared with anyone yet"})]})}function uM(e){let t,n,a,i,s,r,o,l,c,d=(0,p.c)(27),{actor:u,copilotSpace:h,onError:f,collaboratorsCount:g}=e,y="user"===u.actor_type?u.display_login:u.slug,_="team"===u.actor_type;return d[0]!==u.avatar_url||d[1]!==_?(t=(0,m.jsx)(aq.r,{src:u.avatar_url,className:"mr-2",square:_,size:32}),d[0]=u.avatar_url,d[1]=_,d[2]=t):t=d[2],d[3]!==y?(n=(0,m.jsx)("b",{children:y}),d[3]=y,d[4]=n):n=d[4],d[5]!==y||d[6]!==n?(a=(0,m.jsx)("span",{className:"ml-1",children:(0,m.jsx)(uR.A,{maxWidth:"230px",title:y,inline:!0,children:n})}),d[5]=y,d[6]=n,d[7]=a):a=d[7],d[8]!==u.name?(i=(0,m.jsx)("p",{children:u.name}),d[8]=u.name,d[9]=i):i=d[9],d[10]!==u.name||d[11]!==i?(s=(0,m.jsx)("span",{className:"text-small color-fg-muted ml-1",children:(0,m.jsx)(uR.A,{maxWidth:"230px",title:u.name,inline:!0,children:i})}),d[10]=u.name,d[11]=i,d[12]=s):s=d[12],d[13]!==a||d[14]!==s?(r=(0,m.jsxs)("div",{className:"d-flex flex-column mt-1",children:[a,s]}),d[13]=a,d[14]=s,d[15]=r):r=d[15],d[16]!==t||d[17]!==r?(o=(0,m.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[t,r]}),d[16]=t,d[17]=r,d[18]=o):o=d[18],d[19]!==u||d[20]!==g||d[21]!==h||d[22]!==f?(l=(0,m.jsx)(uV,{actor:u,onError:f,copilotSpace:h,collaboratorsCount:g}),d[19]=u,d[20]=g,d[21]=h,d[22]=f,d[23]=l):l=d[23],d[24]!==o||d[25]!==l?(c=(0,m.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[o,l]}),d[24]=o,d[25]=l,d[26]=c):c=d[26],c}let uF=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"}],uU={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view"};function uV({actor:e,onError:t,copilotSpace:n,collaboratorsCount:a}){let i=(0,W.b)(),[s,r]=(0,x.useState)(!1),o=(0,x.useRef)(null),l=uF.find(t=>t.value===e.role),{updateCollaborator:c,removeCollaborator:d,isUpdatePending:u,isRemovePending:p}=uD(n.owner,n.id);async function h(n){try{await c({actor_id:e.actor_id,role_name:n,actor_type:e.actor_type})}catch{t({base:"An error occurred while updating an actor's permission level."})}finally{r(!1)}}async function f(){try{await d({actor_id:e.actor_id,actor_type:e.actor_type})}catch{t({base:"An error occurred while removing an actor's permissions."})}finally{!n.ownerIsOrg&&a<=2&&i.dispatch({type:"SET_CUSTOM_COPILOT",partial:!0,customCopilot:{...n,collaborative:!1}}),r(!1)}}return(0,m.jsxs)(eX.W,{onOpenChange:r,anchorRef:o,open:s,children:[(0,m.jsx)(eX.W.Button,{disabled:e.disabled,loading:u||p,variant:"invisible",className:"text-small",ref:o,onClick:()=>r(!0),"aria-label":`Change role for ${e.name}`,children:(0,m.jsx)(uR.A,{title:l?.text||"",inline:!0,children:l?.text})}),(0,m.jsx)(eX.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,m.jsxs)(eZ.l,{selectionVariant:"single","aria-label":`Role options for ${e.name}`,children:[uF.map(e=>(0,m.jsxs)(eZ.l.Item,{selected:e.value===l?.value,onSelect:()=>h(e.value),children:[(0,m.jsx)("span",{className:"text-medium",children:(0,m.jsx)("b",{children:e.text})}),(0,m.jsx)("span",{className:"text-small color-fg-muted",children:(0,m.jsx)("p",{className:"m-0",children:uU[e.value]})})]},e.value)),(0,m.jsx)(eZ.l.Divider,{}),(0,m.jsxs)(eZ.l.Item,{variant:"danger",onSelect:()=>f(),children:[(0,m.jsx)("span",{className:"text-medium",children:(0,m.jsx)("b",{children:"Remove"})}),(0,m.jsx)("span",{className:"text-small color-fg-muted",children:(0,m.jsx)("p",{className:"m-0",children:"Loses access to this content"})})]},"remove")]})})]})}function u$(e){let t,n,a=(0,p.c)(7),{items:i,onSelect:s}=e;if(a[0]!==i||a[1]!==s){let e;a[3]!==s?(e=e=>{let t=`${e.actor_type}-${e.id}`,n="user"===e.actor_type?e.login:e.slug;return(0,m.jsxs)(eZ.l.Item,{onSelect:()=>s(e),role:"option",children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(aq.r,{src:e.avatarUrl,square:"team"===e.actor_type,size:20})}),(0,m.jsx)("span",{className:"text-bold",children:n}),e.name&&(0,m.jsx)(eZ.l.Description,{children:e.name})]},t)},a[3]=s,a[4]=e):e=a[4],t=i.map(e),a[0]=i,a[1]=s,a[2]=t}else t=a[2];return a[5]!==t?(n=(0,m.jsx)("div",{role:"dialog","aria-label":"Suggested collaborators",className:uO.spacesSuggestionsList,children:(0,m.jsx)(eZ.l,{children:t})}),a[5]=t,a[6]=n):n=a[6],n}try{uB.displayName||(uB.displayName="SpaceCollaborators")}catch{}try{uM.displayName||(uM.displayName="SpaceCollaboratorRow")}catch{}try{2..displayName||(2..displayName="MIN_COLLABORATORS_TO_BE_COLLABORATIVE")}catch{}try{uV.displayName||(uV.displayName="ActorRoleSelect")}catch{}try{u$.displayName||(u$.displayName="SpacesSuggestionsList")}catch{}let uW={spaceVisibilityDialog:"SpaceSharingDialog-module__spaceVisibilityDialog--q8XMu",errorBanner:"SpaceSharingDialog-module__errorBanner--SkBp1",visibilityDropdown:"SpaceSharingDialog-module__visibilityDropdown--HMESi",visibilityChoice:"SpaceSharingDialog-module__visibilityChoice--Z75rm",visibilityIcon:"SpaceSharingDialog-module__visibilityIcon--KK57C",attentionIcon:"SpaceSharingDialog-module__attentionIcon--lZ9Sq",accentIcon:"SpaceSharingDialog-module__accentIcon--q8VZ5",footerText:"SpaceSharingDialog-module__footerText--TJavK"};function uH(e){let t,n,a,i,s,r,o,l,c,d,u=(0,p.c)(23),{closeDialog:h,customCopilotId:f,userOwned:g}=e;u[0]===Symbol.for("react.memo_cache_sentinel")?(t={},u[0]=t):t=u[0];let[y,_]=(0,x.useState)(t),[v,b]=(0,x.useState)(!1),j=(0,x.useRef)(null),w=tu.W.copilotSpacesReadAccessToUserOwnedSpaces&&void 0!==g&&g,N=()=>(0,m.jsx)(uQ,{copySharedLink:C,copied:v,isSpaceLoading:T,copilotSpace:E});u[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>()=>{j.current&&(clearTimeout(j.current),j.current=null)},a=[],u[1]=n,u[2]=a):(n=u[1],a=u[2]),(0,x.useEffect)(n,a);let S=`${e7.fV.origin}${(0,ca.Cb)(e.customCopilotId)}`,C=()=>{(0,uA.D)(S),b(!0),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{b(!1),j.current=null},2e3)},{isPending:I,data:k}=(0,ci.Ao)(f),T=I,E=k;return u[3]===Symbol.for("react.memo_cache_sentinel")?(i={narrow:"fullscreen"},u[3]=i):i=u[3],u[4]!==y.base||u[5]!==y.visibility?(s=y.base||y.visibility?(0,m.jsx)(q.l,{hideTitle:!0,title:"Unable to update space",description:y.visibility||y.base,"aria-label":"Critical",variant:"critical",className:uW.errorBanner}):null,u[4]=y.base,u[5]=y.visibility,u[6]=s):s=u[6],u[7]!==E?(r=E&&(0,m.jsx)(uB,{copilotSpace:E,onError:_}),u[7]=E,u[8]=r):r=u[8],u[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)(eZ.l.Divider,{}),u[9]=o):o=u[9],u[10]!==E||u[11]!==T||u[12]!==e||u[13]!==w?(l=w?(0,m.jsx)(uZ,{copilotSpace:E,isSpaceLoading:T,onError:_}):(0,m.jsxs)(K.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"Settings"}),(0,m.jsx)(uq,{onError:_,copilotSpace:E,isSpaceLoading:T,...e})]}),u[10]=E,u[11]=T,u[12]=e,u[13]=w,u[14]=l):l=u[14],u[15]!==r||u[16]!==l?(c=(0,m.jsxs)(K.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[r,o,l]}),u[15]=r,u[16]=l,u[17]=c):c=u[17],u[18]!==h||u[19]!==N||u[20]!==c||u[21]!==s?(d=(0,m.jsxs)(tF.l,{position:i,title:"Share this space",renderFooter:N,onClose:h,className:uW.spaceVisibilityDialog,width:"large","aria-label":"Share this space",children:[s,c]}),u[18]=h,u[19]=N,u[20]=c,u[21]=s,u[22]=d):d=u[22],d}function uq(e){let t,n,a,i,s,r,o,l,c,d,u,h,f=(0,p.c)(36),{copilotSpace:g,isSpaceLoading:y,onError:_}=e,{data:v,isLoading:b,error:j}=(0,ci.Tx)(g?.owner||"",g?.id??-1);if(f[0]!==g||f[1]!==y||f[2]!==b||f[3]!==_||f[4]!==v?(t=()=>{y||b||g&&v||_({visibility:"Could not load your space's visibility settings"})},n=[y,b,g,v,_],f[0]=g,f[1]=y,f[2]=b,f[3]=_,f[4]=v,f[5]=t,f[6]=n):(t=f[5],n=f[6]),(0,x.useEffect)(t,n),y){let e;return f[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}),f[7]=e):e=f[7],e}if(!g){let e;return f[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."}),f[8]=e):e=f[8],e}let w=g.owner,N=v?.memberCount;return f[9]!==g.ownerAvatar?(a=(0,m.jsx)(aq.r,{src:g.ownerAvatar,className:"mr-2",square:!0,size:32}),f[9]=g.ownerAvatar,f[10]=a):a=f[10],f[11]!==g.ownerDisplayName?(i=(0,m.jsx)("b",{children:g.ownerDisplayName}),f[11]=g.ownerDisplayName,f[12]=i):i=f[12],f[13]!==g.ownerDisplayName||f[14]!==i?(s=(0,m.jsx)(uR.A,{maxWidth:"230px",title:g.ownerDisplayName,inline:!0,children:i}),f[13]=g.ownerDisplayName,f[14]=i,f[15]=s):s=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)("span",{className:"color-fg-muted ml-1",children:"(owner)"}),f[16]=r):r=f[16],f[17]!==s?(o=(0,m.jsxs)("span",{className:"ml-1",children:[s,r]}),f[17]=s,f[18]=o):o=f[18],f[19]!==j||f[20]!==b||f[21]!==N||f[22]!==w?(l=w&&(0,m.jsxs)(m.Fragment,{children:[!b&&null!==N&&(0,m.jsxs)("span",{className:"text-small color-fg-muted ml-1",children:[N," ",1===N?"person":"people"]}),(b||j||null===N)&&(0,m.jsx)("span",{className:"text-small color-fg-muted ml-1",children:"Organization"})]}),f[19]=j,f[20]=b,f[21]=N,f[22]=w,f[23]=l):l=f[23],f[24]!==o||f[25]!==l?(c=(0,m.jsxs)("div",{className:"d-flex flex-column",children:[o,l]}),f[24]=o,f[25]=l,f[26]=c):c=f[26],f[27]!==a||f[28]!==c?(d=(0,m.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[a,c]}),f[27]=a,f[28]=c,f[29]=d):d=f[29],f[30]!==g||f[31]!==_?(u=(0,m.jsx)(uK,{onError:_,copilotSpace:g}),f[30]=g,f[31]=_,f[32]=u):u=f[32],f[33]!==d||f[34]!==u?(h=(0,m.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[d,u]}),f[33]=d,f[34]=u,f[35]=h):h=f[35],h}let uz=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"},{text:"No access",value:"none"}],uG={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view",none:"Hidden from your organization"};function uK({copilotSpace:e,onError:t}){let[n,a]=(0,x.useState)(!1),i=(0,x.useRef)(null),s=uz.find(t=>t.value===e.baseRole),{upsertCopilotSpace:r,isPending:o}=(0,uL.$)(e);async function l(e){if(!o)try{await r({baseRole:e})}catch{t({base:"An error occurred while updating your space's base role."})}finally{a(!1)}}return e.adminable?(0,m.jsxs)(eX.W,{onOpenChange:a,anchorRef:i,open:n,children:[(0,m.jsx)(eX.W.Button,{loading:o,variant:"invisible",className:"text-small",ref:i,onClick:()=>a(!0),children:(0,m.jsx)(uR.A,{title:s?.text||"",inline:!0,children:s?.text})}),(0,m.jsx)(eX.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,m.jsx)(eZ.l,{selectionVariant:"single",children:uz.map(e=>(0,m.jsxs)(eZ.l.Item,{selected:e.value===s?.value,onSelect:()=>l(e.value),children:[(0,m.jsx)("span",{className:"text-medium",children:(0,m.jsx)("b",{children:e.text})}),(0,m.jsx)("span",{className:"text-small color-fg-muted",children:(0,m.jsx)("p",{className:"m-0",children:uG[e.value]})})]},e.value))})})]}):(0,m.jsx)("div",{children:(0,m.jsx)(uR.A,{title:s?.text||"",className:"text-small text-light",children:s?.text})})}function uQ(e){let t,n,a,i,s,r=(0,p.c)(12),{copySharedLink:o,copied:l,isSpaceLoading:c,copilotSpace:d}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottomLeftRadius:"var(--borderRadius-large, 0.75rem)",borderBottomRightRadius:"var(--borderRadius-large, 0.75rem)",borderTop:"1px solid var(--borderColor-muted)",padding:"var(--base-size-12)"},r[0]=t):t=r[0],r[1]!==d?.ownerIsOrg?(n=!d?.ownerIsOrg&&(0,m.jsxs)("div",{className:uW.footerText,children:[(0,m.jsx)(ef.InfoIcon,{}),(0,m.jsx)("span",{children:"Viewers will only see sources they have access to."})]}),r[1]=d?.ownerIsOrg,r[2]=n):n=r[2],r[3]===Symbol.for("react.memo_cache_sentinel")?(a={minWidth:"90px"},r[3]=a):a=r[3],r[4]!==l||r[5]!==d||r[6]!==o||r[7]!==c?(i=(0,m.jsx)("div",{style:a,className:"d-flex flex-items-center gap-2",children:l?(0,m.jsx)(tn.Q,{className:"color-fg-success",disabled:c||!d,children:"Link copied"}):(0,m.jsx)(tn.Q,{onClick:o,leadingVisual:ef.LinkIcon,disabled:c||!d,children:"Copy link"})}),r[4]=l,r[5]=d,r[6]=o,r[7]=c,r[8]=i):i=r[8],r[9]!==n||r[10]!==i?(s=(0,m.jsxs)(tF.l.Footer,{style:t,className:"color-fg-muted flex-items-center flex-justify-between text-small",children:[n,i]}),r[9]=n,r[10]=i,r[11]=s):s=r[11],s}let uY={text:"Restricted",value:"none",description:"Only people with access can open the link",icon:ef.LockIcon,color:"attention"},uJ={text:"Anyone with link",value:"custom_copilot_reader",description:"Everyone with access to the resources can access the link",icon:ef.GlobeIcon,color:"accent"},uX=tu.W.copilotSpacesPublicAccessToUserOwnedSpaces?[uY,uJ]:[uY];function uZ({copilotSpace:e,isSpaceLoading:t,onError:n}){let[a,i]=(0,x.useState)(!1),s=(0,x.useRef)(null),r=uX.find(t=>t.value===e?.baseRole)??uY,{upsertCopilotSpace:o,isPending:l}=(0,uL.$)(e);async function c(e){if(!l)try{await o({baseRole:e})}catch{n({base:"An error occurred while updating your space's visibility."})}finally{i(!1)}}let d=r.icon;return t?(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}):e?(0,m.jsxs)(K.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"General access"}),(0,m.jsx)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:(0,m.jsxs)("div",{className:uW.visibilityChoice,children:[(0,m.jsx)("div",{className:(0,_.$)(uW.visibilityIcon,"accent"===r.color?uW.accentIcon:uW.attentionIcon),children:(0,m.jsx)(d,{size:16})}),(0,m.jsxs)("div",{className:"d-flex flex-column",children:[tu.W.copilotSpacesPublicAccessToUserOwnedSpaces?(0,m.jsxs)(eX.W,{onOpenChange:i,anchorRef:s,open:a,children:[(0,m.jsx)(eX.W.Button,{loading:l,variant:"invisible",className:uW.visibilityDropdown,ref:s,onClick:()=>i(!0),disabled:!e.adminable,children:r.text}),(0,m.jsx)(eX.W.Overlay,{side:"outside-top",align:"start",width:"small",children:(0,m.jsx)(eZ.l,{selectionVariant:"single",children:uX.map(t=>{let n=t.icon;return(0,m.jsxs)(eZ.l.Item,{selected:t.value===e.baseRole,onSelect:()=>c(t.value),children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(n,{})}),(0,m.jsx)("div",{className:"d-flex flex-column",children:(0,m.jsx)("span",{className:"text-medium",children:t.text})})]},t.value)})})})]}):(0,m.jsx)("span",{className:uW.visibilityDropdown,children:r.text}),(0,m.jsx)("span",{className:"text-small color-fg-muted p-1",children:r.description})]})]})})]}):(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."})}try{uH.displayName||(uH.displayName="SpaceSharingDialog")}catch{}try{uq.displayName||(uq.displayName="VisibilitySettings")}catch{}try{uK.displayName||(uK.displayName="BaseRoleSelect")}catch{}try{uQ.displayName||(uQ.displayName="CopilotSpaceSharingDialogFooter")}catch{}try{uZ.displayName||(uZ.displayName="UserOwnedVisibilitySettings")}catch{}function u0(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,_,v,b=(0,p.c)(44),{onDelete:j,copilot:w}=e,[N,S]=(0,x.useState)(null),[C,I]=(0,x.useState)(!1),[k,T]=(0,x.useState)(!1),E=(0,x.useRef)(null),L=(0,Z.Zp)(),A=tu.W.copilotSpacesReadAccessToUserOwnedSpaces,R=w?.ownerIsOrg&&w?.adminable,D=A&&!w?.ownerIsOrg&&w?.adminable,P=R||D,O="duplicate"===N,{data:B,isLoading:M}=(0,ci.Ao)(O?w:null);"duplicate"===N&&k&&!M&&B&&T(!1),b[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,ny.flushSync)(()=>S(null)),E.current?.focus()},b[0]=t):t=b[0];let F=t;b[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),F()},b[1]=n):n=b[1];let U=n;b[2]===Symbol.for("react.memo_cache_sentinel")?(a=async e=>{F(),I(!0),await e(),I(!1)},b[2]=a):a=b[2];let V=a;b[3]!==j?(i=async()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_LIST_ACTION_DELETE",mode:"immersive"}),await V(j)},b[3]=j,b[4]=i):i=b[4];let $=i;b[5]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),S("share")},b[5]=s):s=b[5];let W=s;b[6]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DUPLICATE",mode:"immersive"}),S("duplicate"),e.preventDefault()},b[6]=r):r=b[6];let H=r;return b[7]!==C?(o=(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(e1.K,{loading:C,icon:ef.KebabHorizontalIcon,"aria-label":"Manage space",variant:"invisible",onClick:u1})}),b[7]=C,b[8]=o):o=b[8],b[9]!==w||b[10]!==L?(l=w.editable&&(0,m.jsxs)(eZ.l.Item,{onSelect:()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),L((0,ca.Cb)(w))},children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.PencilIcon,{})}),"Edit"]}),b[9]=w,b[10]=L,b[11]=l):l=b[11],b[12]!==P?(c=P&&(0,m.jsxs)(eZ.l.Item,{onSelect:W,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.ShareIcon,{})}),"Share"]}),b[12]=P,b[13]=c):c=b[13],b[14]!==M||b[15]!==N?(d=tu.W.spacesDuplicate&&(0,m.jsxs)(eZ.l.Item,{onSelect:e=>{H(e)},loading:M&&"duplicate"===N,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.CopyIcon,{})}),"Duplicate"]}),b[14]=M,b[15]=N,b[16]=d):d=b[16],b[17]!==w.adminable?(u=w.adminable&&(0,m.jsxs)(eZ.l.Item,{variant:"danger",onSelect:()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),S("delete")},children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.TrashIcon,{})}),"Delete"]}),b[17]=w.adminable,b[18]=u):u=b[18],b[19]!==d||b[20]!==u||b[21]!==l||b[22]!==c?(h=(0,m.jsx)(eX.W.Overlay,{side:"outside-bottom",align:"end",children:(0,m.jsxs)(eZ.l,{children:[l,c,d,u]})}),b[19]=d,b[20]=u,b[21]=l,b[22]=c,b[23]=h):h=b[23],b[24]!==k||b[25]!==h||b[26]!==o?(f=(0,m.jsxs)(eX.W,{anchorRef:E,open:k,onOpenChange:T,children:[o,h]}),b[24]=k,b[25]=h,b[26]=o,b[27]=f):f=b[27],b[28]!==$||b[29]!==N?(g="delete"===N?(0,m.jsx)(u2,{onCancel:F,onConfirm:$}):null,b[28]=$,b[29]=N,b[30]=g):g=b[30],b[31]!==w||b[32]!==R||b[33]!==D||b[34]!==N?(y="share"===N?(0,m.jsx)(uH,{closeDialog:U,customCopilotId:w,userOwned:!R&&D}):null,b[31]=w,b[32]=R,b[33]=D,b[34]=N,b[35]=y):y=b[35],b[36]!==B||b[37]!==N?(_="duplicate"===N&&B?(0,m.jsx)(uC.D,{dialogTitle:"Duplicate Space",closeDialog:()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DUPLICATE_DIALOG_CLOSE",mode:"immersive"}),S(null)},initialSpace:B}):null,b[36]=B,b[37]=N,b[38]=_):_=b[38],b[39]!==f||b[40]!==g||b[41]!==y||b[42]!==_?(v=(0,m.jsxs)(m.Fragment,{children:[f,g,y,_]}),b[39]=f,b[40]=g,b[41]=y,b[42]=_,b[43]=v):v=b[43],v}function u1(){return(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU",mode:"immersive"})}let u2=({onConfirm:e,onCancel:t})=>{let[n,a]=(0,x.useState)(!1),i=async()=>{a(!0),(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CONFIRM",mode:"immersive"});try{await e()}finally{a(!1)}};return(0,m.jsx)(uE.K,{title:"Delete space",onClose:async e=>{n||("confirm"===e?await i():((0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CANCEL",mode:"immersive"}),t()))},confirmButtonContent:n?(0,m.jsx)(tU.A,{size:"small"}):"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this space? This action cannot be undone."})};try{u0.displayName||(u0.displayName="CopilotSpacesMenu")}catch{}try{u2.displayName||(u2.displayName="DeleteDialog")}catch{}let u3={starButton:"SpacesHeader-module__starButton--RT51O"};var u4=n(44956),u5=n(4175);function u6({copilotSpace:e,onClose:t,onSaved:n,returnFocusRef:a,maxDescriptionLength:i}){let{upsertCopilotSpace:s,isPending:r}=(0,uL.$)(e),[o,l]=(0,x.useState)(e.description??""),[c,d]=(0,x.useState)(null);async function u(){try{let e=await s({description:o});n?.(e),t()}catch(e){e instanceof Error?d(e.message):d("Failed to save description")}}function p(){l(e.description??""),t()}return(0,m.jsx)(tF.l,{title:"Description",onClose:p,returnFocusRef:a,position:{narrow:"fullscreen"},renderBody:()=>(0,m.jsxs)("div",{className:"p-3",children:[c&&(0,m.jsx)(q.l,{variant:"critical",title:c,className:"mb-2"}),(0,m.jsxs)(lo.A,{children:[(0,m.jsx)(lo.A.Label,{visuallyHidden:!0,children:"Description"}),(0,m.jsx)(u5.Ay,{block:!0,value:o,onChange:e=>l(e.target.value),placeholder:"Describe what this space is for",resize:"vertical",rows:5}),(0,m.jsx)(u7,{text:o,promptCharLimit:i})]})]}),renderFooter:()=>(0,m.jsx)(u4.m,{onCancel:p,onSave:u,isLoading:r,loadingAnnouncement:"Saving description",saveButtonText:"Save"})})}function u7(e){let t,n,a,i,s=(0,p.c)(10),{text:r,promptCharLimit:o}=e,l=r.length>o;s[0]!==r.length?(t=r.length.toLocaleString(),s[0]=r.length,s[1]=t):t=s[1],s[2]!==o?(n=o.toLocaleString(),s[2]=o,s[3]=n):n=s[3],s[4]!==t||s[5]!==n?(a=(0,m.jsxs)(m.Fragment,{children:[t," / ",n," characters"]}),s[4]=t,s[5]=n,s[6]=a):a=s[6];let c=a;return s[7]!==c||s[8]!==l?(i=l?(0,m.jsx)(lo.A.Validation,{variant:"error",children:c}):(0,m.jsx)(lo.A.Caption,{children:c}),s[7]=c,s[8]=l,s[9]=i):i=s[9],i}try{u6.displayName||(u6.displayName="DescriptionDialog")}catch{}try{u7.displayName||(u7.displayName="CharacterCount")}catch{}function u8(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,_,v,b,j,w,N,S,C,I,k,T,E,L,A,R,D=(0,p.c)(76),{copilotSpace:P}=e,O=(0,U.Pk)(),B=(0,W.b)(),F=(0,Z.zy)(),V=(0,co.G)(),{updateGlobalNavigationBreadcrumbs:$}=ui(),H=(0,uI.Z)(),[q,z]=(0,x.useState)(!1),[G,K]=(0,x.useState)(!1),[Q,Y]=(0,x.useState)(!1),[J,X]=(0,x.useState)(!1),[ee,et]=(0,x.useState)(null),en=(0,x.useRef)(null),ea=(0,x.useRef)(null),ei=(0,x.useRef)(null),es=F.pathname,er=V&&es!==nQ.VR,eo=tu.W.copilotSpacesReadAccessToUserOwnedSpaces,el=eo&&tu.W.copilotSpacesPublicAccessToUserOwnedSpaces,{data:ec}=(0,ci.Ao)(V),{mutateAsync:ed}=(0,ci.$7)(),{copilotSpacesConfig:eu}=(0,M.X)(),{maxDescriptionLength:em}=eu;e:if(el)t=P??ec??null;else{let e;if(!V){t=null;break e}D[0]!==V||D[1]!==O.customCopilots?(e=(0,ca.JB)(O.customCopilots,V),D[0]=V,D[1]=O.customCopilots,D[2]=e):e=D[2],t=e}let ep=t,eh=ep?.ownerIsOrg&&ep?.adminable,eg=eo&&!ep?.ownerIsOrg&&V&&ep?.adminable,ey=eh||eg,{starCopilotSpace:e_,isLoading:ex}=((e,t)=>{let n,a,i,s,r,o,l,c=(0,p.c)(20),d=tu.W.copilotSpacesReadAccessToUserOwnedSpaces&&tu.W.copilotSpacesPublicAccessToUserOwnedSpaces,u=(0,W.b)(),{customCopilots:m}=(0,U.Pk)(),h=(0,ts.jE)();c[0]!==e||c[1]!==h||c[2]!==t?(n=async()=>{if(!d&&e&&await h.invalidateQueries({queryKey:(0,uT.dp)(e)}),d&&t){let e={id:t.id,owner:t.owner};await h.invalidateQueries({queryKey:(0,uT.dp)(e)})}return h.invalidateQueries({queryKey:uT.O6})},c[0]=e,c[1]=h,c[2]=t,c[3]=n):n=c[3],c[4]!==m||c[5]!==e||c[6]!==u||c[7]!==t?(a=async n=>{let a=d?t:(0,ca.JB)(m,e);if(!a)return;let i=d?{id:a.id,owner:a.owner}:e,s=`${(0,ca.Cb)(i)}/stars`,r=n.starred?"POST":"DELETE";if((await (0,t8.lS)(s,{method:r})).ok)return a={...a,starred:n.starred},u.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:a}),a},c[4]=m,c[5]=e,c[6]=u,c[7]=t,c[8]=a):a=c[8],c[9]!==n||c[10]!==a?(i={onSuccess:n,mutationFn:a},c[9]=n,c[10]=a,c[11]=i):i=c[11];let f=(0,t7.n)(i);return c[12]!==f?({mutateAsync:o,isPending:s,...r}=f,c[12]=f,c[13]=s,c[14]=r,c[15]=o):(s=c[13],r=c[14],o=c[15]),c[16]!==s||c[17]!==r||c[18]!==o?(l={starCopilotSpace:o,isLoading:s,...r},c[16]=s,c[17]=r,c[18]=o,c[19]=l):l=c[19],l})(V,ep);D[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{X(!1),z(!1),K(!1),Y(!1)},D[3]=n):n=D[3],D[4]!==V?(a=[V],D[4]=V,D[5]=a):a=D[5],(0,x.useEffect)(n,a),D[6]!==$?(i=()=>{$()},s=[$],D[6]=$,D[7]=i,D[8]=s):(i=D[7],s=D[8]),(0,x.useEffect)(i,s),D[9]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DUPLICATE_DIALOG_CLOSE",mode:"immersive"}),X(!1)},D[9]=r):r=D[9];let ev=r;D[10]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),K(!1)},D[10]=o):o=D[10];let eb=o;D[11]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DELETE_DIALOG_CLOSE",mode:"immersive"}),z(!1)},D[11]=l):l=D[11];let ej=l;D[12]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DUPLICATE",mode:"immersive"}),X(!0)},D[12]=c):c=D[12];let ew=c;D[13]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),K(!0)},D[13]=d):d=D[13];let eN=d;D[14]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),z(!0)},D[14]=u):u=D[14];let eS=u;D[15]!==ed||D[16]!==H||D[17]!==V?(h=async()=>{if(V)try{await ed(V),z(!1),H(nQ.VR)}catch(e){et(e instanceof Error?e:Error(String(e))),ej()}},D[15]=ed,D[16]=H,D[17]=V,D[18]=h):h=D[18];let eC=h;D[19]!==ep||D[20]!==e_?(f=()=>{ep&&e_&&((0,tm.BI)("dotcom_chat.activate",{target:ep.starred?"SPACE_UNSTAR":"SPACE_STAR",mode:"immersive"}),e_({starred:!ep.starred}))},D[19]=ep,D[20]=e_,D[21]=f):f=D[21];let eI=f,ek=ep?.adminable;D[22]!==ek?(g=ek&&(0,m.jsxs)(eZ.l.Item,{variant:"danger",onSelect:eS,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.TrashIcon,{})}),"Delete"]}),D[22]=ek,D[23]=g):g=D[23];let eT=g;D[24]!==ep?(y=tu.W.spacesDuplicate&&ep&&(0,m.jsxs)(eZ.l.Item,{onSelect:ew,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.CopyIcon,{})}),"Duplicate"]}),D[24]=ep,D[25]=y):y=D[25];let eE=y;D[26]!==eT||D[27]!==eE||D[28]!==er||D[29]!==O?(_=er&&!O.selectedThreadID&&(eE||eT)?(0,m.jsxs)(m.Fragment,{children:[eE,eT]}):null,D[26]=eT,D[27]=eE,D[28]=er,D[29]=O,D[30]=_):_=D[30];let eL=_;D[31]===Symbol.for("react.memo_cache_sentinel")?(v=(0,m.jsx)(tn.Q,{variant:"link",onClick:()=>{ea.current?.openDialog(),(0,tm.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:"Give feedback"}),D[31]=v):v=D[31];let eA=v;D[32]!==ey?(b=ey&&(0,m.jsx)(e1.K,{icon:ef.ShareIcon,onClick:eN,variant:"invisible","aria-label":"Share space",...(0,tk.G)("share-space-button")}),D[32]=ey,D[33]=b):b=D[33];let eR=b;D[34]!==ep||D[35]!==eI||D[36]!==ex||D[37]!==V?(j=ep&&V&&(0,m.jsx)(e1.K,{ref:en,onClick:eI,disabled:ex,icon:ep.starred?ef.StarFillIcon:ef.StarIcon,className:ep.starred?u3.starButton:void 0,variant:"invisible","aria-label":ep.starred?"Unstar space":"Star space"}),D[34]=ep,D[35]=eI,D[36]=ex,D[37]=V,D[38]=j):j=D[38];let eD=j;D[39]===Symbol.for("react.memo_cache_sentinel")?(w=(0,m.jsx)(e1.K,{icon:ef.BookIcon,as:"a",href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces","aria-label":"Copilot Spaces documentation",target:"_blank",rel:"noopener noreferrer",variant:"invisible",onClick:u9,...(0,tk.G)("spaces-doc-link")}),D[39]=w):w=D[39],D[40]!==eD||D[41]!==eR?(N=(0,m.jsxs)(m.Fragment,{children:[eA,w,eR,eD]}),D[40]=eD,D[41]=eR,D[42]=N):N=D[42];let eP=N;D[43]!==B?(S=e=>{B.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})},D[43]=B,D[44]=S):S=D[44];let eO=S,eB=ep?.name||"";return D[45]!==eP||D[46]!==eL||D[47]!==eB?(C=(0,m.jsx)(uc,{showPreviewPaneButton:!1,conversationSpecificItems:eL,customButtons:eP,defaultName:eB}),D[45]=eP,D[46]=eL,D[47]=eB,D[48]=C):C=D[48],D[49]!==ee?(I=ee&&(0,m.jsxs)(uk.A,{variant:"danger",children:[(0,m.jsx)(ef.AlertIcon,{}),"There was a problem deleting your space."]}),D[49]=ee,D[50]=I):I=D[50],D[51]!==ec||D[52]!==J?(k=J&&ec?(0,m.jsx)(uC.D,{dialogTitle:"Duplicate Space",closeDialog:ev,initialSpace:ec}):null,D[51]=ec,D[52]=J,D[53]=k):k=D[53],D[54]!==eC||D[55]!==V||D[56]!==q?(T=q&&V?(0,m.jsx)(u2,{onCancel:ej,onConfirm:eC}):null,D[54]=eC,D[55]=V,D[56]=q,D[57]=T):T=D[57],D[58]!==eh||D[59]!==V||D[60]!==G||D[61]!==eg?(E=G&&V?(0,m.jsx)(uH,{closeDialog:eb,customCopilotId:V,userOwned:!!(!eh&&eg)}):null,D[58]=eh,D[59]=V,D[60]=G,D[61]=eg,D[62]=E):E=D[62],D[63]!==ep||D[64]!==eO||D[65]!==em||D[66]!==Q?(L=Q&&ep?(0,m.jsx)(u6,{copilotSpace:ep,onClose:()=>Y(!1),returnFocusRef:en,maxDescriptionLength:em,onSaved:eO}):null,D[63]=ep,D[64]=eO,D[65]=em,D[66]=Q,D[67]=L):L=D[67],D[68]===Symbol.for("react.memo_cache_sentinel")?(A=(0,m.jsx)(lp.l,{ref:ea,mode:"immersive",returnFocusRef:ei}),D[68]=A):A=D[68],D[69]!==C||D[70]!==I||D[71]!==k||D[72]!==T||D[73]!==E||D[74]!==L?(R=(0,m.jsxs)(m.Fragment,{children:[C,I,k,T,E,L,A]}),D[69]=C,D[70]=I,D[71]=k,D[72]=T,D[73]=E,D[74]=L,D[75]=R):R=D[75],R}function u9(){return(0,tm.BI)("copilot-spaces.click",{target:"HELP_BUTTON_CLICKED"})}try{u8.displayName||(u8.displayName="SpacesHeader")}catch{}var me=n(81829);let mt={container:"InlineEditableText-module__container--aZo_B",textarea:"InlineEditableText-module__textarea--5ls6_",placeholder:"InlineEditableText-module__placeholder--e7Xf4",readModeContainer:"InlineEditableText-module__readModeContainer--ysnii",editIcon:"InlineEditableText-module__editIcon--UTuha",readModeText:"InlineEditableText-module__readModeText--MyHNO"},mn={circleProgressBar:"CircleProgressBar-module__circleProgressBar--LGSpA",exceeded:"CircleProgressBar-module__exceeded--duTAI"};function ma({value:e}){let t=e>100;return(0,m.jsx)("div",{className:(0,_.$)(mn.circleProgressBar,t?mn.exceeded:""),style:{"--progress":`${e}%`},children:(0,m.jsxs)("progress",{value:e,max:"100",style:{visibility:"hidden",height:0,width:0},children:[e,"%"]})})}try{ma.displayName||(ma.displayName="CircleProgressBar")}catch{}let mi={actionButtons:"InlineEditActions-module__actionButtons--yWSpe",cancelButton:"InlineEditActions-module__cancelButton--a0gzS",saveButton:"InlineEditActions-module__saveButton--pMcIj",line:"InlineEditActions-module__line--vKo7v",characterCountStatus:"InlineEditActions-module__characterCountStatus--wRiqc",characterCountText:"InlineEditActions-module__characterCountText--QcUxR"};function ms({value:e,maxLength:t,onSave:n,onCancel:a}){let i=!!(t&&t>0),s=i&&e.length>(t||0);return(0,m.jsxs)("div",{className:mi.actionButtons,children:[i&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(mo,{text:e,promptCharLimit:t||0}),(0,m.jsx)(mr,{})]}),(0,m.jsx)(e1.K,{className:mi.cancelButton,variant:"invisible",icon:ef.XIcon,"aria-label":"Cancel",size:"small",onClick:a}),(0,m.jsx)(e1.K,{className:mi.saveButton,variant:"invisible",icon:ef.CheckIcon,"aria-label":"Save",disabled:s,size:"small",onClick:n})]})}let mr=()=>(0,m.jsx)("div",{className:mi.line});function mo({text:e,promptCharLimit:t}){return(0,m.jsxs)("div",{className:mi.characterCountStatus,children:[(0,m.jsx)(ma,{value:e.length/t*100}),(0,m.jsx)("span",{className:mi.characterCountText,children:(t-e.length).toLocaleString()})]})}try{ms.displayName||(ms.displayName="InlineEditActions")}catch{}try{mr.displayName||(mr.displayName="Line")}catch{}try{mo.displayName||(mo.displayName="CharacterCountStatus")}catch{}function ml({value:e,onChange:t,maxLength:n=null,placeholder:a="",className:i="",defaultEditing:s=!1}){let[r,o]=(0,x.useState)(s),[l,c]=(0,x.useState)(e),[d,u]=(0,x.useState)(null),p=(0,x.useRef)(null),h=(0,x.useRef)(null),f=(0,x.useRef)(null);(0,x.useEffect)(()=>{let e=e=>{r&&f.current&&!f.current.contains(e.target)&&(o(!1),t(l.trim()))};return r&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[r,l,f,t]),(0,x.useEffect)(()=>{p.current&&u(p.current.offsetHeight)},[e]),(0,x.useEffect)(()=>{r&&h.current&&(h.current.focus(),h.current.style.height=`${d}px`)},[r,d]);let g=()=>{o(!1),t(l.trim())};return(0,m.jsxs)("div",{ref:f,className:(0,_.$)(mt.container,i),children:[r?(0,m.jsx)(u5.Ay,{ref:h,value:l,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g())},placeholder:a,className:mt.textarea,style:{height:d||"auto"},resize:"none"}):(0,m.jsxs)("button",{ref:p,onClick:()=>o(!0),className:mt.readModeContainer,children:[(0,m.jsx)("span",{className:(0,_.$)(mt.readModeText,i),children:e?.trim()||(0,m.jsx)("span",{className:mt.placeholder,children:a})}),(0,m.jsx)(ef.PencilIcon,{className:mt.editIcon,size:16})]}),r&&(0,m.jsx)(ms,{value:l,maxLength:n,onSave:g,onCancel:()=>{o(!1),c(e)}})]})}try{ml.displayName||(ml.displayName="InlineEditableText")}catch{}var mc=n(22424);function md(e){if(tu.W.copilotSpacesReadAccessToUserOwnedSpaces&&e.collaborative)return"Shared";switch(e.baseRole){case"custom_copilot_reader":case"custom_copilot_writer":case"custom_copilot_admin":return"Shared"}return"org_public"===e.visibility?"Shared":"Private"}let mu={container:"SpaceNotFoundComponent-module__container--IrGEt",description:"SpaceNotFoundComponent-module__description--klDGL",banner:"SpaceNotFoundComponent-module__banner--uHb2q",icon:"SpaceNotFoundComponent-module__icon--dQYtq"},mm=e=>{let t,n,a,i,s,r=(0,p.c)(7),{protectedOrganizations:o}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(ef.AlertIcon,{className:mu.icon}),n=(0,m.jsx)("h3",{children:"Space not found"}),a=(0,m.jsx)("p",{className:mu.description,children:"This URL may be incorrect, you're signed out of your organization, or the Space may have been deleted."}),r[0]=t,r[1]=n,r[2]=a):(t=r[0],n=r[1],a=r[2]),r[3]!==o?(i=o&&!(0,G.G7)("global_sso_banner")&&(0,m.jsx)(V.x,{protectedOrgs:o,redirectURI:mp}),r[3]=o,r[4]=i):i=r[4],r[5]!==i?(s=(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:mu.container,children:[t,n,a,(0,m.jsx)("div",{className:mu.banner,children:i})]})}),r[5]=i,r[6]=s):s=r[6],s};try{mm.displayName||(mm.displayName="SpaceNotFoundComponent")}catch{}function mp(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}var mh=n(6219),mf=n(60905),mg=n(30456),my=n(81075),m_=n(75735);let UploadableFileExtensions=class UploadableFileExtensions{static get text(){if(null!=(0,my._)(this,UploadableFileExtensions,mx))return(0,my._)(this,UploadableFileExtensions,mx);let e=[...s1.E.getTextFileExtensions().split(","),".babelrc",".conf",".eslintrc",".lock",".log",".npmrc",".prettierrc",".sum",".yarnrc"];return(0,m_._)(this,UploadableFileExtensions,mx,new Set(e.map(e=>e.toLowerCase()))),(0,my._)(this,UploadableFileExtensions,mx)}static images(e){return new Set(mf.s.getFileExtensions(e).map(e=>e.toLowerCase()))}};var mx={writable:!0,value:void 0},mv=n(31971);let mb=()=>{let e,t,n,a,i=(0,p.c)(7);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:mw},i[0]=e):e=i[0];let s=(0,t7.n)(e);return i[1]!==s?({mutateAsync:t,...n}=s,i[1]=s,i[2]=t,i[3]=n):(t=i[2],n=i[3]),i[4]!==t||i[5]!==n?(a={getCopilotSpaceResourceSizes:t,...n},i[4]=t,i[5]=n,i[6]=a):a=i[6],a};function mj(e){return{id:e.id,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,metadata:(0,mv.M)(e)}}async function mw(e){let t={resources:e.resources?.map(mj)},n=await (0,t8.lS)("/copilot/spaces/resource_sizes",{method:"POST",body:t}),a=await n.json();if(!n.ok)throw a.errorMessages;return a}function mN({onResourcesAdded:e,onError:t,onUploadingChange:n}){let{availableModels:a}=(0,U.Pk)(),{hydrateResourcesWithSizePercentages:i}=function(){let{getCopilotSpaceResourceSizes:e}=mb();return{hydrateResourcesWithSizePercentages:(0,x.useCallback)(async t=>{if(0===t.length)return;let n=await e({resources:t});for(let e of t)e.sizePercentage=n[e.id]??0},[e])}}();return{processFiles:(0,x.useCallback)(async(s,{source:r})=>{if(s&&0!==s.length){(function(e,{source:t}){for(let n of((0,tm.BI)("copilot-spaces.selected_local_files",{fileCount:e.length,source:t}),Array.from(e))){let e=mS(n.name);(0,tm.BI)("copilot-spaces.selected_local_file",{fileExtension:e,contentType:n.type,fileSize:n.size,source:t})}})(s,{source:r}),n?.(!0),t?.([]);try{let{imageFiles:n,nonImageFiles:o}=function(e,t){let n=UploadableFileExtensions.images(t);return Array.from(e).reduce((e,t)=>(!function(e,t){if(e.type.startsWith("image/"))return!0;let n=mS(e.name);return t.has(n)}(t,n)?e.nonImageFiles.push(t):e.imageFiles.push(t),e),{imageFiles:[],nonImageFiles:[]})}(s,a),[l,c]=await Promise.all([mT(o),mI(n,a)]),d=[...l.resources,...c.resources];await i(d),d.length>0&&(e(d),(0,ca.Pg)(d,r));let u=[...l.errorMessages,...c.errorMessages];u.length>0&&t?.(u)}catch{t?.(["Something went wrong while trying to add the files. Please try again."])}finally{n?.(!1)}}},[a,e,t,i,n])}}function mS(e){let t=e.split(".");return t.length>1?`.${t.pop()?.toLowerCase()??""}`:""}function mC(e){let t=[],n=[];for(let a of e)"fulfilled"===a.status?"resource"in a.value?t.push(a.value.resource):n.push(a.value.error):n.push("An unexpected error occurred while processing a file.");return{errorMessages:n,resources:t}}async function mI(e,t){if(0===e.length)return{errorMessages:[],resources:[]};if(!tu.W.spacesImagesEnabled)return{errorMessages:["Images are not yet supported"],resources:[]};let n=e.map(e=>mk(e,mf.s.getMimeTypes(t)));return mC(await Promise.allSettled(n))}async function mk(e,t){try{if(e.size>mf.s.getAttachmentSizeLimit())return{error:mR(e.name)};if(!t.includes(e.type))return{error:mA(e.name)};let{id:n,attachment:a}=mf.s.makeImageReference(e,""),i=await a.prefetch();return{resource:{id:n,type:"media_content",mediaType:e.type,name:e.name||"Image",url:i.href||"",copilotChatAttachmentId:i.id||0,height:a.height||0,width:a.width||0,markedForDestroy:!1}}}catch(t){var n,a;return n=t,a=e,n instanceof Error&&"FileSizeError"===n.name?{error:mR(a.name)}:{error:mL(a.name)}}}async function mT(e){if(0===e.length)return{errorMessages:[],resources:[]};let t=e.map(e=>mE(e));return mC(await Promise.allSettled(t))}async function mE(e){try{var t;if(!e.type.startsWith("text/")){let t=mS(e.name);if(!UploadableFileExtensions.text.has(t))return{error:mA(e.name)}}e=(t=e).type.startsWith("text/")?t:new File([t],t.name,{type:"text/plain"});let n=crypto.randomUUID(),a=await new mg.N(n,e).prefetch();return{resource:{id:n,type:"uploaded_text_file",name:e.name,copilotChatAttachmentId:a.id,url:a.href,markedForDestroy:!1}}}catch(i){var n=i,a=e;if(!(n instanceof mh.ZK))return{error:mL(a.name)};let t=n.errors?.[0];return"string"==typeof t?{error:t}:{error:t?.message||mL(a.name)}}}function mL(e){return`An error occurred uploading "${e}".`}function mA(e){return`File "${e}" is not a supported file type.`}function mR(e){let t=function(e){if(e<0)throw Error("File size cannot be negative");if(!Number.isInteger(e))throw Error("File size must be a whole number of bytes");let t=["B","KB","MB","GB","TB","PB"],n=e,a=0;for(;n>=1024&&a<t.length-1;)n/=1024,a++;let i=Math.round(100*n)/100;return`${i}${t[a]}`}(mf.s.getAttachmentSizeLimit());return`File "${e}" is too large. The maximum size for this file type is ${t}.`}let mD=(0,x.forwardRef)(({onResourcesAdded:e,onError:t,onUploadingChange:n},a)=>{let{processFiles:i}=mN({onResourcesAdded:e,onError:t,onUploadingChange:n}),{availableModels:s}=(0,U.Pk)(),r=(0,x.useMemo)(()=>["text/*",...Array.from(UploadableFileExtensions.text),...tu.W.spacesImagesEnabled?Array.from(UploadableFileExtensions.images(s)):[]].join(","),[s]),o=(0,x.useRef)(null);return(0,x.useImperativeHandle)(a,()=>({addResources:()=>o.current?.click()})),(0,m.jsx)("input",{"data-testid":"file-upload-input",ref:o,type:"file",accept:r,multiple:!0,style:{display:"none"},onChange:e=>{e.target.files&&(i(e.target.files,{source:"file-upload"}),e.target.value="")}})});mD.displayName="FileUploadInput";let UrlDetails=class UrlDetails{constructor(e,t="",n="",a="",i=0,s="",r="",o="unknown"){(0,f._)(this,"url",void 0),(0,f._)(this,"owner",void 0),(0,f._)(this,"repo",void 0),(0,f._)(this,"number",void 0),(0,f._)(this,"type",void 0),(0,f._)(this,"id",void 0),(0,f._)(this,"file_path",void 0),(0,f._)(this,"errorMessage",void 0),(0,f._)(this,"sha",void 0),this.id=e,this.url=t,this.owner=n,this.repo=a,this.number=i,this.type=o,this.file_path=r,this.sha=s}};function mP(e){return{id:e.id,resource_type:e.type,metadata:function(e){switch(e.type){case"github_issue":case"github_pull_request":return{owner:e.owner,repo:e.repo,number:e.number};case"github_file":return{owner:e.owner,repo:e.repo,file_path:e.file_path,sha:e.sha};default:throw Error("Unsupported resource")}}(e)}}async function mO(e){let{input:t,spaceOwner:n}=e,a={resources_attributes:t.map(mP),space_owner:n},i=await (0,t8.lS)("/copilot/spaces/validate_url_resources",{method:"POST",body:a}),s=await i.json();if(!i.ok)throw s;return s}function mB(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,_,v,b=(0,p.c)(62),{onClose:j,onSave:w,resourcesToSave:N,owner:S,resourceCounts:C}=e,[I,k]=(0,x.useState)(!1),[T,E]=(0,x.useState)(mF),[L,A]=(0,x.useState)(!1),[R,D]=(0,x.useState)(!1),{validateUrlResources:P}=(()=>{let e,t,n,a,i=(0,p.c)(7);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:mO},i[0]=e):e=i[0];let s=(0,t7.n)(e);return i[1]!==s?({mutateAsync:n,...t}=s,i[1]=s,i[2]=t,i[3]=n):(t=i[2],n=i[3]),i[4]!==t||i[5]!==n?(a={validateUrlResources:n,...t},i[4]=t,i[5]=n,i[6]=a):a=i[6],a})();if(b[0]!==I||b[1]!==j||b[2]!==w||b[3]!==S||b[4]!==N||b[5]!==T||b[6]!==P){let e;t=e=>{e?.preventDefault(),e?.stopPropagation(),I||(k(!0),a().finally(()=>{k(!1)}))},b[8]===Symbol.for("react.memo_cache_sentinel")?(e=function(e){if("github_file"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,n=e.sha,a="filePath"in e?e.filePath:e.file_path;return`${t}/github_file/${n}/${a}`}if("github_issue"===e.type||"github_pull_request"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,n=e.number,a=e.type;return`${t}/${n}/${a}`}return""},b[8]=e):e=b[8];let n=e,a=async()=>{A(!1),D(!1);let e=(()=>{let e=new Set(N?.map(e=>n(e))??[]),t=new Set;return T.filter(a=>{let i=n(a);return!(t.has(i)||e.has(i))&&""!==a.url.trim()&&(t.add(i),!0)})})(),t=e.filter(e=>"unknown"===e.type||S&&e.owner!==S);if(t.length>0){E(T.map(e=>S&&e.owner&&e.owner!==S?{...e,errorMessage:`This doesn't belong to the ${S} organization.`}:t.some(t=>t.id===e.id)?{...e,errorMessage:"Invalid URL"}:e)),A(!0);return}if(0===e.length)return void j();try{let t=await P({input:e,spaceOwner:S});w(t),(0,ca.Pg)(t,"url-dialog"),j()}catch(e){if(Array.isArray(e)){for(let t of e){let e=T.find(e=>e.id===t.id);e&&(e.errorMessage="Resource not found")}A(!0)}}};b[0]=I,b[1]=j,b[2]=w,b[3]=S,b[4]=N,b[5]=T,b[6]=P,b[7]=t}else t=b[7];let O=!!C&&C.currentResourceCount+T.length+1>C.maxResourceCount;b[9]!==T||b[10]!==O?(n=()=>{if(O)return void D(!0);E([...T,new UrlDetails(crypto.randomUUID())])},b[9]=T,b[10]=O,b[11]=n):n=b[11];let B=n,M=R&&C?`You can select a maximum of ${C.maxResourceCount} sources.`:null;b[12]!==R||b[13]!==C?(a=e=>{R&&C&&(C.currentResourceCount+e.length>C.maxResourceCount||D(!1))},b[12]=R,b[13]=C,b[14]=a):a=b[14];let F=a;b[15]!==F||b[16]!==T?(i=e=>{let t=[...T];t.splice(e,1),E(t),F(t)},b[15]=F,b[16]=T,b[17]=i):i=b[17];let U=i;if(b[18]!==F||b[19]!==T){s=(t,n)=>{let a=[...T],i=e(n,a[t]||new UrlDetails(crypto.randomUUID()));a[t]=i,E(a),F(a)};let e=mM;b[18]=F,b[19]=T,b[20]=s}else s=b[20];if(b[21]===Symbol.for("react.memo_cache_sentinel")?(r={narrow:"fullscreen"},b[21]=r):r=b[21],b[22]!==t||b[23]!==I||b[24]!==j||b[25]!==M?(o=()=>(0,m.jsxs)(tF.l.Footer,{children:[(0,m.jsx)("div",{className:"d-flex flex-items-center",children:M&&(0,m.jsx)(lo.A.Validation,{variant:"error",children:M})}),(0,m.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,m.jsx)(tn.Q,{onClick:j,children:"Cancel"}),(0,m.jsx)(tn.Q,{variant:"primary",onClick:t,loadingAnnouncement:"Saving resource",loading:I,children:"Add"})]})]}),b[22]=t,b[23]=I,b[24]=j,b[25]=M,b[26]=o):o=b[26],b[27]!==L?(l=L&&(0,m.jsx)(q.l,{title:"Failed to save URL(s)",variant:"critical",className:"mb-2"}),b[27]=L,b[28]=l):l=b[28],b[29]!==S?(c=S&&(0,m.jsx)(rc.JR,{html:`from the <b>${S}</b> organization`}),b[29]=S,b[30]=c):c=b[30],b[31]!==c?(d=(0,m.jsxs)("p",{children:["Paste the URLs of the GitHub content"," ",c," you want to add. You can include issues and pull requests."]}),b[31]=c,b[32]=d):d=b[32],b[33]!==t?(u={"github:submit-form":()=>t()},b[33]=t,b[34]=u):u=b[34],b[35]!==L||b[36]!==s||b[37]!==U||b[38]!==T){let e;b[40]!==L||b[41]!==s||b[42]!==U||b[43]!==T.length?(e=(e,t)=>(0,m.jsxs)("div",{style:{width:"100%"},children:[(0,m.jsx)(mU,{index:t,removeUrlTextInputRow:U,inputCount:T.length,updateUrls:s,setIsUpdating:k,urlValue:e.url}),L&&void 0!==e.errorMessage&&(0,m.jsx)(lo.A.Validation,{className:"mt-1",variant:"error",children:e.errorMessage})]},e.id),b[40]=L,b[41]=s,b[42]=U,b[43]=T.length,b[44]=e):e=b[44],h=T.map(e),b[35]=L,b[36]=s,b[37]=U,b[38]=T,b[39]=h}else h=b[39];return b[45]!==h?(f=(0,m.jsx)(K.B,{direction:"vertical",align:"center",children:h}),b[45]=h,b[46]=f):f=b[46],b[47]!==t||b[48]!==f?(g=(0,m.jsx)("form",{onSubmit:t,children:f}),b[47]=t,b[48]=f,b[49]=g):g=b[49],b[50]!==g||b[51]!==u?(y=(0,m.jsx)(tM.tL,{commands:u,children:g}),b[50]=g,b[51]=u,b[52]=y):y=b[52],b[53]!==B?(_=(0,m.jsx)(tn.Q,{leadingVisual:ef.PlusIcon,className:"mt-3",onClick:B,children:"Add another"}),b[53]=B,b[54]=_):_=b[54],b[55]!==j||b[56]!==y||b[57]!==_||b[58]!==o||b[59]!==l||b[60]!==d?(v=(0,m.jsxs)(tF.l,{position:r,width:"large",title:"Add via GitHub URL",onClose:j,renderFooter:o,children:[l,d,y,_]}),b[55]=j,b[56]=y,b[57]=_,b[58]=o,b[59]=l,b[60]=d,b[61]=v):v=b[61],v}function mM(e,t){let n=e.match(/\/([^/]+)\/([^/]+)\/issues\/(\d+)/),a=e.match(/\/([^/]+)\/([^/]+)\/pull\/(\d+)/),i=e.match(/\/([^/]+)\/([^/]+)\/blob\/([^/]+)\/(.+)$/);return t.url=e,n?(t.owner=n[1]??"",t.repo=n[2]??"",t.number=parseInt(n[3]??"0",10),t.type="github_issue"):a?(t.owner=a[1]??"",t.repo=a[2]??"",t.number=parseInt(a[3]??"0",10),t.type="github_pull_request"):i&&(t.owner=i[1]??"",t.repo=i[2]??"",t.sha=i[3]??"",t.file_path=i[4]??"",t.type="github_file"),t}function mF(){return[new UrlDetails(crypto.randomUUID())]}function mU(e){let t,n,a,i,s,r,o,l=(0,p.c)(18),{index:c,removeUrlTextInputRow:d,inputCount:u,updateUrls:h,setIsUpdating:f,urlValue:g}=e,[y,_]=(0,x.useState)(g),[v,b]=(0,x.useState)(!1);l[0]!==g?(t=()=>{_(g)},n=[g],l[0]=g,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,x.useEffect)(t,n);let j=e=>{let t=e.target.value;_(t),v||(b(!0),f(!0)),w(t)};l[3]!==c||l[4]!==f||l[5]!==h?(a=e=>{h(c,e),b(!1),f(!1)},l[3]=c,l[4]=f,l[5]=h,l[6]=a):a=l[6];let w=(0,lr.d)(a,400);return l[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(lo.A.Label,{visuallyHidden:!0,children:"URL"}),l[7]=i):i=l[7],l[8]!==j||l[9]!==y?(s=(0,m.jsx)(ll.A,{placeholder:"https://github.com/mona/playground/issues/123",value:y,onChange:j,className:"width-full"}),l[8]=j,l[9]=y,l[10]=s):s=l[10],l[11]!==c||l[12]!==u||l[13]!==d?(r=u>1&&(0,m.jsx)(e1.K,{icon:ef.TrashIcon,variant:"invisible","aria-label":"Remove url",className:"ml-2",onClick:()=>d(c)}),l[11]=c,l[12]=u,l[13]=d,l[14]=r):r=l[14],l[15]!==s||l[16]!==r?(o=(0,m.jsxs)(lo.A,{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[i,s,r]}),l[15]=s,l[16]=r,l[17]=o):o=l[17],o}try{mB.displayName||(mB.displayName="GitHubUrlDialog")}catch{}try{(l=AddUrlTextInputRow).displayName||(l.displayName="AddUrlTextInputRow")}catch{}try{mU.displayName||(mU.displayName="UrlTextInputRow")}catch{}var mV=n(77809);function m$(e){let t,n,a,i,s=(0,p.c)(18),{isOpen:r,onClose:o,onResourcesAdded:l,owner:c,resourceCounts:d,initialRepo:u,onRepoSelect:h,hideBackButton:f}=e,g=(0,x.useRef)(null),{getCopilotSpaceResourceSizes:y}=mb();s[0]!==o||s[1]!==l?(t=e=>{let t=[e];l(t),(0,ca.Pg)(t,"file-picker"),o()},s[0]=o,s[1]=l,s[2]=t):t=s[2];let _=t,{searchWorkerFilePath:v}=(0,M.X)();s[3]!==o||s[4]!==l||s[5]!==y?(n=async e=>{let t=e.filter(mW);if(0===t.length)return void o();let n=await y({resources:t}),a=t.map(e=>{let t=n[e.id];return{...e,fileExists:!0,markedForDestroy:!1,sizePercentage:t}});l(a),(0,ca.Pg)(a,"file-picker"),o()},s[3]=o,s[4]=l,s[5]=y,s[6]=n):n=s[6];let b=n;return r?(s[7]===Symbol.for("react.memo_cache_sentinel")?(a=[],s[7]=a):a=s[7],s[8]!==f||s[9]!==u||s[10]!==o||s[11]!==h||s[12]!==c||s[13]!==d||s[14]!==b||s[15]!==_||s[16]!==v?(i=(0,m.jsx)(mV.Q,{formData:a,onCancel:o,onSaveFiles:b,onSaveRepository:_,findFileWorkerPath:v,attachmentButtonRef:g,owner:c,resourceCounts:d,initialRepo:u,onRepoSelect:h,hideBackButton:f,maxFileCount:50}),s[8]=f,s[9]=u,s[10]=o,s[11]=h,s[12]=c,s[13]=d,s[14]=b,s[15]=_,s[16]=v,s[17]=i):i=s[17],i):null}function mW(e){return"github_file"===e.type}try{m$.displayName||(m$.displayName="SpacesFilePicker")}catch{}let mH={dialogBody:"TextFileDialog-module__dialogBody--e27Cv",grow:"TextFileDialog-module__grow--TUgOh",form:"TextFileDialog-module__form--BVMha",footerContainer:"TextFileDialog-module__footerContainer--A_bOn"};function mq({sizePercentage:e,onClose:t,onSave:n,resource:a,readOnly:i=!1}){let{copilotSpacesConfig:{maxContentSize:s}}=(0,M.X)(),[r,o]=(0,x.useState)(a?.name||""),[l,c]=(0,x.useState)(a?.text||""),[d,u]=(0,x.useState)(!1),[p,h]=(0,x.useState)(""),[f,g]=(0,x.useState)(!1),y=a?.text??"",[_,v]=(0,x.useState)({}),{getCopilotSpaceResourceSizes:b}=mb(),j=async e=>{e?.preventDefault(),e?.stopPropagation();let i=!r.trim(),s=!l.trim();if(i||s)return void v(e=>({...e,"resources.name":i?"Name is required":"","resources.text":s?"Content is required":""}));u(!0),h("");try{let e={id:a?.id||Date.now().toString(),databaseId:a?.databaseId,type:"free_text",name:r,text:l,markedForDestroy:!1},i=await b({resources:[e]}),s={...e,sizePercentage:i[e.id]};n(s),(0,ca.Pg)([s],"text-file-dialog"),t()}catch{h("An unexpected error occurred while validating the text file")}finally{u(!1)}};return(0,m.jsx)(tF.l,{position:{narrow:"fullscreen"},title:"Add text content",onClose:t,width:"xlarge",height:"large",renderBody:()=>(0,m.jsxs)("div",{className:mH.dialogBody,children:[p&&(0,m.jsx)(q.l,{variant:"critical",className:"mb-2",title:p}),(0,m.jsx)(tM.tL,{className:mH.grow,commands:{"github:submit-form":()=>void j()},children:(0,m.jsxs)("form",{onSubmit:j,className:mH.form,children:[(0,m.jsxs)(lo.A,{required:!0,children:[(0,m.jsx)(lo.A.Label,{children:"Name"}),(0,m.jsx)(ll.A,{block:!0,placeholder:"Give the file a title",value:r,onChange:e=>{o(e.target.value),v(e=>({...e,"resources.name":""}))},maxLength:1e3,validationStatus:_["resources.name"]?"error":void 0,...(0,tk.G)("text-file-name-input"),readOnly:i}),_["resources.name"]&&(0,m.jsx)(lo.A.Validation,{variant:"error",children:_["resources.name"]})]}),(0,m.jsxs)(lo.A,{required:!0,className:mH.grow,children:[(0,m.jsx)(lo.A.Label,{children:"Content"}),(0,m.jsx)(u5.Ay,{block:!0,name:"content",value:l,placeholder:"Enter content here",resize:"none",className:mH.grow,onChange:e=>{c(e.target.value),v(e=>({...e,"resources.text":""}))},...(0,tk.G)("text-file-content-input"),readOnly:i}),_["resources.text"]?(0,m.jsx)(lo.A.Validation,{variant:"error",children:_["resources.text"]}):void 0!==e&&(0,m.jsx)(mz,{text:l,percentage:e,resourceContent:y,setOverSpaceLimit:g,maxContentSize:s})]})]})})]}),renderFooter:()=>(0,m.jsxs)("div",{className:mH.footerContainer,children:[(0,m.jsx)(tn.Q,{onClick:t,children:"Cancel"}),(0,m.jsx)(tn.Q,{variant:"primary",onClickCapture:f?void 0:j,loadingAnnouncement:"Validating resource",inactive:f,loading:d,...(0,tk.G)("save-text-file-button"),disabled:i,children:"Add"})]})})}function mz(e){let t,n,a,i=(0,p.c)(8),{text:s,percentage:r,resourceContent:o,setOverSpaceLimit:l,maxContentSize:c}=e,d=r/100*c+(s.length>o.length?Math.abs(s.length-o.length):-Math.abs(s.length-o.length)),u=Math.floor(d/c*100),h=d>c;if(i[0]!==l||i[1]!==h?(t=()=>{l(h)},n=[h,l],i[0]=l,i[1]=h,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,x.useEffect)(t,n),h){let e,t=`Total percent used: ${u}%`;return i[4]!==t?(e=(0,m.jsx)(lo.A.Validation,{variant:"error",children:t}),i[4]=t,i[5]=e):e=i[5],e}let f=`Total percent used: ${u}%`;return i[6]!==f?(a=(0,m.jsx)(lo.A.Caption,{children:f}),i[6]=f,i[7]=a):a=i[7],a}try{mq.displayName||(mq.displayName="TextFileDialog")}catch{}try{mz.displayName||(mz.displayName="CharacterCount")}catch{}let mG=e=>{let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,_,v,b,j=(0,p.c)(42),{children:w,onResourcesAdded:N,onError:S,owner:C,sizePercentage:I,resourcesToSave:k,resourceCounts:T,onUploadingChange:E,initialRepo:L,onRepoSelect:A}=e,[R,D]=(0,x.useState)(!1),[P,O]=(0,x.useState)(!1),[B,M]=(0,x.useState)(!1),F=(0,x.useRef)(null),U=(0,x.useRef)(null);j[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,tm.BI)("copilot-spaces.click",{target:"ADD_GITHUB_FILES_BUTTON"}),O(!0)},j[0]=t):t=j[0];let V=t;j[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{(0,tm.BI)("copilot-spaces.click",{target:"ADD_GITHUB_URL_BUTTON"}),M(!0)},j[1]=n):n=j[1];let $=n;j[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{(0,tm.BI)("copilot-spaces.click",{target:"ADD_TEXT_FILE_BUTTON"}),D(!0)},j[2]=a):a=j[2];let W=a;return j[3]!==S||j[4]!==N||j[5]!==E?(i=(0,m.jsx)(mD,{ref:F,onResourcesAdded:N,onError:S,onUploadingChange:E}),j[3]=S,j[4]=N,j[5]=E,j[6]=i):i=j[6],j[7]!==w?(s=(0,m.jsx)(eX.W.Anchor,{children:w}),j[7]=w,j[8]=s):s=j[8],j[9]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(eZ.l.GroupHeading,{children:"Repository"}),j[9]=r):r=j[9],j[10]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsxs)(eZ.l.Item,{onSelect:V,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.FileCodeIcon,{...(0,tk.G)("add-github-files-menu-item-icon")})}),"Add files and repositories"]}),j[10]=o):o=j[10],j[11]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsxs)(eZ.l.Group,{children:[r,o,(0,m.jsxs)(eZ.l.Item,{onSelect:$,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.LinkIcon,{})}),"Link files, pull requests, and issues"]})]}),c=(0,m.jsx)(eZ.l.Divider,{}),j[11]=l,j[12]=c):(l=j[11],c=j[12]),j[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(eZ.l.GroupHeading,{children:"Local"}),j[13]=d):d=j[13],j[14]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{(0,tm.BI)("copilot-spaces.click",{target:"LOCAL_FILE_UPLOAD"}),F.current?.addResources()},j[14]=u):u=j[14],j[15]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.jsxs)(eZ.l.Item,{onSelect:u,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.UploadIcon,{})}),"Upload a file"]}),j[15]=h):h=j[15],j[16]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)(eX.W.Overlay,{align:"end",width:"small",children:(0,m.jsxs)(eZ.l,{children:[l,c,(0,m.jsxs)(eZ.l.Group,{children:[d,h,(0,m.jsxs)(eZ.l.Item,{onSelect:W,children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.PasteIcon,{...(0,tk.G)("add-text-file-menu-item-icon")})}),"Add text content"]})]})]})}),j[16]=f):f=j[16],j[17]!==s?(g=(0,m.jsxs)(eX.W,{anchorRef:U,children:[s,f]}),j[17]=s,j[18]=g):g=j[18],j[19]!==N||j[20]!==R||j[21]!==I?(y=R&&(0,m.jsx)(mq,{sizePercentage:I,onClose:()=>D(!1),onSave:e=>N([e])}),j[19]=N,j[20]=R,j[21]=I,j[22]=y):y=j[22],j[23]!==L||j[24]!==A||j[25]!==N||j[26]!==C||j[27]!==T||j[28]!==P?(_=P&&(0,m.jsx)(m$,{isOpen:P,onClose:()=>O(!1),onResourcesAdded:N,owner:C,resourceCounts:T,initialRepo:L,onRepoSelect:A}),j[23]=L,j[24]=A,j[25]=N,j[26]=C,j[27]=T,j[28]=P,j[29]=_):_=j[29],j[30]!==N||j[31]!==C||j[32]!==T||j[33]!==k||j[34]!==B?(v=B&&(0,m.jsx)(mB,{onClose:()=>M(!1),onSave:e=>N(e),resourcesToSave:k,resourceCounts:T,owner:C}),j[30]=N,j[31]=C,j[32]=T,j[33]=k,j[34]=B,j[35]=v):v=j[35],j[36]!==g||j[37]!==y||j[38]!==_||j[39]!==v||j[40]!==i?(b=(0,m.jsxs)(m.Fragment,{children:[i,g,y,_,v]}),j[36]=g,j[37]=y,j[38]=_,j[39]=v,j[40]=i,j[41]=b):b=j[41],b};try{mG.displayName||(mG.displayName="AddAttachmentMenu")}catch{}function mK(e){return{id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:!0,metadata:(0,mv.M)(e)}}var mQ=n(97564),mY=n(88432),mJ=n(74753),mX=n(10006),mZ=n(3803);function m0(e){let t=(0,p.c)(14),{attachment:n,className:a}=e;switch(n.type){case"github_file":{let e;return t[0]!==a?(e=(0,m.jsx)(ef.FileIcon,{className:a}),t[0]=a,t[1]=e):e=t[1],e}case"free_text":{let e;return t[2]!==a?(e=(0,m.jsx)(ef.PasteIcon,{className:a}),t[2]=a,t[3]=e):e=t[3],e}case"uploaded_text_file":{let e;return t[4]!==a?(e=(0,m.jsx)(ef.FileIcon,{className:a}),t[4]=a,t[5]=e):e=t[5],e}case"github_issue":{let e;return t[6]!==a?(e=(0,m.jsx)(ef.IssueOpenedIcon,{className:a}),t[6]=a,t[7]=e):e=t[7],e}case"github_pull_request":{let e;return t[8]!==a?(e=(0,m.jsx)(ef.GitPullRequestIcon,{className:a}),t[8]=a,t[9]=e):e=t[9],e}case"media_content":{let e;return t[10]!==a?(e=(0,m.jsx)(ef.ImageIcon,{className:a}),t[10]=a,t[11]=e):e=t[11],e}case"repository":{let e;return t[12]!==a?(e=(0,m.jsx)(ef.RepoIcon,{className:a}),t[12]=a,t[13]=e):e=t[13],e}default:return null}}try{m0.displayName||(m0.displayName="AttachmentIcon")}catch{}let m1={attachmentText:"AttachmentPreview-module__attachmentText--ELczx",attachmentPreviewImage:"AttachmentPreview-module__attachmentPreviewImage--hqleR"};function m2(e){let t=(0,p.c)(13),{attachment:n}=e;if(!n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("p",{className:m1.attachmentText,children:"No attachment selected."}),t[0]=e):e=t[0],e}switch(n.type){case"free_text":{let e;return t[1]!==n.text?(e=(0,m.jsx)("p",{className:m1.attachmentText,children:n.text}),t[1]=n.text,t[2]=e):e=t[2],e}case"media_content":{let e,a,i,s=`image: ${n.name}`;return t[3]!==n.url||t[4]!==s?(e=(0,m.jsx)("img",{alt:s,src:n.url}),t[3]=n.url,t[4]=s,t[5]=e):e=t[5],t[6]!==n.name||t[7]!==n.url?(a=(0,m.jsx)(tn.Q,{onClick:()=>(function(e,t,n="image"){let a=document.createElement("a");a.href=e,a.setAttribute("download",t||n),document.body.appendChild(a),a.click(),document.body.removeChild(a)})(n.url,n.name),children:"Download"}),t[6]=n.name,t[7]=n.url,t[8]=a):a=t[8],t[9]!==e||t[10]!==a?(i=(0,m.jsxs)("div",{className:m1.attachmentPreviewImage,children:[e,a]}),t[9]=e,t[10]=a,t[11]=i):i=t[11],i}default:{let e;return t[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("p",{children:"No preview available for this attachment."}),t[12]=e):e=t[12],e}}}try{m2.displayName||(m2.displayName="AttachmentPreview")}catch{}let m3={warningIcon:"ReferencesTable-module__warningIcon--ZQ8GD",referenceTitle:"ReferencesTable-module__referenceTitle--X4GB2",referenceSubtitle:"ReferencesTable-module__referenceSubtitle--cUDlc",referenceTitleLink:"ReferencesTable-module__referenceTitleLink--rezaS",headerText:"ReferencesTable-module__headerText--HR4t9"};function m4({resources:e,onDeleteResources:t,onUpdateResource:n,sizePercentage:a,onResourcesAdded:i,owner:s,readOnly:r=!1}){let o=(0,x.useMemo)(()=>Object.values(e.reduce((e,t)=>{let n=m7(t);return{...e,[n]:t}},{})),[e]),[l,c]=(0,x.useState)(!1),[d,u]=(0,x.useState)(null),p=(0,x.useRef)(null),[h,f]=(0,x.useState)([]),g=(0,x.useCallback)(()=>{h.length>0&&(t(h),f([]))},[t,h]),y=(0,x.useCallback)(()=>{h.length>0?f([]):f(o)},[h,o]),v=(0,x.useMemo)(()=>{let e={id:"id",header:()=>(0,m.jsx)("span",{className:m3.headerText,children:h.length>0?`${h.length} selected`:`${o.length} ${1===o.length?"source":"sources"}`}),rowHeader:!0,renderCell:e=>{switch(e.type){case"github_file":{let{filePath:t,fileName:n,fileUrl:a,sha:i}=(0,ca.q5)(e);return(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(m0,{attachment:e,className:"fgColor-muted"}),(0,m.jsxs)(K.B,{gap:"none",children:[(0,m.jsx)("div",{children:e.fileExists?(0,m.jsxs)(K.B,{direction:"horizontal",wrap:"wrap",children:[(0,m.jsx)(uR.A,{title:n,className:m3.referenceTitle,children:(0,m.jsx)(Q.A,{rel:"noopener",target:"_blank",href:a,className:m3.referenceTitleLink,children:n})}),i&&(0,m.jsx)(eG.A,{className:"ml-1",children:i.substring(0,7)})]}):(0,m.jsx)(uR.A,{title:n,className:m3.referenceTitle,children:n})}),(0,m.jsx)("div",{children:(0,m.jsx)(uR.A,{title:t,className:(0,_.$)(m3.referenceSubtitle,"fgColor-muted"),children:t})})]})]})}case"free_text":return(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(m0,{attachment:e,className:"fgColor-muted"}),(0,m.jsx)("div",{children:(0,m.jsx)(uR.A,{title:e.name,maxWidth:300,className:m3.referenceTitle,children:e.name})})]});case"repository":return(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(aq.r,{square:"Organization"===e.ownerType,src:e.ownerAvatarUrl}),(0,m.jsxs)(K.B,{gap:"none",children:[(0,m.jsx)("div",{children:(0,m.jsx)(uR.A,{title:e.nwo,maxWidth:300,className:m3.referenceTitle,children:(0,m.jsx)(Q.A,{className:m3.referenceTitleLink,href:`/${e.nwo}`,rel:"noopener noreferrer",target:"_blank",children:e.nwo})})}),(0,m.jsx)("div",{className:(0,_.$)(m3.referenceSubtitle,"fgColor-attention"),children:"Attaching a large number of files may reduce response quality."})]})]});case"uploaded_text_file":return(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(m0,{attachment:e,className:"fgColor-muted"}),(0,m.jsx)("div",{children:(0,m.jsx)(uR.A,{title:e.name,maxWidth:300,className:m3.referenceTitle,children:(0,m.jsx)(Q.A,{className:m3.referenceTitleLink,href:e.url,download:e.name,children:e.name})})})]});case"github_pull_request":case"github_issue":return(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)("span",{children:(0,m.jsx)(m0,{attachment:e,className:"fgColor-success"})}),(0,m.jsxs)(K.B,{gap:"none",children:[(0,m.jsx)("div",{children:(0,m.jsx)(uR.A,{title:e.title||"",className:m3.referenceTitle,children:(0,m.jsxs)(Q.A,{rel:"noopener",target:"_blank",href:e.url,className:m3.referenceTitleLink,children:[e.title," ",(0,m.jsx)("span",{className:"fgColor-muted text-light",children:`#${e.number}`})]})})}),(0,m.jsx)("div",{children:(0,m.jsx)(uR.A,{title:e.nwo||"",className:(0,_.$)(m3.referenceSubtitle,"fgColor-muted"),children:e.nwo})})]})]});case"media_content":return(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)("span",{className:"fgColor-muted",children:(0,m.jsx)(m0,{attachment:e,className:"fgColor-muted"})}),(0,m.jsx)(Q.A,{as:"button",className:m3.referenceTitleLink,ref:p,onClick:t=>{t.preventDefault(),u(e),c(!0)},"aria-haspopup":"dialog","aria-expanded":l,children:(0,m.jsx)(uR.A,{title:e.name,maxWidth:300,className:(0,_.$)(m3.referenceTitle),children:e.name})})]});default:return null}}},d={id:"size",header:()=>(0,m.jsx)(mJ.s,{children:"Size"}),align:"end",maxWidth:"auto",width:"growCollapse",renderCell:e=>(0,m.jsx)(m5,{row:e,onResourcesAdded:i,owner:s})},x={id:"actions",header:()=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(mJ.s,{children:"Actions"}),(0,m.jsx)(tn.Q,{style:{visibility:h.length>0&&!r?"visible":"hidden"},size:"small","aria-label":"Remove selected resources",onClick:g,children:"Remove"})]}),maxWidth:"auto",align:"end",renderCell:e=>{let i="github_file"===e.type&&!e.fileExists;return(0,m.jsxs)(m.Fragment,{children:[i&&(0,m.jsx)(e1.K,{className:m3.warningIcon,icon:ef.AlertIcon,variant:"invisible",size:"small","aria-label":"This file no longer exists"}),(0,m.jsx)(m6,{row:e,onEdit:n,onDelete:e=>t([e]),sizePercentage:a,readOnly:r})]})}};return r?[e,d,x]:[{id:"select",header:()=>(0,m.jsx)(mY.A,{checked:h.length===o.length,indeterminate:h.length>0&&h.length<o.length,"aria-label":"Select all sources",value:"default",onChange:y}),width:"auto",renderCell:e=>(0,m.jsx)(mY.A,{checked:h.some(t=>t.id===e.id),"aria-label":"Select source",value:e.id,onChange:t=>{f(n=>t.target.checked?[...n,e]:n.filter(t=>t.id!==e.id))}})},e,d,x]},[h,o.length,y,l,g,n,a,i,s,t,r]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(mX.X.Container,{children:(0,m.jsx)(mZ.b,{"aria-labelledby":"references-title",cellPadding:"normal",data:o,columns:v})}),l&&d&&"media_content"===d.type&&(0,m.jsx)(tF.l,{onClose:()=>{u(null),c(!1)},position:{narrow:"fullscreen"},returnFocusRef:p,title:d.name,children:(0,m.jsx)(m2,{attachment:d})})]})}let m5=({row:e,onResourcesAdded:t,owner:n})=>{let[a,i]=(0,x.useState)(!1),[s,r]=(0,x.useState)(null),[o,l]=(0,x.useState)(!1),c=(0,x.useRef)(null),d=async e=>{l(!0);try{let t=await (0,mQ.V)(e);r(t),i(!0)}finally{l(!1)}};return"repository"===e.type?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(e1.K,{variant:"invisible",className:(0,_.$)(m3.warningIcon,"float-left"),ref:c,loading:o,"aria-label":"Copilot works best when working with fewer files. Click to choose specific files",onClick:async()=>{await d(e.repositoryId)},icon:ef.AlertIcon}),a&&s&&(0,m.jsx)(m$,{isOpen:a,onClose:()=>i(!1),onResourcesAdded:t,owner:n,initialRepo:s,hideBackButton:!0})]}):"sizePercentage"in e?(0,m.jsx)("span",{className:"fgColor-muted",children:e.sizePercentage&&e.sizePercentage<1?"<1%":`${Math.round(e.sizePercentage||0)}%`}):void 0},m6=e=>{let t,n,a,i,s,r,o,l=(0,p.c)(26),{row:c,onDelete:d,onEdit:u,sizePercentage:h,readOnly:f}=e,g=void 0!==f&&f,[y,_]=(0,x.useState)(null),v="";switch(c.type){case"github_pull_request":case"github_issue":v=c.title;break;case"github_file":v=c.filePath;break;case"repository":v=c.nwo;break;case"free_text":case"uploaded_text_file":case"media_content":v=c.name}return l[0]!==v||l[1]!==d||l[2]!==g||l[3]!==c?(t=(!g||g&&"free_text"===c.type)&&(0,m.jsxs)(eX.W,{children:[(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(e1.K,{"aria-label":`Attachment actions: ${v}`,title:"Attachment actions",icon:ef.KebabHorizontalIcon,variant:"invisible"})}),(0,m.jsx)(eX.W.Overlay,{align:"end",children:(0,m.jsxs)(eZ.l,{children:["free_text"===c.type&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(eZ.l.Item,{"aria-label":`${g?"View":"Edit"} attachment: ${c.id}`,onSelect:()=>_(c),children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:g?(0,m.jsx)(ef.EyeIcon,{}):(0,m.jsx)(ef.PencilIcon,{})}),g?"View":"Edit"]})}),!g&&(0,m.jsxs)(eZ.l.Item,{"aria-label":`Delete attachment: ${c.id}`,variant:"danger",onSelect:()=>d(c),children:[(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.TrashIcon,{})}),"Delete"]})]})})]}),l[0]=v,l[1]=d,l[2]=g,l[3]=c,l[4]=t):t=l[4],l[5]!==t?(n=(0,m.jsx)("div",{className:"d-md-none",children:t}),l[5]=t,l[6]=n):n=l[6],l[7]!==g||l[8]!==c?(a="free_text"===c.type&&(0,m.jsx)(e1.K,{onClick:()=>_(c),variant:"invisible","aria-label":g?"View":"Edit",icon:g?ef.EyeIcon:ef.PencilIcon}),l[7]=g,l[8]=c,l[9]=a):a=l[9],l[10]!==d||l[11]!==g||l[12]!==c?(i=!g&&(0,m.jsx)(e1.K,{onClick:()=>d(c),variant:"invisible","aria-label":"Delete",icon:ef.TrashIcon}),l[10]=d,l[11]=g,l[12]=c,l[13]=i):i=l[13],l[14]!==a||l[15]!==i?(s=(0,m.jsxs)("div",{className:"d-none d-md-flex flex-md-row",children:[a,i]}),l[14]=a,l[15]=i,l[16]=s):s=l[16],l[17]!==u||l[18]!==g||l[19]!==y||l[20]!==h?(r=y&&(0,m.jsx)(mq,{sizePercentage:h,resource:y,onSave:u,onClose:()=>_(null),readOnly:g}),l[17]=u,l[18]=g,l[19]=y,l[20]=h,l[21]=r):r=l[21],l[22]!==n||l[23]!==s||l[24]!==r?(o=(0,m.jsxs)(m.Fragment,{children:[n,s,r]}),l[22]=n,l[23]=s,l[24]=r,l[25]=o):o=l[25],o},m7=e=>{switch(e.type){case"github_file":return`${e.repositoryId}@${e.filePath}@${e.sha}`;case"github_issue":case"github_pull_request":return e.url;default:return String(e.id)}};try{m4.displayName||(m4.displayName="ReferencesTable")}catch{}try{m5.displayName||(m5.displayName="RowSize")}catch{}try{m6.displayName||(m6.displayName="RowActions")}catch{}let m8={instructionsContainer:"InstructionsDialog-module__instructionsContainer--tvd1E",grow:"InstructionsDialog-module__grow--mfJpQ"};function m9({copilotSpace:e,onClose:t,onSaved:n,returnFocusRef:a}){let{upsertCopilotSpace:i,isPending:s}=(0,uL.$)(e),[r,o]=(0,x.useState)(e.generalInstructions??""),[l,c]=(0,x.useState)(null);async function d(){try{let e=await i({generalInstructions:r});n?.(e),t()}catch(e){e instanceof Error?c(e.message):c("Failed to save instructions")}}function u(){o(e.generalInstructions??""),t()}return(0,m.jsx)(tF.l,{width:"xlarge",height:"large",title:"Instructions",onClose:u,returnFocusRef:a,position:{narrow:"fullscreen"},renderBody:()=>(0,m.jsxs)("div",{className:m8.instructionsContainer,children:[l&&(0,m.jsx)(q.l,{variant:"critical",title:l,className:"mb-2"}),(0,m.jsxs)(lo.A,{className:m8.grow,disabled:!e.editable,children:[(0,m.jsx)(lo.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,m.jsx)(u5.Ay,{block:!0,value:r,onChange:e=>o(e.target.value),placeholder:"Define Copilot's role, focus, and what to avoid in this space. Ex. \u201CYou are a [role]. Follow our [framework/patterns] to [type of task]. Avoid [practices or tools] unless specified\u201D.",resize:"none",className:m8.grow}),(0,m.jsx)(pe,{text:r,promptCharLimit:4e3})]})]}),renderFooter:()=>e.editable&&(0,m.jsx)(u4.m,{onCancel:u,onSave:d,isLoading:s,loadingAnnouncement:"Saving instructions",saveButtonText:"Save"})})}function pe(e){let t,n,a,i,s=(0,p.c)(10),{text:r,promptCharLimit:o}=e,l=r.length>o;s[0]!==r.length?(t=r.length.toLocaleString(),s[0]=r.length,s[1]=t):t=s[1],s[2]!==o?(n=o.toLocaleString(),s[2]=o,s[3]=n):n=s[3],s[4]!==t||s[5]!==n?(a=(0,m.jsxs)(m.Fragment,{children:[t," / ",n," characters"]}),s[4]=t,s[5]=n,s[6]=a):a=s[6];let c=a;return s[7]!==c||s[8]!==l?(i=l?(0,m.jsx)(lo.A.Validation,{variant:"error",children:c}):(0,m.jsx)(lo.A.Caption,{children:c}),s[7]=c,s[8]=l,s[9]=i):i=s[9],i}try{m9.displayName||(m9.displayName="InstructionsDialog")}catch{}try{pe.displayName||(pe.displayName="CharacterCount")}catch{}let pt={header:"SpacesConversation-module__header--GkfTQ",spaceDescription:"SpacesConversation-module__spaceDescription--nRmSr",chatInput:"SpacesConversation-module__chatInput--Nrvmc",instructions:"SpacesConversation-module__instructions--t36Ks",instructionsHeader:"SpacesConversation-module__instructionsHeader--ynDM7",instructionsIcon:"SpacesConversation-module__instructionsIcon--KKXjS",instructionsTitle:"SpacesConversation-module__instructionsTitle--xAAKT",instructionsContent:"SpacesConversation-module__instructionsContent--DYqhz",instructionsEmptyState:"SpacesConversation-module__instructionsEmptyState--wlbTe",content:"SpacesConversation-module__content--FPhr6",tabContainer:"SpacesConversation-module__tabContainer--rTZgf",underlineNav:"SpacesConversation-module__underlineNav--qjoAn",attachButton:"SpacesConversation-module__attachButton--Hr8sv",tabEmptyContainer:"SpacesConversation-module__tabEmptyContainer--dnmPR",tabEmptyTitle:"SpacesConversation-module__tabEmptyTitle--Pw6Ln",tabEmptyText:"SpacesConversation-module__tabEmptyText--SxP9A",tabContent:"SpacesConversation-module__tabContent--zCP1V",conversationsList:"SpacesConversation-module__conversationsList--KLG2n",conversationItem:"SpacesConversation-module__conversationItem--kxjxw",conversationItemMenuOpen:"SpacesConversation-module__conversationItemMenuOpen--Z1mQR",conversationItemLeftColumn:"SpacesConversation-module__conversationItemLeftColumn--YsHsM",conversationName:"SpacesConversation-module__conversationName--wbn54",conversationTimestamp:"SpacesConversation-module__conversationTimestamp--tcI92",text:"SpacesConversation-module__text--v551F",referencesSizeProgressBar:"SpacesConversation-module__referencesSizeProgressBar--pRjZw",referencesSizeText:"SpacesConversation-module__referencesSizeText--buwhH",descriptionText:"SpacesConversation-module__descriptionText--hYXsZ",titleText:"SpacesConversation-module__titleText--czjJm"};function pn({customCopilotId:e,selectedThreadID:t,textAreaRef:n}){let{currentTopic:a,messages:i,streamingMessage:s,ambientError:r,threads:o}=(0,U.Pk)(),l=(0,W.b)(),[c,d]=(0,Z.ok)(),u=(0,cp.G)(),h=c.get("tab")||"attachments",[f,y]=(0,x.useState)(!1),[_,v]=(0,x.useState)(null),b=(0,x.useRef)(null),[j,w]=(0,x.useState)(null),[N,S]=(0,x.useState)([]),[C,I]=(0,x.useState)(null),[k,T]=(0,x.useState)(null),[E,L]=(0,x.useState)(!1),[A,R]=(0,x.useState)([]),[P,O]=(0,x.useState)(null),B=cm((0,x.useRef)(a),i.length),{isPending:F,data:V,error:$}=(0,ci.Ao)(e),{upsertCopilotSpace:H,error:z}=(0,uL.$)(j||void 0),{deleteCopilotSpaceResources:G,error:Q}=(e=>{let t,n,a,i,s,r,o,l=(0,p.c)(15),c=(0,ts.jE)(),[d,u]=(0,x.useState)(!1);l[0]!==e?(t={mutationFn:async t=>{if(!e)return;u(!0);let n=(0,ca.fn)(e),a={custom_copilot:{resources_attributes:t.map(mK)}},i=await (0,t8.lS)(n,{method:"PUT",body:a}),s=await i.json();if(!i.ok&&404!==i.status)throw Error("Unable to delete resources.");return s}},l[0]=e,l[1]=t):t=l[1];let m=(0,t7.n)(t);return l[2]!==m?({mutateAsync:n,isPending:a,...i}=m,l[2]=m,l[3]=n,l[4]=a,l[5]=i):(n=l[3],a=l[4],i=l[5]),l[6]!==e||l[7]!==a||l[8]!==c||l[9]!==d?(s=()=>{e&&d&&!a&&(u(!1),c.invalidateQueries({queryKey:(0,uT.dp)(e)}))},r=[d,a,e,c],l[6]=e,l[7]=a,l[8]=c,l[9]=d,l[10]=s,l[11]=r):(s=l[10],r=l[11]),(0,x.useEffect)(s,r),l[12]!==n||l[13]!==i?(o={deleteCopilotSpaceResources:n,...i},l[12]=n,l[13]=i,l[14]=o):o=l[14],o})(j||void 0);(0,x.useEffect)(()=>{(0,g.D)(j?.name?`${j.name} \xb7 Spaces \xb7 GitHub Copilot`:"Spaces \xb7 GitHub Copilot")},[j?.name]);let{processFiles:Y}=mN({onResourcesAdded:e=>void ed(e),onError:R,onUploadingChange:L}),{copilotSpacesConfig:{maxResourceCount:J,maxDescriptionLength:X}}=(0,M.X)(),ee=z||$||k||Q,et=(0,x.useRef)(!1),en=N.filter(e=>!e.markedForDestroy).length,ea=(0,x.useMemo)(()=>j?l.sortAndFilterThreads(o,t=>t.customCopilotOwner===e.owner&&t.customCopilotID===e.id).slice(0,10):[],[o,e,l,j]),ei=(0,x.useMemo)(()=>j?j.resources.reduce((e,t)=>e+(t.sizePercentage||0),0):0,[j]);(0,x.useEffect)(()=>{V&&(w(V),S(e=>V.resources?.filter(t=>!e.find(e=>e.id===t.id&&e.markedForDestroy))||[]),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:V})),l.clearCurrentReferences(["image"])},[V,l]),(0,x.useEffect)(()=>()=>{et.current||(l.clearCurrentReferences(),et.current=!1)},[l,e]);let es=(0,x.useCallback)(async e=>{et.current=!0,await B(e)},[B]),er=(0,x.useCallback)(e=>{d({tab:e},{replace:!0})},[d]),eo=(0,x.useCallback)(e=>{l.deleteThread(e)},[l]);async function el(e){let t=[];if(S(n=>{for(let a of(t=[...n],e))t=a.databaseId?t.map(e=>a.databaseId===e.databaseId?{...e,markedForDestroy:!0}:e):t.filter(e=>e.id!==a.id);return t}),j)try{await G(e),T(null)}catch{S(t=>[...t,...e])}}async function ec(e){let t=[];if(S(n=>t=n.map(t=>t.id===e.id?e:t)),j)try{await H({...j,resources:t}),T(null)}catch{S(j.resources)}}let ed=(0,x.useCallback)(async e=>{let t=function(e,t){let n=new Map(e.map(e=>[e.id,e]));for(let a of t){if("repository"===a.type){let t=e.find(e=>"repository"===e.type&&e.repositoryId===a.repositoryId);if(t){n.set(t.id,{...t,markedForDestroy:!1});continue}}n.set(a.id,a)}return Array.from(n.values())}(N,e);S(t);try{await H({...j,resources:t}),T(null)}catch{j&&S(j.resources)}},[j,H,N]),eu=(0,x.useCallback)(()=>{T(`You can select a maximum of ${J} sources`)},[J]),em=(0,x.useCallback)(e=>{Y(e,{source:"drag-and-drop"})},[Y]),ep=(0,x.useCallback)(async e=>{if(j&&e){I(e);try{let t=await H({name:e});w(t),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t}),I(null),T(null)}catch{w(j),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:j}),I(null)}}},[j,H,l]),eh=(0,x.useCallback)(async e=>{if(j){w({...j,description:e});try{let t=await H({description:e});w(t),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t})}catch{w(j),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:j})}}},[j,H,l]);if($ instanceof ci.i9)return(0,m.jsx)(mm,{});if(F||!j)return(0,m.jsx)(db,{});let eg=j.ownerIsOrg?j.owner:void 0,ey=C??j.name,e_=(0,ca.Hh)(V);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tf.t,{fallback:(0,m.jsx)(tj,{regionName:"This space"}),children:(0,m.jsxs)(D.Container,{width:"small",children:[(0,m.jsx)("div",{className:pt.header,children:(0,m.jsxs)(D.Header,{children:[(0,m.jsx)("div",{className:"ml-1",children:(0,m.jsx)(eG.A,{children:md(j)})}),(0,m.jsx)("h1",{children:j.editable?(0,m.jsx)(ml,{className:pt.titleText,value:ey,onChange:ep}):(0,m.jsx)("span",{className:pt.text,children:ey})}),j.editable?(0,m.jsx)(ml,{className:pt.descriptionText,placeholder:"Add a short description to explain this space's purpose (e.g., \u201CFrontend design system\u201D or \u201CAPI docs hub\u201D).",value:j.description||"",maxLength:X,onChange:eh}):j.description&&(0,m.jsx)("p",{className:pt.spaceDescription,children:j.description}),(0,m.jsx)(D.Actions,{children:(0,m.jsx)(tn.Q,{leadingVisual:ef.McpIcon,as:"a",href:ca.Ku,target:"_blank",rel:"noopener noreferrer",children:"Install MCP"})})]})}),(0,m.jsxs)("div",{className:pt.chatInput,children:[r&&(0,m.jsx)(cg.P,{ambientError:r}),e_&&(0,m.jsx)(cO,{}),!e_&&(0,m.jsx)(ou.V,{textAreaRef:n,onSubmit:es,isStreaming:!!s,size:"large",modes:[{name:"Chat",supportsMCP:!1,supportsAttachments:!0,supportsModelSwitching:!0,icon:(0,m.jsx)(ef.SpaceIcon,{}),placeholder:"How can I help you?"}],onNewThreadSelected:u},t)]}),(0,m.jsxs)("button",{ref:b,className:pt.instructions,onClick:()=>y(!0),"aria-haspopup":"dialog","aria-expanded":f,children:[(0,m.jsxs)("div",{className:pt.instructionsHeader,children:[(0,m.jsx)(ef.SlidersIcon,{size:16,className:pt.instructionsIcon}),(0,m.jsx)("h2",{className:pt.instructionsTitle,children:"Instructions"})]}),j.generalInstructions?(0,m.jsx)("p",{className:pt.instructionsContent,children:j.generalInstructions}):(0,m.jsx)("p",{className:pt.instructionsEmptyState,children:"Define Copilot\u2019s role, focus, and what to avoid in this space. Ex. \u201CYou are a [role]. Follow our [framework/patterns] to [type of task]. Avoid [practices or tools] unless specified\u201D."})]}),ee&&(0,m.jsx)(q.l,{title:k?"Maximum source count reached":"Failed to save space",variant:"critical",description:"string"==typeof ee?ee:"object"==typeof ee&&null!==ee&&"base"in ee?String(ee.base):ee instanceof Error?ee.message:"An error occurred"}),A.length>0&&(0,m.jsx)(cB,{errorMessages:A,onDismiss:()=>R([])}),(0,m.jsxs)("div",{className:pt.content,children:[(0,m.jsxs)("div",{className:pt.tabContainer,children:[(0,m.jsx)("div",{className:pt.underlineNav,children:(0,m.jsxs)(ux.O,{"aria-label":"Space content",children:[(0,m.jsx)(ux.O.Item,{"aria-current":"attachments"===h?"page":void 0,onClick:()=>er("attachments"),counter:en,children:"Sources"}),(0,m.jsx)(ux.O.Item,{"aria-current":"conversations"===h?"page":void 0,onClick:()=>er("conversations"),counter:ea.length,children:"Conversations"})]})}),(0,m.jsxs)(K.B,{direction:"horizontal",align:"center",gap:"none",children:[ei>80&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(mc.z,{inline:!0,barSize:"small",progress:ei,className:pt.referencesSizeProgressBar,"aria-hidden":"true"}),(0,m.jsx)("span",{className:"sr-only",children:`${Math.max(0,Math.round(100-ei))}% remaining attachment capacity`}),(0,m.jsxs)("span",{className:pt.referencesSizeText,children:[ei<1?"<1":Math.round(ei),"%"]})]}),j.editable&&(0,m.jsx)("div",{className:pt.attachButton,children:en>=J?(0,m.jsx)(tn.Q,{leadingVisual:ef.PlusIcon,onClick:eu,children:"Add sources"}):(0,m.jsx)(mG,{sizePercentage:ei,owner:eg,onResourcesAdded:ed,resourcesToSave:N,resourceCounts:{currentResourceCount:en,maxResourceCount:J},onError:R,initialRepo:P,onRepoSelect:O,onUploadingChange:e=>{e&&R([]),L(e)},children:(0,m.jsx)(tn.Q,{leadingVisual:ef.PlusIcon,children:"Add sources"})})})]})]}),(0,m.jsx)("div",{className:pt.tabContent,children:(()=>{if("attachments"===h){let e=N.filter(e=>!e.markedForDestroy);return e.length>0?(0,m.jsx)(m4,{resources:e,sizePercentage:ei,onDeleteResources:el,onUpdateResource:ec,onResourcesAdded:ed,readOnly:!j?.editable}):(0,m.jsxs)("div",{className:pt.tabEmptyContainer,children:[(0,m.jsx)(ef.FileIcon,{size:24,className:"fgColor-muted mb-2"}),(0,m.jsx)("h2",{className:pt.tabEmptyTitle,children:j?.editable?"Add sources to get started":"Welcome"}),(0,m.jsx)("p",{className:pt.tabEmptyText,children:j?.editable?"Provide files, docs, issues, or repositories so Copilot can give more relevant answers.":"This space doesn't have any sources yet. Someone with edit access can add them."})]})}if("conversations"===h)return ea.length>0?(0,m.jsx)("ul",{role:"menu",className:pt.conversationsList,children:ea.map(e=>(0,m.jsx)(pa,{conversation:e,activeMenuConversationId:_,setActiveMenuConversationId:v,onDelete:eo},e.id))}):(0,m.jsxs)("div",{className:pt.tabEmptyContainer,children:[(0,m.jsx)("h2",{className:pt.tabEmptyTitle,children:"No conversations yet"}),(0,m.jsx)("p",{className:pt.tabEmptyText,children:"Start a new conversation in this space by typing in the input box at the top."})]})})()}),f&&(0,m.jsx)(m9,{copilotSpace:j,onClose:()=>y(!1),returnFocusRef:b,onSaved:e=>{w(e),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})}})]})]})}),(0,m.jsx)(me.A,{onFilesDrop:em,isUploading:E})]})}function pa(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,x,v=(0,p.c)(38),{conversation:b,activeMenuConversationId:j,setActiveMenuConversationId:w,onDelete:N}=e,S=(0,uI.Z)();v[0]!==b?(t=(0,nQ.CB)(b),v[0]=b,v[1]=t):t=v[1];let C=t,I=`${nQ.Jz}/c/${b.id}`;v[2]!==S||v[3]!==I?(n=()=>S(I),a=e=>{"Enter"===e.key&&S(I)},v[2]=S,v[3]=I,v[4]=n,v[5]=a):(n=v[4],a=v[5]);let k=null!==j&&pt.conversationItemMenuOpen;v[6]!==k?(i=(0,_.$)(pt.conversationItem,k),v[6]=k,v[7]=i):i=v[7],v[8]!==C?(s=(0,m.jsx)("div",{className:pt.conversationName,children:C}),v[8]=C,v[9]=s):s=v[9],v[10]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(ef.ClockIcon,{}),v[10]=r):r=v[10],v[11]!==b.updatedAt?(o=new Date(b.updatedAt),v[11]=b.updatedAt,v[12]=o):o=v[12],v[13]!==o?(l=(0,m.jsxs)("div",{className:pt.conversationTimestamp,children:[r," ",(0,m.jsx)(eg.A,{format:"relative",prefix:"",date:o})]}),v[13]=o,v[14]=l):l=v[14],v[15]!==s||v[16]!==l?(c=(0,m.jsxs)("div",{className:pt.conversationItemLeftColumn,children:[s,l]}),v[15]=s,v[16]=l,v[17]=c):c=v[17];let T=j===b.id;return v[18]!==b.id||v[19]!==w?(d=e=>{w(e?b.id:null)},v[18]=b.id,v[19]=w,v[20]=d):d=v[20],v[21]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.jsx)(eX.W.Anchor,{children:(0,m.jsx)(e1.K,{variant:"invisible","aria-label":"Conversation options",icon:ef.KebabHorizontalIcon,onClick:ps})}),v[21]=u):u=v[21],v[22]!==b||v[23]!==N?(h=()=>N(b),v[22]=b,v[23]=N,v[24]=h):h=v[24],v[25]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)(eZ.l.LeadingVisual,{children:(0,m.jsx)(ef.TrashIcon,{})}),v[25]=f):f=v[25],v[26]!==h?(g=(0,m.jsx)(eX.W.Overlay,{onClick:pi,align:"end",children:(0,m.jsx)(eZ.l,{children:(0,m.jsxs)(eZ.l.Item,{variant:"danger",onSelect:h,children:[f,"Delete"]})})}),v[26]=h,v[27]=g):g=v[27],v[28]!==T||v[29]!==d||v[30]!==g?(y=(0,m.jsxs)(eX.W,{open:T,onOpenChange:d,children:[u,g]}),v[28]=T,v[29]=d,v[30]=g,v[31]=y):y=v[31],v[32]!==c||v[33]!==y||v[34]!==n||v[35]!==a||v[36]!==i?(x=(0,m.jsxs)("li",{role:"menuitem",onClick:n,onKeyDown:a,className:i,children:[c,y]}),v[32]=c,v[33]=y,v[34]=n,v[35]=a,v[36]=i,v[37]=x):x=v[37],x}function pi(e){return e.stopPropagation()}function ps(e){e.stopPropagation()}try{pn.displayName||(pn.displayName="SpacesConversation")}catch{}try{pa.displayName||(pa.displayName="ConversationItem")}catch{}function pr({primary:e=!1}){let[t,n]=(0,x.useState)(!1);return(0,m.jsxs)(m.Fragment,{children:[t?(0,m.jsx)(uC.D,{closeDialog:()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),n(!1)}}):null,(0,m.jsx)(tn.Q,{variant:e?"primary":"default",onClick:()=>{(0,tm.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_OPEN",mode:"immersive"}),n(!0)},children:"Create space"})]})}try{pr.displayName||(pr.displayName="CreateSpaceButton")}catch{}function po(e,t){var n=["name","description","owner"],a=!1;if(!t.trim())return!0;let i=a?t.trim():t.toLowerCase().trim();return n.some(t=>{let n;return null!=(n="function"==typeof t?t(e):e[t])&&(a?String(n):String(n).toLowerCase()).includes(i)})}let pl={banner:"SpacesView-module__banner--ZHxIa",button:"SpacesView-module__button--j38nS",counter:"SpacesView-module__counter--ZdDOv",disabledButton:"SpacesView-module__disabledButton--Ygunf",description:"SpacesView-module__description--IyY7g",filterButtons:"SpacesView-module__filterButtons--qTV2E",metadata:"SpacesView-module__metadata--Sw1rv",metadataItem:"SpacesView-module__metadataItem--rLi5j",sharedSpacesTab:"SpacesView-module__sharedSpacesTab--dS9e3",benefitSections:"SpacesView-module__benefitSections--ZQRGR",benefitSection:"SpacesView-module__benefitSection--GRkgW",benefitIcon:"SpacesView-module__benefitIcon--Pk9zH",benefitTitle:"SpacesView-module__benefitTitle--NOGgu",benefitDescription:"SpacesView-module__benefitDescription--FU6Sj"};function pc(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(Q.A,{href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces",className:"mt-4 f5",target:"_blank",rel:"noopener noreferrer",children:"Need help? Read the docs"}),t[0]=e):e=t[0],e}function pd(e){let t,n,a,i,s,r,o,l,c,d,u,h=(0,p.c)(32),{copilotSpace:f,onDelete:g,onClick:y}=e,_=f.ownerIsOrg?ef.OrganizationIcon:ef.PersonIcon;h[0]!==f?(t=md(f),h[0]=f,h[1]=t):t=h[1];let x=t,v="Shared"===x?ef.PeopleIcon:ef.LockIcon,b=f.adminable||f.editable;return h[2]!==f?(n=(0,ca.Cb)(f),h[2]=f,h[3]=n):n=h[3],h[4]!==f.name?(a=(0,m.jsx)(en.Item.Title,{children:f.name}),h[4]=f.name,h[5]=a):a=h[5],h[6]!==f.description?(i=(0,m.jsx)(en.Item.Description,{children:(0,m.jsx)("div",{className:pl.description,children:f.description})}),h[6]=f.description,h[7]=i):i=h[7],h[8]!==_?(s=(0,m.jsx)(_,{size:16}),h[8]=_,h[9]=s):s=h[9],h[10]!==f.owner||h[11]!==s?(r=(0,m.jsxs)("span",{className:pl.metadataItem,children:[s,f.owner]}),h[10]=f.owner,h[11]=s,h[12]=r):r=h[12],h[13]!==v?(o=(0,m.jsx)(v,{size:16}),h[13]=v,h[14]=o):o=h[14],h[15]!==o||h[16]!==x?(l=(0,m.jsxs)("span",{className:pl.metadataItem,children:[o,x]}),h[15]=o,h[16]=x,h[17]=l):l=h[17],h[18]!==r||h[19]!==l?(c=(0,m.jsx)(en.Item.Metadata,{children:(0,m.jsxs)("div",{className:pl.metadata,children:[r,l]})}),h[18]=r,h[19]=l,h[20]=c):c=h[20],h[21]!==f||h[22]!==g||h[23]!==b?(d=b&&(0,m.jsx)(en.Item.Actions,{children:(0,m.jsx)(u0,{copilot:f,onDelete:g})}),h[21]=f,h[22]=g,h[23]=b,h[24]=d):d=h[24],h[25]!==y||h[26]!==d||h[27]!==n||h[28]!==a||h[29]!==i||h[30]!==c?(u=(0,m.jsxs)(en.Item,{href:n,onClick:y,children:[a,i,c,d]}),h[25]=y,h[26]=d,h[27]=n,h[28]=a,h[29]=i,h[30]=c,h[31]=u):u=h[31],u}function pu(){let e,t,n,a,i,s=(0,p.c)(5);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("h2",{className:"f3 fgColor-default",children:"Start your first space"}),s[0]=e):e=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:"my-8 d-flex flex-column gap-3 text-center",children:[e,(0,m.jsxs)("div",{className:"d-flex flex-items-center flex-column",children:[(0,m.jsx)(pr,{}),(0,m.jsx)(pc,{})]})]}),s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsxs)("div",{className:pl.benefitSection,children:[(0,m.jsx)("div",{className:pl.benefitIcon,children:(0,m.jsx)(ef.CodeIcon,{size:16})}),(0,m.jsx)("h3",{className:pl.benefitTitle,children:"Generate code"}),(0,m.jsx)("p",{className:pl.benefitDescription,children:"Produce code that follows your team's patterns."})]}),s[2]=n):n=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsxs)("div",{className:pl.benefitSection,children:[(0,m.jsx)("div",{className:pl.benefitIcon,children:(0,m.jsx)(ef.BookIcon,{size:16})}),(0,m.jsx)("h3",{className:pl.benefitTitle,children:"Share knowledge"}),(0,m.jsx)("p",{className:pl.benefitDescription,children:"Centralize docs so your team can quickly find answers."})]}),s[3]=a):a=s[3],s[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsxs)("li",{children:[t,(0,m.jsxs)("div",{className:pl.benefitSections,children:[n,a,(0,m.jsxs)("div",{className:pl.benefitSection,children:[(0,m.jsx)("div",{className:pl.benefitIcon,children:(0,m.jsx)(ef.ProjectIcon,{size:16})}),(0,m.jsx)("h3",{className:pl.benefitTitle,children:"Plan projects"}),(0,m.jsx)("p",{className:pl.benefitDescription,children:"Create requirements and issues your team can ship."})]})]})]}),s[4]=i):i=s[4],i}let pm=e=>e.shared&&e.collaborative;function pp({spaces:e,starredSpaces:t,isLoading:n,onDelete:a,onSpaceClick:i,searchQuery:s,currentUserLogin:r}){let[o,l]=(0,x.useState)("personal"),c=t&&t.length>0,d=tu.W.copilotSpacesReadAccessToUserOwnedSpaces,{copilotSpacesConfig:{userHasOrgs:u}}=(0,M.X)();(0,x.useEffect)(()=>{c&&l("starred")},[c]);let p=(0,x.useMemo)(()=>e?e.filter(e=>!!("starred"===o&&e.starred||"personal"===o&&!e.ownerIsOrg&&!e.shared||"org"===o&&e.ownerIsOrg||d&&"shared"===o&&pm(e))&&po(e,s)):[],[e,o,s,d]),{personalSpacesCount:h,orgSpacesCount:f,starredSpacesCount:g,sharedSpacesCount:y}=(0,x.useMemo)(()=>{if(!e)return{personalSpacesCount:0,orgSpacesCount:0,starredSpacesCount:0,sharedSpacesCount:0};let t=s.trim()?e.filter(e=>po(e,s)):e;return{personalSpacesCount:t.filter(e=>!e.ownerIsOrg&&!e.shared).length,orgSpacesCount:t.filter(e=>e.ownerIsOrg).length,starredSpacesCount:t.filter(e=>e.starred).length,sharedSpacesCount:d?t.filter(pm).length:0}},[e,s,d]),v=e&&!e.some(e=>e.creator===r)&&!n,b=e&&e.length>0&&p?.length===0&&!n,j=d&&y>0;return(0,m.jsxs)(en,{children:[(0,m.jsx)(en.Header,{children:(0,m.jsxs)("div",{role:"tablist","aria-label":"Filter spaces",className:pl.filterButtons,children:[c&&(0,m.jsxs)("button",{onClick:()=>l("starred"),role:"tab","aria-selected":"starred"===o,"aria-controls":"spaces-list",id:"starred-tab",className:pl.button,children:["Starred ",(0,m.jsx)("span",{className:pl.counter,children:g})]}),u||c||j?(0,m.jsxs)("button",{onClick:()=>l("personal"),role:"tab","aria-selected":"personal"===o,"aria-controls":"spaces-list",id:"personal-tab",className:pl.button,children:["Yours ",(0,m.jsx)("span",{className:pl.counter,children:h})]}):(0,m.jsxs)("span",{id:"disabled-personal-tab",role:"tab",className:pl.disabledButton,children:["Yours ",(0,m.jsx)("span",{className:pl.counter,children:h})]}),j&&(0,m.jsxs)("button",{onClick:()=>l("shared"),role:"tab","aria-selected":"shared"===o,"aria-controls":"spaces-list",id:"shared-with-me-tab",className:(0,_.$)(pl.button,pl.sharedSpacesTab),children:["Shared With Me ",(0,m.jsx)("span",{className:pl.counter,children:y})]}),u&&(0,m.jsxs)("button",{onClick:()=>l("org"),role:"tab","aria-selected":"org"===o,"aria-controls":"spaces-list",id:"org-tab",className:pl.button,children:["Organizations ",(0,m.jsx)("span",{className:pl.counter,children:f})]})]})}),(0,m.jsx)(en.List,{loading:n,id:"spaces-list","aria-labelledby":o,children:v&&p?.length===0?(0,m.jsx)(pu,{}):b?(0,m.jsxs)(en.EmptyState,{children:[(0,m.jsxs)("p",{children:["starred"===o&&"Spaces you star will appear here.","personal"===o&&"Spaces you create will appear here.","org"===o&&"Spaces belonging to your organizations will appear here.","shared"===o&&"Shared spaces will appear here."]}),(0,m.jsx)(pr,{}),(0,m.jsx)(pc,{})]}):p?.map(e=>(0,m.jsx)(pd,{copilotSpace:e,onDelete:()=>a(e),onClick:i},e.owner?`${e.owner}/${e.id}`:e.id))})]})}function ph(e){let t,n,a,i,s,r,o,l,c,d,u,h,f,g,y,_=(0,p.c)(33),{copilotSpaces:v}=e,b=(0,U.Pk)(),{ssoOrganizations:j}=b;_[0]!==j?(t=j.map(p_),_[0]=j,_[1]=t):t=_[1];let w=t,[N,S]=(0,x.useState)(null),[C,I]=(0,x.useState)(""),k=cl.Jt.getSpacesMcpBannerDismissalCount(),[T,E]=(0,x.useState)(k<2),L=void 0===v;_[2]!==v?(n=v?.filter(py),_[2]=v,_[3]=n):n=_[3];let A=n,{mutateAsync:R}=(0,ci.$7)();_[4]!==R?(a=async e=>{try{await R(e),S(null)}catch(e){S(e instanceof Error?e:Error(String(e)))}},_[4]=R,_[5]=a):a=_[5];let P=a;_[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{let e=cl.Jt.getSpacesMcpBannerDismissalCount();cl.Jt.setSpacesMcpBannerDismissalCount(e+1),E(!1)},_[6]=i):i=_[6];let O=i;return _[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(tj,{regionName:"Spaces"}),_[7]=s):s=_[7],_[8]!==N?(r=N&&(0,m.jsxs)(uk.A,{variant:"danger",children:[(0,m.jsx)(ef.AlertIcon,{}),"There was a problem deleting your space."]}),_[8]=N,_[9]=r):r=_[9],_[10]!==T?(o=T&&(0,m.jsx)(D.Banner,{children:(0,m.jsx)(q.l,{title:"Try Spaces in VSCode",hideTitle:!0,icon:(0,m.jsx)(ef.McpIcon,{}),description:"Spaces are now available through the GitHub MCP in VSCode.",variant:"upsell",primaryAction:(0,m.jsx)(q.l.PrimaryAction,{as:"a",href:ca.Ku,target:"_blank",rel:"noopener noreferrer",children:"Install"}),onDismiss:()=>{O()}})}),_[10]=T,_[11]=o):o=_[11],_[12]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)(D.Title,{children:"Spaces"}),c=(0,m.jsx)(D.Description,{children:"Spaces organize your files, pull requests, issues, and standards so Copilot can give better, more relevant help for your work."}),_[12]=l,_[13]=c):(l=_[12],c=_[13]),_[14]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsxs)(D.Header,{children:[l,c,(0,m.jsx)(D.Actions,{children:(0,m.jsx)(pr,{primary:!0})})]}),_[14]=d):d=_[14],_[15]!==w||_[16]!==j.length?(u=j.length>0&&!(0,G.G7)("global_sso_banner")&&(0,m.jsx)("div",{className:pl.banner,children:(0,m.jsx)(V.x,{protectedOrgs:w,redirectURI:pf})}),_[15]=w,_[16]=j.length,_[17]=u):u=_[17],_[18]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.jsx)(ld,{onSearch:I}),_[18]=h):h=_[18],_[19]!==v||_[20]!==P||_[21]!==L||_[22]!==C||_[23]!==A||_[24]!==b.currentUserLogin?(f=(0,m.jsx)(D.Section,{children:(0,m.jsx)(pp,{spaces:v,starredSpaces:A,isLoading:L,onDelete:P,onSpaceClick:pg,searchQuery:C,currentUserLogin:b.currentUserLogin})}),_[19]=v,_[20]=P,_[21]=L,_[22]=C,_[23]=A,_[24]=b.currentUserLogin,_[25]=f):f=_[25],_[26]!==u||_[27]!==f||_[28]!==o?(g=(0,m.jsxs)(D.Container,{width:"small",children:[o,d,u,h,f]}),_[26]=u,_[27]=f,_[28]=o,_[29]=g):g=_[29],_[30]!==g||_[31]!==r?(y=(0,m.jsxs)(tf.t,{fallback:s,children:[r,g]}),_[30]=g,_[31]=r,_[32]=y):y=_[32],y}function pf(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}function pg(){(0,tm.BI)("dotcom_chat.activate",{target:"SPACES_VIEW_SPACE_SELECTED",mode:"immersive"})}function py(e){return e.starred}function p_(e){return e.login}try{pc.displayName||(pc.displayName="DocsLink")}catch{}try{pd.displayName||(pd.displayName="SpacesListItem")}catch{}try{pu.displayName||(pu.displayName="FirstSpaceEmptyState")}catch{}try{pp.displayName||(pp.displayName="SpacesList")}catch{}try{ph.displayName||(ph.displayName="SpacesView")}catch{}function px(){let e,t,n,a,i,s,r,o,l,c,d,u,h,f=(0,p.c)(48),g=(0,U.Pk)(),{customCopilots:y}=g,_=(0,eQ.U)(),v=(0,ct.v)(),b=(0,Z.zy)(),j=(0,ci.BV)(),w=(0,ca.y_)(),N=j&&w,S=(0,ca.iI)(),{isNarrowViewport:C}=function(e){let t,n=(0,p.c)(2),a=function(e){let t,n,a,i=(0,p.c)(5);i[0]!==e?(t=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,i[0]=e,i[1]=t):t=i[1];let[s,r]=(0,x.useState)(t);return i[2]!==e?(n=()=>{let t=window.matchMedia(e),n=e=>{r(e.matches)};return r(t.matches),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},a=[e],i[2]=e,i[3]=n,i[4]=a):(n=i[3],a=i[4]),(0,x.useEffect)(n,a),s}(J.X);return n[0]!==a?(t={isNarrowViewport:a},n[0]=a,n[1]=t):t=n[1],t}();(0,ci.e9)(j),function(){let e=(0,U.Pk)(),{referenceId:t,messageIndex:n}=function(){let e,t,n,a=(0,p.c)(6),i=(0,Z.zy)();if(a[0]!==i.search){let n=new URLSearchParams(i.search);e=n.get("reference_id"),t=n.get("message_index"),a[0]=i.search,a[1]=e,a[2]=t}else e=a[1],t=a[2];let s=t,r=null;if(null!==s){let e=parseInt(s,10);isNaN(e)||(r=e)}return a[3]!==r||a[4]!==e?(n={referenceId:e,messageIndex:r},a[3]=r,a[4]=e,a[5]=n):n=a[5],n}(),[,a]=(0,Z.ok)(),i=(0,x.useMemo)(()=>e.messages??[],[e.messages]),s=(0,x.useMemo)(()=>null!==n&&n>=0&&n<i.length?i[n]:null,[i,n]),r=(0,x.useMemo)(()=>s?.references??e.currentReferences??[],[s?.references,e.currentReferences]),o=(0,x.useMemo)(()=>t&&r.length?r.find(e=>(0,nQ.Vb)(e)===t)??null:null,[t,r]),l=nJ({messageIndex:n??i.length,messageId:s?.id,messageTimestamp:s?.createdAt});(0,x.useEffect)(()=>{o&&(l(o),a(e=>{let t=new URLSearchParams(e);return t.delete("reference_id"),t.delete("message_index"),t}))},[o,l,a])}();let I=(0,eY.tZ)(),k=(0,eY.wI)(),{closePreviewPane:T,openPreviewPane:E,closeResourcePanel:L,openResourcePanel:A}=(0,eY.xx)();f[0]!==T||f[1]!==E?(e=e=>{e?E():T()},f[0]=T,f[1]=E,f[2]=e):e=f[2];let R=e;f[3]!==L||f[4]!==A?(t=e=>{e?A():L()},f[3]=L,f[4]=A,f[5]=t):t=f[5];let D=t;f[6]!==v||f[7]!==b?(n=(0,cn.bG)(v,b),f[6]=v,f[7]=b,f[8]=n):n=f[8];let P=n;if(v&&P){let e,t,n=P.Component;return f[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("span",{"data-favicon-override":tT}),f[9]=e):e=f[9],f[10]!==n||f[11]!==v||f[12]!==g?(t=(0,m.jsxs)(m.Fragment,{children:[e,(0,m.jsx)(x.Suspense,{children:(0,m.jsx)(n,{chatState:g,plugin:v})})]}),f[10]=n,f[11]=v,f[12]=g,f[13]=t):t=f[13],t}f[14]!==S||f[15]!==y||f[16]!==N||f[17]!==g.selectedThreadID||f[18]!==_?(a=N?(0,m.jsx)(ph,{copilotSpaces:y}):S?(0,m.jsx)(pn,{customCopilotId:S,selectedThreadID:g.selectedThreadID,textAreaRef:_}):null,f[14]=S,f[15]=y,f[16]=N,f[17]=g.selectedThreadID,f[18]=_,f[19]=a):a=f[19];let O=a;if(O){let e,t,n;return f[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(J.P.Header,{children:(0,m.jsx)(u8,{})}),f[20]=e):e=f[20],f[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(J.P.Sidebar,{children:(0,m.jsx)(X.U,{})}),f[21]=t):t=f[21],f[22]!==O?(n=(0,m.jsxs)(J.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:tT,children:[e,t,(0,m.jsx)(J.P.ColumnLeft,{children:O})]}),f[22]=O,f[23]=n):n=f[23],n}f[24]!==I||f[25]!==R?(i=[I,R],f[24]=I,f[25]=R,f[26]=i):i=f[26],f[27]!==k||f[28]!==D?(s=[k,D],f[27]=k,f[28]=D,f[29]=s):s=f[29],f[30]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(J.P.Sidebar,{children:(0,m.jsx)(X.U,{})}),f[30]=r):r=f[30],f[31]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)(J.P.Header,{children:(0,m.jsx)(uc,{})}),f[31]=o):o=f[31];let B=tu.W.stableConversationView?void 0:g.selectedThreadID;return f[32]!==C||f[33]!==B||f[34]!==_?(l=(0,m.jsx)(J.P.ColumnLeft,{children:(0,m.jsx)(d5,{isMobile:C,textAreaRef:_},B)}),f[32]=C,f[33]=B,f[34]=_,f[35]=l):l=f[35],f[36]!==k?(c=tu.W.copilotResourcePanel&&k&&(0,m.jsx)(ub,{}),f[36]=k,f[37]=c):c=f[37],f[38]!==_?(d=(0,m.jsx)(r4,{returnFocusRef:_}),f[38]=_,f[39]=d):d=f[39],f[40]!==c||f[41]!==d?(u=(0,m.jsxs)(J.P.ColumnRight,{className:"d-flex",children:[c,d]}),f[40]=c,f[41]=d,f[42]=u):u=f[42],f[43]!==u||f[44]!==i||f[45]!==s||f[46]!==l?(h=(0,m.jsxs)(J.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:tT,secondaryColumnState:i,resourcePanelState:s,children:[r,o,l,u]}),f[43]=u,f[44]=i,f[45]=s,f[46]=l,f[47]=h):h=f[47],h}try{px.displayName||(px.displayName="Layout")}catch{}let pv=(0,iM.E7)();function pb(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(t9.RelayEnvironmentProvider,{environment:pv,children:(0,m.jsx)(pj,{})}),t[0]=e):e=t[0],e}function pj(){let e=(0,p.c)(2),t=(0,M.X)();if(t?.copilotChatSettingEnabled){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(pw,{children:(0,m.jsx)(pS,{})}),e[0]=t):t=e[0],t}{let t;return e[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(l9,{}),e[1]=t):t=e[1],t}}function pw(e){let t,n,a,i,s,r,o,l=(0,p.c)(47),{children:c}=e,d=(0,M.X)(),u=cu(),h=d.requestedTopic;if((0,nQ.P)(h)){let e,n;l[0]!==h?(e=(0,nQ.UU)(h),l[0]=h,l[1]=e):e=l[1],l[2]!==e?(n={refs:[e],topic:void 0},l[2]=e,l[3]=n):n=l[3],t=n}else if(d.reference){let e,n;l[4]!==d.reference?(e=[d.reference],l[4]=d.reference,l[5]=e):e=l[5],l[6]!==h||l[7]!==e?(n={refs:e,topic:h},l[6]=h,l[7]=e,l[8]=n):n=l[8],t=n}else{let e,n;l[9]===Symbol.for("react.memo_cache_sentinel")?(e=[],l[9]=e):e=l[9],l[10]!==h?(n={refs:e,topic:h},l[10]=h,l[11]=n):n=l[11],t=n}let{refs:f,topic:g}=t;l[12]===Symbol.for("react.memo_cache_sentinel")?(n=(0,G.G7)("copilot_mission_control"),l[12]=n):n=l[12];let y=n;if(l[13]!==d.agentsEnabled||l[14]!==d.apiURL||l[15]!==d.graphqlApiUrl||l[16]!==d.loopsClientUrl||l[17]!==d.previewUrl||l[18]!==d.realIp||l[19]!==d.sparkEnabled||l[20]!==d.ssoOrganizations){if(a=[],tu.W.loopsPlugin){let e;l[22]!==d.apiURL||l[23]!==d.graphqlApiUrl||l[24]!==d.loopsClientUrl||l[25]!==d.previewUrl||l[26]!==d.realIp||l[27]!==d.ssoOrganizations?(e=new LoopsPlugin(d.apiURL,d.graphqlApiUrl,d.loopsClientUrl,d.ssoOrganizations.map(pN),d.previewUrl,d.realIp),l[22]=d.apiURL,l[23]=d.graphqlApiUrl,l[24]=d.loopsClientUrl,l[25]=d.previewUrl,l[26]=d.realIp,l[27]=d.ssoOrganizations,l[28]=e):e=l[28],a.push(e)}if(d.sparkEnabled){let e;l[29]===Symbol.for("react.memo_cache_sentinel")?(e=new SparkPlugin,l[29]=e):e=l[29],a.push(e)}if(d.agentsEnabled){let e;l[30]===Symbol.for("react.memo_cache_sentinel")?(e=new AgentsPlugin,l[30]=e):e=l[30],a.push(e)}if(y){let e;l[31]===Symbol.for("react.memo_cache_sentinel")?(e=new TasksPlugin,l[31]=e):e=l[31],a.push(e)}l[13]=d.agentsEnabled,l[14]=d.apiURL,l[15]=d.graphqlApiUrl,l[16]=d.loopsClientUrl,l[17]=d.previewUrl,l[18]=d.realIp,l[19]=d.sparkEnabled,l[20]=d.ssoOrganizations,l[21]=a}else a=l[21];let _=a;return l[32]!==c?(i=(0,m.jsx)(eY.BH,{children:c}),l[32]=c,l[33]=i):i=l[33],l[34]!==d||l[35]!==f||l[36]!==i||l[37]!==u||l[38]!==g?(s=(0,m.jsx)(U.Mj,{workerPath:d.searchWorkerFilePath,threadId:u,refs:f,mode:"immersive",topic:g,ssoOrganizations:d.ssoOrganizations,copilotUpsellBannerDismissed:d.copilotUpsellBannerDismissed,copilotChatPayload:d,children:i}),l[34]=d,l[35]=f,l[36]=i,l[37]=u,l[38]=g,l[39]=s):s=l[39],l[40]!==d.apiURL||l[41]!==d.ssoOrganizations||l[42]!==s?(r=(0,m.jsx)(oR.hh,{apiURL:d.apiURL,ssoOrgs:d.ssoOrganizations,children:s}),l[40]=d.apiURL,l[41]=d.ssoOrganizations,l[42]=s,l[43]=r):r=l[43],l[44]!==_||l[45]!==r?(o=(0,m.jsx)(eQ.KL,{children:(0,m.jsx)(l4.LB,{children:(0,m.jsx)(tN.Hb,{plugins:_,children:r})})}),l[44]=_,l[45]=r,l[46]=o):o=l[46],o}function pN(e){return e.id}function pS(){let e,t,n,a=(0,p.c)(1);!function(){let e,t,n=(0,p.c)(7),a=cu(),i=(0,x.useRef)(!0),s=(0,x.useRef)(null),r=(0,W.b)(),{threads:o,selectedThreadID:l}=(0,U.Pk)(),c=cd(),{selectedThreadID:d,sharedThreadChannel:u}=(0,U.Pk)(),m=(0,W.b)();(0,tl.x)(u,()=>{m.fetchSharedThreadMessages(d)}),n[0]!==c||n[1]!==r||n[2]!==l||n[3]!==a||n[4]!==o?(e=()=>{if(i.current){i.current=!1,s.current=a,c?r.fetchSharedThreadMessages(l):r.fetchMessages(l);return}if(s.current!==a){if(s.current=a,a===l)return;let e=a&&o?.get(a);r.selectThread(e||null,{includeThreads:!1,clearTopic:!0})}},t=[r,a,o,l,c],n[0]=c,n[1]=r,n[2]=l,n[3]=a,n[4]=o,n[5]=e,n[6]=t):(e=n[5],t=n[6]),(0,x.useEffect)(e,t)}(),function(){let e,t,n=(0,p.c)(8),{selectedThreadID:a}=(0,U.Pk)(),i=(0,ct.v)(),s=(0,c8.M)((0,Z.Zp)());n[0]!==s||n[1]!==i?.skipSyncRouteToThread||n[2]!==a?(e=()=>{if(!a||i?.skipSyncRouteToThread)return;let e=`${nQ.Jz}/c/${a}`,t=`${nQ.Jz}/share/${a}`,n=window.location.pathname;n.startsWith(e)||n.startsWith(t)||s.current(e)},n[0]=s,n[1]=i?.skipSyncRouteToThread,n[2]=a,n[3]=e):e=n[3];let r=i?.skipSyncRouteToThread;n[4]!==s||n[5]!==a||n[6]!==r?(t=[s,r,a],n[4]=s,n[5]=a,n[6]=r,n[7]=t):t=n[7],(0,x.useEffect)(e,t)}();let i=(0,p.c)(3),s=(0,W.b)();return i[0]!==s?(t=()=>{let e=()=>{window.location.href.includes("/r/")?(s.showTopicPicker(!1),s.selectThread(null)):window.location.href.includes("/c/")||(s.showTopicPicker(!0),s.selectThread(null))};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},n=[s],i[0]=s,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,x.useEffect)(t,n),!function(){let e,t,n,a,i=(0,p.c)(11),s=(0,oD.y)(),{selectedThreadID:r,fetchSharedThreads:o}=(0,U.bP)("selectedThreadID","fetchSharedThreads"),l=!!o?.shareId&&r===o?.shareId;i[0]!==l||i[1]!==r||i[2]!==s?(e=()=>{r&&!l&&s.fetchAndLoadTraces(r)},t=[r,s,l],i[0]=l,i[1]=r,i[2]=s,i[3]=e,i[4]=t):(e=i[3],t=i[4]),(0,x.useEffect)(e,t),i[5]!==o||i[6]!==l||i[7]!==r||i[8]!==s?(n=()=>{o?.ok&&o.originalThreadId&&l&&r&&s.fetchAndLoadTraces(o.originalThreadId,r)},a=[o,s,l,r],i[5]=o,i[6]=l,i[7]=r,i[8]=s,i[9]=n,i[10]=a):(n=i[9],a=i[10]),(0,x.useEffect)(n,a)}(),a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(px,{}),a[0]=e):e=a[0],e}try{pb.displayName||(pb.displayName="CopilotImmersive")}catch{}try{pj.displayName||(pj.displayName="CopilotImmersiveNoRelay")}catch{}try{pw.displayName||(pw.displayName="CopilotImmersiveProviders")}catch{}try{pS.displayName||(pS.displayName="Immersive")}catch{}(0,u.o)("copilot-immersive-v1",()=>({App:h,routes:[(0,d.a)({path:"/copilot",Component:pb,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/c/:threadID",Component:pb,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/d/:docsetName",Component:pb}),(0,d.a)({path:"/copilot/r/:owner/:repository",Component:pb}),(0,d.a)({path:"/copilot/share/:threadID",Component:pb}),(0,d.a)({path:"/copilot/loop/share",Component:pb,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/loops/share/:shareID",Component:pb,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/loops",Component:pb,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/l/:loopID",Component:pb,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/workbench",Component:pb,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/spark",Component:pb,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/spaces",Component:pb}),(0,d.a)({path:"/copilot/spaces/:spaceID",Component:pb}),(0,d.a)({path:"/copilot/spaces/:owner/:spaceNumber",Component:pb}),(0,d.a)({path:"/copilot/spaces/:owner/:spaceNumber/edit",Component:pb}),(0,d.a)({path:"/copilot/spaces/:spaceID/edit",Component:pb}),(0,d.a)({path:"/copilot/spaces/new",Component:pb}),(0,d.a)({path:"/copilot/agents",Component:pb}),(0,d.a)({path:"/copilot/tasks/pull/:globalID",Component:pb})]}))},93380:(e,t,n)=>{n.d(t,{B:()=>s});var a=n(21728),i=n(96540);function s(e){let t,n,s,r=(0,a.c)(4),[o,l]=(0,i.useState)(e);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>l(!0),r[0]=t):t=r[0];let c=t;r[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>l(!1),r[1]=n):n=r[1];let d=n;return r[2]!==o?(s=[o,c,d],r[2]=o,r[3]=s):s=r[3],s}},41649:(e,t,n)=>{n.d(t,{K:()=>r});var a=n(21728),i=n(88431),s=n(96540);let r=e=>{let t,n,r,o=(0,a.c)(4),l=(0,s.useRef)(e);return o[0]!==e?(t=()=>{l.current=e},n=[e],o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,i.N)(t,n),o[3]===Symbol.for("react.memo_cache_sentinel")?(r=(...e)=>l.current?.(...e),o[3]=r):r=o[3],r}},78456:(e,t,n)=>{n.d(t,{Io:()=>a});let a=[{id:"dummy-1",dummy:!0,owned:!0,title:"Edit writing",description:"Update writing to make it more engaging",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1a",title:"Your writing",description:"The writing you want to edit",type:"text",metadata:{inputType:"text"},content:`There is huge potential in building complex, repeatable pipelines that take advantage of LLM capabilities. A way for anyone to create and share tools. A few examples:

- Scientists sharing workflows for turning conference notes into a queryable artifact
- Scientists creating a pipeline for polishing a draft to adhere to proposal writing requirements
- Developers building a \u{201C}check for security flaws\u{201D} pipeline, accessible via API / vscode extension
- Library maintainers creating a \u{201C}make a new codebase with Next.js" or \u{201C}add Tailwind to your codebase\u{201D} pipeline
- Artists building a pipeline to generate images of a certain style. Or process a sketch into a branded image.
- Generating a customized analysis of all of a lawyer\u{2019}s cases
- Summarize medical research on a topic, using only the most trustable sources

I wager there\u{2019}s a huge market in building and discovering pipelines, and a good implementation will look a bit like ChatGPT with people of many stripes building and using them.

GitHub is the right place for this kind of ecosystem for a few reasons:

- It ties into the spirit of Open Source
- It already has a huge audience to help with the cold start problem
- It mirror\u{2019}s GitHub\u{2019}s mission to make \u{201C}code\u{201D} accessible to a larger audience and the platform valuable to more than just developers. The future will look like people of any occupation \u{201C}writing code\u{201D} (really, just building things with logic)`},{id:"2a",title:"Edit guide",description:"The guide on how to edit writing",type:"text",metadata:{inputType:"text"},content:`# Academish Voice

pvh / Aug 2022

Our publications follow what we call \u{201C}*academish*\u{201D} voice. We follow a largely academic style in our writing but avoid certain academic tendencies.

## Academic Style

- **Make no claims without support.** If you have made an unsupported claim consider its centrality to your argument. If \u{201C}many developers agree\u{201D}, we should be able to link to a source or describe how we know that. If you can\u{2019}t defend it, you should get rid of it.
- **Avoid absolutist language.** It\u{2019}s not \u{201C}the main problem\u{201D}, it\u{2019}s \u{201C}a problem\u{201D}. (Unless, of course, you can defend the claim.)
- **Be precise and specific with your descriptions.** Instead of saying something \u{201C}feels great\u{201D}, describe how it feels. Don\u{2019}t say something \u{201C}is a problem\u{201D} unless you describe what the problem is or to whom. If you\u{2019}re tempted to say something vague because you\u{2019}re not sure, either do enough research until you\u{2019}re sure, or don\u{2019}t say it.
- **Avoid hyperbole.** Use adjectives to add precision, not to persuade. Claiming \u{201C}immense benefits\u{201D} is only appropriate if you have developed a commercially viable fusion power plant. Delete words that are only for emphasis, and keep only those that add substance (e.g. quantify).
- **Structure your writing for incremental reading.** Don\u{2019}t bury the lede. A reader should be able to understand the goals and conclusions of an essay by reading the first couple of paragraphs. Individual sections should briefly reiterate any important material and/or link back to where it is introduced. This may feel repetitive at times but aids readers who take several sessions to read a piece or who jump straight to the sections that interest them.
- **Give credit to others.** Cite earlier work. Link to sources for terms and ideas. Give thanks to contributors, reviewers, and advisors.
- **Be humble and transparent about shortcomings and problems.** We want readers to build on our work, not buy our product.

## Ink & Switch Style

- **Assume the reader is an interested generalist.** Explain jargon. Academic writing is dense with domain terminology because it assumes readers are \u{201C}up to date on the field.\u{201D}  Ink & Switch Essays make use of marginalia in what we call \u{201C}asides\u{201D} to define uncommon terminology. Concretely, you don\u{2019}t need to gloss \u{201C}HTML\u{201D}, but you should probably gloss \u{201C}CRDT\u{201D}.
- **Carefully consider section headings.** Headings should legibly communicate the shape of the essay and serve as a roadmap for a reader to skip to the part of an essay that\u{2019}s most interesting to them. Similarly, avoid including unrelated material in a section with a particular title. If a user already knows \u{201C}How CRDTs Work\u{201D} then they shouldn\u{2019}t miss (much) important information about the project by skipping reading that section.
- **Embrace interactive demonstrations, animations, illustration, and videos.** Sometimes an illustration or demo can offer more clarity on a topic than text alone. As long as the content is self-contained and doesn\u{2019}t rely on external sources, it should be legible for many years to come and viewable offline.
- **It\u{2019}s okay to share hunches and beliefs as long as they\u{2019}re appropriately labeled.** Don\u{2019}t be shy about drawing conclusions, just be clear about the degree of confidence you have and where it comes from.
- **Ensure content looks good in PDF / printed form.** Obviously you lose the elements above, but the PDF version of a paper shouldn\u{2019}t have giant \u{25B6}\u{FE0F} icons obscuring an image. Interactive figures should display a meaningful static view.
- **Use \u{201C}asides\u{201D} for supportive content and marginalia.** Asides can expand on references to other work, link out to related projects, or just share interesting context or historical tidbits.
- **Deploy persuasive or emotional writing appropriately.** You can be enthusiastic in describing your goals but be modest in how you describe your solutions.
- **Keep it classy.** We don\u{2019}t dismiss other people\u{2019}s work or insult their products. Everything around you was made by someone working really hard on it. If we have found a better way, we should show gratitude to those who helped us realize the path forward and humility about our contributions.
- **Sweat the details.** Make sure your colors are carefully chosen. Images should be clear and at the right bit rate. Choose your words carefully. Interactions should be delightful.

The result of these elements should be an essay that is confident, accurate, and readable to almost anyone with a background in technology. Our essays are often long (probably too long) but should consistently reward patient reading and serve as a reference to their readers for many years to come.

---

## About this page

This document aims to articulate the stylistic elements and voice of Ink & Switch Essays.

### **September 1, 2022**

@Martin Kleppmann added some details on academic style.

### **August 17, 2022**

@Todd Matthews made some formatting edits for continuity and scanability.

### **August 16, 2022**

@Peter van Hardenberg created this document. Began with @Adam Wiggins\u{2019} "Essay Playbook" and added notes about Academish Voice, which aim to capture the stylistic elements he looks for when I reading essay drafts. Many of these elements came from @Martin Kleppmann  and @Adam Wiggins reviews of my past writing, so credit to them. This is probably quite useful for everyone working on an essay right now, but is probably not comprehensive. If I've missed anything or anything here is controversial or unclear please feel free to inquire.`},{id:"3a",title:"Edited writing",description:"Writing with suggested changes",type:"prompt",content:"You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}."}]},{id:"dummy-2",dummy:!0,title:"Document this function",owned:!0,description:"Document this function so it's easy to understand",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1b",title:"Function to document",description:"The function to document",content:`export function createNodePrompt(node: Node, nodeMap: Record<string, Node>): string {
  let content = node.content;
  const regex = /{{([\\w-]+)}}/g;
  let match;

  while ((match = regex.exec(content)) !== null) {
    const id = match[1];
    const referencedNode = nodeMap[id];
    if (referencedNode) {
      const replacementContent = createNodePrompt(referencedNode, nodeMap);
      content = content.replace(match[0], replacementContent);
    }
  }

  return content;
}`,type:"code"},{id:"2b",title:"Documentation guide",description:"The documentation for the function",content:`Minimum Viable Documentation
A small set of fresh and accurate docs is better than a large assembly of \u{201C}documentation\u{201D} in various states of disrepair.

Write short and useful documents. Cut out everything unnecessary, including out-of-date, incorrect, or redundant information. Also make a habit of continually massaging and improving every doc to suit your changing needs. Docs work best when they are alive but frequently trimmed, like a bonsai tree.

See also these Agile Documentation best practices.

Update Docs with Code
Change your documentation in the same CL as the code change. This keeps your docs fresh, and is also a good place to explain to your reviewer what you\u{2019}re doing.

A good reviewer can at least insist that docstrings, header files, README.md files, and any other docs get updated alongside the CL.

Delete Dead Documentation
Dead docs are bad. They misinform, they slow down, they incite despair in engineers and laziness in team leads. They set a precedent for leaving behind messes in a code base. If your home is clean, most guests will be clean without being asked.

Just like any big cleaning project, it\u{2019}s easy to be overwhelmed. If your docs are in bad shape:

Take it slow, doc health is a gradual accumulation.
First delete what you\u{2019}re certain is wrong, ignore what\u{2019}s unclear.
Get your whole team involved. Devote time to quickly scan every doc and make a simple decision: Keep or delete?
Default to delete or leave behind if migrating. Stragglers can always be recovered.
Iterate.
Prefer the Good Over the Perfect
Documentation is an art. There is no perfect document, there are only proven methods and prudent guidelines. See Better is better than best.

Documentation is the Story of Your Code
Writing excellent code doesn\u{2019}t end when your code compiles or even if your test coverage reaches 100%. It\u{2019}s easy to write something a computer understands, it\u{2019}s much harder to write something both a human and a computer understand. Your mission as a Code Health-conscious engineer is to write for humans first, computers second. Documentation is an important part of this skill.

There\u{2019}s a spectrum of engineering documentation that ranges from terse comments to detailed prose:

Meaningful names: Good naming allows the code to convey information that would otherwise be relegated to comments or documentation. This includes nameable entities at all levels, from local variables to classes, files, and directories.

Inline comments: The primary purpose of inline comments is to provide information that the code itself cannot contain, such as why the code is there.

Method and class comments:

Method API documentation: The header / Javadoc / docstring comments that say what methods do and how to use them. This documentation is the contract of how your code must behave. The intended audience is future programmers who will use and modify your code.

It is often reasonable to say that any behavior documented here should have a test verifying it. This documentation details what arguments the method takes, what it returns, any \u{201C}gotchas\u{201D} or restrictions, and what exceptions it can throw or errors it can return. It does not usually explain why code behaves a particular way unless that\u{2019}s relevant to a developer\u{2019}s understanding of how to use the method. \u{201C}Why\u{201D} explanations are for inline comments. Think in practical terms when writing method documentation: \u{201C}This is a hammer. You use it to pound nails.\u{201D}

Class / Module API documentation: The header / Javadoc / docstring comments for a class or a whole file. This documentation gives a brief overview of what the class / file does and often gives a few short examples of how you might use the class / file.

Examples are particularly relevant when there\u{2019}s several distinct ways to use the class (some advanced, some simple). Always list the simplest use case first.

README.md: A good README.md orients the new user to the directory and points to more detailed explanation and user guides:

What is this directory intended to hold?
Which files should the developer look at first? Are some files an API?
Who maintains this directory and where I can learn more?
See the README.md guidelines.

docs: The contents of a good docs directory explain how to:

Get started using the relevant API, library, or tool.
Run its tests.
Debug its output.
Release the binary.
Design docs, PRDs: A good design doc or PRD discusses the proposed implementation at length for the purpose of collecting feedback on that design. However, once the code is implemented, design docs should serve as archives of these decisions, not as half-correct docs (they are often misused).

Other external docs: Some teams maintain documentation in other locations, separate from the code, such as Google Sites, Drive, or wiki. If you do maintain documentation in other locations, you should clearly point to those locations from your project directory (for example, by adding an obvious link to the location from your project\u{2019}s README.md).

Duplication is Evil
Do not write your own guide to a common Google technology or process. Link to it instead. If the guide doesn\u{2019}t exist or it\u{2019}s badly out of date, submit your updates to the appropriate directory or create a package-level README.md. Take ownership and don\u{2019}t be shy: Other teams will usually welcome your contributions.`,type:"text",metadata:{inputType:"text"}},{id:"3b",title:"My personal skillset",description:"",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"4b",title:"Documented code",description:"The code with documentation",content:`You're documenting your code for your team.

Update this code: {{1b}}

Using this guide: {{2b}}]

And incorporate {{3b}}`,type:"prompt"},{id:"5b",title:"Function tests",description:"Generate a test for the code",content:"You're generating a Jest test for {{4b}}. Our testing guidelines: {{6b}}",type:"prompt"},{id:"6b",title:"Testing guidelines",description:"The guidelines for testing",content:`The Test Anatomy

\u{26AA} \u{FE0F} 1.1 Include 3 parts in each test name
\u{2705} Do: A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:

(1) What is being tested? For example, the ProductsService.addNewProduct method

(2) Under what circumstances and scenario? For example, no price is passed to the method

(3) What is the expected result? For example, the new product is not approved


\u{274C} Otherwise: A deployment just failed, a test named \u{201C}Add product\u{201D} failed. Does this tell you what exactly is malfunctioning?


\u{1F447} Note: Each bullet has code examples and sometime also an image illustration. Click to expand



\u{26AA} \u{FE0F} 1.2 Structure tests by the AAA pattern
\u{2705} Do: Structure your tests with 3 well-separated sections Arrange, Act & Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:

1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects, and any other preparation code

2nd A - Act: Execute the unit under test. Usually 1 line of code

3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code


\u{274C} Otherwise: Not only do you spend hours understanding the main code but what should have been the simplest part of the day (testing) stretches your brain


\u{26AA} \u{FE0F}1.3 Describe expectations in a product language: use BDD-style assertions
\u{2705} Do: Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using expect or should and not using custom code. If Chai & Jest doesn't include the desired assertion and it\u{2019}s highly repeatable, consider extending Jest matcher (Jest) or writing a custom Chai plugin

\u{274C} Otherwise: The team will write less tests and decorate the annoying ones with .skip()


\u{26AA}  1.4 Stick to black-box testing: Test only public methods
\u{2705} Do: Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as behavioral testing. On the other side, should you test the internals (white box approach) \u{2014} your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden

\u{274C} Otherwise: Your tests behave like the boy who cried wolf: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored\u{2026}


\u{26AA}  1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies
\u{2705} Do: Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (Read here a reminder about test doubles: mocks vs stubs vs spies).

Before using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If not, it\u{2019}s a white-box testing smell.

For example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some \u{2018}No Response\u{2019} return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down \u{2014} this is again a behavioral check which is likely to appear in a requirements doc (\u{201C}Send an email if payment couldn\u{2019}t be saved\u{201D}). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types \u{2014} then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently

\u{274C} Otherwise: Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend



\u{26AA} 1.6 Don\u{2019}t \u{201C}foo\u{201D}, use realistic input data
\u{2705} Do: Often production bugs are revealed under some very specific and surprising input \u{2014} the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like Chance or Faker to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit cards, company names, and even \u{2018}lorem ipsum\u{2019} text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers' data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).

\u{274C} Otherwise: All your development testing will falsely show green when you use synthetic inputs like \u{201C}Foo\u{201D}, but then production might turn red when a hacker passes-in a nasty string like \u{201C}@3e2ddsf . ##\u{2019} 1 fdsfds . fds432 AAAA\u{201D}

`,type:"text",metadata:{inputType:"text"}},{id:"7b",title:"Test results",description:"Run the test for the code",content:"You're running tests for {{5b}}. Respond with the results of the tests.",type:"prompt"},{id:"8",title:"Documented and tested code",description:"The code with documentation and test",content:`Here's the documented code: {{4b}}.

Here's the {{5b}} and the {{7b}}.

Respond with "\u{2705} OK" if the tests all pass, and show a code block with the documented code and tests.`,type:"prompt"}]},{id:"dummy-3",dummy:!0,title:"Generate a course teaching me how this code works",owned:!0,description:"Generate a course teaching me how this code works",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1c",title:"Code to explain",description:"The code to explain",content:`import {ticks, tickIncrement} from "d3-array";
import continuous, {copy} from "./continuous.js";
import {initRange} from "./init.js";
import tickFormat from "./tickFormat.js";

export function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    while (maxIter-- > 0) {
      step = tickIncrement(start, stop, count);
      if (step === prestep) {
        d[i0] = start
        d[i1] = stop
        return domain(d);
      } else if (step > 0) {
        start = Math.floor(start / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start = Math.ceil(start * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }

    return scale;
  };

  return scale;
}

export default function linear() {
  var scale = continuous();

  scale.copy = function() {
    return copy(scale, linear());
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}`,type:"code"},{id:"2c",title:"My skillset",description:"My skillset",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"3c",title:"Course outline",description:"The outline of the course",content:"You're generating a course teaching me how to understand {{1c}}. I have the following skillset: {{2c}}. Keep it short and concise, with 2-3 sections.",type:"prompt"},{id:"4c",title:"Course content",description:"The content of the course",content:`Generate a short walkthrough that teaches me how to understand {{1c}}. I have the following skillset: {{2c}}.

Flesh out the {{3c}}. Respond with a short walkthrough, using code blocks for code samples.`,type:"prompt"}]},{id:"dummy-4",dummy:!0,title:"Generate app name",owned:!0,description:"Generate and validate potential names for your app",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1d",title:"App description",description:"Describe your app's purpose and target audience",type:"text",metadata:{inputType:"text"},content:"An email app that uses AI to help you write emails faster."},{id:"2d",title:"Generate names",description:"Generate potential names based on description",type:"prompt",content:`You're a creative app naming expert. Generate 10 potential names for an app based on this description: {{1d}}

Rules for the names:
- Keep them short and memorable
- Make sure they're easy to spell
- Consider domain name availability
- Avoid trademarked terms

Format: a JSON array with one name per line`},{id:"3d",title:"Check domain availability",description:"Check if domains are available for the generated names",type:"code",content:`// This code checks domain availability using DNS lookup
  const nameList = {{2d}}

  const results = [];

  for (const name of nameList) {
    const cleanName = name.toLowerCase().replace(/[^a-z0-9]/g, '');
    const domain = cleanName + '.com';

    try {
      // Try to resolve the domain - if it fails, domain might be available
      const response = await fetch(\`https://dns.google/resolve?name=\${domain}\`);
      const data = await response.json();

      results.push({
        name: name,
        domain: domain,
        available: data.Status === 3 || !data.Answer // NXDOMAIN status or no answer means likely available
      });
    } catch (error) {
      results.push({
        name: name,
        domain: domain,
        error: 'Failed to check availability'
      });
    }
  }

  return results;
`}]},{id:"dummy-5",dummy:!0,title:"Wikipedia",owned:!0,description:"Generate a wiki article on a topic or question",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1e",title:"Topic or question",description:"The topic or question to generate a wiki article on",type:"text",metadata:{inputType:"text"},content:"When do babies start to crawl?"},{id:"2e",title:"Split into topics",description:"Split the topic or question into topics",type:"text",metadata:{inputType:"text"},content:`You're creating a write-up on a concept. You need to split it into 5-6 sections that cover interesting aspects of the concept. Respond with a JSON array with one string per topic.

For example:
Concept: Dogs as pets
Topics:
["Dog breeds", "Dog training", "Dog costs", "Dog health", "Dog accessories"]


Concept: {{1e}}
Topics:`},{id:"3e",title:"Generate article",description:"Generate a wiki article on the concept",type:"prompt",content:"You're a wiki article generator. Generate a wiki article on the concept: {{1e}}. Split it into sections: {{2e}} with a title, a bolded key statement, and a list or 2 paragraphs."},{id:"4e",title:"Image",description:"An image for the article",type:"prompt",content:"Generate an ascii art image for the article: {{3e}}"}]},{id:"dummy-6",dummy:!0,title:"Compare two prompts",owned:!0,description:"Compare the performance of two prompts",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1f",title:"Prompt 1",description:"The first prompt to compare",type:"prompt",content:"Make me a haiku about the color blue"},{id:"2f",title:"Prompt 2",description:"The second prompt to compare",type:"prompt",content:"You are a haiku generator. Make a haiku about the color blue. Your job depends on it."},{id:"3f",title:"Important metrics",description:"The important metrics to compare the prompts on",type:"text",metadata:{inputType:"text"},content:"Relevance, creativity, accuracy, completeness, and style"},{id:"4f",title:"Compare",description:"Compare the performance of the two prompts",type:"prompt",content:"For each of the {{3f}}, compare the two prompts: {{1f}} and {{2f}}. Respond with a JSON array with one object per metric, with the metric name and a winner key that says which prompt is better (just say 1 or 2)."}]},{id:"dummy-7",dummy:!0,title:"testing node with offset",owned:!0,description:"Test the edge render behavior for diagram with node offset",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"lichin-lin",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-7d",metadata:{inputType:"date"}},{id:"repos",type:"text",title:"Repositories",description:"List of repositories to include in the report (one per line, e.g. primer/react)",content:`primer/react
primer/css
primer/components`,metadata:{inputType:"text"}},{id:"repo_query",type:"prompt",title:"Repository Query Builder",description:"Builds the repository query string for GitHub search",content:`Convert this list of repositories into a GitHub search query format. For each repository on a new line in {{repos}}, add 'repo:' prefix and combine with OR operators.

For example:
- If input is 'primer/react\\nprimer/css'
- Output should be 'repo:primer/react OR repo:primer/css'

Only return the query string, nothing else.`},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) author:{{1}} is:issue created:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          repository {
            nameWithOwner
          }
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) is:pr reviewed-by:{{1}} updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          repository {
            nameWithOwner
          }
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) involves:{{1}} is:issue updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          repository {
            nameWithOwner
          }
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Combined Activity Summary",description:"Summary report of the first responder's activity across all repositories",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity across multiple repositories over the past week. The repositories included are: {{repos}}

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers across all repositories)
2. Repository Breakdown (activity summary per repository)
3. Issue Activity
   - Created Issues (grouped by repository)
   - Issue Involvement (comments, assignments, grouped by repository)
4. PR Review Activity (highlight significant reviews, grouped by repository)
5. Key Observations (patterns across repositories, areas needing attention)

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift. Pay special attention to cross-repository patterns and any repositories that may need extra attention.`}]}]},295:(e,t,n)=>{n.d(t,{h:()=>c});var a=n(21728),i=n(97665),s=n(94747),r=n(99519),o=n(80770),l=n(99993);function c(){let e,t,n,c=(0,a.c)(7),d=(0,i.jE)(),u=(0,r.EY)();return c[0]!==u?(e=async e=>await u.deleteLoop(e),c[0]=u,c[1]=e):e=c[1],c[2]!==d?(t=(e,t)=>{e.success&&(d.removeQueries({queryKey:[l.M1,t]}),d.invalidateQueries({queryKey:[o.n]}))},c[2]=d,c[3]=t):t=c[3],c[4]!==e||c[5]!==t?(n={mutationFn:e,onSuccess:t},c[4]=e,c[5]=t,c[6]=n):n=c[6],(0,s.n)(n)}},12465:(e,t,n)=>{n.d(t,{P:()=>u,W:()=>m});var a=n(21728),i=n(94747),s=n(97665),r=n(46747),o=n(99519),l=n(99993),c=n(33026);function d(e){let t,n,s=(0,a.c)(5),r=(0,o.EY)();return s[0]!==r?(t=async e=>{let{loopID:t,updateFn:n}=e;return await r.updateLoop(t,n)},s[0]=r,s[1]=t):t=s[1],s[2]!==e||s[3]!==t?(n={mutationFn:t,...e},s[2]=e,s[3]=t,s[4]=n):n=s[4],(0,i.n)(n)}function u(){let e,t=(0,a.c)(2),n=(0,s.jE)();return t[0]!==n?(e={onMutate:async e=>{let{loopID:t,updateFn:a}=e;await n.cancelQueries({queryKey:(0,l.c_)(t,c.kj)});let i=n.getQueryData((0,l.c_)(t,c.kj)),s=i?.version?n.getQueryData((0,l.c_)(t,i.version)):null;if(i){let e=a(i);n.setQueryData((0,l.c_)(t,c.kj),e),e.version&&n.setQueryData((0,l.c_)(t,e.version),e)}return{previousDraftLoop:i,previousVersionedLoop:s,loopID:t}},onError:(e,t,a)=>{a?.previousDraftLoop&&(n.setQueryData((0,l.c_)(a.loopID,c.kj),a.previousDraftLoop),a.previousVersionedLoop&&a.previousDraftLoop.version&&n.setQueryData((0,l.c_)(a.loopID,a.previousDraftLoop.version),a.previousVersionedLoop))}},t[0]=n,t[1]=e):e=t[1],d(e)}function m(){let e,t,n=(0,a.c)(6),i=(0,s.jE)(),o=d(),u=(0,r.d)(o.mutate,500);n[0]!==u||n[1]!==i?(e=async(e,t)=>{let{loopID:n,updateFn:a}=e;await i.cancelQueries({queryKey:(0,l.c_)(n,c.kj)});let s=a(i.getQueryData((0,l.c_)(n,c.kj))??null);return i.setQueryData((0,l.c_)(n,c.kj),s),u({loopID:n,updateFn:a}),t?.onSuccess?.(),s},n[0]=u,n[1]=i,n[2]=e):e=n[2];let m=e;return n[3]!==m||n[4]!==o?(t={...o,mutate:m},n[3]=m,n[4]=o,n[5]=t):t=n[5],t}},80770:(e,t,n)=>{n.d(t,{C:()=>o,n:()=>r});var a=n(21728),i=n(97286),s=n(99519);let r="all-loops";function o(){let e,t,n=(0,a.c)(3),o=(0,s.EY)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r],n[0]=e):e=n[0],n[1]!==o?(t={queryKey:e,queryFn:async()=>{let e=await o.getAllLoops();if(!e.success)throw Error(e.error);return e.data.sort(l)},refetchOnMount:!0},n[1]=o,n[2]=t):t=n[2],(0,i.I)(t)}function l(e,t){return t.updatedAt-e.updatedAt}},48057:(e,t,n)=>{n.d(t,{Cv:()=>u,Qk:()=>y,vx:()=>f,wu:()=>h});var a=n(21728),i=n(97286),s=n(99519),r=n(5533),o=n(33026),l=n(50050),c=n(99993);let d=[400,401,403,404];function u(){let{data:e}=(0,c._N)(p,"latest"),t=(0,l.Ud)(m);return t===o.qD||t===o.kj?e:t}function m(e){return e.version}function p(e){return e?.version}function h(e,t){return["execution",e,t]}function f(){let e,t=(0,a.c)(3),{data:n}=(0,c._N)(g),i=u(),s=n??"",r=i??"";return t[0]!==s||t[1]!==r?(e=h(s,r),t[0]=s,t[1]=r,t[2]=e):e=t[2],e}function g(e){return e?.id}function y(e){let t,n,l,d,m=(0,a.c)(14),{data:p}=(0,c._N)(x),f=u(),g=(0,s.EY)(),y=p??"",v=f??"";m[0]!==y||m[1]!==v?(t=h(y,v),m[0]=y,m[1]=v,m[2]=t):t=m[2],m[3]!==p||m[4]!==g||m[5]!==f?(n=async()=>{if(!p||!f)return null;let e=await g.getExecution(p,f,o.qD);if(!e.success){let t=Error("Error fetching execution.");throw t.cause=e.httpStatus,t}let t=e.data;return g.isExecutionRunning(t.id)!==(0,r.y)(t)?null:t},m[3]=p,m[4]=g,m[5]=f,m[6]=n):n=m[6];let b=!!p&&!!f;return m[7]!==e?(l=e&&{select:e},m[7]=e,m[8]=l):l=m[8],m[9]!==t||m[10]!==n||m[11]!==b||m[12]!==l?(d={queryKey:t,queryFn:n,enabled:b,...l,staleTime:3e5,retry:_},m[9]=t,m[10]=n,m[11]=b,m[12]=l,m[13]=d):d=m[13],(0,i.I)(d)}function _(e,t){return!("number"==typeof t.cause&&d.includes(t.cause))&&e<3}function x(e){return e?.id}},99993:(e,t,n)=>{n.d(t,{M1:()=>u,_N:()=>p,c_:()=>m});var a=n(21728),i=n(97665),s=n(97286),r=n(13017),o=n(99519),l=n(78456),c=n(33026),d=n(50050);let u="loop";function m(e,t){return[u,e,t]}function p(e,t){let n,p,g,y,_=(0,a.c)(15),{loopID:x}=(0,r.g)(),v=(0,o.EY)(),b=(0,i.jE)(),j=(0,d.Ud)(f),w=t||j||c.kj;_[0]!==x||_[1]!==w?(n=[u,x,w],_[0]=x,_[1]=w,_[2]=n):n=_[2];let N=n;_[3]!==x||_[4]!==b||_[5]!==v||_[6]!==w?(p=async()=>{if(!x)return null;let e=l.Io.find(e=>e.id===x)??null;if(e)return e;let t=await v.getLoop(x,w);return t&&t.success?(t.data.version&&t.data.version!==w&&b.setQueryData(m(t.data.id,t.data.version),t.data),t.data):null},_[3]=x,_[4]=b,_[5]=v,_[6]=w,_[7]=p):p=_[7];let S=!!x;return _[8]!==e?(g=e&&{select:e},_[8]=e,_[9]=g):g=_[9],_[10]!==N||_[11]!==p||_[12]!==S||_[13]!==g?(y={placeholderData:h,queryKey:N,queryFn:p,enabled:S,...g,staleTime:3e5},_[10]=N,_[11]=p,_[12]=S,_[13]=g,_[14]=y):y=_[14],(0,s.I)(y)}function h(e){return e}function f(e){return e?.version}},22053:(e,t,n)=>{n.d(t,{a:()=>o});var a=n(21728),i=n(50050),s=n(33026),r=n(64917);function o(){let e,t=(0,a.c)(4),n=(0,i.Ud)(c),o=(0,r.I)(l),d=n!==s.kj&&n!==s.qD;if(void 0===o){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!0},t[0]=e):e=t[0],e}if(!1===o){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"shared"},t[1]=e):e=t[1],e}if(d){let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"previousVersion"},t[2]=e):e=t[2],e}return t[3]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!1},t[3]=e):e=t[3],e}function l(e){return e?.owned}function c(e){return e.version}},64917:(e,t,n)=>{n.d(t,{I:()=>s});var a=n(21728),i=n(99993);function s(e,t){let n=(0,a.c)(2),{data:s}=(0,i._N)(e,t);if(void 0===s){let t;return n[0]!==e?(t=e(void 0),n[0]=e,n[1]=t):t=n[1],t}return s}},54908:(e,t,n)=>{n.d(t,{J:()=>LoopsService});var a=n(35750),i=n(18150),s=n(85242),r=n(88243),o=n(16213),l=n(91348),c=n(45363),d=n(21046),u=n(90122),m=new WeakMap,p=new WeakMap,h=new WeakMap;let NodeRunner=class NodeRunner{async run(e,t,n){let i={graphQLClient:(0,a._)(this,p),chatClient:(0,a._)(this,h),signal:e,onPartialResult:t,execution:n};return c.C.executeNode((0,a._)(this,m),i)}constructor(e,t,n){(0,i._)(this,m,{writable:!0,value:void 0}),(0,i._)(this,p,{writable:!0,value:void 0}),(0,i._)(this,h,{writable:!0,value:void 0}),(0,s._)(this,m,e),(0,s._)(this,p,t),(0,s._)(this,h,n)}};var f=n(33026),g=new WeakMap,y=new WeakMap,_=new WeakMap,x=new WeakMap,v=new WeakMap,b=new WeakMap,j=new WeakMap,w=new WeakSet,N=new WeakSet,S=new WeakSet;let LoopRunner=class LoopRunner{async run(e,t){let n=(0,l.FT)((0,a._)(this,_));if(0===n.length)throw Error("No output node");await Promise.all(n.map(n=>(0,r._)(this,N,I).call(this,n,e,t)))}stop(e){(0,a._)(this,j).abort(),e((0,a._)(this,x))}constructor(e,t,n,a){(0,o._)(this,w),(0,o._)(this,N),(0,o._)(this,S),(0,i._)(this,g,{writable:!0,value:void 0}),(0,i._)(this,y,{writable:!0,value:void 0}),(0,i._)(this,_,{writable:!0,value:void 0}),(0,i._)(this,x,{writable:!0,value:void 0}),(0,i._)(this,v,{writable:!0,value:void 0}),(0,i._)(this,b,{writable:!0,value:void 0}),(0,i._)(this,j,{writable:!0,value:void 0}),(0,s._)(this,g,n),(0,s._)(this,y,a),(0,s._)(this,_,e),(0,s._)(this,x,t),(0,s._)(this,v,(0,l.f0)(e.nodes)),(0,s._)(this,b,new Map),(0,s._)(this,j,new AbortController)}};function C(){return(0,a._)(this,j).signal.aborted}async function I(e,t,n){let i=(0,a._)(this,b).get(e.id);if(i)return i;let s=(0,r._)(this,S,k).call(this,e,t,n);return(0,a._)(this,b).set(e.id,s),s}async function k(e,t,n){if((0,r._)(this,w,C).call(this))return null;let i=await n((0,a._)(this,_).id,(0,a._)(this,_).version||f.kj,(0,a._)(this,x));if(!i.success)throw Error("Unable to load execution");let s=i.data,o=s.nodes[e.id]?.value;if(o)return o;let l=[...new Set((0,a._)(this,v).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>(0,a._)(this,_).nodes.find(t=>t.id===e)).filter(e=>!!e),m=await Promise.all(l.map(async e=>[e.id,await (0,r._)(this,N,I).call(this,e,t,n)]));if(m.some(([e,t])=>null===t)||(0,r._)(this,w,C).call(this))return null;let p=Object.fromEntries(m);try{let n=((e,t)=>{let n={...e},a=n.content;return"string"==typeof a&&(n.content=function(e,t,n=!1){let a=(0,u.ZP)();return e.replace(a,(e,a,i,s)=>{let r=t[a];if(void 0===r)return(0,d.vV)(`Node with ID "${a}" not found in node map`),e;let o=r;if(i)if(r&&"object"==typeof r&&!Array.isArray(r)){let e=function(e,t){if(!t||!e)return null;let n=t.split("."),a=e;for(let e of n){if(null==a||"object"!=typeof a||null===a)return null;a=a[e]}return a}(r,i);if(null!==e)o=e;else throw Error(`Path "${i}" on node with ID "${a}" does not have a value`)}else throw Error(`Cannot access path "${i}" on non-object node with ID "${a}"`);return String(("string"!=typeof o||n?JSON.stringify(o):o)??e)})}(a,t,c.C.requiresCodeEvaluation(e.type))),n})(e,p),i=new NodeRunner(n,(0,a._)(this,g),(0,a._)(this,y));t({type:"SET_RUNNING",nodeID:e.id});let o=n=>{(0,r._)(this,w,C).call(this)||t({type:"UPDATE_NODE_VALUE_PARTIAL",nodeID:e.id,value:n})},{value:l}=await i.run((0,a._)(this,j).signal,o,s);return(0,r._)(this,w,C).call(this)||t({type:"UPDATE_NODE_VALUE",nodeID:e.id,value:l}),l}catch(n){var h;return(0,r._)(this,w,C).call(this)||t({type:"UPDATE_NODE_ERROR",nodeID:e.id,error:(h=n)instanceof Error?h.message:"string"==typeof h?h:"object"==typeof h?JSON.stringify(h):""}),null}}var T=n(43134),E=n(76746),L=n(53419),A=new WeakMap,R=new WeakMap,D=new WeakMap,P=new WeakMap,O=new WeakSet;let LoopsService=class LoopsService{async getGraphQLResponse(e){return(0,a._)(this,R).getGraphQLResponse(e)}getLoop(e,t=f.kj){return(0,a._)(this,A).getLoop(e,t)}getAllLoops(){return(0,a._)(this,A).listLoops()}getLoopVersions(e){return(0,a._)(this,A).listLoopVersions(e)}createLoop(e){return(0,a._)(this,A).createLoop("string"==typeof e?{id:e}:e)}async updateLoop(e,t){let n=await (0,a._)(this,A).getLoop(e,f.kj);if(!n.success)return n;let i=t(n.data);return await (0,a._)(this,A).updateLoop(e,f.kj,i)}async deleteLoop(e){return(0,T._T)(e),(0,a._)(this,A).deleteLoop(e)}async saveLoop(e){let t="string"==typeof e?{id:e}:e;return await (0,a._)(this,A).updateLoop(t.id,f.qD,t)}async restoreLoopVersion(e){return await (0,a._)(this,A).updateLoop(e.id,f.qD,e)}async revertLoop(e){let t=await (0,a._)(this,A).getLoop(e,f.qD);return t.success?(0,a._)(this,A).updateLoop(e,"draft",t.data):t}getExecution(e,t,n){return(0,a._)(this,A).getExecution(e,t,n)}async createExecution(e,t,n){return(0,a._)(this,A).createExecution(e,t,n?.nodes,n?.inputValues)}updateNodeExecution(e,t,n,i,s){return(0,a._)(this,A).updateNodeExecution(e,t,n,i,s)}async updateExecution(e,t,n,i){let s=await (0,a._)(this,A).getExecution(e,t,n);if(!s.success)return s;let r=s.data;for(let[s,o]of Object.entries(i.nodes))r.nodes[s]&&r.nodes[s].value===o.value&&r.nodes[s].error===o.error||await (0,a._)(this,A).updateNodeExecution(e,t,n,s,o);return await (0,a._)(this,A).getExecution(e,t,n)}isExecutionRunning(e){return!!(0,a._)(this,P).get(e)}async runPipeline(e,t,n,i){if((0,E.v)(e).length>0)return;let s=new LoopRunner(e,t,(0,a._)(this,R),(0,a._)(this,D));(0,a._)(this,P).set(t,s);try{await s.run(n,i),(0,L.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"success"})}catch(n){throw(0,L.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"error"}),n}finally{(0,a._)(this,P).delete(t)}}stopPipeline(e,t){let n=(0,a._)(this,P).get(e);n&&(n.stop(t),(0,a._)(this,P).delete(e),(0,L.BI)("dotcom_chat.loops_execution",{execution_id:e,status:"canceled"}))}async shareLoop(e){return await (0,a._)(this,A).shareLoop(e)}async unshareLoop(e){return await (0,a._)(this,A).unshareLoop(e)}constructor(e,t,n){(0,o._)(this,O),(0,i._)(this,A,{writable:!0,value:void 0}),(0,i._)(this,R,{writable:!0,value:void 0}),(0,i._)(this,D,{writable:!0,value:void 0}),(0,i._)(this,P,{writable:!0,value:new Map}),(0,r._)(this,O,B).call(this),(0,s._)(this,A,e),(0,s._)(this,R,t),(0,s._)(this,D,n)}};function B(){indexedDB.deleteDatabase("copilot-pipes")}},45363:(e,t,n)=>{n.d(t,{C:()=>y});var a=n(35750),i=n(18150),s=n(61872),r=n(50467),o=n(38621);function l(e){return e.content}var c=n(90122),d=n(31629),u=n(39087),m=n(59370),p=n(53419),h=n(13647),f=n(49851);let PromptNodeHandler=class PromptNodeHandler{logTokenUsage(e,t,n){(0,p.BI)("loops.prompt_node.token_usage",{model:n,token_type:e,token_value:t})}async execute(e,t){let n,a=await (0,c.Vq)(e),i="";for await(let s of t.chatClient.getChatCompletion(a,e.metadata?.model,t.signal))i+=s.content,s.usage&&(n=s.usage),t.onPartialResult?.(i);return n&&(this.logTokenUsage("TOTAL_TOKEN",n.total_tokens,n.model),this.logTokenUsage("PROMPT_TOKEN",n.prompt_tokens,n.model),this.logTokenUsage("COMPLETION_TOKEN",n.completion_tokens,n.model)),{value:i}}validate(e){return[]}constructor(){(0,r._)(this,"type","prompt"),(0,r._)(this,"metadata",{contentFields:["content"],icon:()=>o.CopilotIcon,description:()=>"Use AI to process a node",label:()=>"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown",isExecutable:!0,enabled:()=>!0})}};let GitHubGraphQLNodeHandler=class GitHubGraphQLNodeHandler{async execute(e,t){let n;t.execution&&(n={nodeId:e.id,loopId:t.execution?.loopID,version:t.execution?.loopVersion,executionId:t.execution?.id});let a=await t.graphQLClient.getGraphQLResponse(e.content,{signal:t.signal,nodeExecution:n});return a?{value:a.data??null}:{value:null}}validate(e){return[]}constructor(){(0,r._)(this,"type","github-graphql"),(0,r._)(this,"metadata",{type:"github-graphql",contentFields:["content"],icon:()=>o.MarkGithubIcon,description:()=>"Retrieve data from GitHub",label:()=>"GitHub GraphQL",color:"gray",enabled:h.Ve,outputLabel:"JSON",isExecutable:!0})}};let CodeNodeHandler=class CodeNodeHandler{async execute(e,t){return{value:l(e)}}validate(e){return[]}constructor(){(0,r._)(this,"type","code"),(0,r._)(this,"metadata",{type:"code",color:"pink",contentFields:["content"],icon:()=>o.CodeIcon,description:()=>"Use classic code to process a node",label:()=>"Code",enabled:h.a1,outputLabel:"Code output",isExecutable:!0,requiresCodeEvaluation:!0})}};let VisualizeNodeHandler=class VisualizeNodeHandler{async execute(e,t){return{value:l(e)}}validate(e){return[]}constructor(){(0,r._)(this,"type","visualize"),(0,r._)(this,"metadata",{type:"visualize",contentFields:["content"],icon:()=>o.GitBranchIcon,description:()=>"Use HTML and CSS to view output",label:()=>"Visualize",color:"olive",enabled:h.a1})}};let TextNodeHandler=class TextNodeHandler{async execute(e,t){let n=t.execution?.inputValues?.[e.id],a=void 0!==n?n:l(e);if("date"===e.metadata.inputType&&"string"==typeof a&&(0,m.nS)(a)){let e=(0,m.Qf)(a);if(e)return{value:(0,m.O2)(e)}}return{value:a}}validate(e){let t=[],n=e.metadata;if("object"!=typeof n||!n)return t.push({error:"metadata is required for text nodes",errorType:s.T.MissingProperty,involvedNodes:[e.id]}),t;switch(n.inputType){case"boolean":["true","false"].includes(e.content)||t.push({error:'A boolean input must have a value of either "true" or "false"',errorType:s.T.InvalidBooleanValue,involvedNodes:[e.id]});break;case"range":"number"!=typeof n.min&&t.push({error:"A range input must have a min",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]}),"number"!=typeof n.max&&t.push({error:"A range input must have a max",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]});break;case"select":Array.isArray(n.options)&&0!==n.options.length?n.options.includes(e.content)||t.push({error:"A select node must have content equal to one of its options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]}):t.push({error:"A select input must have options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]});break;case"date":e.content?(0,m.Yj)(e.content)||t.push({error:"Date input must be a valid date (YYYY-MM-DD) or date macro (e.g., @today, @today+1d, @today-2w)",errorType:s.T.InvalidDateValue,involvedNodes:[e.id]}):t.push({error:"Date input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]});break;case"text":e.content||t.push({error:"Input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]})}return t}constructor(){(0,r._)(this,"type","text"),(0,r._)(this,"metadata",{type:"text",contentFields:["content"],icon:e=>{if(e&&(0,d.ir)(e)){if("boolean"===e.metadata.inputType)if("true"===e.content)return f.j6;else return f.hO;return(0,u.J)(e,"icon")}return o.TypographyIcon},description:e=>e&&(0,d.ir)(e)?(0,u.J)(e,"description"):"Input for nodes",label:e=>e&&(0,d.ir)(e)?(0,u.J)(e,"name"):"Input",color:"blue",enabled:()=>!0})}};let LoopNodeHandler=class LoopNodeHandler{async execute(e,t){return{value:l(e)}}validate(e){return[]}constructor(){(0,r._)(this,"type","loop"),(0,r._)(this,"metadata",{type:"loop",contentFields:["content"],icon:()=>o.GitPullRequestIcon,description:()=>"Use an existing pipeline as a node",label:()=>"Pipeline",color:"coral",enabled:h.V2,outputLabel:"Pipeline output",isExecutable:!0})}};var g=new WeakMap;let NodeHandlerRegistry=class NodeHandlerRegistry{registerHandler(e){(0,a._)(this,g).set(e.type,e)}async executeNode(e,t){let n=(0,a._)(this,g).get(e.type);if(!n)throw Error(`No handler registered for node type: ${e.type}`);return n.execute(e,t)}validateNode(e){let t=(0,a._)(this,g).get(e.type);return t?t.validate(e):[{error:`Unknown node type: ${e.type}`,errorType:s.T.MissingProperty,involvedNodes:[e.id]}]}getMetadata(e){let t=(0,a._)(this,g).get(e);return t?.metadata}getAllMetadata(){return Array.from((0,a._)(this,g).values()).map(e=>e.metadata)}getAllNodeTypes(){return Array.from((0,a._)(this,g).keys())}isExecutable(e){let t=this.getMetadata(e);return t?.isExecutable??!1}requiresCodeEvaluation(e){let t=this.getMetadata(e);return t?.requiresCodeEvaluation??!1}constructor(){(0,i._)(this,g,{writable:!0,value:new Map}),this.registerHandler(new PromptNodeHandler),this.registerHandler(new GitHubGraphQLNodeHandler),this.registerHandler(new CodeNodeHandler),this.registerHandler(new VisualizeNodeHandler),this.registerHandler(new TextNodeHandler),this.registerHandler(new LoopNodeHandler)}};let y=new NodeHandlerRegistry},93364:(e,t,n)=>{function a(e){return{success:!0,data:e}}function i(e,t){var n,a;return{success:!1,error:(n=e)?"string"==typeof n?n:"object"!=typeof n?(void 0)??s:"message"in n&&"string"==typeof n.message?n.message:"error"in n&&"string"===n.error?n.error:a??s:a??s,httpStatus:t?.status}}n.d(t,{$j:()=>a,YD:()=>i});let s="Unknown error"},76746:(e,t,n)=>{n.d(t,{v:()=>r});var a=n(61872);n(39087);var i=n(91348),s=n(45363);function r(e){let t=function(e){let t=[];for(let n of("string"!=typeof e.title&&t.push({error:"Pipeline is missing a title",errorType:a.T.MissingProperty,involvedNodes:[]}),Array.isArray(e.nodes)&&0!==e.nodes.length||t.push({error:"Pipeline has no nodes",errorType:a.T.MissingProperty,involvedNodes:[]}),e.nodes))t=t.concat(function(e){let t=[];return("string"!=typeof e.title||0===e.title.length)&&t.push({error:"Node is missing a title",errorType:a.T.MissingProperty,involvedNodes:[e.id]}),t.concat(s.C.validateNode(e))}(n));return t}(e),n=(0,i.f0)(e.nodes);for(let i of n.edges){let n=e.nodes.find(e=>e.id===i.from),s=e.nodes.find(e=>e.id===i.to);n&&s||t.push({error:`Node ${i.to} references a nonexistent node {{${i.from}}}`,errorType:a.T.NonexistentNode,involvedNodes:[i.to]})}let r=function(e){let t=new Set,n=new Set,a=[],i=s=>{if(n.has(s)){let e=a.indexOf(s);return a.slice(e)}if(t.has(s))return null;for(let r of(t.add(s),n.add(s),a.push(s),e.edges))if(r.from===s){let e=i(r.to);if(e)return e}return n.delete(s),a.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=i(n.id);if(e)return e}return null}(n);if(r&&r.length>0){let e=[...r,r[0]];t.push({error:`Pipeline contains a cycle: ${e.join(" \u2192 ")}`,errorType:a.T.CycleDetected,involvedNodes:r})}let o=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=[],a=new Set,i=(t,n)=>{for(let s of(a.add(t),n.add(t),e.edges))s.from!==t||a.has(s.to)||i(s.to,n),s.to!==t||a.has(s.from)||i(s.from,n)};for(let e of t)if(!a.has(e.id)){let t=new Set;i(e.id,t),n.push(t)}if(n.length<=1)return[];let s=n.reduce((e,t)=>t.size>e.size?t:e,new Set),r=[];for(let e of t)s.has(e.id)||r.push(e.id);return r}(n);return o.length>0&&t.push({error:`Pipeline contains unreachable nodes: ${o.join(", ")}`,errorType:a.T.DisconnectedNode,involvedNodes:o}),t}},96868:(e,t,n)=>{n.d(t,{Fj:()=>s,Kh:()=>i,qB:()=>r});var a=n(33026);let i={CANVAS:"canvas",OUTPUT:"output"},s={CHAT:"chat",NODE:"node",ABOUT:"about"},r={focusedNodeId:null,hoveredNodeId:null,view:i.CANVAS,sidePanelView:s.CHAT,version:a.U8,showLinkCopiedBanner:!1,showDuplicatedBanner:!1}},61872:(e,t,n)=>{n.d(t,{T:()=>a});let a={MissingProperty:"MissingProperty",CycleDetected:"CycleDetected",NonexistentNode:"NonexistentNode",DisconnectedNode:"DisconnectedNode",InvalidBooleanValue:"InvalidBooleanValue",InvalidRangeValue:"InvalidRangeValue",InvalidSelectValue:"InvalidSelectValue",InvalidFileType:"InvalidFileType",EmptyInputValue:"EmptyInputValue",InvalidDateValue:"InvalidDateValue"}},39087:(e,t,n)=>{n.d(t,{J:()=>r,j:()=>s});var a=n(38621),i=n(49851);let s={range:{name:"Range",description:"A numeric value within a specified range",icon:i.FD},text:{name:"Text",description:"Free form text input",icon:i.md},boolean:{name:"Boolean",description:"True or false value",icon:i.j6},select:{name:"Select",description:"Choose from a list of predefined options",icon:i.wB},date:{name:"Date",description:"Date or macro",icon:a.CalendarIcon}};function r(e,t){return(s[e.metadata.inputType]??s.text)[t]}},46857:(e,t,n)=>{n.d(t,{I:()=>r,O:()=>s});var a=n(91348),i=n(82590);function s(e){for(let n of e.references??[]){var t;if(n.type===i.km&&(t=n)&&"object"==typeof t&&"title"in t&&"nodes"in t){let t={description:n.description,id:n.id,title:n.title,owned:!0,nodes:n.nodes,updatedAt:new Date(e.createdAt).getTime(),visibility:"private"},i=(0,a.kX)(t,[]);return{messageId:e.id,pipeline:i}}}}function r(e,t=!1){for(let n of[...e].reverse()){if("assistant"!==n.role&&!t)continue;let e=s(n);if(e)return e}}},21046:(e,t,n)=>{function a(){}function i(){}n.d(t,{FF:()=>a,vV:()=>i})},82590:(e,t,n)=>{n.d(t,{J1:()=>c,Os:()=>o,QK:()=>l,S$:()=>i,ZS:()=>p,bW:()=>u,km:()=>r,lN:()=>m,lh:()=>s,qe:()=>d});var a=n(25641);let i="loops",s="loops",r="loop",o="Loops",l=`${a.Jz}/loops`,c=`${a.Jz}/l`,d=/\/copilot\/loops/,u=/\/copilot\/l\/([a-zA-Z0-9-]+)/,m=/\/copilot\/loop\/share/,p=/\/copilot\/loops\/share\/([a-zA-Z0-9-]+)/},59370:(e,t,n)=>{function a(e){return/^@today([+-]\d+[dwmy])?$/.test(e)}function i(e){if(e.startsWith("@"))return!1;let t=new Date(e);return!isNaN(t.getTime())&&(!e.match(/^\d{4}-\d{2}-\d{2}$/)||o(t)===e)}function s(e){return a(e)||i(e)}function r(e){return e.startsWith("@")&&!a(e)?null:a(e)?function(e){if(!a(e))return{date:null,error:`Invalid macro format: ${e}`};let t=new Date;if("@today"===e)return{date:t};let n=e.match(/^@today([+-])(\d+)([dwmy])$/);if(!n)return{date:null,error:`Invalid macro format: ${e}`};let[,i,s,r]=n;if(!i||!s||!r)return{date:null,error:`Invalid macro format: ${e}`};let o=parseInt(s,10),l="+"===i,c=new Date(t);switch(r){case"d":c.setDate(c.getDate()+(l?o:-o));break;case"w":c.setDate(c.getDate()+(l?7*o:-(7*o)));break;case"m":c.setMonth(c.getMonth()+(l?o:-o));break;case"y":c.setFullYear(c.getFullYear()+(l?o:-o));break;default:return{date:null,error:`Invalid unit: ${r}`}}return{date:c}}(e).date:i(e)?new Date(e):null}function o(e){let t=e.toISOString();return t.split("T")[0]??t.substring(0,10)}n.d(t,{O2:()=>o,Qf:()=>r,Yj:()=>s,nS:()=>a})},5533:(e,t,n)=>{function a(e){return!!e?.startedAt&&!e?.completedAt}function i(e){return!!e&&Object.values(e.nodes).some(a)}n.d(t,{f:()=>a,y:()=>i})},13647:(e,t,n)=>{n.d(t,{PW:()=>o,V2:()=>r,Ve:()=>s,a1:()=>i});var a=n(69599);function i(){return(0,a.G7)("copilot_pipes_react_nodes")}function s(){return(0,a.G7)("copilot_pipes_github_graphql_nodes")}function r(){return(0,a.G7)("copilot_pipes_pipeline_nodes")}function o(){return(0,a.G7)("copilot_loops_post_staff_ship_features")}},43134:(e,t,n)=>{n.d(t,{_T:()=>c,aq:()=>l,qU:()=>o});var a=n(82075),i=n(21046);let s=(0,a.A)("localStorage"),r="copilot-loops-thread-";function o(e){try{let t=`${r}${e}`;return s.getItem(t)}catch(e){return(0,i.FF)("Failed to read loop thread ID from localStorage:",e),null}}function l(e,t){if(null!==t)try{let n=`${r}${e}`;s.setItem(n,t)}catch(e){(0,i.FF)("Failed to store loop thread ID in localStorage:",e)}}function c(e){try{let t=`${r}${e}`;s.removeItem(t)}catch(e){(0,i.FF)("Failed to remove loop thread ID from localStorage:",e)}}},91348:(e,t,n)=>{n.d(t,{FT:()=>f,Gx:()=>m,Hx:()=>y,NZ:()=>g,f0:()=>l,kX:()=>p,nT:()=>d});var a=n(31629),i=n(21046),s=n(90122),r=n(39087),o=n(45363);function l(e){let t={nodes:new Map,edges:[],layers:[]};if(!e)return t;for(let n of e){if(!n?.id)continue;let e=u(n.id);t.nodes.set(e,n)}for(let n of e)for(let e of c(n)){let a=u(e);n?.id&&a&&t.edges.push({from:a,to:n.id})}let n=function(e){let t={},n=new Set,a=(s,r=0)=>{try{if(n.has(s))throw Error(`Potential cycle detected at node ${s}`);if(n.add(s),r>100)return(0,i.FF)(`Maximum recursion depth reached for node ${s}`),0;if(void 0!==t[s])return t[s];let o=e.nodes.get(s);if(!o)return t[s]=0,0;let l=c(o);if(l&&0!==l.size){let e=[...l].map(e=>{let t=u(e);return a(t,r+1)});t[s]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===s).map(e=>e.to);0===n.length?t[s]=-1:t[s]=1}return t[s]}finally{n.delete(s)}};for(let[n]of e.nodes)if(!t[n])try{a(n)}catch(e){(0,i.vV)(`Error computing layer for node ${n}:`,e),t[n]=0}let s=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=s);let r=[];for(let[n,a]of Object.entries(t)){let t=e.nodes.get(n);t&&(r[a]||(r[a]=[]),r[a].push(t))}return r.filter(Boolean)}(t);return t.layers=n,t}function c(e){let t=(0,s.ZP)();return new Set((e.content.match(t)||[]).map(e=>e.replace(/[{}]/g,"")))}function d(e){return new Set([...c(e)].map(u))}function u(e){return e.match(/^[^|.]+/)?.[0]??e}let m=(e,t)=>{if(!e||"object"!=typeof e||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:o.C.getMetadata(e.type)?e.type:"text",content:e.content||"",id:(e.id||"").trim()};if("text"===n.type&&(n.metadata=function(e){if((0,a.ir)(e))return r.j[e.metadata.inputType]?e.metadata:{inputType:"text"}}(e)||{inputType:"text"}),"string"!=typeof n.content&&(n.content=""),(0,a.jq)(n)){let e=t.find(e=>e.id===n.loopId);if(e){let t=n.loopInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.loopInputValues=e.nodes?.filter(e=>(0,a.ir)(e)).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},p=(e,t)=>{let n=function(e){return{...e,nodes:e.nodes.map(h)}}(e);return{...n,nodes:(n.nodes||[]).map(e=>m(e,t)).filter(e=>null!==e)}};function h(e){return"prompt"===e.type&&"model"in e&&"string"==typeof e.model?{...e,metadata:{model:e.model}}:"text"===e.type&&"inputType"in e?{...e,metadata:function(e){if("type"in e&&"string"==typeof e.type){let t="file"===e.type?"text":e.type;return{...e,inputType:t}}return e}(e.inputType)}:e}function f(e){let t=l(e.nodes);return e.nodes.filter(e=>_(e,t))}function g(e){let t={nodes:new Map,edges:[...e.edges],layers:[...e.layers]};for(let[n,a]of e.nodes)t.nodes.set(n,a);let n=[...e.nodes].filter(([,t])=>_(t,e));if(n.length>0){let e="virtual-output";for(let[,a]of(t.nodes.set(e,{type:"output",id:e}),n))t.edges.push({from:a.id,to:e})}return t}function y(e){return"virtual-output"===e}function _(e,t){return!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id)}},31629:(e,t,n)=>{function a(e){return"github-graphql"===e.type}function i(e){return"loop"===e.type}function s(e){return"text"===e.type}n.d(t,{Tm:()=>a,ir:()=>s,jq:()=>i})},37510:(e,t,n)=>{n.d(t,{S:()=>i});var a=n(46996);function i(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let n={title:e.title,description:e.description,nodes:e.nodes},i={title:t.title,description:t.description,nodes:t.nodes};return(0,a.A)(n,i)}},49912:(e,t,n)=>{n.d(t,{j:()=>s});var a=n(54908),i=n(82590);function s(e){return e.id===i.S$&&"service"in e&&e.service instanceof a.J}},53380:(e,t,n)=>{n.d(t,{Ts:()=>s,_A:()=>i,hW:()=>r});var a=n(96868);function i(e){let t={},n=e.get("focusedNode");n&&(t.focusedNodeId=n);let i=e.get("view");i&&Object.values(a.Kh).includes(i)&&(t.view=i);let s=e.get("sidePanel");s&&Object.values(a.Fj).includes(s)&&(t.sidePanelView=s);let r=e.get("version");return r&&(t.version=r),t}function s(e){let t=new URLSearchParams;return e.focusedNodeId&&t.set("focusedNode",e.focusedNodeId),e.view!==a.qB.view&&t.set("view",e.view),e.sidePanelView!==a.qB.sidePanelView&&t.set("sidePanel",e.sidePanelView),e.version!==a.qB.version&&t.set("version",e.version),t}function r(e){return{...a.qB,...i(e)}}},90122:(e,t,n)=>{n.d(t,{DO:()=>r,Vq:()=>s,ZP:()=>a});let a=()=>/{{([\w-]+)(?:\.([.\w-]+))?(?:\|([\w-]+))?}}/g,i=`Respond with only the content \u{2014} no introductions, explanations, or extra text.
Only use code blocks when they add semantic value (e.g., mermaid diagrams, specific programming languages), not for general markdown formatting, unless the user explicitly asks for it.`;async function s(e){return[{role:"system",content:i},{role:"user",content:e.content}]}function r(e){return null==e?"":"string"==typeof e?e:e&&"object"==typeof e?JSON.stringify(e,null,2):Array.isArray(e)?e.map(r).join(`
`):String(e)}},33026:(e,t,n)=>{n.d(t,{U8:()=>s,kj:()=>a,qD:()=>i});let a="draft",i="latest",s=a},2087:(e,t,n)=>{n.d(t,{B:()=>g,C:()=>y});var a=n(74848),i=n(21728),s=n(34164),r=n(38621),o=n(26108),l=n(1805),c=n(59121),d=n(11196),u=n(59523),m=n(36380),p=n(98755);let h={"diff-file-header":"DiffFileHeader-module__diff-file-header--Z8VIs",collapsed:"DiffFileHeader-module__collapsed--bTqtX","file-name":"DiffFileHeader-module__file-name--ryaCb"};function f(e){let t,n,s=(0,i.c)(13),{newPath:o,oldPath:l,status:c}=e;s[0]!==o?(t=(0,a.jsxs)(a.Fragment,{children:["\u200E",o,"\u200E"]}),s[0]=o,s[1]=t):t=s[1];let d=t;s[2]!==l?(n=(0,a.jsxs)(a.Fragment,{children:["\u200E",l,"\u200E"]}),s[2]=l,s[3]=n):n=s[3];let u=n;if("RENAMED"===c){let e,t,n;return s[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(r.ArrowRightIcon,{}),t=(0,a.jsx)("span",{className:"sr-only",children:"renamed to"}),s[4]=e,s[5]=t):(e=s[4],t=s[5]),s[6]!==d||s[7]!==u?(n=(0,a.jsxs)("code",{children:[u," ",e,t," ",d]}),s[6]=d,s[7]=u,s[8]=n):n=s[8],n}if("DELETED"===c||"REMOVED"===c){let e;return s[9]!==u?(e=(0,a.jsx)("code",{children:u}),s[9]=u,s[10]=e):e=s[10],e}{let e;return s[11]!==d?(e=(0,a.jsx)("code",{children:d}),s[11]=d,s[12]=e):e=s[12],e}}function g(e){let t,n,g,y,_,x,v,b,j,w,N,S,C,I,k,T,E,L=(0,i.c)(66),{additionalLeftSideContent:A,areLinesExpanded:R,canExpandOrCollapseLines:D,className:P,diffStatsProps:O,isBinary:B,isSubmodule:M,isCollapsed:F,canToggleRichDiff:U,headingId:V,linesAdded:$,linesChanged:W,linesDeleted:H,fileLinkHref:q,fileLinkRef:z,newMode:G,newPath:K,oldMode:Q,oldPath:Y,onCopyPath:J,onHeaderClick:X,onToggleDiffDisplay:Z,onToggleExpandAllLines:ee,onToggleFileCollapsed:et,patchStatus:en,path:ea,rightSideContent:ei,size:es,showRichDiff:er,isInSingleFileMode:eo}=e,el=es&&"-"===es[0],ec=F?h.collapsed:"";L[0]!==P||L[1]!==ec?(t=(0,s.$)(h["diff-file-header"],ec,"flex-wrap flex-sm-nowrap",P),L[0]=P,L[1]=ec,L[2]=t):t=L[2],L[3]!==F||L[4]!==eo||L[5]!==et||L[6]!==ea?(n=!eo&&(0,a.jsx)("div",{className:"d-flex flex-shrink-0 flex-order-1",style:{width:"28px",justifyContent:"center"},children:(0,a.jsx)(o.K,{onClick:et,"aria-label":F?`Expand file: ${ea}`:`Collapse file: ${ea}`,icon:F?r.ChevronRightIcon:r.ChevronDownIcon,size:"small",variant:"invisible"})}),L[3]=F,L[4]=eo,L[5]=et,L[6]=ea,L[7]=n):n=L[7],L[8]===Symbol.for("react.memo_cache_sentinel")?(g=(0,s.$)(h["file-name"]),L[8]=g):g=L[8],L[9]!==K||L[10]!==Y||L[11]!==en?(y=(0,a.jsx)(f,{newPath:K,oldPath:Y,status:en}),L[9]=K,L[10]=Y,L[11]=en,L[12]=y):y=L[12],L[13]!==q||L[14]!==z||L[15]!==X||L[16]!==y?(_=(0,a.jsx)(l.A,{className:"Link--primary",href:q,onClick:X,ref:z,children:y}),L[13]=q,L[14]=z,L[15]=X,L[16]=y,L[17]=_):_=L[17],L[18]!==V||L[19]!==_?(x=(0,a.jsx)("h3",{id:V,className:g,children:_}),L[18]=V,L[19]=_,L[20]=x):x=L[20];let ed=K??Y??"";return L[21]===Symbol.for("react.memo_cache_sentinel")?(v={direction:"s"},L[21]=v):v=L[21],L[22]!==J||L[23]!==ed?(b=(0,a.jsx)(p.T,{className:"ml-2 flex-shrink-0",textToCopy:ed,ariaLabel:"Copy file name to clipboard",tooltipProps:v,onCopy:J,size:"small"}),L[22]=J,L[23]=ed,L[24]=b):b=L[24],L[25]!==G||L[26]!==Q||L[27]!==en?(j=(0,u.AL)(en,Q,G)&&(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("code",{children:Q}),(0,a.jsx)(r.ArrowRightIcon,{className:"mx-1"}),(0,a.jsx)("code",{children:G})]}),L[25]=G,L[26]=Q,L[27]=en,L[28]=j):j=L[28],L[29]!==R||L[30]!==D||L[31]!==ee||L[32]!==ea?(w=D&&ee&&(0,a.jsx)(d.m,{text:R?`Collapse non-diff lines: ${ea}`:`Expand all lines: ${ea}`,direction:"s",children:(0,a.jsx)(o.K,{onClick:ee,"aria-label":R?`Collapse non-diff lines: ${ea}`:`Expand all lines: ${ea}`,icon:R?r.FoldIcon:r.UnfoldIcon,size:"small",variant:"invisible","data-file-path":ea,className:R?"flex-shrink-0":"flex-shrink-0 js-expand-all-difflines-button"})}),L[29]=R,L[30]=D,L[31]=ee,L[32]=ea,L[33]=w):w=L[33],L[34]!==b||L[35]!==j||L[36]!==w||L[37]!==x?(N=(0,a.jsxs)("div",{className:"d-flex px-1 flex-items-center overflow-hidden flex-order-2 flex-sm-order-1",children:[x,b,j,w]}),L[34]=b,L[35]=j,L[36]=w,L[37]=x,L[38]=N):N=L[38],L[39]!==O||L[40]!==M||L[41]!==$||L[42]!==W||L[43]!==H?(S=!M&&(0,a.jsx)(m.z,{linesAdded:$,linesDeleted:H,linesChanged:W,...O}),L[39]=O,L[40]=M,L[41]=$,L[42]=W,L[43]=H,L[44]=S):S=L[44],L[45]!==S?(C=(0,a.jsx)("div",{className:"d-flex mr-2 flex-justify-end flex-items-center flex-1",children:S}),L[45]=S,L[46]=C):C=L[46],L[47]!==B||L[48]!==el||L[49]!==es?(I=B&&(0,a.jsx)("div",{className:"d-flex flex-items-center",children:(0,a.jsx)("code",{className:(0,s.$)("px-2",el&&"fgColor-danger",!el&&"fgColor-success"),children:`${es}`})}),L[47]=B,L[48]=el,L[49]=es,L[50]=I):I=L[50],L[51]!==U||L[52]!==Z||L[53]!==er?(k=U&&(0,a.jsxs)(c.I,{"aria-label":"File view",size:"small",className:"mx-2",onChange:Z?e=>Z(1===e):void 0,children:[(0,a.jsx)(c.I.IconButton,{"aria-label":"Display the source diff",selected:!er,icon:r.CodeIcon}),(0,a.jsx)(c.I.IconButton,{"aria-label":"Display the rich diff",selected:er,icon:r.FileIcon})]}),L[51]=U,L[52]=Z,L[53]=er,L[54]=k):k=L[54],L[55]!==ei||L[56]!==C||L[57]!==I||L[58]!==k?(T=(0,a.jsxs)("div",{className:"d-flex flex-row flex-justify-end flex-1 flex-order-1 flex-sm-order-2 flex-items-center",children:[C,I,k,ei]}),L[55]=ei,L[56]=C,L[57]=I,L[58]=k,L[59]=T):T=L[59],L[60]!==A||L[61]!==N||L[62]!==T||L[63]!==t||L[64]!==n?(E=(0,a.jsxs)("div",{className:t,children:[n,A,N,T]}),L[60]=A,L[61]=N,L[62]=T,L[63]=t,L[64]=n,L[65]=E):E=L[65],E}try{f.displayName||(f.displayName="FileName")}catch{}try{g.displayName||(g.displayName="DiffFileHeader")}catch{}function y(e){let t,n,r=(0,i.c)(6),{children:o,isAddition:l,className:c}=e,d=l?"fgColor-success":"fgColor-danger";return r[0]!==c||r[1]!==d?(t=(0,s.$)("ml-1 text-small text-bold",d,c),r[0]=c,r[1]=d,r[2]=t):t=r[2],r[3]!==o||r[4]!==t?(n=(0,a.jsx)("div",{className:t,children:o}),r[3]=o,r[4]=t,r[5]=n):n=r[5],n}try{y.displayName||(y.displayName="LinesChangedCounterLabel")}catch{}},59523:(e,t,n)=>{function a(e){return void 0!==e.linesChanged&&0!==e.linesChanged}function i(e,t,n){return"MODIFIED"===e&&t!==n}function s(e,t,n,i){return"MODIFIED"===t&&n!==i&&!a(e)}function r(e){return"COPIED"===e.status&&!a(e)}function o(e){return"RENAMED"===e.status&&!a(e)}function l(e){return!!e.oldTreeEntry&&null===e.newTreeEntry}function c(e){return!!e.truncatedReason}n.d(t,{AL:()=>i,HI:()=>c,Jc:()=>r,Sn:()=>s,dK:()=>o,lO:()=>l,l_:()=>m,s8:()=>h,xW:()=>p});let d=["maximum diff size exceeded.","maximum number of lines exceeded."],u=/^maximum file count exceeded/;function m(e){let t=e;return d.includes(e)?t="This diff could not be loaded automatically because of too many other changes.":u.test(e)&&(t="This diff could not be loaded automatically because of too many other files to display."),t}function p(e){return!!e.newTreeEntry?.isGenerated}function h(e){return 0===e.linesChanged}},84363:(e,t,n)=>{n.d(t,{t:()=>i});var a=n(59403);let i=({items:e,filter:t,key:n,secondaryKey:i})=>{let s=e.map(e=>[(0,a.dt)(t,n(e)),e]);return i&&(s=s.map(([e,n])=>[Math.max(e,(0,a.dt)(t,i(n))),n])),s.filter(([e])=>e>a.IP).sort(([e,t],[a,i])=>a===e?n(t).localeCompare(n(i)):a-e).map(([,e])=>e)}},59403:(e,t,n)=>{n.d(t,{Dx:()=>r,IP:()=>s,M4:()=>i,dt:()=>o});var a=n(91385);let i=1/0,s=-1/0,r=1,o=(e,t,n=r)=>{let o=e.trim().toLowerCase(),l=t.trim().toLowerCase();if(o===l)return i;if(0===l.length||0===o.length)return s;let c=(0,a.fN)(o,l);return c===1/0&&o!==l?s:l.startsWith(o)||l.endsWith(o)?c+n:c}},60429:(e,t,n)=>{n.d(t,{A:()=>r});let a=n.p+"jetbrains-e16495e63a33.png",i=n.p+"neovim-3301f23c4307.png",s=n.p+"vscode-380056900de8.png",r={vscode:{url:"https://marketplace.visualstudio.com/items?itemName=GitHub.copilot",icon:s,name:"Visual Studio Code",eventName:"VSCODE"},visualstudio:{url:"https://visualstudio.microsoft.com/github-copilot/",icon:n.p+"vsstudio-806c4b726938.png",name:"Visual Studio",eventName:"VS"},xcode:{url:"https://github.com/github/CopilotForXcode",icon:n.p+"xcode-a6c2735aa7ac.png",name:"Xcode",eventName:"XCODE"},jetbrains:{url:"https://plugins.jetbrains.com/plugin/17718-github-copilot",icon:a,name:"JetBrains",eventName:"JETBRAINS"},neovim:{url:"https://github.com/github/copilot.vim",icon:i,name:"Neovim",eventName:"NEOVIM"}}},61767:(e,t,n)=>{n.d(t,{FC:()=>l,I0:()=>r,dV:()=>o,h$:()=>d,jK:()=>c});let a=null,i=!1;function s(e){let t=function(){let e=document.querySelector("context-region");return e&&e.isConnected&&e.pushCrumb&&"function"==typeof e.pushCrumb?e:null}();if(t)return void e(t);a=e,function(){if(i)return;i=!0;let e=document.querySelector("context-region-controller");e&&e.addEventListener("context-region-connected",()=>{a&&(a(e.contextRegion),a=null)},{once:!0})}()}function r(e){s(t=>t.pushCrumb(e))}function o(){s(e=>e.popCrumb())}function l(e){s(t=>t.replaceCrumbs(e))}function c(e){s(t=>t.renameCurrentCrumb(e))}function d(e){s(t=>t.replaceCurrentCrumb(e))}},79988:(e,t,n)=>{n.d(t,{c$:()=>a,n5:()=>i,z4:()=>s});let a="global_sso_banner",i=3,s="dismissed_sso_orgs"},894:(e,t,n)=>{n.d(t,{L:()=>s,M:()=>i});var a=n(96540);let i=(0,a.createContext)(null);function s(){let e=(0,a.useContext)(i);if(!e)throw Error("useLayoutContext must be used within a Layout component");return e}},51625:(e,t,n)=>{n.d(t,{_x:()=>i,cP:()=>s,eu:()=>a,pI:()=>r});let a="spark",i="Spark",s="/spark",r="Create web apps with React and TypeScript to prototype ideas, build tools, and more"},39111:(e,t,n)=>{n.d(t,{X:()=>i});var a=n(54571);function i(e){let t=e.join(","),[n]=(0,a.I)(()=>{let e=/Windows/.test(navigator.userAgent)?"windows":/Macintosh/.test(navigator.userAgent)?"mac":null;return!!e&&t.includes(e)},!1,[t]);return n}},6551:(e,t,n)=>{n.d(t,{S:()=>i});var a=n(96540);function i(e){let t=(0,a.useRef)(void 0);return(0,a.useEffect)(()=>{t.current=e},[e]),t.current}},51587:(e,t,n)=>{n.d(t,{N:()=>s});var a=n(79634),i=n(96540);let s=()=>{let e=(0,a.X)();return(0,i.useMemo)(()=>({ssoOrgs:e?.sso_organizations??[],baseAvatarUrl:e?.base_avatar_url??"https://avatars.githubusercontent.com"}),[e?.sso_organizations,e?.base_avatar_url])}},65511:(e,t,n)=>{n.d(t,{Q:()=>T});var a=n(74848),i=n(30938),s=n(33592),r=n(96540),o=n(66565),l=n(38621),c=n(46642),d=n(38411),u=n(69599),m=n(13017),p=n(21728),h=n(1992),f=n(26108),g=n(5524),y=n(69726),_=n(51120),x=n(42455);let v={anchor:"SubAgentSelector-module__anchor--_VXhV",checkIcon:"SubAgentSelector-module__checkIcon--sIlHa"},b=e=>{let t,n,i,s,r=(0,p.c)(5);return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("path",{d:"M5.75 7.5C6.16421 7.5 6.5 7.83579 6.5 8.25V9.75C6.5 10.1642 6.16421 10.5 5.75 10.5C5.33579 10.5 5 10.1642 5 9.75V8.25C5 7.83579 5.33579 7.5 5.75 7.5Z",fill:"currentColor"}),n=(0,a.jsx)("path",{d:"M11 8.25C11 7.83579 10.6642 7.5 10.25 7.5C9.83579 7.5 9.5 7.83579 9.5 8.25V9.75C9.5 10.1642 9.83579 10.5 10.25 10.5C10.6642 10.5 11 10.1642 11 9.75V8.25Z",fill:"currentColor"}),i=(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25 0C5.83579 0 5.5 0.335786 5.5 0.75C5.5 1.16421 5.83579 1.5 6.25 1.5H7.5V3.5H3.75C2.50736 3.5 1.5 4.50736 1.5 5.75V8H0.75C0.335786 8 0 8.33579 0 8.75C0 9.16421 0.335786 9.5 0.75 9.5H1.5V12.25C1.5 13.4926 2.50736 14.5 3.75 14.5H12.25C13.4926 14.5 14.5 13.4926 14.5 12.25V9.5H15.25C15.6642 9.5 16 9.16421 16 8.75C16 8.33579 15.6642 8 15.25 8H14.5V5.75C14.5 4.50736 13.4926 3.5 12.25 3.5H9V0.75C9 0.335786 8.66421 0 8.25 0H6.25ZM3 5.75C3 5.33579 3.33579 5 3.75 5H12.25C12.6642 5 13 5.33579 13 5.75V12.25C13 12.6642 12.6642 13 12.25 13H3.75C3.33579 13 3 12.6642 3 12.25V5.75Z",fill:"currentColor"}),r[0]=t,r[1]=n,r[2]=i):(t=r[0],n=r[1],i=r[2]),r[3]!==e?(s=(0,a.jsxs)("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[t,n,i]}),r[3]=e,r[4]=s):s=r[4],s};function j(e){let t,n,i,s,r,o,c,d=(0,p.c)(19),{repo:u,branch:m,selectedAgent:b,onSelect:j}=e;d[0]!==u?(t={repo:u},d[0]=u,d[1]=t):t=d[1];let{data:N,isLoading:S}=function(e){let t,n=(0,p.c)(3),{repo:a}=e;return n[0]!==a.nameOnly||n[1]!==a.owner?(t={queryKey:["subagents",a.owner,a.nameOnly],queryFn:async()=>{try{let e=await (0,_.I)({path:`/agents/swe/subagents/${a.owner}/${a.nameOnly}`});if(404===e.status)return[];return(await e.json()).agents}catch{return[]}}},n[0]=a.nameOnly,n[1]=a.owner,n[2]=t):t=n[2],(0,x.b)(t)}(t),C=N?.find(e=>e.name===b)?.display_name,I=new URLSearchParams({filename:".github/agents/my-agent.md",value:`---
name:
description:
---

# My Agent

Describe what your agent does here...`}),k=`/${u.owner}/${u.nameOnly}/new/${m}?${I.toString()}`,T=`Select a subagent${C?`, selected: ${C}`:""}`,E=!!b;return d[2]!==T||d[3]!==E?(n=(0,a.jsx)(h.W.Anchor,{children:(0,a.jsx)(f.K,{className:v.anchor,icon:w,"aria-label":T,"data-selected":E})}),d[2]=T,d[3]=E,d[4]=n):n=d[4],d[5]!==N||d[6]!==S||d[7]!==j||d[8]!==b?(i=S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(g.l.Item,{children:[(0,a.jsx)(g.l.LeadingVisual,{children:(0,a.jsx)(y.A,{size:"small"})}),"Loading"]}),(0,a.jsx)(g.l.Divider,{})]}):N&&N.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(g.l.Group,{selectionVariant:"single",children:[(0,a.jsx)(g.l.Item,{selected:null===b,onSelect:()=>j(null),children:"None"}),N.map(e=>(0,a.jsx)(g.l.Item,{selected:b===e.name,onSelect:()=>j(e.name),children:e.display_name},e.name))]}),(0,a.jsx)(g.l.Divider,{})]}),d[5]=N,d[6]=S,d[7]=j,d[8]=b,d[9]=i):i=d[9],d[10]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(g.l.LeadingVisual,{children:(0,a.jsx)(l.PlusIcon,{})}),d[10]=s):s=d[10],d[11]!==k?(r=(0,a.jsx)(g.l.Group,{selectionVariant:!1,children:(0,a.jsxs)(g.l.LinkItem,{href:k,target:"_blank",children:[s,"Create an agent"]})}),d[11]=k,d[12]=r):r=d[12],d[13]!==i||d[14]!==r?(o=(0,a.jsx)(h.W.Overlay,{width:"auto",children:(0,a.jsxs)(g.l,{children:[i,r]})}),d[13]=i,d[14]=r,d[15]=o):o=d[15],d[16]!==n||d[17]!==o?(c=(0,a.jsxs)(h.W,{children:[n,o]}),d[16]=n,d[17]=o,d[18]=c):c=d[18],c}let w=e=>{let t,n,i,s=(0,p.c)(5);return s[0]!==e?(t=(0,a.jsx)(b,{...e}),s[0]=e,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(N,{}),s[2]=n):n=s[2],s[3]!==t?(i=(0,a.jsxs)(a.Fragment,{children:[t,n]}),s[3]=t,s[4]=i):i=s[4],i},N=()=>{let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)("svg",{className:v.checkIcon,width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[(0,a.jsx)("path",{d:"M7.41406 1.63379C7.75703 1.66786 8.08279 1.80212 8.34961 2.02051L8.47754 2.13672L8.47852 2.1377C8.806 2.46569 8.99015 2.91038 8.99023 3.37402C8.99023 3.7798 8.84934 4.17121 8.59473 4.48242L8.47852 4.61133L5.22754 7.8623C4.89954 8.18968 4.45486 8.37398 3.99121 8.37402C3.52761 8.37402 3.08292 8.18965 2.75488 7.8623L1.49121 6.59863L1.47949 6.58594C1.17042 6.25422 1.00181 5.8156 1.00977 5.3623L1.02148 5.19336C1.06638 4.80245 1.2419 4.43583 1.52246 4.15527C1.84299 3.83487 2.27541 3.65165 2.72852 3.64355L2.89844 3.64844C3.23454 3.67514 3.55557 3.79897 3.82324 4.00391L3.95312 4.1123L3.99121 4.15039L6.00391 2.1377V2.13672C6.33205 1.80893 6.77743 1.625 7.24121 1.625L7.41406 1.63379Z",fill:"#0969DA"}),(0,a.jsx)("path",{d:"M7.41406 1.63379C7.75703 1.66786 8.08279 1.80212 8.34961 2.02051L8.47754 2.13672L8.47852 2.1377C8.806 2.46569 8.99015 2.91038 8.99023 3.37402C8.99023 3.7798 8.84934 4.17121 8.59473 4.48242L8.47852 4.61133L5.22754 7.8623C4.89954 8.18968 4.45486 8.37398 3.99121 8.37402C3.52761 8.37402 3.08292 8.18965 2.75488 7.8623L1.49121 6.59863L1.47949 6.58594C1.17042 6.25422 1.00181 5.8156 1.00977 5.3623L1.02148 5.19336C1.06638 4.80245 1.2419 4.43583 1.52246 4.15527C1.84299 3.83487 2.27541 3.65165 2.72852 3.64355L2.89844 3.64844C3.23454 3.67514 3.55557 3.79897 3.82324 4.00391L3.95312 4.1123L3.99121 4.15039L6.00391 2.1377V2.13672C6.33205 1.80893 6.77743 1.625 7.24121 1.625L7.41406 1.63379Z",stroke:"white",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M7.41406 1.63379C7.75703 1.66786 8.08279 1.80212 8.34961 2.02051L8.47754 2.13672L8.47852 2.1377C8.806 2.46569 8.99015 2.91038 8.99023 3.37402C8.99023 3.7798 8.84934 4.17121 8.59473 4.48242L8.47852 4.61133L5.22754 7.8623C4.89954 8.18968 4.45486 8.37398 3.99121 8.37402C3.52761 8.37402 3.08292 8.18965 2.75488 7.8623L1.49121 6.59863L1.47949 6.58594C1.17042 6.25422 1.00181 5.8156 1.00977 5.3623L1.02148 5.19336C1.06638 4.80245 1.2419 4.43583 1.52246 4.15527C1.84299 3.83487 2.27541 3.65165 2.72852 3.64355L2.89844 3.64844C3.23454 3.67514 3.55557 3.79897 3.82324 4.00391L3.95312 4.1123L3.99121 4.15039L6.00391 2.1377V2.13672C6.33205 1.80893 6.77743 1.625 7.24121 1.625L7.41406 1.63379Z",stroke:"#DDF4FF",strokeWidth:"2"})]}),t[0]=e):e=t[0],e};try{j.displayName||(j.displayName="SubAgentSelector")}catch{}try{w.displayName||(w.displayName="IconWithCheck")}catch{}try{N.displayName||(N.displayName="CheckIcon")}catch{}var S=n(95304),C=n(25641);let I={extraToolbarActions:"NewTaskChatInput-module__extraToolbarActions--tmsZL"};function k({referenceRepo:e,reference:t}){return t.range?(0,C.XN)(t.path,t.range,e):(0,C.Od)(t.path,e)}function T({handleUserSubmit:e,initialRepo:t,initialReference:n,hideRepoSelector:p}){let h=(0,s.b)(),[f,g]=(0,r.useState)(null),[y,_]=(0,r.useState)(!0),[x,v]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),N=(0,u.G7)("copilot_immersive_agent_branch_selection"),[T,E]=(0,r.useState)(""),[L,A]=(0,r.useState)(null),[R,D]=(0,r.useState)(null),[P,O]=(0,r.useState)(n||null),[B]=(0,m.ok)(),M=B.get("branch"),F=t&&`${t.ownerLogin}/${t.name}`,U=B.get("repo")??F,V=(0,u.G7)("copilot_swe_agent_use_subagents");(0,r.useEffect)(()=>{if(t&&Object.keys(t).length>0){let e=`${t.ownerLogin}/${t.name}`;g({id:t.id,owner:t.ownerLogin,name:e,nameOnly:t.name,nameWithOwner:e,enabled:!0,defaultBranch:t.defaultBranch,private:t.private});let n=M??t?.defaultBranch;if(n)E(n);else{let t=async()=>{try{let t=(await (0,S.P0)(e)).find(t=>t.nameWithOwner===e);t&&(E(t.defaultBranch),A(t.defaultBranch))}finally{v(!1)}};v(!0),t()}h.clearCurrentReferences(),_(!1)}else(async()=>{try{let e=await (0,S.P0)(),t=U?e.find(e=>e.nameWithOwner===U&&e.enabled):void 0;t||(t=e.find(e=>e.enabled)),t&&(g(t),E(M??t.defaultBranch))}catch{}finally{_(!1)}})()},[]);let $=(0,r.useCallback)(async t=>e(t,f,T,R||"",b&&P?(0,C.z$)(k({referenceRepo:b,reference:P})):void 0),[e,f,T,R,P,b]),W=(0,u.G7)("copilot_agent_tasks_btn_file_reference");return(0,r.useEffect)(()=>{W&&t?.id!=null&&(async()=>{let e=await h.service.fetchRepo(t.id);e.payload&&w(e.payload)})()},[t,h,W]),(0,a.jsx)(i.V,{modes:[{name:"Agent",icon:(0,a.jsx)(l.AgentIcon,{}),submitLabel:"Start task",placeholder:"Describe a coding task to work on",textAreaAriaLabel:"Coding task prompt"}],size:"large",onSubmit:$,initialReference:b&&P?k({reference:P,referenceRepo:b}):void 0,extraToolbar:(0,a.jsxs)("div",{className:I.extraToolbarActions,children:[y?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o.f,{height:"32px",width:"130px"})}):p?null:(0,a.jsx)(c.P,{repositoryLoader:S.P0,selectionVariant:"single",selectAllOption:!1,onSelect:e=>{e&&(g(e),E(e.defaultBranch))},currentSelection:f||void 0,buttonText:f?.nameWithOwner||"Select repository",width:"medium",additionalButtonProps:{"aria-label":`Repository: ${f?.nameWithOwner||"Select repository"}`}}),N&&(f&&!x?(0,a.jsx)(d.PI,{cacheKey:"agent-sessions-ref-selector",canCreate:!1,currentCommitish:T,defaultBranch:f.defaultBranch,owner:f.owner,repo:f.nameOnly,types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,onSelectItem:e=>{E(e)}}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o.f,{height:"32px",width:"100px"})})),V&&f&&(0,a.jsx)(j,{selectedAgent:R,onSelect:D,repo:f,branch:f.defaultBranch??L??T})]}),submitDisabled:!f||!T,onRemoveReference:()=>{O(null)}})}try{T.displayName||(T.displayName="NewTaskChatInput")}catch{}},47865:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(21728),i=n(97665),s=n(94747),r=n(69599),o=n(51120),l=n(55899),c=n(93654);function d(e){let t,n,o,d,m,p,h,f,g,y=(0,a.c)(20),{onError:_}=e,x=(0,i.jE)();y[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.G7)("copilot_immersive_agent_branch_selection"),y[0]=t):t=y[0];let v=t;y[1]===Symbol.for("react.memo_cache_sentinel")?(n=["createTask"],y[1]=n):n=y[1],y[2]!==x?(o=async e=>{await x.cancelQueries({queryKey:c.ZL});let t=x.getQueryData(c.ZL)??[],n=function({clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:a,eventType:i,subagent:s}){return{resource_type:"pull",resource_id:-1,resource_global_id:"",session_count:1,latest_session_updated_at:new Date().toISOString(),latest_session_state:"in_progress",event_identifiers:[e],event_type:i,isOptimistic:!0,clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:a,subagent:s}}(e);return x.setQueryData(c.ZL,[n,...t]),{previousTasks:t}},y[2]=x,y[3]=o):o=y[3],y[4]===Symbol.for("react.memo_cache_sentinel")?(d=async e=>{if(!(await u({...e,isBranchSelectionEnabled:v,title:e.title??e.problemStatement})).ok)throw Error(`Failed to create task: ${e.clientGeneratedId}`);return e.clientGeneratedId},y[4]=d):d=y[4],y[5]!==_||y[6]!==x?(m=(e,t)=>{let n=(x.getQueryData(c.ZL)??[]).filter(e=>e.clientGeneratedId!==t.clientGeneratedId);x.setQueryData(c.ZL,n),_?.(e,t)},y[5]=_,y[6]=x,y[7]=m):m=y[7],y[8]!==x?(p=()=>{x.invalidateQueries({queryKey:c.ZL})},y[8]=x,y[9]=p):p=y[9],y[10]!==o||y[11]!==m||y[12]!==p?(h={mutationKey:n,onMutate:o,mutationFn:d,onError:m,onSuccess:p},y[10]=o,y[11]=m,y[12]=p,y[13]=h):h=y[13];let b=(0,s.n)(h);y[14]!==b?(f=(e,t)=>{let n=t??(0,l.u)();b.mutate({...e,clientGeneratedId:n})},y[14]=b,y[15]=f):f=y[15];let j=f;return y[16]!==j||y[17]!==b.error||y[18]!==b.isPending?(g={createTask:j,isCreating:b.isPending,createError:b.error},y[16]=j,y[17]=b.error,y[18]=b.isPending,y[19]=g):g=y[19],g}async function u({clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:a,isBranchSelectionEnabled:i,eventType:s,title:l,reference:c,subagent:d}){let u=`/agents/swe/jobs/${t}`,m=(0,r.G7)("copilot_agent_tasks_btn_file_reference"),p=c&&m?`On ${c}, `:"";return await (0,o.I)({path:u,method:"POST",body:{problem_statement:p+n,pull_request:{...i&&a&&{base_ref:`refs/heads/${a}`},...l&&{title:l}},event_identifiers:[e],event_type:s,subagent:d}})}},34001:(e,t,n)=>{n.d(t,{t:()=>c});var a=n(21728),i=n(42455),s=n(67154),r=n(78314),o=n(51120),l=n(96540);function c(e){let t,n,s,c,p,h,f=(0,a.c)(20),{pullId:g,initialData:y,sessionsPollingInterval:_}=e,x=(0,r.t)(),[v,b]=(0,l.useState)(0),[j,w]=(0,l.useState)(!1),N=v>0&&!j,S=m;f[0]!==g||f[1]!==x.name||f[2]!==x.ownerLogin?(t=["agent-sessions",x.ownerLogin,x.name,g],f[0]=g,f[1]=x.name,f[2]=x.ownerLogin,f[3]=t):t=f[3],f[4]!==g?(n=async()=>{try{let e=await (0,o.I)({path:`/agents/sessions/resource/pull/${g}`}),t=await e.json(),n=S(t.sessions);return b(0),w(!1),n.sort(u)}catch(e){throw b(e=>{let t=e+1;return t>=10&&w(!0),t}),e}},f[4]=g,f[5]=n):n=f[5],f[6]!==y?(s=y?S(y):y,f[6]=y,f[7]=s):s=f[7],f[8]!==_?(c=e=>{let t=e.state.data;return t?t.some(d)?_:10*_:_},f[8]=_,f[9]=c):c=f[9];let C=v<10;f[10]!==t||f[11]!==n||f[12]!==s||f[13]!==c||f[14]!==C?(p={queryKey:t,queryFn:n,initialData:s,refetchInterval:c,enabled:C},f[10]=t,f[11]=n,f[12]=s,f[13]=c,f[14]=C,f[15]=p):p=f[15];let I=(0,i.b)(p);return f[16]!==N||f[17]!==I||f[18]!==j?(h={...I,timedOut:j,isRetrying:N},f[16]=N,f[17]=I,f[18]=j,f[19]=h):h=f[19],h}function d(e){return e.state===s.Yj.InProgress||e.state===s.Yj.Idle||e.state===s.Yj.WaitingForUser||e.state===s.Yj.Queued}function u(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()}function m(e){if(!e)return[];let t=new Set,n=[];for(let a of e)t.has(a.id)||(t.add(a.id),n.push(a));return n}},19199:(e,t,n)=>{n.d(t,{n:()=>w});var a=n(74848),i=n(82075),s=n(21373),r=n(1481),o=n(96540),l=n(13107),c=n(26410),d=n(37285),u=n(20622),m=n(53885),p=n(96379),h=n(65510),f=n(91747),g=n(31604),y=n(1992),_=n(38621);let x=({isPrimary:e,children:t,size:n,onOpenChange:i})=>{let r=(0,f.u)("accessible_code_button"),[l,c]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{r&&i&&i(l)},[l,r]),r)?(0,a.jsx)(g.T,{align:"end",focusZoneSettings:{disabled:!0},open:l,onOpen:()=>c(!0),onClose:()=>c(!1),renderAnchor:t=>(0,a.jsx)(s.Q,{...t,variant:e?"primary":void 0,leadingVisual:()=>(0,a.jsx)(_.CodeIcon,{className:"hide-sm"}),trailingVisual:()=>(0,a.jsx)(_.TriangleDownIcon,{}),size:n||"medium",children:"Code"}),children:t}):(0,a.jsxs)(y.W,{children:[(0,a.jsx)(y.W.Button,{variant:e?"primary":void 0,leadingVisual:()=>(0,a.jsx)(_.CodeIcon,{className:"hide-sm"}),size:n||"medium",children:"Code"}),(0,a.jsx)(y.W.Overlay,{width:"auto",align:"end",children:t})]})};try{x.displayName||(x.displayName="CodeMenuButton")}catch{}let v={TabNav:"CodeDropdownButton-module__TabNav--zWa9N",NavItem:"CodeDropdownButton-module__NavItem--_hXZP"},b=(0,i.A)("localStorage"),j={Local:"local",Codespaces:"cloud"};function w(e){var t,n;let{primary:i,size:d,showCodespacesTab:u,isEnterprise:m,localTab:p,codespacesTab:h,localTabProps:f,codespacesPath:g}=e,y="code-button-default-tab",[_,w]=(0,o.useState)(j.Local),S=(0,o.useCallback)(e=>{w(j.Codespaces),b.setItem(y,j.Codespaces),e?.preventDefault()},[]),C=(0,o.useCallback)(e=>{w(j.Local),b.setItem(y,j.Local),e?.preventDefault()},[]);(0,o.useEffect)(()=>{b.getItem(y)===j.Codespaces&&u&&S()},[]);let I=!m&&u;return(0,a.jsxs)(x,{size:d,isPrimary:i,children:[I&&(0,a.jsxs)(r.A,{className:v.TabNav,children:[(0,a.jsx)(r.A.Link,{as:s.Q,selected:_===j.Local,onClick:C,className:v.NavItem,children:"Local"}),!m&&u&&(0,a.jsx)(r.A.Link,{as:s.Q,selected:_===j.Codespaces,onClick:S,className:v.NavItem,children:"Codespaces"})]}),(0,a.jsxs)("div",{className:"react-overview-code-button-action-list py-0",children:[_===j.Local&&(p||((t=f)?(0,a.jsx)(c.F,{...t}):null)),_===j.Codespaces&&(h||((n=g)?(0,a.jsx)(l.VO,{children:(0,a.jsx)(N,{codespacesPath:n})}):null))]})]})}function N(e){let t=function(e){let t=(0,m.e)(u.u.codeButton);return(0,h.U)({queryKey:[u.u.codeButton,t],queryFn:async()=>{let e=await (0,p.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return(0,d.Av)(n),n},initialData:void 0,staleTime:1/0})}().data;return(0,a.jsx)(l.NF,{codespacesPath:e.codespacesPath,...t})}try{w.displayName||(w.displayName="CodeDropdownButton")}catch{}try{N.displayName||(N.displayName="SuspendedCodespacesTab")}catch{}},13107:(e,t,n)=>{n.d(t,{NF:()=>g,QS:()=>u,VO:()=>h,wW:()=>y});var a=n(74848),i=n(73017),s=n(96379),r=n(1805),o=n(69726),l=n(96540),c=n(75202),d=n(65510);function u(e,t){let n=encodeURIComponent(t);return`/codespaces?codespace%5Bref%5D=${n}&current_branch=${n}&event_target=REPO_PAGE&repo=${e}`}function m(e){return(0,a.jsxs)("span",{children:["An unexpected error occurred. Please"," ",(0,a.jsx)(r.A,{inline:!0,href:e,children:"contact support"})," ","for more information."]})}function p({header:e,message:t}){return(0,a.jsxs)("div",{className:"blankslate",children:[(0,a.jsx)("p",{className:"fgColor-default text-bold mb-1",children:e}),(0,a.jsx)("p",{className:"mt-2 mx-4",children:t})]})}function h({children:e}){return(0,a.jsx)("div",{className:"d-flex flex-justify-center",children:(0,a.jsx)(c.t,{fallback:(0,a.jsx)(p,{header:"Codespaces data failed to load.",message:"Refresh the page and try again."}),children:(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)("div",{className:"m-2",children:(0,a.jsx)(o.A,{})}),children:e})})})}function f({codespacesPath:e}){let{data:t}=(0,d.U)({queryKey:["CodespacesTabContent.content",e],queryFn:async()=>{let t=await (0,s.QJ)(e);if(t.status>=400&&t.status<=499)return"";if(!t.ok)throw Error(`HTTP ${t.status}`);return await t.text()}});return(0,a.jsx)(i.vb,{className:"width-full",html:t})}function g(e){let{hasAccessToCodespaces:t,repositoryPolicyInfo:n,contactPath:i,currentUserIsEnterpriseManaged:s,enterpriseManagedBusinessName:o,newCodespacePath:l,codespacesPath:c,isLoggedIn:d}=e;if(!t){if(!d)return(0,a.jsx)(p,{header:"Sign in required",message:(0,a.jsxs)("span",{children:["Please"," ",(0,a.jsx)(r.A,{inline:!0,href:l,children:"sign in"})," ","to use Codespaces."]})});if(n?.allowed)if(!n?.changesWouldBeSafe)return(0,a.jsx)(p,{header:"Repository access limited",message:(0,a.jsx)("span",{children:"You do not have access to push to this repository and its owner has disabled forking."})});else return(0,a.jsx)(p,{header:"Codespace access limited",message:m(i)});{let e=null;return e=!n?.canBill&&s?(0,a.jsxs)("span",{children:[(0,a.jsx)(r.A,{href:"https://docs.github.com/enterprise-cloud@latest/admin/identity-and-access-management/using-enterprise-managed-users-for-iam/about-enterprise-managed-users",children:"Enterprise-managed users"}),` must have their Codespaces usage paid for by ${o||"their enterprise"}.`]}):n?.hasIpAllowLists?(0,a.jsxs)("span",{children:["Your organization or enterprise enforces"," ",(0,a.jsx)(r.A,{inline:!0,href:"https://docs.github.com/enterprise-cloud@latest/organizations/keeping-your-organization-secure/managing-security-settings-for-your-organization/managing-allowed-ip-addresses-for-your-organization",children:"IP allow lists"}),"which are unsupported by Codespaces at this time."]}):n?.disabledByBusiness?(0,a.jsx)("span",{children:"Your enterprise has disabled Codespaces at this time. Please contact your enterprise administrator for more information."}):n?.disabledByOrganization?(0,a.jsx)("span",{children:"Your organization has disabled Codespaces on this repository. Please contact your organization administrator for more information."}):m(i),(0,a.jsx)(p,{header:"Codespace access limited",message:e})}}return(0,a.jsx)(f,{codespacesPath:c})}function y(e){return(0,a.jsx)(h,{children:(0,a.jsx)(g,{...e})})}try{p.displayName||(p.displayName="ErrorMessage")}catch{}try{h.displayName||(h.displayName="CodespacesTabWrapper")}catch{}try{f.displayName||(f.displayName="ServerRenderedCodespacesTabContent")}catch{}try{g.displayName||(g.displayName="CodespacesTabContent")}catch{}try{y.displayName||(y.displayName="CodespacesTab")}catch{}},26410:(e,t,n)=>{n.d(t,{J:()=>v,F:()=>_});var a=n(74848),i=n(96540),s=n(39111),r=n(96459),o=n(96379),l=n(1805),c=n(25791),d=n(72511),u=n(5524),m=n(81960),p=n(11196),h=n(98755),f=n(38621);let g={UnderlineNav:"LocalTab-module__UnderlineNav--epbgw",PlatformContents:"LocalTab-module__PlatformContents--rz1GK",CloneContainer:"LocalTab-module__CloneContainer--fne3C",CopyToClipboardButton:"LocalTab-module__CopyToClipboardButton--G8eJx"};var y=n(34164);function _(e){let{httpAvailable:t,sshAvailable:n,httpUrl:m,showCloneWarning:h,sshUrl:y,sshCertificatesRequired:_,sshCertificatesAvailable:b,ghCliUrl:j,newSshKeyUrl:w,setProtocolPath:N}=e.protocolInfo,{defaultProtocol:S}=e.protocolInfo,[C,I]=(0,i.useState)(S),[k,T]=(0,i.useState)(""),{cloneUrl:E,visualStudioCloneUrl:L,showVisualStudioCloneButton:A,showXcodeCloneButton:R,xcodeCloneUrl:D,zipballUrl:P}=e.platformInfo,O=(0,s.X)(["windows","mac"]),B=(0,s.X)(["mac"]),M=(0,r.Z)(),F="mt-2 fgColor-muted text-normal",U=(0,i.useCallback)(e=>{if(C!==e){I(e);let t=new FormData;t.set("protocol_selector",e),(0,o.DI)(N,{method:"post",body:t})}},[C,I,N]),V=(0,i.useMemo)(()=>{let e=[];return t&&e.push({protocol:"http",displayName:"HTTPS",ariaLabel:"Clone with HTTPS",handler:()=>U("http")}),n&&e.push({protocol:"ssh",displayName:"SSH",ariaLabel:"Clone with SSH",handler:()=>U("ssh")}),e.push({protocol:"gh_cli",displayName:"GitHub CLI",ariaLabel:"Clone with GitHub CLI",handler:()=>U("gh_cli")}),e},[t,U,n]),$=(0,i.useMemo)(()=>{let e=[];return O&&e.push({name:"githubDesktop",text:"Open with GitHub Desktop",url:E,icon:f.DesktopDownloadIcon}),O&&A&&e.push({name:"visualStudio",text:"Open with Visual Studio",url:L}),B&&R&&e.push({name:"xcode",text:"Open with Xcode",url:D}),e.push({name:"zip",text:"Download ZIP",url:P,icon:f.FileZipIcon}),e},[E,B,O,A,R,L,D,P]);return(0,a.jsx)("div",{children:"githubDesktop"===k?(0,a.jsx)(x,{platform:"GitHub Desktop",href:"https://desktop.github.com/"}):"visualStudio"===k?(0,a.jsx)(x,{platform:"Visual Studio"}):"xcode"===k?(0,a.jsx)(x,{platform:"Xcode",href:"https://developer.apple.com/xcode/"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"m-3",children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,a.jsx)(f.TerminalIcon,{className:"mr-2"}),(0,a.jsx)("p",{className:"flex-1 text-bold mb-0",children:"Clone"}),(0,a.jsx)(p.m,{text:"Which remote URL should I use?",type:"label",direction:"w",children:(0,a.jsx)(l.A,{muted:!0,href:`${e.helpUrl}/articles/which-remote-url-should-i-use`,children:(0,a.jsx)(f.QuestionIcon,{className:"mr-1"})})})]}),(0,a.jsx)(c.O,{"aria-label":"Remote URL selector",className:g.UnderlineNav,children:V.map(e=>(0,a.jsx)(c.O.Item,{"aria-current":C===e.protocol?"page":void 0,"aria-label":e.ariaLabel,onClick:e.handler,children:e.displayName},e.protocol))}),"http"===C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{inputId:"clone-with-https",inputLabel:"Clone with HTTPS url",url:m}),(0,a.jsx)("p",{className:F,children:"Clone using the web URL."})]}):"ssh"===C?(0,a.jsxs)(a.Fragment,{children:[h&&(0,a.jsxs)(d.A,{className:"mb-2",variant:"warning",children:["You don't have any public SSH keys in your GitHub account. ","You can"," ",(0,a.jsx)(l.A,{inline:!0,href:w,children:"add a new public key"}),", or try cloning this repository via HTTPS."]}),(0,a.jsx)(v,{inputId:"clone-with-ssh",inputLabel:"Clone with SSH url",url:y}),(0,a.jsx)("p",{className:F,children:_?"Use a password-protected SSH certificate.":b?"Use a password-protected SSH key or certificate.":"Use a password-protected SSH key."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{buttonAriaLabel:"Copy command to clipboard",inputId:"clone-with-gh-cli",inputLabel:"Clone with GitHub CLI command",url:j}),(0,a.jsxs)("p",{className:F,children:["Work fast with our official CLI."," ",(0,a.jsx)(l.A,{inline:!0,href:"https://cli.github.com",target:"_blank","aria-label":"Learn more about the GitHub CLI",children:"Learn more"})]})]})]}),(0,a.jsx)(u.l,{variant:"inset",className:"border-top",children:$.map(e=>"zip"===e.name?(0,a.jsxs)(u.l.LinkItem,{"data-turbo":"false",href:e.url,rel:"nofollow",children:[e.icon&&(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(e.icon,{})}),e.text]},e.name):(0,a.jsxs)(u.l.Item,{onSelect:t=>{T(e.name),t.preventDefault(),M(e.url)},children:[e.icon&&(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(e.icon,{})}),e.text]},e.name))})]})})}function x({platform:e,href:t}){return(0,a.jsxs)("div",{className:(0,y.$)("p-3",g.PlatformContents),children:[(0,a.jsx)(m.A,{as:"h4",className:"mb-3 text-center",children:`Launching ${e}`}),t&&(0,a.jsxs)("p",{className:"mb-3",children:["If nothing happens, ",(0,a.jsx)(l.A,{inline:!0,href:t,children:`download ${e}`})," and try again."]})]})}function v({buttonAriaLabel:e="Copy url to clipboard",inputId:t,inputLabel:n,url:i}){return(0,a.jsxs)("div",{className:(0,y.$)("d-flex mb-2",g.CloneContainer),children:[(0,a.jsx)("label",{htmlFor:t,className:"sr-only",children:n}),(0,a.jsx)("input",{id:t,type:"text",className:"form-control input-monospace input-sm color-bg-subtle","data-autoselect":!0,value:i,readOnly:!0,style:{flexGrow:1}}),(0,a.jsx)(h.T,{className:(0,y.$)("ml-1 mr-0",g.CopyToClipboardButton),textToCopy:i,ariaLabel:e,tooltipProps:{direction:"nw"}})]})}try{_.displayName||(_.displayName="LocalTab")}catch{}try{x.displayName||(x.displayName="LaunchingPlatformContents")}catch{}try{v.displayName||(v.displayName="CloneUrl")}catch{}},17005:(e,t,n)=>{n.d(t,{l:()=>u});var a=n(74848),i=n(21728),s=n(77274),r=n(96379),o=n(96540),l=n(35247),c=n(54508);let d=[{name:"Hate it",value:1,icon:s.YS,color:"veryDissatisfied"},{name:"Not great",value:2,icon:s.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:3,icon:s.Cf,color:"satisfied"},{name:"Love it",value:4,icon:s.mN,color:"verySatisfied"}],u=(0,o.forwardRef)(function(e,t){let n,u,m,p,h=(0,i.c)(7),{mode:f,returnFocusRef:g}=e,y=(0,o.useRef)(null),_=(0,o.useRef)(null),x=(0,o.useRef)(void 0);h[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:e=>{x.current=e,l.W.copilotChatInterviewSurvey?y.current?.openDialog():_.current?.openDialog(e)}}),h[0]=n):n=h[0],(0,o.useImperativeHandle)(t,n),h[1]!==f?(u=async(e,t)=>{let n=[];if(null==e&&n.push("Please select a rating."),t.length>2e3&&n.push("Please keep your feedback within 2000 characters or less."),n.length>0)return n;let a={rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:f};try{(await (0,r.lS)("/github-copilot/feedback",{method:"POST",body:a})).ok||n.push("An error occurred while submitting your feedback.")}catch{n.push("An error occurred while submitting your feedback.")}return n},h[1]=f,h[2]=u):u=h[2];let v=u;return h[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,a.jsx)(c.E,{ref:y,onClose:e=>{"no-thanks"===e&&_.current?.openDialog(x.current)}}),h[3]=m):m=h[3],h[4]!==v||h[5]!==g?(p=(0,a.jsxs)(a.Fragment,{children:[m,(0,a.jsx)(s.NE,{ref:_,options:d,onSubmit:v,returnFocusRef:g})]}),h[4]=v,h[5]=g,h[6]=p):p=h[6],p});u.displayName="ConversationFeedbackDialog"},87255:(e,t,n)=>{n.d(t,{Y:()=>C});var a,i=n(74848),s=n(21728),r=n(70170),o=n(53419),l=n(29731),c=n(83494),d=n(88431),u=n(96379),m=n(56149),p=n(36284),h=n(4175),f=n(21373),g=n(15042),y=n(96540),_=n(40961),x=n(2635),v=n(33592);let b={footerContainer:"PersonalInstructionsDialog-module__footerContainer--T9wxr"};var j=n(38621),w=n(5524);let N={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},S=(0,y.forwardRef)(function(e,t){let n,a,r,o,l,c,d,u,m=(0,s.c)(19),{onSelect:p}=e,[h,f]=(0,y.useState)(!1);m[0]!==h?(n=()=>f(!h),m[0]=h,m[1]=n):n=m[1];let g=n;m[2]===Symbol.for("react.memo_cache_sentinel")?(a={marginBottom:"1px"},m[2]=a):a=m[2],m[3]!==p||m[4]!==h?(r=h&&Object.entries(N)?.map(e=>{let[t,n]=e;return(0,i.jsxs)(w.l.Item,{"aria-label":`${n.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>p(t,n.body),children:[(0,i.jsx)(j.PlusIcon,{}),t]},t)}),m[3]=p,m[4]=h,m[5]=r):r=m[5],m[6]!==r?(o=(0,i.jsx)(w.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:r}),m[6]=r,m[7]=o):o=m[7];let _=h?"Hide templates":"Show templates";return m[8]===Symbol.for("react.memo_cache_sentinel")?(l={border:"1px solid transparent"},m[8]=l):l=m[8],m[9]!==h?(c=h?(0,i.jsx)(j.XIcon,{}):(0,i.jsx)(j.LightBulbIcon,{}),m[9]=h,m[10]=c):c=m[10],m[11]!==_||m[12]!==c||m[13]!==g?(d=(0,i.jsx)(w.l,{className:"d-flex flex-column flex-justify-end",children:(0,i.jsx)(w.l.Item,{"aria-label":_,"data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:l,onSelect:g,children:c})}),m[11]=_,m[12]=c,m[13]=g,m[14]=d):d=m[14],m[15]!==t||m[16]!==o||m[17]!==d?(u=(0,i.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:a,children:[o,d]}),m[15]=t,m[16]=o,m[17]=d,m[18]=u):u=m[18],u});try{S.displayName||(S.displayName="PersonalInstructionsTemplates")}catch{}try{(a=PersonalInstructionsTemplatesWithRef).displayName||(a.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let C=({onDismiss:e,returnFocusRef:t})=>{let n=(0,x.Pk)(),a=(0,v.b)(),[j,w]=(0,y.useState)(n.personalInstructions??""),[N,C]=(0,y.useState)(void 0),[k,T]=(0,y.useState)(!1),E=(0,y.useRef)(null),L=(0,y.useRef)(null),[A,R]=(0,y.useState)(""),D=((e,t)=>{let n,a,i=(0,s.c)(4),[o,l]=(0,y.useState)(48);return i[0]!==e||500!==i[1]?(n=()=>{let t=(0,r.s)(()=>{e?.current&&l(e.current.clientHeight??48)},500),n=new ResizeObserver(t);return e?.current&&n.observe(e.current),()=>{t.cancel(),n?.disconnect?.()}},a=[e,500],i[0]=e,i[1]=500,i[2]=n,i[3]=a):(n=i[2],a=i[3]),(0,y.useEffect)(n,a),o})(L);(0,d.N)(()=>{E?.current&&(E.current.scrollTop=E.current.scrollHeight)},[j]);let P=(0,y.useCallback)(async()=>{if(!k){T(!0),A&&(0,o.BI)("copilot_personal_instruction_template_usage",{content:A});try{let t=await (0,u.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:j}});if(t.ok)(0,o.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),a.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:j}),(0,_.flushSync)(()=>e());else{let e=await t.json();C(String(e.errorMessage))}}catch{C("An error occurred while saving your personal instructions.")}finally{T(!1)}}},[k,j,a,e,A]),O=(e,t)=>{t&&(w(j?`${j}
${t}`:t),R(e),E?.current?.focus())},B=()=>{P()},M=(0,y.useCallback)(()=>{(0,o.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,_.flushSync)(()=>e())},[e]);return(0,i.jsx)(m.ZL,{children:(0,i.jsx)(g.l,{onClose:M,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",returnFocusRef:t,renderBody:()=>(0,i.jsx)(g.l.Body,{children:(0,i.jsx)("form",{onSubmit:P,children:(0,i.jsxs)(p.A,{children:[(0,i.jsx)(p.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,i.jsx)("div",{className:"width-full position-relative",children:(0,i.jsxs)(c.tL,{commands:{"github:submit-form":B},children:[(0,i.jsx)(h.Ay,{ref:E,className:"width-full",style:{paddingBottom:`${D}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:j,validationStatus:N||j.length>4e3?"error":void 0,...(0,l.G)("prompt-input"),onChange:e=>{w(e.target.value),C(void 0)}}),(0,i.jsx)(S,{ref:L,onSelect:O})]})}),(0,i.jsx)(I,{text:j,promptCharLimit:4e3}),N&&(0,i.jsx)(p.A.Validation,{variant:"error",children:(0,i.jsx)("span",{...(0,l.G)("error-message"),children:N})})]})})}),renderFooter:()=>(0,i.jsxs)("div",{className:b.footerContainer,children:[(0,i.jsx)(f.Q,{variant:"default",onClick:M,children:"Cancel"}),(0,i.jsx)(f.Q,{loading:k,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:P,children:"Save"})]})})})};function I(e){let t,n,a,r,o=(0,s.c)(10),{text:c,promptCharLimit:d}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.G)("current-character-count"),o[0]=t):t=o[0],o[1]!==c.length?(n=(0,i.jsx)("span",{className:"text-tabular-nums",...t,children:c.length}),o[1]=c.length,o[2]=n):n=o[2],o[3]!==d||o[4]!==n?(a=(0,i.jsxs)(i.Fragment,{children:[n," ","/ ",d," characters"]}),o[3]=d,o[4]=n,o[5]=a):a=o[5];let u=a;return o[6]!==u||o[7]!==d||o[8]!==c.length?(r=(0,i.jsx)(i.Fragment,{children:c.length>d?(0,i.jsx)(p.A.Validation,{variant:"error",children:u}):(0,i.jsx)(p.A.Caption,{children:u})}),o[6]=u,o[7]=d,o[8]=c.length,o[9]=r):r=o[9],r}try{C.displayName||(C.displayName="PersonalInstructionsDialog")}catch{}try{I.displayName||(I.displayName="CharacterCount")}catch{}},40683:(e,t,n)=>{n.d(t,{p:()=>L,V:()=>E});var a=n(74848),i=n(21728),s=n(53419),r=n(79634),o=n(97286),l=n(38621),c=n(5524),d=n(40928),u=n(36284),m=n(99511),p=n(15042),h=n(96540),f=n(84802),g=n(25641),y=n(35247),_=n(2635),x=n(33592);let v={hideOnDesktop:"ConversationActions-module__hideOnDesktop--J5K5t"};var b=n(40260),j=n(71315),w=n(21373),N=n(69726),S=n(98552),C=n(46251),I=n(20139);let k={container:"ConversationSharingDialog-module__container--wNKq6",innerContainer:"ConversationSharingDialog-module__innerContainer--OaIjU",sharedLinkContainer:"ConversationSharingDialog-module__sharedLinkContainer--jDnVn",textInputContainer:"ConversationSharingDialog-module__textInputContainer--jHhX6",textInput:"ConversationSharingDialog-module__textInput--DymUf",success:"ConversationSharingDialog-module__success--zCOcd",spinner:"ConversationSharingDialog-module__spinner--KpY5f",successIcon:"ConversationSharingDialog-module__successIcon--z1nhd",mutedText:"ConversationSharingDialog-module__mutedText--r3ZSy",warningText:"ConversationSharingDialog-module__warningText--t4nnB",snapshotText:"ConversationSharingDialog-module__snapshotText--XNu1W",buttonStack:"ConversationSharingDialog-module__buttonStack--gWe8E",lockIcon:"ConversationSharingDialog-module__lockIcon--yCWzZ",cancelButton:"ConversationSharingDialog-module__cancelButton--CL34L",quickFadeUp:"ConversationSharingDialog-module__quickFadeUp--_qvsX"},T=e=>{let t,n,r,o,c,d,f,g,v,T,E,L,A,R,D,P,O,B,M,F,U,V,$,W,H,q,z,G,K,Q=(0,i.c)(94),{closeDialog:Y,threadId:J,returnFocusRef:X,showThirdPartyMcpWarning:Z}=e,ee=void 0!==Z&&Z,et=(0,_.Pk)(),en=(0,x.b)(),[ea,ei]=(0,h.useState)(!1),[es,er]=(0,h.useState)(!1),[eo,el]=(0,h.useState)(!1),[ec,ed]=(0,h.useState)(!1),{selectedThreadID:eu,ssoOrganizations:em,apiUrl:ep,threads:eh}=et;Q[0]!==eu||Q[1]!==J||Q[2]!==eh?(t=eh.get(J||eu),Q[0]=eu,Q[1]=J,Q[2]=eh,Q[3]=t):t=Q[3];let ef=t;Q[4]!==ef?.sharedID?(n=()=>ef?.sharedID||"",Q[4]=ef?.sharedID,Q[5]=n):n=Q[5];let[eg,ey]=(0,h.useState)(n);Q[6]!==ef?(r=()=>ef?.sharedMessageID?ef.sharedMessageID:"",Q[6]=ef,Q[7]=r):r=Q[7];let[e_,ex]=(0,h.useState)(r),ev=j.fV.origin,eb=`${ev}/copilot/share/${eg}`;Q[8]!==ea?(o=()=>{if(ea){let e=setTimeout(()=>ei(!1),1500);return()=>clearTimeout(e)}},c=[ea],Q[8]=ea,Q[9]=o,Q[10]=c):(o=Q[9],c=Q[10]),(0,h.useEffect)(o,c),Q[11]!==eo?(d=()=>{if(eo){let e=setTimeout(()=>el(!1),1500);return()=>clearTimeout(e)}},f=[eo],Q[11]=eo,Q[12]=d,Q[13]=f):(d=Q[12],f=Q[13]),(0,h.useEffect)(d,f),Q[14]!==eb?(g=async()=>{try{await (0,b.D)(eb),ei(!0),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},Q[14]=eb,Q[15]=g):g=Q[15];let ej=g;Q[16]!==ef?.sharedID||Q[17]!==eu||Q[18]!==J?(v=()=>{(J||eu)&&ey(ef?.sharedID||"")},Q[16]=ef?.sharedID,Q[17]=eu,Q[18]=J,Q[19]=v):v=Q[19];let ew=ef?.sharedID;Q[20]!==eu||Q[21]!==ew||Q[22]!==J?(T=[ew,eu,J],Q[20]=eu,Q[21]=ew,Q[22]=J,Q[23]=T):T=Q[23],(0,h.useEffect)(v,T),Q[24]!==ep||Q[25]!==en||Q[26]!==eu||Q[27]!==em||Q[28]!==J?(E=async()=>{er(!0);let e=J||eu,t=new I.k(ep,em),n=await t.shareThread(e,y.W.copilotShareActiveSubthread&&e===eu?en.FindLastMessageID():"");if(n.ok){er(!1);let{sharedAt:t,sharedID:a,sharedMessageID:i}=n.payload;ey(a),el(!0),ex(i),en.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:a,sharedAt:t,sharedMessageID:i}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:a})}else er(!1)},Q[24]=ep,Q[25]=en,Q[26]=eu,Q[27]=em,Q[28]=J,Q[29]=E):E=Q[29];let eN=E;Q[30]!==ep||Q[31]!==en||Q[32]!==eu||Q[33]!==eg||Q[34]!==ec||Q[35]!==em||Q[36]!==J?(L=async()=>{if(!ec)return void ed(!0);ed(!1),er(!0);let e=J||eu,t=new I.k(ep,em),n=await t.unshareThread(e);if(n.ok){er(!1),ex("");let{sharedID:t,sharedAt:a,sharedMessageID:i}=n.payload;en.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:a,sharedMessageID:i}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:eg})}else er(!1)},Q[30]=ep,Q[31]=en,Q[32]=eu,Q[33]=eg,Q[34]=ec,Q[35]=em,Q[36]=J,Q[37]=L):L=Q[37];let eS=L;Q[38]!==eN||Q[39]!==es||Q[40]!==eg?(A=()=>{if(!eg)return(0,a.jsx)(w.Q,{variant:"primary",disabled:es,onClick:eN,children:"Share"})},Q[38]=eN,Q[39]=es,Q[40]=eg,Q[41]=A):A=Q[41];let eC=A;Q[42]!==ej||Q[43]!==eg?(R=()=>{if(eg)return(0,a.jsx)(w.Q,{variant:"primary",autoFocus:!0,onClick:ej,children:"Copy link"})},Q[42]=ej,Q[43]=eg,Q[44]=R):R=Q[44];let eI=R;Q[45]!==eS||Q[46]!==es||Q[47]!==eg?(D=()=>{if(eg)return(0,a.jsx)(w.Q,{variant:"danger",disabled:es,onClick:eS,children:"Unshare"})},Q[45]=eS,Q[46]=es,Q[47]=eg,Q[48]=D):D=Q[48];let ek=D;Q[49]!==eg||Q[50]!==ec?(P=()=>{if(eg&&ec)return(0,a.jsx)(w.Q,{variant:"default",onClick:()=>ed(!1),className:k.cancelButton,children:"Cancel"})},Q[49]=eg,Q[50]=ec,Q[51]=P):P=Q[51];let eT=P;Q[52]!==ea||Q[53]!==es||Q[54]!==eg||Q[55]!==ec||Q[56]!==eo?(O=()=>es?(0,a.jsxs)("div",{className:k.quickFadeUp,children:[(0,a.jsx)(N.A,{size:"small",className:k.spinner}),eg?"Unsharing conversation...":"Sharing conversation..."]}):ec?(0,a.jsx)("div",{className:k.quickFadeUp,children:(0,a.jsx)(S.A,{size:"medium",className:k.warningText,children:"Confirm unsharing this conversation?"})}):ea?(0,a.jsxs)("div",{className:k.quickFadeUp,children:[(0,a.jsx)(l.CheckIcon,{className:k.successIcon}),(0,a.jsx)(S.A,{size:"medium",className:k.success,children:"Copied to clipboard"})]}):eo?(0,a.jsxs)("div",{className:k.quickFadeUp,children:[(0,a.jsx)(l.CheckIcon,{className:k.successIcon}),(0,a.jsx)(S.A,{size:"medium",className:k.success,children:"Conversation shared"})]}):eg?(0,a.jsxs)("div",{children:[(0,a.jsx)(l.UnlockIcon,{className:k.lockIcon}),(0,a.jsx)(S.A,{size:"medium",className:k.mutedText,children:"Visible to anyone with the link"})]}):(0,a.jsx)("div",{}),Q[52]=ea,Q[53]=es,Q[54]=eg,Q[55]=ec,Q[56]=eo,Q[57]=O):O=Q[57];let eE=O,eL=eg?"Conversation shared":"Share conversation";return Q[58]!==e_||Q[59]!==eg||Q[60]!==ee?(B=(0,a.jsx)(C.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:e_?(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:k.snapshotText,children:"This shared conversation is a snapshot"}),", accessible to anyone with the link. It will not update with new messages."]}):eg?(0,a.jsx)("span",{children:`This conversation and future messages are visible to anyone with the link. If private repository content
                is included, repository access is required to view.${ee?" Third-party MCP tool calling is disabled while this thread is shared.":""}`}):(0,a.jsx)("span",{children:`When shared, this conversation and future messages will be visible to anyone with the link. If private repository content is included, repository access is required to view.${ee?" Third-party MCP tool calling will be disabled if the thread is shared.":""}`})}),Q[58]=e_,Q[59]=eg,Q[60]=ee,Q[61]=B):B=Q[61],Q[62]!==eb||Q[63]!==eg?(M=eg&&(0,a.jsx)("div",{className:k.innerContainer,children:(0,a.jsx)("div",{className:k.sharedLinkContainer,children:(0,a.jsxs)(u.A,{id:"share-link",className:k.textInputContainer,children:[(0,a.jsx)(u.A.Label,{children:"Share link"}),(0,a.jsx)(m.A,{size:"large",readOnly:!0,value:eg&&eb,className:k.textInput})]})})}),Q[62]=eb,Q[63]=eg,Q[64]=M):M=Q[64],Q[65]!==B||Q[66]!==M?(F=(0,a.jsxs)(C.B,{direction:"vertical",gap:"condensed",children:[B,M]}),Q[65]=B,Q[66]=M,Q[67]=F):F=Q[67],Q[68]!==eE?(U=(0,a.jsx)("div",{role:"status",children:eE()}),Q[68]=eE,Q[69]=U):U=Q[69],Q[70]!==eC?(V=eC(),Q[70]=eC,Q[71]=V):V=Q[71],Q[72]!==eT?($=eT(),Q[72]=eT,Q[73]=$):$=Q[73],Q[74]!==ek?(W=ek(),Q[74]=ek,Q[75]=W):W=Q[75],Q[76]!==eI?(H=eI(),Q[76]=eI,Q[77]=H):H=Q[77],Q[78]!==V||Q[79]!==$||Q[80]!==W||Q[81]!==H?(q=(0,a.jsxs)(C.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"end",children:[V,$,W,H]}),Q[78]=V,Q[79]=$,Q[80]=W,Q[81]=H,Q[82]=q):q=Q[82],Q[83]!==U||Q[84]!==q?(z=(0,a.jsxs)(C.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"space-between",className:k.buttonStack,children:[U,q]}),Q[83]=U,Q[84]=q,Q[85]=z):z=Q[85],Q[86]!==F||Q[87]!==z?(G=(0,a.jsxs)("div",{className:k.container,children:[F,z]}),Q[86]=F,Q[87]=z,Q[88]=G):G=Q[88],Q[89]!==Y||Q[90]!==X||Q[91]!==eL||Q[92]!==G?(K=(0,a.jsx)(p.l,{title:eL,onClose:Y,width:"large",returnFocusRef:X,children:G}),Q[89]=Y,Q[90]=X,Q[91]=eL,Q[92]=G,Q[93]=K):K=Q[93],K};try{T.displayName||(T.displayName="ConversationSharingDialog")}catch{}function E(e){let t,n,o,d,u,m,p,h,f,y=(0,i.c)(23),{onOpenDialog:x,showShare:b,hideShareOnDesktop:j,isShared:w}=e,N=void 0===b||b,S=void 0!==j&&j,C=void 0!==w&&w,{canShareThread:I}=(0,r.X)(),{isWaitingOnCopilot:k,messages:T}=(0,_.Pk)(),E=(0,g.Q7)(T);y[0]!==T?(t=(0,g.UM)(T),y[0]=T,y[1]=t):t=y[1];let L=t,A=E.length>0||k||L;return y[2]!==x?(n=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),x("rename")},y[2]=x,y[3]=n):n=y[3],y[4]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(c.l.LeadingVisual,{children:(0,a.jsx)(l.PencilIcon,{})}),y[4]=o):o=y[4],y[5]!==n?(d=(0,a.jsxs)(c.l.Item,{onSelect:n,children:[o,"Rename"]}),y[5]=n,y[6]=d):d=y[6],y[7]!==I||y[8]!==S||y[9]!==C||y[10]!==x||y[11]!==A||y[12]!==N?(u=N&&I&&(0,a.jsxs)(c.l.Item,{className:S?v.hideOnDesktop:void 0,disabled:A,onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),x("share")},children:[(0,a.jsx)(c.l.LeadingVisual,{children:C?(0,a.jsx)(l.UnlockIcon,{}):(0,a.jsx)(l.LockIcon,{})}),"Share"]}),y[7]=I,y[8]=S,y[9]=C,y[10]=x,y[11]=A,y[12]=N,y[13]=u):u=y[13],y[14]!==x?(m=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),x("delete")},y[14]=x,y[15]=m):m=y[15],y[16]===Symbol.for("react.memo_cache_sentinel")?(p=(0,a.jsx)(c.l.LeadingVisual,{children:(0,a.jsx)(l.TrashIcon,{})}),y[16]=p):p=y[16],y[17]!==m?(h=(0,a.jsxs)(c.l.Item,{variant:"danger",onSelect:m,children:[p,"Delete"]}),y[17]=m,y[18]=h):h=y[18],y[19]!==h||y[20]!==d||y[21]!==u?(f=(0,a.jsxs)(a.Fragment,{children:[d,u,h]}),y[19]=h,y[20]=d,y[21]=u,y[22]=f):f=y[22],f}function L(e){let t,n,r,l,c,d,u,m=(0,i.c)(33),{visibleDialog:p,onClose:h,threadName:g,threadId:v,selectedThreadId:b,onStartLoading:j,onFinishLoading:w,returnFocusRef:N}=e,{threads:S}=(0,_.Pk)(),C=(0,x.b)(),I=(0,f.G)();m[0]===Symbol.for("react.memo_cache_sentinel")?(t=["copilot-chat-mcps"],m[0]=t):t=m[0],m[1]!==C?(n={queryKey:t,queryFn:async()=>C.service.fetchMCPServers(),placeholderData:A},m[1]=C,m[2]=n):n=m[2];let{data:k}=(0,o.I)(n),E=y.W.copilotThirdPartyMcp&&(k||[]).length>0;m[3]!==h?(r=()=>{(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"}),h()},m[3]=h,m[4]=r):r=m[4];let L=r;m[5]!==C||m[6]!==I||m[7]!==h||m[8]!==w||m[9]!==j||m[10]!==b||m[11]!==v||m[12]!==S?(l=async()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),j();let e=S.get(v);e&&(v===b&&await I({clearTopic:!0,includeThreads:!1}),await C.deleteThread(e)),w(),h()},m[5]=C,m[6]=I,m[7]=h,m[8]=w,m[9]=j,m[10]=b,m[11]=v,m[12]=S,m[13]=l):l=m[13];let P=l;m[14]!==C||m[15]!==h||m[16]!==w||m[17]!==j||m[18]!==v||m[19]!==S?(c=async e=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),j();let t=S.get(v);t&&await C.renameThread(t,e),w(),h()},m[14]=C,m[15]=h,m[16]=w,m[17]=j,m[18]=v,m[19]=S,m[20]=c):c=m[20];let O=c;return m[21]!==L||m[22]!==P||m[23]!==h||m[24]!==N||m[25]!==E||m[26]!==O||m[27]!==v||m[28]!==g||m[29]!==p?(d="delete"===p?(0,a.jsx)(R,{onCancel:h,onConfirm:P,returnFocusRef:N}):"rename"===p?(0,a.jsx)(D,{onCancel:h,currentName:g,onSubmit:O,returnFocusRef:N}):"share"===p?(0,a.jsx)(T,{closeDialog:L,threadId:v,returnFocusRef:N,showThirdPartyMcpWarning:E}):null,m[21]=L,m[22]=P,m[23]=h,m[24]=N,m[25]=E,m[26]=O,m[27]=v,m[28]=g,m[29]=p,m[30]=d):d=m[30],m[31]!==d?(u=(0,a.jsx)(a.Fragment,{children:d}),m[31]=d,m[32]=u):u=m[32],u}function A(e){return e}let R=e=>{let t,n=(0,i.c)(4),{onConfirm:r,onCancel:o,returnFocusRef:l}=e;return n[0]!==o||n[1]!==r||n[2]!==l?(t=(0,a.jsx)(d.K,{title:"Delete conversation",onClose:e=>{if("confirm"===e){(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"});let e=l.current?.closest("nav,aside,section");r(),window.setTimeout(()=>{e instanceof HTMLElement&&e.focus()},0)}else(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),o(),window.setTimeout(()=>l.current?.focus(),0)},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this conversation? This action cannot be undone."}),n[0]=o,n[1]=r,n[2]=l,n[3]=t):t=n[3],t},D=e=>{let t,n,r,o,l,c,d,f,g,y,_,x,v=(0,i.c)(34),{currentName:b,onCancel:j,onSubmit:w,returnFocusRef:N}=e,[S,C]=(0,h.useState)(void 0),I=(0,h.useRef)(null),k=(0,h.useId)(),T=(0,h.useId)();v[0]!==w?(t=e=>{e.preventDefault();let t=I.current?.value?.trim()??"";t?t.length>100?(C("max_length"),I.current?.focus()):(C(void 0),w(t)):(C("required"),I.current?.focus())},v[0]=w,v[1]=t):t=v[1];let E=t;v[2]!==j?(n=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),j()},v[2]=j,v[3]=n):n=v[3];let L=n;v[4]!==T?(r=(0,a.jsx)("span",{id:T,children:"Rename conversation"}),v[4]=T,v[5]=r):r=v[5],v[6]!==L?(o={content:"Cancel",onClick:L},v[6]=L,v[7]=o):o=v[7],v[8]!==k?(l={content:"Update",buttonType:"primary",type:"submit",form:k,onClick:P},v[8]=k,v[9]=l):l=v[9],v[10]!==o||v[11]!==l?(c=[o,l],v[10]=o,v[11]=l,v[12]=c):c=v[12],v[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(u.A.Label,{visuallyHidden:!0,children:"Rename conversation"}),v[13]=d):d=v[13];let A=S?"error-message":void 0,R=S?"true":void 0;return v[14]!==b||v[15]!==T||v[16]!==A||v[17]!==R?(f=(0,a.jsx)(m.A,{"aria-labelledby":T,"aria-describedby":A,"aria-invalid":R,ref:I,defaultValue:b,block:!0}),v[14]=b,v[15]=T,v[16]=A,v[17]=R,v[18]=f):f=v[18],v[19]!==S?(g=S&&(0,a.jsx)(u.A.Validation,{id:"error-message",variant:"error",children:"required"===S?"Enter a name":"Name cannot exceed 100 characters"}),v[19]=S,v[20]=g):g=v[20],v[21]!==f||v[22]!==g?(y=(0,a.jsxs)(u.A,{required:!0,children:[d,f,g]}),v[21]=f,v[22]=g,v[23]=y):y=v[23],v[24]!==k||v[25]!==E||v[26]!==y?(_=(0,a.jsx)("form",{id:k,onSubmit:E,children:y}),v[24]=k,v[25]=E,v[26]=y,v[27]=_):_=v[27],v[28]!==L||v[29]!==N||v[30]!==_||v[31]!==r||v[32]!==c?(x=(0,a.jsx)(p.l,{title:r,onClose:L,width:"small",footerButtons:c,initialFocusRef:I,returnFocusRef:N,children:_}),v[28]=L,v[29]=N,v[30]=_,v[31]=r,v[32]=c,v[33]=x):x=v[33],x};try{E.displayName||(E.displayName="ConversationActions")}catch{}try{L.displayName||(L.displayName="ConversationActionDialogs")}catch{}try{R.displayName||(R.displayName="DeleteDialog")}catch{}try{D.displayName||(D.displayName="RenameDialog")}catch{}function P(){return(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}},24735:(e,t,n)=>{n.d(t,{U:()=>eb});var a=n(74848),i=n(21728),s=n(82595),r=n(894),o=n(75202),l=n(13017),c=n(38621),d=n(1992),u=n(5524),m=n(34164),p=n(96540),h=n(35247),f=n(2635),g=n(33592),y=n(53419),_=n(26108),x=n(81960),v=n(40090),b=n(40961),j=n(25641),w=n(40683);let N={container:"ConversationListV2-module__container--DfLLE",condensed:"ConversationListV2-module__condensed--vCbJZ",empty:"ConversationListV2-module__empty--4TgQY",list:"ConversationListV2-module__list--N8p2i",section:"ConversationListV2-module__section--G3Lm1",title:"ConversationListV2-module__title--VKD9S",item:"ConversationListV2-module__item--cPXI6",link:"ConversationListV2-module__link--J46j6",text:"ConversationListV2-module__text--IsNRP",context:"ConversationListV2-module__context--a0pCE",emptyStateHeading:"ConversationListV2-module__emptyStateHeading--KkuQU",emptyStateText:"ConversationListV2-module__emptyStateText--LsdKG"};function S({selectedItemID:e,loadingState:t,onConversationSelect:n,isSidebarCondensed:i}){let s=(0,g.b)(),{threads:r}=(0,f.Pk)(),o=(0,p.useMemo)(()=>s.sortAndFilterThreads(r).map(e=>({id:e.id,text:(0,j.CB)(e),href:`${j.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[r,s]),l=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let a=new Date(t);a.setDate(t.getDate()-7);let i=new Date(t);i.setDate(t.getDate()-30);let s=[],r=[],o=[],l=[];for(let c of e)c.date.toDateString()===t.toDateString()?s.push(c):c.date.toDateString()===n.toDateString()?r.push(c):c.date>a?o.push(c):c.date>i&&l.push(c);return{Today:s,Yesterday:r,"Last 7 days":o,"Last 30 days":l}}(o),c=0===o.length,d=(0,p.useId)();return(0,a.jsx)("nav",{"aria-labelledby":`${d}-conversations`,id:`${d}-conversation-list`,tabIndex:-1,className:(0,m.$)(N.container,i&&N.condensed),children:c&&("loading"===t||"pending"===t)?(0,a.jsx)(v.r,{lines:5}):c?(0,a.jsx)(k,{}):(0,a.jsxs)("div",{className:N.section,children:[(0,a.jsx)("h3",{id:`${d}-conversations`,className:"sr-only",children:"Conversations"}),Object.entries(l).map(([t,i])=>i.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{id:`${d}_${t}`,className:N.title,children:t}),(0,a.jsx)("ul",{className:N.list,children:i.map(t=>(0,a.jsx)(C,{item:t,selectedItemId:e??void 0,onSelect:n,threads:r},t.id))})]},t))]})})}function C(e){let t,n,s,r,o,m=(0,i.c)(17),{item:h,selectedItemId:f,onSelect:g,threads:x}=e,v=h.id===f,[j,S]=(0,p.useState)(null),[C,k]=(0,p.useState)(!1);m[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>k(!0),m[0]=t):t=m[0];let T=t;m[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>k(!1),m[1]=n):n=m[1];let E=n;m[2]!==f||m[3]!==x?(s=x.get(f),m[2]=f,m[3]=x,m[4]=s):s=m[4];let L=s,A=!!L?.customCopilotID,R=(0,p.useRef)(null);m[5]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{(0,b.flushSync)(()=>S(null)),R.current?.focus()},m[5]=r):r=m[5];let D=r;return m[6]!==j||m[7]!==A||m[8]!==h.href||m[9]!==h.id||m[10]!==h.text||m[11]!==C||m[12]!==g||m[13]!==v||m[14]!==f||m[15]!==x?(o=h.href&&(0,a.jsxs)("li",{className:N.item,children:[(0,a.jsx)(l.N_,{className:N.link,to:h.href,"aria-current":v?"page":void 0,onClick:()=>{g(),(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:h.id,mode:"immersive"})},children:(0,a.jsx)("span",{className:N.text,children:h.text})}),(0,a.jsx)("span",{className:N.context,children:(0,a.jsxs)(d.W,{anchorRef:R,children:[(0,a.jsx)(d.W.Anchor,{children:(0,a.jsx)(_.K,{loading:C,icon:c.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:I})}),(0,a.jsx)(d.W.Overlay,{children:(0,a.jsx)(u.l,{children:(0,a.jsx)(w.V,{onOpenDialog:S,isShared:!!x.get(h.id)?.sharedID,showShare:!A})})})]})}),(0,a.jsx)(w.p,{visibleDialog:j,onClose:D,threadName:h.text,threadId:h.id,selectedThreadId:f,onStartLoading:T,onFinishLoading:E,returnFocusRef:R})]},h.id),m[6]=j,m[7]=A,m[8]=h.href,m[9]=h.id,m[10]=h.text,m[11]=C,m[12]=g,m[13]=v,m[14]=f,m[15]=x,m[16]=o):o=m[16],o}function I(){return(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})}function k(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)("div",{className:N.empty,children:[(0,a.jsx)(x.A,{as:"h3",className:N.emptyStateHeading,children:"No conversations yet"}),(0,a.jsx)("span",{className:N.emptyStateText,children:"Ask Copilot anything on the right to start your first conversation."})]}),t[0]=e):e=t[0],e}try{S.displayName||(S.displayName="ConversationList")}catch{}try{C.displayName||(C.displayName="ConversationListEntry")}catch{}try{k.displayName||(k.displayName="EmptyState")}catch{}var T=n(71205);let E={container:"SidebarNavigation-module__container--XJoVm",condensed:"SidebarNavigation-module__condensed--FtKTo",list:"SidebarNavigation-module__list--bB1nv",section:"SidebarNavigation-module__section--IspfT",title:"SidebarNavigation-module__title--aV4qO",empty:"SidebarNavigation-module__empty--Bbzym",emptyStateHeading:"SidebarNavigation-module__emptyStateHeading--MBsqt",emptyStateText:"SidebarNavigation-module__emptyStateText--nQR_F"};function L(e){let t,n,s,r=(0,i.c)(10),{children:o,isCondensed:l,"aria-label":c,className:d}=e,u=void 0===c?"Navigation":c,h=(0,p.useId)(),f=`${h}-navigation`,g=l&&E.condensed;return r[0]!==d||r[1]!==g?(t=(0,m.$)(E.container,g,d),r[0]=d,r[1]=g,r[2]=t):t=r[2],r[3]!==o?(n=(0,a.jsx)("div",{className:E.section,children:o}),r[3]=o,r[4]=n):n=r[4],r[5]!==u||r[6]!==f||r[7]!==t||r[8]!==n?(s=(0,a.jsx)("nav",{"aria-label":u,id:f,tabIndex:-1,className:t,children:n}),r[5]=u,r[6]=f,r[7]=t,r[8]=n,r[9]=s):s=r[9],s}function A(e){let t,n,s,r=(0,i.c)(12),{title:o,children:l,isLoading:c,isEmpty:d,emptyStateTitle:u,emptyStateText:m}=e,h=void 0===u?"No items":u,f=void 0===m?"No items to display.":m,g=(0,p.useId)();return r[0]!==g||r[1]!==o?(t=(0,a.jsx)("h4",{id:g,className:E.title,children:o}),r[0]=g,r[1]=o,r[2]=t):t=r[2],r[3]!==l||r[4]!==f||r[5]!==h||r[6]!==d||r[7]!==c?(n=d&&c?(0,a.jsx)(v.r,{lines:5}):d?(0,a.jsx)(R,{title:h,text:f}):(0,a.jsx)("ul",{className:E.list,children:l}),r[3]=l,r[4]=f,r[5]=h,r[6]=d,r[7]=c,r[8]=n):n=r[8],r[9]!==t||r[10]!==n?(s=(0,a.jsxs)("div",{children:[t,n]}),r[9]=t,r[10]=n,r[11]=s):s=r[11],s}function R(e){let t,n,s,r=(0,i.c)(7),{title:o,text:l}=e;return r[0]!==o?(t=(0,a.jsx)(x.A,{as:"h3",className:E.emptyStateHeading,children:o}),r[0]=o,r[1]=t):t=r[1],r[2]!==l?(n=(0,a.jsx)("span",{className:E.emptyStateText,children:l}),r[2]=l,r[3]=n):n=r[3],r[4]!==t||r[5]!==n?(s=(0,a.jsxs)("div",{className:E.empty,children:[t,n]}),r[4]=t,r[5]=n,r[6]=s):s=r[6],s}try{L.displayName||(L.displayName="SidebarNavigation")}catch{}try{A.displayName||(A.displayName="SidebarSection")}catch{}try{R.displayName||(R.displayName="EmptyState")}catch{}var D=n(47789);function P({handleSidebarClick:e}){let t=(0,l.zy)().pathname.includes("/share/"),{threadsLoading:n,selectedThreadID:i,threads:s}=(0,f.bP)("threadsLoading","selectedThreadID","threads"),r=(0,g.b)(),o=(0,p.useMemo)(()=>r.sortAndFilterThreads(s).map(e=>({id:e.id,text:(0,j.CB)(e),href:`${j.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[s,r]),c=0===o.length,d="loading"===n.state||"pending"===n.state;return(0,a.jsx)(A,{title:"Conversations",isEmpty:c,isLoading:d,emptyStateTitle:"No conversations yet",emptyStateText:"Ask Copilot anything on the right to start your first conversation.",children:o.map(n=>(0,a.jsx)(O,{item:n,selectedItemId:t?void 0:i??void 0,onSelect:e,threads:s},n.id))})}function O(e){let t,n,s,r,o,l,m,h,f,g,x=(0,i.c)(28),{item:v,selectedItemId:j,onSelect:N,threads:S}=e,C=v.id===j,[I,k]=(0,p.useState)(null),[E,L]=(0,p.useState)(!1);x[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>L(!0),x[0]=t):t=x[0];let A=t;x[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>L(!1),x[1]=n):n=x[1];let R=n,D=S.get(j),P=!!D?.customCopilotID,O=(0,p.useRef)(null);x[2]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{(0,b.flushSync)(()=>k(null)),O.current?.focus()},x[2]=s):s=x[2];let M=s;x[3]!==E?(r=(0,a.jsx)(d.W.Anchor,{children:(0,a.jsx)(_.K,{loading:E,icon:c.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:B})}),x[3]=E,x[4]=r):r=x[4];let F=!!S.get(v.id)?.sharedID,U=!P;x[5]!==F||x[6]!==U?(o=(0,a.jsx)(d.W.Overlay,{children:(0,a.jsx)(u.l,{children:(0,a.jsx)(w.V,{onOpenDialog:k,isShared:F,showShare:U})})}),x[5]=F,x[6]=U,x[7]=o):o=x[7],x[8]!==r||x[9]!==o?(l=(0,a.jsxs)(d.W,{anchorRef:O,children:[r,o]}),x[8]=r,x[9]=o,x[10]=l):l=x[10],x[11]!==I||x[12]!==v.id||x[13]!==v.text||x[14]!==j?(m=(0,a.jsx)(w.p,{visibleDialog:I,onClose:M,threadName:v.text,threadId:v.id,selectedThreadId:j,onStartLoading:A,onFinishLoading:R,returnFocusRef:O}),x[11]=I,x[12]=v.id,x[13]=v.text,x[14]=j,x[15]=m):m=x[15],x[16]!==l||x[17]!==m?(h=(0,a.jsxs)(a.Fragment,{children:[l,m]}),x[16]=l,x[17]=m,x[18]=h):h=x[18];let V=h;return x[19]!==v.id||x[20]!==N?(f=()=>{N(),(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:v.id,mode:"immersive"})},x[19]=v.id,x[20]=N,x[21]=f):f=x[21],x[22]!==v.href||x[23]!==v.text||x[24]!==C||x[25]!==f||x[26]!==V?(g=(0,a.jsx)(T.W,{href:v.href,text:v.text,isSelected:C,trailingAction:V,onClick:f}),x[22]=v.href,x[23]=v.text,x[24]=C,x[25]=f,x[26]=V,x[27]=g):g=x[27],g}function B(){return(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})}function M({handleSidebarClick:e,isCondensed:t}){let n=(0,D.qw)(),i=(0,p.useMemo)(()=>n.flatMap(e=>e.activityItems?e.activityItems.map(e=>({component:e.Component,displayName:e.displayName})):[]),[n]);return(0,a.jsxs)(L,{isCondensed:t,"aria-label":"Navigation",children:[i.map(e=>(0,a.jsx)(A,{title:e.displayName,children:(0,a.jsx)(e.component,{})},e.displayName)),(0,a.jsx)(P,{handleSidebarClick:e})]})}try{P.displayName||(P.displayName="ConversationListWrapper")}catch{}try{O.displayName||(O.displayName="ConversationListEntry")}catch{}try{M.displayName||(M.displayName="ActivityPanel")}catch{}let F={quicklinks:"CopilotNavigation-module__quicklinks--y91ru",footer:"CopilotNavigation-module__footer--WE0C5",blankslateContainer:"CopilotNavigation-module__blankslateContainer--nuX9Y",ssoButton:"CopilotNavigation-module__ssoButton--cAcPq",ssoContent:"CopilotNavigation-module__ssoContent--sQStD",condensed:"CopilotNavigation-module__condensed--TzlR_"};var U=n(84646),V=n(69599),$=n(49851),W=n(77999),H=n(26607),q=n(27359),z=n(84802),G=n(23657);let K={list:"ServiceList-module__list--nR74A",section:"ServiceList-module__section--k1uLc",item:"ServiceList-module__item--fn806",link:"ServiceList-module__link--VJdHH",content:"ServiceList-module__content--k6BSj",textWrapper:"ServiceList-module__textWrapper--jtpsQ",text:"ServiceList-module__text--DxTKY",label:"ServiceList-module__label--eTRas",externalLabel:"ServiceList-module__externalLabel--P9mcb",condensed:"ServiceList-module__condensed--x5s6A",previewLabel:"ServiceList-module__previewLabel--JWC5Z",externalIcon:"ServiceList-module__externalIcon--lTFBq"};function Q(e){let t,n,r,o,d=(0,i.c)(18),{"aria-current":u,"data-analytics-event":p,href:h,icon:f,onLinkClick:g,id:y,displayName:_,condensed:x,label:v,external:b}=e;d[0]!==y||d[1]!==g?(t=e=>{g?.(e,y)},d[0]=y,d[1]=g,d[2]=t):t=d[2];let j=t;d[3]!==u||d[4]!==p||d[5]!==j?(n={"aria-current":u,"data-analytics-event":p,className:K.link,onClick:j},d[3]=u,d[4]=p,d[5]=j,d[6]=n):n=d[6];let w=n;d[7]!==w||d[8]!==x||d[9]!==_||d[10]!==b||d[11]!==h||d[12]!==f||d[13]!==v?(r=b?(0,a.jsxs)("a",{href:h,className:K.link,"aria-label":_,rel:"noopener noreferrer",children:[(0,a.jsx)(s.I,{size:16,icon:f}),(0,a.jsxs)("div",{className:(0,m.$)(K.content,x&&K.condensed),children:[(0,a.jsx)("div",{className:K.textWrapper,children:(0,a.jsx)("div",{className:K.text,children:_})}),(0,a.jsx)("div",{className:K.label,children:(0,a.jsxs)("div",{className:K.externalLabel,children:[(0,a.jsx)("span",{className:K.previewLabel,children:v}),(0,a.jsx)(c.ArrowUpRightIcon,{className:K.externalIcon})]})})]})]}):(0,a.jsxs)(l.N_,{to:h,...w,"aria-label":_,children:[(0,a.jsx)(s.I,{size:16,icon:f}),(0,a.jsxs)("div",{className:(0,m.$)(K.content,x&&K.condensed),children:[(0,a.jsx)("div",{className:K.textWrapper,children:(0,a.jsx)("div",{className:K.text,children:_})}),(0,a.jsx)("div",{className:K.label,children:v})]})]}),d[7]=w,d[8]=x,d[9]=_,d[10]=b,d[11]=h,d[12]=f,d[13]=v,d[14]=r):r=d[14];let N=r,S=x?_:"";return d[15]!==N||d[16]!==S?(o=(0,a.jsx)("li",{className:K.section,children:(0,a.jsx)("div",{className:K.item,children:(0,a.jsx)(W.m,{text:S,children:N})})}),d[15]=N,d[16]=S,d[17]=o):o=d[17],o}let Y=JSON.stringify({source:"ServiceList"});function J({toggleFloatingSidebar:e,isSidebarCondensed:t}){let{selectedThreadID:n}=(0,f.Pk)(),i=(0,q.v)()?.id,s=(0,D.qw)(),r=(0,z.G)(),o=(0,U.BV)(),l=(0,G.mM)(),c=!n&&!i&&!l,d=async t=>{t.metaKey||t.ctrlKey||(e(),await r({clearTopic:!0,includeThreads:!1}),(0,y.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},u=(0,p.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),m=(0,p.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),h=!(0,V.G7)("copilot_spaces_ga"),g=(0,p.useMemo)(()=>[...o?[{type:"spaces",component:(0,a.jsx)(Q,{"aria-current":l?"page":void 0,"data-analytics-event":Y,displayName:"Spaces",href:j.VR,icon:$.Dy,condensed:t,id:"spaces",onLinkClick:u,label:h&&(0,a.jsx)(H.A,{variant:"success",children:"Preview"})},"spaces"),displayName:"Spaces"}]:[],...s.flatMap(e=>e.navigationItems&&e.navigationItems.length>0?e.navigationItems.map(n=>({type:"plugin",component:(0,a.jsx)(Q,{"aria-current":i===e.id?"page":void 0,"data-analytics-event":Y,displayName:n.displayName,href:n.href,icon:n.icon,condensed:t,id:n.id,onLinkClick:n.external?void 0:m,label:n.label,external:n.external},`${e.id}-${n.id}`),displayName:n.displayName})):[])].sort((e,t)=>e.displayName.localeCompare(t.displayName)),[o,l,t,u,h,s,i,m]);return(0,a.jsxs)("ul",{className:K.list,children:[(0,a.jsx)(Q,{"aria-current":c?"page":void 0,"data-analytics-event":Y,displayName:"New chat",href:j.Jz,icon:$.KJ,condensed:t,id:"home",onLinkClick:d}),g.map(e=>e.component)]})}try{Q.displayName||(Q.displayName="ServiceListItem")}catch{}try{J.displayName||(J.displayName="ServiceList")}catch{}var X=n(77430),Z=n(51213),ee=n(98755),et=n(71315),en=n(15042),ea=n(46251),ei=n(69726),es=n(1805),er=n(26382),eo=n(10006),el=n(3803);let ec={dialog:"ManageSharedConversationsDialog-module__dialog--_C8sX",actionButtons:"ManageSharedConversationsDialog-module__actionButtons--iuECd",alertIcon:"ManageSharedConversationsDialog-module__alertIcon--mA28C",footer:"ManageSharedConversationsDialog-module__footer--aTXFp",mutedText:"ManageSharedConversationsDialog-module__mutedText--_uOci",footerContent:"ManageSharedConversationsDialog-module__footerContent--yVU91",footerLeft:"ManageSharedConversationsDialog-module__footerLeft--eRZWV",footerRight:"ManageSharedConversationsDialog-module__footerRight--n1XJG",confirmationText:"ManageSharedConversationsDialog-module__confirmationText--tYQ41",quickFadeUp:"ManageSharedConversationsDialog-module__quickFadeUp--tiEAs",conversationLink:"ManageSharedConversationsDialog-module__conversationLink--JqMKE"};var ed=n(21373),eu=n(20139);let em={container:"UnshareConversationDialog-module__container--Tc1R_",buttonStack:"UnshareConversationDialog-module__buttonStack--JvbNF",threadInfoStack:"UnshareConversationDialog-module__threadInfoStack--gcf6y",threadTitle:"UnshareConversationDialog-module__threadTitle--eBgrX",threadDescription:"UnshareConversationDialog-module__threadDescription--E1H0T"},ep=e=>{let t,n,s,r,o,l,c,d,u,m,h,_,x,v,b,j,w,N,S,C,I=(0,i.c)(60),{closeDialog:k,threadId:T}=e,E=(0,f.Pk)(),L=(0,g.b)(),{selectedThreadID:A,ssoOrganizations:R,apiUrl:D,threads:P}=E,[O,B]=(0,p.useState)(E.messages);I[0]!==T||I[1]!==P?(t=()=>{let e=P.get(T);return e?.sharedID||""},I[0]=T,I[1]=P,I[2]=t):t=I[2];let[M,F]=(0,p.useState)(t),U=(0,p.useRef)(""!==M),V=(0,p.useRef)("");I[3]!==O||I[4]!==M||I[5]!==E.apiUrl||I[6]!==E.ssoOrganizations||I[7]!==T?(n=()=>{let e=async()=>{if(0===O.filter(e=>e.threadID===T).length){let e=new eu.k(E.apiUrl,E.ssoOrganizations),t=await e.listSharedThreadMessages(M);t.ok&&B(t.payload.messages)}};V.current!==M&&M&&(V.current=M,e())},s=[M,T,O,E.apiUrl,E.ssoOrganizations],I[3]=O,I[4]=M,I[5]=E.apiUrl,I[6]=E.ssoOrganizations,I[7]=T,I[8]=n,I[9]=s):(n=I[8],s=I[9]),(0,p.useEffect)(n,s),I[10]!==A||I[11]!==T||I[12]!==P?(r=P.get(T||A),I[10]=A,I[11]=T,I[12]=P,I[13]=r):r=I[13];let $=r,W=O[O.length-1],H=W?.content||"";I[14]!==A||I[15]!==T||I[16]!==P?(o=()=>{let e=T||A;if(e){let t=P.get(e);F(t?.sharedID||"")}},I[14]=A,I[15]=T,I[16]=P,I[17]=o):o=I[17],I[18]!==L||I[19]!==A||I[20]!==T||I[21]!==P?(l=[L,F,A,P,T],I[18]=L,I[19]=A,I[20]=T,I[21]=P,I[22]=l):l=I[22],(0,p.useEffect)(o,l),I[23]!==D||I[24]!==k||I[25]!==L||I[26]!==A||I[27]!==M||I[28]!==R||I[29]!==T?(c=async()=>{let e=T||A,t=new eu.k(D,R),n=await t.unshareThread(e);if(n.ok){let{sharedID:t,sharedAt:a,sharedMessageID:i}=n.payload;L.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:a,sharedMessageID:i}}),U.current=!1,k(),(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:M})}},I[23]=D,I[24]=k,I[25]=L,I[26]=A,I[27]=M,I[28]=R,I[29]=T,I[30]=c):c=I[30];let q=c;I[31]!==k?(d=()=>{k()},I[31]=k,I[32]=d):d=I[32];let z=d;I[33]!==q||I[34]!==M?(u=()=>{if(M)return(0,a.jsx)(ed.Q,{onClick:q,variant:"danger",children:"Unshare"})},I[33]=q,I[34]=M,I[35]=u):u=I[35];let G=u;I[36]!==k?(m=()=>(0,a.jsx)(ed.Q,{onClick:k,children:"Cancel"}),I[36]=k,I[37]=m):m=I[37];let K=m;I[38]===Symbol.for("react.memo_cache_sentinel")?(h=(0,a.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),I[38]=h):h=I[38];let Q=$?.name||"";return I[39]!==Q?(_=(0,a.jsx)("span",{className:em.threadTitle,children:Q}),I[39]=Q,I[40]=_):_=I[40],I[41]!==H?(x=(0,a.jsx)("span",{className:em.threadDescription,children:H}),I[41]=H,I[42]=x):x=I[42],I[43]!==_||I[44]!==x?(v=(0,a.jsxs)(ea.B,{direction:"vertical",className:em.threadInfoStack,children:[_,x]}),I[43]=_,I[44]=x,I[45]=v):v=I[45],I[46]===Symbol.for("react.memo_cache_sentinel")?(b=(0,a.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),I[46]=b):b=I[46],I[47]!==K?(j=K(),I[47]=K,I[48]=j):j=I[48],I[49]!==G?(w=G(),I[49]=G,I[50]=w):w=I[50],I[51]!==j||I[52]!==w?(N=(0,a.jsxs)(ea.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:em.buttonStack,children:[j,w]}),I[51]=j,I[52]=w,I[53]=N):N=I[53],I[54]!==v||I[55]!==N?(S=(0,a.jsxs)("div",{className:em.container,children:[h,v,b,N]}),I[54]=v,I[55]=N,I[56]=S):S=I[56],I[57]!==z||I[58]!==S?(C=(0,a.jsx)(en.l,{title:"Unshare conversation",onClose:z,width:"large",children:S}),I[57]=z,I[58]=S,I[59]=C):C=I[59],C};try{ep.displayName||(ep.displayName="UnshareConversationDialog")}catch{}let eh=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},ef=({closeDialog:e,returnFocusRef:t})=>{let n=(0,g.b)(),i=(0,f.Pk)(),[s,r]=(0,p.useState)(0),[o,l]=(0,p.useState)([]),[d,u]=(0,p.useState)(!0),[m,h]=(0,p.useState)(!1),[x,v]=(0,p.useState)(null),[b,j]=(0,p.useState)(!1),[w,N]=(0,p.useState)(5>o.length),S=5*s,C=o.slice(S,S+5);(0,p.useEffect)(()=>{(async()=>{let e=await n.fetchSharedThreads();e&&l(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:eh(e.updatedAt),sharedUrl:`${et.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${et.fV.origin}/copilot/c/${e.id}`}))),u(!1)})()},[n]),(0,p.useEffect)(()=>{w&&s>0&&o.length<=5*s&&r(0);let e=5<o.length;e!==w&&N(e)},[o,s,5,w]);let I=(0,p.useCallback)(()=>{e()},[e]),k=(0,p.useCallback)(async()=>{if(!b)return void j(!0);j(!1),u(!0);try{(await n.unshareAllThreads()).ok&&(l([]),await n.fetchThreads())}finally{u(!1)}},[b,n]),T=async()=>{h(!1),v(null),u(!0);let e=await n.fetchSharedThreads();e&&l(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:eh(e.updatedAt),sharedUrl:`${et.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${et.fV.origin}/copilot/c/${e.id}`}))),u(!1)},E=d||"error"===i.sharedThreadsLoading.state||0===o.length,L=(0,p.useMemo)(()=>{if(!o.length)return[];let e={buttonType:"danger",content:"Unshare all",onClick:()=>{b?k():j(!0)}};return b?[{buttonType:"default",content:"Cancel",onClick:()=>j(!1)},e]:[e]},[o.length,b,k]),A=(0,p.useMemo)(()=>d?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===i.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[d,i.sharedThreadsLoading.state]);return(0,a.jsxs)(en.l,{title:"Manage shared conversations",width:"xlarge",className:ec.dialog,position:{narrow:"fullscreen",regular:"center"},onClose:I,returnFocusRef:t,renderFooter:()=>L?.length?(0,a.jsx)(en.l.Footer,{className:ec.footer,children:(0,a.jsxs)("div",{className:ec.footerContent,children:[(0,a.jsx)("div",{className:ec.footerLeft,children:b&&(0,a.jsx)("div",{className:`${ec.confirmationText} ${ec.quickFadeUp}`,children:(e=>1===e?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`)(o.length)})}),(0,a.jsx)("div",{className:ec.footerRight,children:(0,a.jsx)(en.l.Buttons,{buttons:L})})]})}):null,children:[E?(0,a.jsxs)(er.E,{children:[(0,a.jsx)(er.E.Visual,{children:A.isSpinner?(0,a.jsx)(ea.B,{direction:"horizontal",align:"center",children:(0,a.jsx)(ei.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,a.jsx)("div",{className:ec.mutedText,children:"error"===A.result?(0,a.jsx)(c.AlertIcon,{size:"medium",className:ec.alertIcon,"aria-label":"Error loading shared conversations"}):(0,a.jsx)(c.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,a.jsx)(er.E.Heading,{children:A.heading}),(0,a.jsx)(er.E.Description,{children:A.description})]}):(0,a.jsxs)(eo.X.Container,{children:[(0,a.jsx)(el.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Conversation",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,a.jsx)(es.A,{href:e.threadUrl,className:ec.conversationLink,children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,a.jsx)("span",{className:ec.mutedText,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,a.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:ec.actionButtons,children:[(0,a.jsx)(ee.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,a.jsx)(_.K,{"aria-label":"Unshare conversation",title:"Unshare conversation",icon:c.UnlinkIcon,variant:"invisible",onClick:()=>{v(e),h(!0)}})]})})}],data:C}),o.length>5&&(0,a.jsx)(eo.X.Pagination,{"aria-label":"Shared conversations pagination",pageSize:5,defaultPageIndex:s,totalCount:o.length,onChange:e=>{r(e.pageIndex)},showPages:!1})]}),m&&x&&(0,a.jsx)(ep,{threadId:x.id,closeDialog:T})]})};try{ef.displayName||(ef.displayName="ManageSharedConversationsDialog")}catch{}var eg=n(17005),ey=n(87255);let e_={userButton:"UserMenu-module__userButton--FuXsC",condensed:"UserMenu-module__condensed--rjzRR",userContent:"UserMenu-module__userContent--jXldm",userAvatar:"UserMenu-module__userAvatar--sp40T",menuItem:"UserMenu-module__menuItem--oXBxi",userDetails:"UserMenu-module__userDetails--mes1V",username:"UserMenu-module__username--n5Tln",description:"UserMenu-module__description--FvI5s"};function ex(e){let t,n,s,r,o,l,h,g,_,x,v,b,j,w,N,S,C,I,k,T,E,L,A,R,D=(0,i.c)(51),{isCondensed:P}=e,O=void 0!==P&&P,B=(0,p.useRef)(null),M=(0,p.useRef)(null),[F,U]=(0,p.useState)(!1),[V,$]=(0,p.useState)(!1),{currentUserLogin:W,plan:H}=(0,f.bP)("currentUserLogin","plan"),q=(0,G.mM)(),z=O&&e_.condensed;D[0]!==z?(t=(0,m.$)(e_.userButton,z),D[0]=z,D[1]=t):t=D[1];let K=O?"user":void 0,Q=`/${W}.png`;D[2]!==Q?(n=(0,a.jsx)("div",{className:e_.userAvatar,children:(0,a.jsx)(X.r,{src:Q,size:20})}),D[2]=Q,D[3]=n):n=D[3],D[4]!==W?(s=(0,a.jsx)("div",{className:e_.userContent,children:W}),D[4]=W,D[5]=s):s=D[5],D[6]!==t||D[7]!==K||D[8]!==n||D[9]!==s?(r=(0,a.jsx)(d.W.Anchor,{children:(0,a.jsxs)("button",{className:t,"aria-label":K,children:[n,s]})}),D[6]=t,D[7]=K,D[8]=n,D[9]=s,D[10]=r):r=D[10];let Y=`/${W}`,J=`/${W}.png`;return D[11]!==J?(o=(0,a.jsx)("div",{className:e_.userAvatar,children:(0,a.jsx)(X.r,{src:J,size:32})}),D[11]=J,D[12]=o):o=D[12],D[13]!==W?(l=(0,a.jsx)("div",{className:e_.username,children:W}),D[13]=W,D[14]=l):l=D[14],D[15]!==H?(h=function(e){switch(e){case Z.UH.IndividualFree:return"Free";case Z.UH.IndividualPro:return"Pro";case Z.UH.IndividualProPlus:return"Pro+";case Z.UH.Business:return"Business";case Z.UH.Enterprise:return"Enterprise";default:return"Free"}}(H),D[15]=H,D[16]=h):h=D[16],D[17]!==h?(g=(0,a.jsxs)("span",{className:e_.description,children:["Copilot ",h]}),D[17]=h,D[18]=g):g=D[18],D[19]!==l||D[20]!==g?(_=(0,a.jsxs)("div",{className:e_.userDetails,children:[l,g]}),D[19]=l,D[20]=g,D[21]=_):_=D[21],D[22]!==o||D[23]!==_?(x=(0,a.jsxs)("div",{className:e_.menuItem,children:[o,_]}),D[22]=o,D[23]=_,D[24]=x):x=D[24],D[25]!==x||D[26]!==Y?(v=(0,a.jsx)(u.l.LinkItem,{href:Y,children:x}),D[25]=x,D[26]=Y,D[27]=v):v=D[27],D[28]===Symbol.for("react.memo_cache_sentinel")?(b=(0,a.jsx)(u.l.Divider,{}),D[28]=b):b=D[28],D[29]===Symbol.for("react.memo_cache_sentinel")?(j=()=>{$(!0),(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},D[29]=j):j=D[29],D[30]===Symbol.for("react.memo_cache_sentinel")?(w=(0,a.jsxs)(u.l.Item,{onSelect:j,children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(c.NoteIcon,{})}),"Personal instructions"]}),D[30]=w):w=D[30],D[31]!==q?(N=!q&&(0,a.jsxs)(u.l.Item,{onSelect:()=>{U(!0),(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_MANAGE_SHARED",mode:"immersive"})},children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(c.ListUnorderedIcon,{})}),"Manage shared conversations"]}),D[31]=q,D[32]=N):N=D[32],D[33]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{M.current?.openDialog(),(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},D[33]=S):S=D[33],D[34]===Symbol.for("react.memo_cache_sentinel")?(C=(0,a.jsxs)(u.l.Item,{onSelect:S,children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(c.CommentIcon,{})}),"Give feedback"]}),D[34]=C):C=D[34],D[35]===Symbol.for("react.memo_cache_sentinel")?(I=(0,a.jsxs)(u.l.LinkItem,{href:"/settings/copilot",onClick:ev,children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(c.GearIcon,{})}),"Settings"]}),D[35]=I):I=D[35],D[36]!==v||D[37]!==N?(k=(0,a.jsx)(d.W.Overlay,{width:"small",align:"end",children:(0,a.jsxs)(u.l,{children:[v,b,w,N,C,I]})}),D[36]=v,D[37]=N,D[38]=k):k=D[38],D[39]!==k||D[40]!==r?(T=(0,a.jsxs)(d.W,{anchorRef:B,children:[r,k]}),D[39]=k,D[40]=r,D[41]=T):T=D[41],D[42]===Symbol.for("react.memo_cache_sentinel")?(E=(0,a.jsx)(eg.l,{ref:M,mode:"immersive",returnFocusRef:B}),D[42]=E):E=D[42],D[43]!==F?(L=F&&(0,a.jsx)(ef,{closeDialog:()=>{U(!1)},returnFocusRef:B}),D[43]=F,D[44]=L):L=D[44],D[45]!==V?(A=V&&(0,a.jsx)(ey.Y,{onDismiss:()=>$(!1),returnFocusRef:B}),D[45]=V,D[46]=A):A=D[46],D[47]!==T||D[48]!==L||D[49]!==A?(R=(0,a.jsxs)(a.Fragment,{children:[T,E,L,A]}),D[47]=T,D[48]=L,D[49]=A,D[50]=R):R=D[50],R}function ev(){return(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_SETTINGS",mode:"immersive"})}try{ex.displayName||(ex.displayName="UserMenu")}catch{}function eb(){let e,t=(0,i.c)(5),{sidebarExpanded:n,sidebarVisible:s,layoutBreakpoint:o,toggleSidebar:l}=(0,r.L)();return t[0]!==o||t[1]!==n||t[2]!==s||t[3]!==l?(e=(0,a.jsx)(ej,{sidebarExpanded:n,sidebarVisible:s,sidebarFloating:o,onToggleSidebar:l}),t[0]=o,t[1]=n,t[2]=s,t[3]=l,t[4]=e):e=t[4],e}function ej(e){let t,n,r,y,_,x,v,b,j,w,N,C,I,k,T,E,L=(0,i.c)(48),{onSidebarClick:A,onToggleSidebar:R,sidebarExpanded:D,sidebarFloating:P,sidebarVisible:O}=e,B=!P&&!D,U=(0,g.b)(),{threadsLoading:V,threads:$,selectedThreadID:W,ssoOrganizations:H}=(0,f.bP)("threadsLoading","threads","selectedThreadID","ssoOrganizations"),q=(0,l.zy)();L[0]!==q.pathname?(t=q.pathname.includes("/share/"),L[0]=q.pathname,L[1]=t):t=L[1];let z=t;L[2]!==U||L[3]!==$.size||L[4]!==V.state?(n=()=>{0===$.size&&"pending"===V.state&&U.fetchThreads()},r=[$.size,U,V.state],L[2]=U,L[3]=$.size,L[4]=V.state,L[5]=n,L[6]=r):(n=L[5],r=L[6]),(0,p.useEffect)(n,r),L[7]!==A||L[8]!==O||L[9]!==R?(y=()=>{A?.(),O&&R()},L[7]=A,L[8]=O,L[9]=R,L[10]=y):y=L[10];let G=y,K=(0,p.useId)();L[11]!==q.hash||L[12]!==q.pathname||L[13]!==q.search?(_=e=>{let t=`/orgs/${encodeURIComponent(e)}/sso`,n=q.pathname+q.search+q.hash;return`${t}?return_to=${encodeURIComponent(n)}`},L[11]=q.hash,L[12]=q.pathname,L[13]=q.search,L[14]=_):_=L[14];let Q=_;L[15]!==Q||L[16]!==B||L[17]!==H?(x=()=>{if(0===H.length)return null;if(1===H.length){let e=H[0];return(0,a.jsxs)("a",{href:Q(e.login),className:F.ssoButton,children:[(0,a.jsx)(c.ShieldLockIcon,{size:16}),"Single sign-on"]})}return(0,a.jsxs)(d.W,{children:[(0,a.jsx)(d.W.Anchor,{children:(0,a.jsxs)("button",{className:F.ssoButton,"aria-label":"Single sign on",children:[(0,a.jsx)(s.I,{icon:c.ShieldLockIcon,size:16}),(0,a.jsx)("div",{className:(0,m.$)(F.ssoContent,B&&F.condensed),children:"Single sign-on"})]})}),(0,a.jsx)(d.W.Overlay,{children:(0,a.jsx)(u.l,{children:H.map(e=>(0,a.jsx)(u.l.LinkItem,{href:Q(e.login),children:e.login},e.login))})})]})},L[15]=Q,L[16]=B,L[17]=H,L[18]=x):x=L[18];let Y=x;L[19]===Symbol.for("react.memo_cache_sentinel")?(v=(0,a.jsx)(ew,{}),L[19]=v):v=L[19];let X=`${K}-quick-links`,Z=`${K}-quick-links`;return L[20]!==Z?(b=(0,a.jsx)("h3",{id:Z,className:"sr-only",children:"Quick links"}),L[20]=Z,L[21]=b):b=L[21],L[22]!==G||L[23]!==B?(j=(0,a.jsx)(J,{isSidebarCondensed:B,toggleFloatingSidebar:G}),L[22]=G,L[23]=B,L[24]=j):j=L[24],L[25]!==b||L[26]!==j||L[27]!==X?(w=(0,a.jsxs)("nav",{"aria-labelledby":X,className:F.quicklinks,children:[b,j]}),L[25]=b,L[26]=j,L[27]=X,L[28]=w):w=L[28],L[29]!==G||L[30]!==B||L[31]!==z||L[32]!==W||L[33]!==V.state?(N=h.W.copilotMissionControl?(0,a.jsx)(M,{handleSidebarClick:G,isCondensed:B}):(0,a.jsx)(S,{selectedItemID:z?null:W,loadingState:V.state,onConversationSelect:G,isSidebarCondensed:B}),L[29]=G,L[30]=B,L[31]=z,L[32]=W,L[33]=V.state,L[34]=N):N=L[34],L[35]!==w||L[36]!==N?(C=(0,a.jsxs)(o.t,{fallback:v,children:[w,N]}),L[35]=w,L[36]=N,L[37]=C):C=L[37],L[38]!==Y?(I=Y(),L[38]=Y,L[39]=I):I=L[39],L[40]!==B?(k=(0,a.jsx)(ex,{isCondensed:B}),L[40]=B,L[41]=k):k=L[41],L[42]!==I||L[43]!==k?(T=(0,a.jsxs)("div",{className:F.footer,children:[I,k]}),L[42]=I,L[43]=k,L[44]=T):T=L[44],L[45]!==C||L[46]!==T?(E=(0,a.jsxs)(a.Fragment,{children:[C,T]}),L[45]=C,L[46]=T,L[47]=E):E=L[47],E}function ew(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:F.blankslateContainer,children:(0,a.jsx)("div",{children:"Error loading conversations"})}),t[0]=e):e=t[0],e}try{eb.displayName||(eb.displayName="CopilotNavigationWithContext")}catch{}try{ej.displayName||(ej.displayName="CopilotNavigation")}catch{}try{ew.displayName||(ew.displayName="SidebarContentsFallback")}catch{}},1747:(e,t,n)=>{n.d(t,{BH:()=>R,xx:()=>B,tZ:()=>M,wI:()=>F});var a=n(74848),i=n(21728),s=n(2635),r=n(35247),o=n(42312),l=n(33535),c=n(6551),d=n(40104),u=n(96540),m=n(93380),p=n(79064),h=n(7812),f=n(41649),g=n(33592),y=n(25641),_=n(82075),x=n(46996);let v=["thread-scoped-file","draft-issue","draft-update-issue"],b=e=>!!e.isUserEdited,j=(e,t)=>e.size===t.size&&Array.from(e).every(([e,n])=>(0,x.A)(t.get(e),n)),w=(e,t)=>!j(new Map(e.filter(e=>v.includes(e.type)).map(e=>[(0,y.Vb)(e),e])),new Map(t.filter(e=>v.includes(e.type)).map(e=>[(0,y.Vb)(e),e]))),N=(e,t)=>!j(new Map(Array.from(e).filter(([,e])=>b(e))),new Map(Array.from(t).filter(([,e])=>b(e))));function S(e){return[e.id,e]}function C(e){return null!=e}function I(e){return[(0,y.Vb)(e),e]}function k(e){return null!=e}function T(e){return(0,h.PO)(e)}let E=(0,u.createContext)(void 0),L=new Map,A=[];function R(e){let t,n,d,x,j,R,B,M,F,U,V,$,W,H,q,z=(0,i.c)(55),{children:G}=e,K=(0,l.AI)(!1),Q=(0,l.AI)(!1),Y=(0,o.U)(),[J,X]=(0,u.useState)(L),[Z,ee]=(0,u.useState)(A),[et,en]=(0,u.useState)(A),[ea,ei]=(0,u.useState)(void 0),[es,er,eo]=(0,m.B)(!1),el=(0,c.S)((0,s.pn)(P)),ec=(0,s.pn)(D);z[0]!==K||z[1]!==el||z[2]!==ec?(t=()=>{el&&el!==ec&&(X(L),ee(A),ei(void 0),null===ec&&K.setValue(!1))},n=[ec,el,K],z[0]=K,z[1]=el,z[2]=ec,z[3]=t,z[4]=n):(t=z[3],n=z[4]),(0,u.useEffect)(t,n),z[5]===Symbol.for("react.memo_cache_sentinel")?(d=(e,t)=>{let n=void 0===t||t;ee(t=>{if(t.includes(e))return t;let n=(0,h.oy)(e),a=t.findIndex(e=>(0,h.oy)(e)===n),i=[...t];return -1===a?i.push(e):i.splice(a,1,e),i}),ei(t=>n||void 0===t||(0,h.oy)(t)===(0,h.oy)(e)?e:t)},z[5]=d):d=z[5];let ed=d;z[6]===Symbol.for("react.memo_cache_sentinel")?(x=e=>{X(t=>{let n=new Map(t);return n.set(e.id,e),n})},z[6]=x):x=z[6];let eu=x;z[7]!==Z||z[8]!==ea?(j=e=>{let t=Z.indexOf(e);if(-1===t)return;let n=Z.toSpliced(t,1);ea===e&&ei(n[t-1]??n[0]),ee(n)},z[7]=Z,z[8]=ea,z[9]=j):j=z[9];let em=(0,f.K)(j);z[10]!==Z||z[11]!==ea?(R=e=>{if(e){let t=Z;for(let n of e){let e=t.indexOf(n);-1!==e&&(t=t.toSpliced(e,1),ea===n&&ei(t[e-1]??t[0]))}ee(t)}else ee(A),ei(void 0)},z[10]=Z,z[11]=ea,z[12]=R):R=z[12];let ep=(0,f.K)(R);if(z[13]!==J){for(let[e,t]of(B=new Map,J)){let n=(0,h.oy)(e),a=B.get(n)??[];a.push(t.id),B.set(n,a)}for(let e of B.values())e.sort((e,t)=>{let n=J.get(e),a=J.get(t);return"timestamp"in n&&"timestamp"in a?n.timestamp.valueOf()-a.timestamp.valueOf():0});z[13]=J,z[14]=B}else B=z[14];let eh=B;z[15]!==em||z[16]!==Z||z[17]!==eh?(M=e=>{if(e){for(let t of e)if(X(e=>{let n=new Map(e);return n.delete(t)?n:e}),Z.includes(t)){let e=(0,h.oy)(t),n=eh.get(e),a=n?.indexOf(t)??-1,i=n?.[a-1];i?ed(i,!1):em(t)}}else X(L),ee(A),ei(void 0)},z[15]=em,z[16]=Z,z[17]=eh,z[18]=M):M=z[18];let ef=(0,f.K)(M);z[19]!==K.value||z[20]!==Z?(F=()=>K.value?Z:A,z[19]=K.value,z[20]=Z,z[21]=F):F=z[21];let eg=(0,f.K)(F);z[22]!==Y||z[23]!==K?(U=()=>{K.setValue(!0),queueMicrotask(()=>{Y.current?.focus()})},z[22]=Y,z[23]=K,z[24]=U):U=z[24];let ey=U;z[25]!==K||z[26]!==Q?(V=()=>{K.setValue(!1),Q.setValue(!1)},z[25]=K,z[26]=Q,z[27]=V):V=z[27];let e_=V;z[28]!==Q?($=()=>Q.setValue(!0),z[28]=Q,z[29]=$):$=z[29];let ex=$;z[30]!==Q?(W=()=>Q.setValue(!1),z[30]=Q,z[31]=W):W=z[31];let ev=W;z[32]!==em||z[33]!==ep||z[34]!==e_||z[35]!==ev||z[36]!==Y||z[37]!==eo||z[38]!==er||z[39]!==eg||z[40]!==K||z[41]!==Q||z[42]!==J||z[43]!==Z||z[44]!==et||z[45]!==ey||z[46]!==ex||z[47]!==ef||z[48]!==ea||z[49]!==es||z[50]!==eh?(H={items:J,versionedItems:eh,contentPreviewRef:Y,isContentPreviewOpen:K,isResourcePanelOpen:Q,getOpenItems:eg,allOpenItems:Z,openItemsBeforeSubthreadChange:et,selectedItem:ea,updateItem:eu,setOpenItemsBeforeSubthreadChange:en,openItem:ed,closeItem:em,closeItems:ep,openPreviewPane:ey,closePreviewPane:e_,openResourcePanel:ex,closeResourcePanel:ev,removeItems:ef,showLoadingState:es,enableLoadingState:er,disableLoadingState:eo},z[32]=em,z[33]=ep,z[34]=e_,z[35]=ev,z[36]=Y,z[37]=eo,z[38]=er,z[39]=eg,z[40]=K,z[41]=Q,z[42]=J,z[43]=Z,z[44]=et,z[45]=ey,z[46]=ex,z[47]=ef,z[48]=ea,z[49]=es,z[50]=eh,z[51]=H):H=z[51];let eb=H;return!function(e){let t,n,a=(0,i.c)(6),{updateItem:o,openItem:l,openPreviewPane:c}=e,d=(0,s.Pk)();a[0]!==d||a[1]!==l||a[2]!==c||a[3]!==o?(t=()=>{if(!r.W.copilotRedirectDiffViewToImmersive)return;let e=p.Jt.getCopilotDiffReferences();if(e&&0!==e.length){for(let t of(d.currentReferences.push(...e),e)){let e=(0,h.g)(t);o(e),l(e.id)}c(),p.Jt.removeCopilotDiffReferences()}},n=[o,l,c,d],a[0]=d,a[1]=l,a[2]=c,a[3]=o,a[4]=t,a[5]=n):(t=a[4],n=a[5]),(0,u.useEffect)(t,n)}(eb),O(eb),!function(e){let t,n,a,o=(0,i.c)(10),{items:l,removeItems:c,updateItem:d}=e,{currentReferences:m,messages:p,selectedThreadID:f}=(0,s.Pk)(),x=(0,g.b)(),j=(0,u.useRef)(l),E=(0,u.useRef)(m);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,_.A)("sessionStorage"),o[0]=t):t=o[0];let L=t;o[1]!==m||o[2]!==l||o[3]!==x||o[4]!==p.length||o[5]!==c||o[6]!==f||o[7]!==d?(n=()=>{let e=N(j.current,l);j.current=l;let t=w(E.current,m);if(E.current=m,e){let e=new Map(Array.from(l.values()).filter(b).map(T).filter(k).map(I)),t=new Set;for(let n of m)if(v.includes(n.type)){let a=(0,y.Vb)(n);t.add(a);let i=e.get(a);i?w([i],[n])&&x.addReference(i,"content-preview"):x.removeReference(n)}for(let[n,a]of e)t.has(n)||x.addReference(a,"content-preview")}else if(t){let e=new Map(m.map(e=>(0,h.oR)({ref:e,messageIndex:p.length})).filter(C).map(S)),t=new Set;for(let[n,a]of l)if(b(a)){t.add(n);let i=e.get(n);null!=i?N(new Map([[i.id,i]]),new Map([[a.id,a]]))&&d(i):(c([n]),r.W.copilotPersistEditedDraftIssues&&L.removeItem(`edited-${f}-${n}`))}for(let[n,a]of e)t.has(n)||d(a)}},a=[l,x,m,p.length,c,d,L,f],o[1]=m,o[2]=l,o[3]=x,o[4]=p.length,o[5]=c,o[6]=f,o[7]=d,o[8]=n,o[9]=a):(n=o[8],a=o[9]),(0,u.useEffect)(n,a)}(eb),z[52]!==G||z[53]!==eb?(q=(0,a.jsx)(E.Provider,{value:eb,children:G}),z[52]=G,z[53]=eb,z[54]=q):q=z[54],q}function D(e){return e.selectedThreadID}function P(e){return e.selectedThreadID}let O=e=>{let t,n,a,o=(0,i.c)(8),{updateItem:l}=e,{messagesLoading:c,selectedThreadID:m}=(0,s.Pk)(),p=`edited-${m}`;if(r.W.copilotPersistEditedDraftIssues){let e;o[0]!==p?(e=(0,d.MV)(p),o[0]=p,o[1]=e):e=o[1],t=e}else{let e;o[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[2]=e):e=o[2],t=e}let h=t;o[3]!==h||o[4]!==c.state||o[5]!==l?(n=()=>{if(h&&"loaded"===c.state)for(let e of h)l(e)},a=[h,l,c.state],o[3]=h,o[4]=c.state,o[5]=l,o[6]=n,o[7]=a):(n=o[6],a=o[7]),(0,u.useEffect)(n,a)};function B(){let e=(0,u.useContext)(E);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}function M(){let e=(0,u.useContext)(E);if(!e)throw Error("useContentPreviewOpen must be used within ContentPreviewContextProvider");return(0,l.HN)(e.isContentPreviewOpen)}function F(){let e=(0,u.useContext)(E);if(!e)throw Error("useResourcePanelOpen must be used within ContentPreviewContextProvider");return(0,l.HN)(e.isResourcePanelOpen)}try{E.displayName||(E.displayName="ContentPreviewContext")}catch{}try{R.displayName||(R.displayName="ContentPreviewProvider")}catch{}},29765:(e,t,n)=>{n.d(t,{I:()=>p});var a=n(74848),i=n(21728),s=n(73017),r=n(1992),o=n(5524),l=n(96540),c=n(82595),d=n(38621);let u={container:"StarterPill-module__container--d2dFs",icon:"StarterPill-module__icon--GKvj8",title:"StarterPill-module__title--Nsp36",dropdown:"StarterPill-module__dropdown--NngRn"},m=l.forwardRef((e,t)=>{let n,s,r,o,l=(0,i.c)(14),{name:m,icon:p,color:h,onClick:f,dropdown:g,open:y}=e;return l[0]!==h||l[1]!==p?(n=c.I&&(0,a.jsx)("div",{className:u.icon,children:(0,a.jsx)(c.I,{icon:p,color:h})}),l[0]=h,l[1]=p,l[2]=n):n=l[2],l[3]!==g?(s=g&&(0,a.jsx)("div",{className:u.dropdown,children:(0,a.jsx)(d.TriangleDownIcon,{})}),l[3]=g,l[4]=s):s=l[4],l[5]!==m||l[6]!==s?(r=(0,a.jsxs)("div",{className:u.title,children:[m,s]}),l[5]=m,l[6]=s,l[7]=r):r=l[7],l[8]!==f||l[9]!==y||l[10]!==t||l[11]!==n||l[12]!==r?(o=(0,a.jsxs)("button",{ref:t,className:u.container,onClick:f,"aria-expanded":y,children:[n,r]}),l[8]=f,l[9]=y,l[10]=t,l[11]=n,l[12]=r,l[13]=o):o=l[13],o});function p(e){let t,n,c,d,u,p,h=(0,i.c)(20),{group:f,onEntrySelect:g}=e,[y,_]=(0,l.useState)(!1),x=(0,l.useRef)(null);h[0]!==y?(t=()=>{_(!y)},h[0]=y,h[1]=t):t=h[1];let v=t;if(h[2]!==f.color||h[3]!==f.icon||h[4]!==f.name||h[5]!==v||h[6]!==y?(n=(0,a.jsx)(r.W.Anchor,{children:(0,a.jsx)(m,{ref:x,name:f.name,icon:f.icon,color:f.color,onClick:v,dropdown:!0,open:y})}),h[2]=f.color,h[3]=f.icon,h[4]=f.name,h[5]=v,h[6]=y,h[7]=n):n=h[7],h[8]===Symbol.for("react.memo_cache_sentinel")?(c={width:"260px"},h[8]=c):c=h[8],h[9]!==f.entries||h[10]!==g){let e;h[12]!==g?(e=e=>(0,a.jsx)(o.l.Item,{onSelect:()=>g(e),children:(0,a.jsx)(s.$6,{html:e.titleHtml})},e.id),h[12]=g,h[13]=e):e=h[13],d=f.entries.map(e),h[9]=f.entries,h[10]=g,h[11]=d}else d=h[11];return h[14]!==d?(u=(0,a.jsx)(r.W.Overlay,{style:c,children:(0,a.jsx)(o.l,{children:d})}),h[14]=d,h[15]=u):u=h[15],h[16]!==y||h[17]!==n||h[18]!==u?(p=(0,a.jsx)("li",{children:(0,a.jsxs)(r.W,{open:y,onOpenChange:_,children:[n,u]})}),h[16]=y,h[17]=n,h[18]=u,h[19]=p):p=h[19],p}m.displayName="StarterPill";try{p.displayName||(p.displayName="StarterGroupWithMenu")}catch{}},70324:(e,t,n)=>{n.d(t,{c:()=>u});var a=n(74848),i=n(21728),s=n(38621),r=n(21373),o=n(1992),l=n(5524),c=n(73783),d=n(26108);function u(e){let t,n,u,m,p=(0,i.c)(37),{value:h,isLoading:f,onClick:g,onStop:y,variant:_,disabled:x,iconOnly:v,showPickInputsOption:b,onRunWithInputs:j,leadingVisual:w}=e,N=void 0===_?"invisible":_;p[0]!==f||p[1]!==h?(t=()=>f?"Loading...":h?"Run node":"Run loop",p[0]=f,p[1]=h,p[2]=t):t=p[2];let S=t;p[3]!==f||p[4]!==g||p[5]!==y?(n=e=>{f?y?.(e):g(e)},p[3]=f,p[4]=g,p[5]=y,p[6]=n):n=p[6];let C=n;p[7]!==j?(u=()=>{j?.()},p[7]=j,p[8]=u):u=p[8];let I=u;if(void 0!==b&&b&&!f&&!v){let e,t,n,i,d;return p[9]!==x||p[10]!==C||p[11]!==w||p[12]!==N?(e=(0,a.jsx)(r.Q,{disabled:x,variant:N,onClick:C,leadingVisual:w,children:"Run"}),p[9]=x,p[10]=C,p[11]=w,p[12]=N,p[13]=e):e=p[13],p[14]!==x||p[15]!==N?(t=(0,a.jsx)(o.W.Button,{disabled:x,variant:N,icon:s.TriangleDownIcon,"aria-label":"More run options"}),p[14]=x,p[15]=N,p[16]=t):t=p[16],p[17]!==I?(n=(0,a.jsx)(o.W.Overlay,{children:(0,a.jsx)(l.l,{children:(0,a.jsx)(l.l.Item,{onSelect:I,children:"Run with custom inputs"})})}),p[17]=I,p[18]=n):n=p[18],p[19]!==t||p[20]!==n?(i=(0,a.jsxs)(o.W,{children:[t,n]}),p[19]=t,p[20]=n,p[21]=i):i=p[21],p[22]!==e||p[23]!==i?(d=(0,a.jsxs)(c.A,{children:[e,i]}),p[22]=e,p[23]=i,p[24]=d):d=p[24],d}if(!v){let e,t=f?"danger":N,n=f?"Stop":"Run";return p[25]!==x||p[26]!==C||p[27]!==w||p[28]!==t||p[29]!==n?(e=(0,a.jsx)(r.Q,{disabled:x,variant:t,onClick:C,leadingVisual:w,children:n}),p[25]=x,p[26]=C,p[27]=w,p[28]=t,p[29]=n,p[30]=e):e=p[30],e}let k=S(),T=f?s.SquareFillIcon:s.SyncIcon,E=f?"danger":N;return p[31]!==x||p[32]!==C||p[33]!==k||p[34]!==T||p[35]!==E?(m=(0,a.jsx)(d.K,{disabled:x,"aria-label":k,icon:T,onClick:C,variant:E}),p[31]=x,p[32]=C,p[33]=k,p[34]=T,p[35]=E,p[36]=m):m=p[36],m}try{u.displayName||(u.displayName="ExecuteButton")}catch{}},14303:(e,t,n)=>{n.d(t,{r:()=>h});var a=n(74848),i=n(21728),s=n(5524),r=n(1992),o=n(40928),l=n(96540),c=n(38621),d=n(295),u=n(53419),m=n(25641),p=n(13017);function h(e){let t,n,h,f,g,y,_,x,v,b,j,w,N,S,C,I,k,T,E,L=(0,i.c)(61),{onDelete:A,onCopyLoop:R,onDuplicate:D,onShare:P,onEdit:O,onCopyOutput:B,onRename:M,loopId:F,hasOutput:U,returnFocusRef:V}=e,$=void 0!==U&&U,[W,H]=(0,l.useState)(null),{mutate:q}=(0,d.h)();L[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{H("delete")},L[0]=t):t=L[0];let z=t;L[1]!==V?(n=()=>{H(null),setTimeout(()=>V?.current?.focus())},L[1]=V,L[2]=n):n=L[2];let G=n;L[3]!==q||L[4]!==F||L[5]!==A?(h=async()=>{F&&(H(null),q(F,{onSuccess:A}))},L[3]=q,L[4]=F,L[5]=A,L[6]=h):h=L[6];let K=h;L[7]!==F||L[8]!==D?(f=()=>{F&&D&&((0,u.BI)("dotcom_chat.activate",{target:"LOOP_DUPLICATE",mode:"loops"}),D(F))},L[7]=F,L[8]=D,L[9]=f):f=L[9];let Q=f;L[10]!==P?(g=()=>{P?.()},L[10]=P,L[11]=g):g=L[11];let Y=g;L[12]!==O?(y=()=>{(0,u.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"}),O?.()},L[12]=O,L[13]=y):y=L[13];let J=y;L[14]!==B?(_=()=>{B&&B()},L[14]=B,L[15]=_):_=L[15];let X=_;return F?(L[16]!==X||L[17]!==$||L[18]!==B?(x=B&&(0,a.jsxs)(s.l.Item,{onSelect:X,disabled:!$,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.CopyIcon,{})}),"Copy output"]}),L[16]=X,L[17]=$,L[18]=B,L[19]=x):x=L[19],L[20]!==J||L[21]!==F||L[22]!==O?(v=O&&(0,a.jsxs)(s.l.LinkItem,{as:p.N_,to:`${m.Jz}/l/${F}`,onSelect:J,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.PencilIcon,{})}),"Edit loop"]}),L[20]=J,L[21]=F,L[22]=O,L[23]=v):v=L[23],L[24]!==R||L[25]!==B||L[26]!==D||L[27]!==O||L[28]!==P?(b=(B||O)&&(D||P||R)&&(0,a.jsx)(s.l.Divider,{}),L[24]=R,L[25]=B,L[26]=D,L[27]=O,L[28]=P,L[29]=b):b=L[29],L[30]!==Q||L[31]!==D?(j=D&&(0,a.jsxs)(s.l.Item,{onSelect:Q,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.DuplicateIcon,{})}),"Duplicate"]}),L[30]=Q,L[31]=D,L[32]=j):j=L[32],L[33]!==M?(w=M&&(0,a.jsxs)(s.l.Item,{onSelect:M,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.PencilIcon,{})}),"Rename"]}),L[33]=M,L[34]=w):w=L[34],L[35]!==Y||L[36]!==P?(N=P&&(0,a.jsxs)(s.l.Item,{onSelect:Y,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.LinkIcon,{})}),"Copy link"]}),L[35]=Y,L[36]=P,L[37]=N):N=L[37],L[38]!==R?(S=R&&(0,a.jsxs)(s.l.Item,{onSelect:R,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.CopyIcon,{})}),"Copy JSON"]}),L[38]=R,L[39]=S):S=L[39],L[40]!==R||L[41]!==D||L[42]!==P?(C=(D||P||R)&&(0,a.jsx)(s.l.Divider,{}),L[40]=R,L[41]=D,L[42]=P,L[43]=C):C=L[43],L[44]===Symbol.for("react.memo_cache_sentinel")?(I=(0,a.jsxs)(s.l.Item,{variant:"danger",onSelect:z,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.TrashIcon,{})}),"Delete"]}),L[44]=I):I=L[44],L[45]!==v||L[46]!==b||L[47]!==j||L[48]!==w||L[49]!==N||L[50]!==S||L[51]!==C||L[52]!==x?(k=(0,a.jsx)(r.W.Overlay,{align:"end",children:(0,a.jsxs)(s.l,{children:[x,v,b,j,w,N,S,C,I]})}),L[45]=v,L[46]=b,L[47]=j,L[48]=w,L[49]=N,L[50]=S,L[51]=C,L[52]=x,L[53]=k):k=L[53],L[54]!==G||L[55]!==K||L[56]!==W?(T="delete"===W&&(0,a.jsx)(o.K,{title:"Delete loop",onClose:e=>{"confirm"===e?K():G()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this loop? This action cannot be undone."}),L[54]=G,L[55]=K,L[56]=W,L[57]=T):T=L[57],L[58]!==k||L[59]!==T?(E=(0,a.jsxs)(a.Fragment,{children:[k,T]}),L[58]=k,L[59]=T,L[60]=E):E=L[60],E):null}try{h.displayName||(h.displayName="LoopsActionMenuOverlay")}catch{}},11128:(e,t,n)=>{n.d(t,{n:()=>c});var a=n(74848),i=n(21728),s=n(38621),r=n(21373);let o={errorContainer:"ErrorDisplay-module__errorContainer--r2xoZ",errorNotice:"ErrorDisplay-module__errorNotice--Ey4vJ",errorIcon:"ErrorDisplay-module__errorIcon--SP3WM",errorTitle:"ErrorDisplay-module__errorTitle--P8tnN",errorText:"ErrorDisplay-module__errorText--c4NUQ",errorActions:"ErrorDisplay-module__errorActions--NW0lt"};var l=n(22053);function c(e){let t,n,c,u,m,p,h,f=(0,i.c)(17),{additionalActions:g,errors:y,onFixErrorClick:_,title:x}=e,{isReadonly:v}=(0,l.a)();return f[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(s.AlertIcon,{className:o.errorIcon,size:"medium"}),f[0]=t):t=f[0],f[1]!==x?(n=(0,a.jsx)("h2",{className:o.errorTitle,children:x}),f[1]=x,f[2]=n):n=f[2],f[3]!==y?(c=y.map(d),f[3]=y,f[4]=c):c=f[4],f[5]!==n||f[6]!==c?(u=(0,a.jsxs)("div",{className:o.errorNotice,children:[n,c]}),f[5]=n,f[6]=c,f[7]=u):u=f[7],f[8]!==v||f[9]!==_?(m=!v&&_&&(0,a.jsx)(r.Q,{leadingVisual:s.BeakerIcon,onClick:_,children:"Try to fix it"}),f[8]=v,f[9]=_,f[10]=m):m=f[10],f[11]!==g||f[12]!==m?(p=(0,a.jsxs)("div",{className:o.errorActions,children:[g,m]}),f[11]=g,f[12]=m,f[13]=p):p=f[13],f[14]!==u||f[15]!==p?(h=(0,a.jsxs)("div",{className:o.errorContainer,children:[t,u,p]}),f[14]=u,f[15]=p,f[16]=h):h=f[16],h}function d(e){return(0,a.jsx)("p",{className:o.errorText,children:e},e)}try{c.displayName||(c.displayName="ErrorDisplay")}catch{}},19336:(e,t,n)=>{n.d(t,{G:()=>p});var a=n(74848),i=n(21728),s=n(34031),r=n(11128),o=n(12357),l=n(70324);let c={emptyState:"ExecutionView-module__emptyState--gD9en",emptyStateText:"ExecutionView-module__emptyStateText--awSRT",emptyStateTitle:"ExecutionView-module__emptyStateTitle--F8TRM"};var d=n(53419),u=n(38621);let m=[];function p(e){let t,n=(0,i.c)(9),{outputNodeExists:p,isRunning:h,nodeValue:f,nodeError:g,validationErrors:y,additionalActions:_,onRun:x,onStop:v}=e,b=void 0===y?m:y;return n[0]!==_||n[1]!==h||n[2]!==g||n[3]!==f||n[4]!==x||n[5]!==v||n[6]!==p||n[7]!==b?(t=(0,a.jsx)(a.Fragment,{children:p?h&&!f?(0,a.jsx)(s.M,{isRunning:h,messages:{running:"Running the loop...",waiting:"Waiting..."}}):b.length>0?(0,a.jsx)(r.n,{errors:b,title:"Oops, this loop is configured incorrectly",additionalActions:_}):g?(0,a.jsx)(r.n,{errors:[g],title:"Oops, there was an error running this loop",additionalActions:_}):f?(0,a.jsx)(o.U,{isRunning:h,nodeValue:f}):(0,a.jsxs)("div",{className:c.emptyState,children:[(0,a.jsxs)("div",{className:c.emptyStateText,children:[(0,a.jsx)("span",{className:c.emptyStateTitle,children:"No output yet"}),(0,a.jsx)("span",{children:"Run this loop to generate output"})]}),(0,a.jsx)(l.c,{onClick:()=>{x(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_RUN",mode:"loops"})},onStop:()=>{v(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_STOP",mode:"loops"})},isLoading:h,value:f,variant:"default",leadingVisual:(0,a.jsx)(u.SyncIcon,{})})]}):(0,a.jsx)("p",{children:"No output nodes found in this loop."})}),n[0]=_,n[1]=h,n[2]=g,n[3]=f,n[4]=x,n[5]=v,n[6]=p,n[7]=b,n[8]=t):t=n[8],t}try{p.displayName||(p.displayName="ExecutionView")}catch{}},12357:(e,t,n)=>{n.d(t,{U:()=>I});var a=n(74848),i=n(21728),s=n(4817);let r={outputValue:"OutputDisplay-module__outputValue--I7SuT",jsonOutput:"OutputDisplay-module__jsonOutput--NA93D",markdownOutput:"OutputDisplay-module__markdownOutput--c47bk"};var o=n(85094),l=n(98755);let c={container:"CodeBlocks-module__container--GV7vX",copyContainer:"CodeBlocks-module__copyContainer--PlsVH",copyContent:"CodeBlocks-module__copyContent--_B0qO",copyButton:"CodeBlocks-module__copyButton--xrG5L",immersive:"CodeBlocks-module__immersive--pP6K5",code:"CodeBlocks-module__code--wvK8k",codeContainer:"CodeBlocks-module__codeContainer--wOuWu",codeWrap:"CodeBlocks-module__codeWrap--YQDq8"};var d=n(96540),u=n(57826),m=n(34164),p=n(53419);function h(e){let t,n,s,r,o,h,f,g,y,_=(0,i.c)(18),{children:x,code:v}=e,b=(0,d.useId)(),{chatMode:j,wrapCodeLines:w}=(0,d.useContext)(u.F);_[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.$)(c.container,c.immersive),_[0]=t):t=_[0],_[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.$)(c.copyContainer),s=(0,m.$)(c.copyContent),_[1]=n,_[2]=s):(n=_[1],s=_[2]),_[3]!==j?(r=()=>{(0,p.BI)("dotcom_chat.activate",{target:"CODE_BLOCK_COPY",mode:j})},_[3]=j,_[4]=r):r=_[4],_[5]!==v||_[6]!==r?(o=(0,a.jsx)("div",{className:n,children:(0,a.jsx)("div",{className:s,children:(0,a.jsx)(l.T,{textToCopy:v,ariaLabel:"Copy code",className:c.copyButton,size:"small",onCopy:r})})}),_[5]=v,_[6]=r,_[7]=o):o=_[7],_[8]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.$)(c.codeContainer),_[8]=h):h=_[8];let N=w&&c.codeWrap;return _[9]!==N?(f=(0,m.$)(N),_[9]=N,_[10]=f):f=_[10],_[11]!==x||_[12]!==f?(g=(0,a.jsx)("div",{className:h,children:(0,a.jsx)("pre",{className:c.code,tabIndex:0,children:(0,a.jsx)("code",{className:f,children:x})})}),_[11]=x,_[12]=f,_[13]=g):g=_[13],_[14]!==b||_[15]!==o||_[16]!==g?(y=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("figure",{className:t,"aria-labelledby":b,children:[o,g]})}),_[14]=b,_[15]=o,_[16]=g,_[17]=y):y=_[17],y}try{h.displayName||(h.displayName="CodeBlocksForLoop")}catch{}var f=n(47970);let g="data-codeblock-for-loop-props",y=(0,o.F)(g),_={code:(e,t)=>{let n=(0,o.k)(e,g);return n?(0,a.jsx)(h,{...n,children:e.children}):t}};var x=n(90122),v=n(76219),b=n(69726);let j={diagramContainer:"Mermaid-module__diagramContainer--YUzME",hiddenSourceCode:"Mermaid-module__hiddenSourceCode--dlgHV",loaderContainer:"Mermaid-module__loaderContainer--pyhaT"},w="data-mermaid-props",N=(0,o.F)(w);function S(e){let t,n,s,r,o,l,c,d=(0,i.c)(16),{code:u,identity:p,viewscreenHost:h}=e,f=`${h}/markdown/mermaid`,g=btoa(encodeURIComponent(u));d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.$)("js-render-needs-enrichment","render-needs-enrichment",j.diagramContainer),d[0]=t):t=d[0];let y=`${f}?data=${g}`;return d[1]!==u?(n=JSON.stringify({data:u}),d[1]=u,d[2]=n):n=d[2],d[3]!==u?(s=(0,a.jsx)("div",{className:j.hiddenSourceCode,children:(0,a.jsx)("pre",{lang:"mermaid",children:u})}),d[3]=u,d[4]=s):s=d[4],d[5]!==u||d[6]!==n||d[7]!==s?(r=(0,a.jsx)("div",{className:"js-render-enrichment-target","data-json":n,"data-plain":u,children:s}),d[5]=u,d[6]=n,d[7]=s,d[8]=r):r=d[8],d[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.$)("js-render-enrichment-loader",j.loaderContainer),d[9]=o):o=d[9],d[10]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)("span",{className:o,role:"presentation",children:(0,a.jsx)(b.A,{})}),d[10]=l):l=d[10],d[11]!==h||d[12]!==p||d[13]!==y||d[14]!==r?(c=(0,a.jsxs)("section",{className:t,"data-identity":p,"data-host":h,"data-src":y,"data-type":"mermaid","aria-label":"Mermaid diagram rendered output container",children:[r,l]}),d[11]=h,d[12]=p,d[13]=y,d[14]=r,d[15]=c):c=d[15],c}let C={code:(e,t)=>{if(!e.className?.includes("language-mermaid"))return t;let n=(0,o.k)(e,w);return n?(0,a.jsx)(S,{code:n.code,identity:n.identity,viewscreenHost:n.viewscreenHost}):t}};try{S.displayName||(S.displayName="MermaidRenderer")}catch{}function I(e){let t,n,o,l,c,d,u=(0,i.c)(15),{className:p,isRunning:h,nodeValue:g,renderAsJson:b}=e,j=void 0!==b&&b,{previewUrl:w}=(0,v.U)();if(u[0]===Symbol.for("react.memo_cache_sentinel")?(t={transformMarkdown:e=>(0,f.YR)(e,"code",e=>{e.data={...e.data,hName:"code",hProperties:{[y]:JSON.stringify({language:e.lang??"",code:e.value,startOffset:e.position?.start.offset??-1,endOffset:e.position?.end.offset??-1})}}}),transformHtml:e=>(0,f.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&y in a.properties&&n.children.splice(t,1,a)}),reactComponents:_},u[0]=t):t=u[0],u[1]!==w){var S;n=[t],w&&n.push((S={viewscreenHost:w},{transformMarkdown:e=>(0,f.YR)(e,"code",e=>{"mermaid"===e.lang&&(e.data={...e.data,hName:"code",hProperties:{className:["language-mermaid"],[N]:JSON.stringify({code:e.value,identity:`mermaid-${Math.random().toString(36).slice(2,11)}`,viewscreenHost:S.viewscreenHost})}})}),transformHtml:e=>(0,f.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&N in a.properties&&n.children.splice(t,1,a)}),reactComponents:C})),u[1]=w,u[2]=n}else n=u[2];let I=n;u[3]!==g?(o=(0,x.DO)(g),u[3]=g,u[4]=o):o=u[4];let k=o;return u[5]!==p?(l=(0,m.$)(r.outputValue,p),u[5]=p,u[6]=l):l=u[6],u[7]!==I||u[8]!==h||u[9]!==j||u[10]!==k?(c=j?(0,a.jsx)("pre",{className:r.jsonOutput,children:k}):(0,a.jsx)(s.To,{extensions:I,className:r.markdownOutput,isStreaming:h,markdown:k}),u[7]=I,u[8]=h,u[9]=j,u[10]=k,u[11]=c):c=u[11],u[12]!==l||u[13]!==c?(d=(0,a.jsx)("div",{className:l,children:c}),u[12]=l,u[13]=c,u[14]=d):d=u[14],d}try{I.displayName||(I.displayName="OutputDisplay")}catch{}},34031:(e,t,n)=>{n.d(t,{M:()=>o});var a=n(74848),i=n(21728);let s={container:"RunningDisplay-module__container--dUZ8X",text:"RunningDisplay-module__text--nICc0"};var r=n(74807);function o(e){let t,n,o,l,c=(0,i.c)(8),{isRunning:d,messages:u}=e;c[0]===Symbol.for("react.memo_cache_sentinel")?(t={running:"Running...",waiting:"Waiting..."},c[0]=t):t=c[0];let m=t,p=u||m,h=d?p.running:p.waiting,f=d?"thinking":"static";return c[1]!==f?(n=(0,a.jsx)(r.N,{animationType:f,loopAnimation:!0}),c[1]=f,c[2]=n):n=c[2],c[3]!==h?(o=(0,a.jsx)("div",{className:s.text,children:h}),c[3]=h,c[4]=o):o=c[4],c[5]!==n||c[6]!==o?(l=(0,a.jsxs)("div",{className:s.container,children:[n,o]}),c[5]=n,c[6]=o,c[7]=l):l=c[7],l}try{o.displayName||(o.displayName="RunningDisplay")}catch{}},76219:(e,t,n)=>{n.d(t,{Q:()=>o,U:()=>l});var a=n(74848),i=n(21728),s=n(96540);let r=(0,s.createContext)(null);function o(e){let t,n,s=(0,i.c)(7),{availableModels:o,previewUrl:l,sendChatMessage:c,children:d}=e;s[0]!==o||s[1]!==l||s[2]!==c?(t={availableModels:o,previewUrl:l,sendChatMessage:c},s[0]=o,s[1]=l,s[2]=c,s[3]=t):t=s[3];let u=t;return s[4]!==d||s[5]!==u?(n=(0,a.jsx)(r.Provider,{value:u,children:d}),s[4]=d,s[5]=u,s[6]=n):n=s[6],n}function l(){let e=(0,s.useContext)(r);if(!e)throw Error("useAppContext must be used within an AppContextProvider");return e}try{r.displayName||(r.displayName="AppContext")}catch{}try{o.displayName||(o.displayName="AppContextProvider")}catch{}},99519:(e,t,n)=>{n.d(t,{EY:()=>r,qT:()=>s});var a=n(96540);let i=(0,a.createContext)(null),s=i.Provider;function r(){let e=(0,a.useContext)(i);if(!e)throw Error("useLoopsService must be used inside a LoopsServiceProvider");return e}try{i.displayName||(i.displayName="LoopsServiceContext")}catch{}},50050:(e,t,n)=>{n.d(t,{Mr:()=>g,NY:()=>_,Ud:()=>y});var a=n(74848),i=n(49835),s=n(96540),r=n(33535),o=n(88431),l=n(96868),c=n(21728),d=n(96459),u=n(53380);function m(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};case"SET_VIEW":return{...e,view:t.view};case"SET_SIDE_PANEL_VIEW":return{...e,sidePanelView:t.view};case"SET_VERSION":return{...e,version:t.version};case"SET_STATE":return{...e,...t.state};case"SHOW_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!0};case"HIDE_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!1};case"SHOW_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!0};case"HIDE_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!1};default:return e}}var p=n(53627);let h=(0,s.createContext)(new i.Lj(l.qB)),f=(0,s.createContext)(()=>{});function g({children:e}){let[t,n]=function(){let e,t,n,a,i=(0,c.c)(9),[r]=(0,d.o)();i[0]!==r?(e=(0,u.hW)(r),i[0]=r,i[1]=e):e=i[1];let[o,l]=(0,s.useReducer)(m,e);return i[2]!==o?(t=()=>{let e=(0,u.Ts)(o);(0,p.MM)(e)},i[2]=o,i[3]=t):t=i[3],i[4]!==r||i[5]!==o?(n=[o,r],i[4]=r,i[5]=o,i[6]=n):n=i[6],(0,s.useEffect)(t,n),i[7]!==o?(a=[o,l],i[7]=o,i[8]=a):a=i[8],a}(),i=(0,r.AI)(t);(0,o.N)(()=>{i.value=t},[t,i]);let l=(0,s.useCallback)(e=>{n(e)},[n]);return(0,a.jsx)(h.Provider,{value:i,children:(0,a.jsx)(f.Provider,{value:l,children:e})})}function y(e){let t=(0,s.useContext)(h);if(!t)throw Error("useLoopsStateLens can only be used inside a PipesProvider");let n=(0,r.Sk)(t,e);return(0,r.HN)(n)}function _(){return(0,s.useContext)(f)}try{h.displayName||(h.displayName="LoopsStateContext")}catch{}try{f.displayName||(f.displayName="LoopsDispatchContext")}catch{}try{g.displayName||(g.displayName="LoopsStateProvider")}catch{}},95280:(e,t,n)=>{n.d(t,{B:()=>f});var a=n(74848),i=n(35247),s=n(53419),r=n(38621),o=n(73783),l=n(73077),c=n(1992),d=n(26108),u=n(5524);let m={actions:"EditorMenu-module__actions--PsLtQ",editorButton:"EditorMenu-module__editorButton--MKhLx"};var p=n(56487),h=n(60429);function f({menuLocation:e,mode:t,onButtonClick:n}){let f=(n,a)=>{i.W.freeToPaidTelemetry?(0,p.F)({eventName:n,menuLocation:e,mode:t,action:a}):(0,s.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${n.toUpperCase()}`,mode:t})};return(0,a.jsxs)(o.A,{className:m.actions,children:[(0,a.jsx)(l.z,{className:m.editorButton,href:h.A.vscode.url,leadingVisual:(0,a.jsx)("img",{src:h.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{n?.(),f("vscode","ide_menu_primary_button_click")},children:h.A.vscode.name}),(0,a.jsxs)(c.W,{children:[(0,a.jsx)(c.W.Anchor,{children:(0,a.jsx)(d.K,{"aria-label":"More editors",icon:r.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{f("menu","ide_menu_open")},"data-testid":"editor-dropdown-button"})}),(0,a.jsx)(c.W.Overlay,{align:"end",children:(0,a.jsx)(u.l,{children:(0,a.jsx)(p.t,{menuLocation:e,mode:t,onItemClick:n})})})]})]})}try{f.displayName||(f.displayName="EditorMenu")}catch{}},56487:(e,t,n)=>{n.d(t,{F:()=>l,t:()=>c});var a=n(74848),i=n(35247),s=n(53419),r=n(5524),o=n(60429);function l({eventName:e,menuLocation:t,mode:n,action:a,text:i}){let r=`${t.toUpperCase()}_${e.toUpperCase()}`;(0,s.BI)("dotcom_chat.activate",{target:r,text:i,category:t,action:a,mode:n})}function c({menuLocation:e,mode:t,onItemClick:n}){return Object.entries(o.A).map(([s,{name:o,url:c,icon:d}])=>(0,a.jsxs)(r.l.LinkItem,{href:c,onClick:()=>{n?.(),i.W.freeToPaidTelemetry&&l({eventName:s,menuLocation:e,mode:t,action:"menu_item_click",text:o})},children:[o,(0,a.jsx)(r.l.LeadingVisual,{children:(0,a.jsx)("img",{src:d,alt:"",height:"20",width:"20"})})]},s))}try{c.displayName||(c.displayName="EditorMenuItems")}catch{}},16070:(e,t,n)=>{n.d(t,{Y0:()=>B,$I:()=>P,kR:()=>M});var a=n(74848),i=n(21728),s=n(96540),r=n(97949),o=n(38621),l=n(13017),c=n(31315),d=n(69599),u=n(51587),m=n(11083),p=n(30459),h=n(79634);let f={bannerOuterWrapper:"GlobalSSOBanner-module__bannerOuterWrapper--fyxDF",bannerInnerWrapper:"GlobalSSOBanner-module__bannerInnerWrapper--butqf",banner:"GlobalSSOBanner-module__banner--kzCnx",dismissedOrgList:"GlobalSSOBanner-module__dismissedOrgList--Jkrx7",durationSelector:"GlobalSSOBanner-module__durationSelector--DOJjX"};function g({children:e,hidden:t}){let[n,i]=s.useState("visible"),r=s.useRef(null),o=s.useRef(void 0);return(s.useEffect(()=>{if(t&&"visible"===n){i("collapsing");let e=r.current;if(e){let t=e.getBoundingClientRect().height;o.current=t,e.style.height=`${t}px`}}else if("collapsing"===n){let e=setTimeout(()=>{i("hidden")},300);return()=>{clearTimeout(e)}}},[t,n]),"hidden"===n)?null:(0,a.jsx)("div",{ref:r,style:{height:"visible"===n?o.current??"auto":0},className:f.bannerOuterWrapper,children:(0,a.jsx)("div",{className:f.bannerInnerWrapper,style:{transform:"visible"===n?void 0:`translateY(-${o.current??0}px)`},children:e})})}try{300..displayName||(300..displayName="ANIMATION_DURATION")}catch{}try{g.displayName||(g.displayName="SlideDismiss")}catch{}var y=n(1805),_=n(15042);function x(e){let t,n,s,r=(0,i.c)(7),{ssoOrgs:o}=e;if(1===o.length){let e,t=o[0],n=t?.name;return r[0]!==n?(e=(0,a.jsxs)("p",{children:["You are dismissing single sign-on prompts for the ",n," organization on this device."]}),r[0]=n,r[1]=e):e=r[1],e}return r[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("p",{children:"You are dismissing single sign-on prompts for the following organizations on this device:"}),r[2]=t):t=r[2],r[3]!==o?(n=o.map(v),r[3]=o,r[4]=n):n=r[4],r[5]!==n?(s=(0,a.jsxs)(a.Fragment,{children:[t,(0,a.jsx)("ul",{className:f.dismissedOrgList,children:n})]}),r[5]=n,r[6]=s):s=r[6],s}function v(e){return(0,a.jsx)("li",{children:e.name},e.id)}try{x.displayName||(x.displayName="DismissalSummary")}catch{}var b=n(1992),j=n(5524),w=n(46251);let N=[{id:"one-day",text:"One day",days:1},{id:"one-week",text:"One week",days:7},{id:"one-month",text:"One month",days:30},{id:"indefinitely",text:"Never",days:null}],S=()=>N.findIndex(e=>30===e.days);function C(e){let t,n,s,r,l,c=(0,i.c)(11),{selectedDurationIndex:d,onDurationChange:u}=e,m=N[d];c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("span",{id:"dismissal-duration-label",children:"Remind me again in"}),c[0]=t):t=c[0];let p=m?.text||"Pick duration";return c[1]!==p?(n=(0,a.jsx)(b.W.Button,{trailingAction:o.TriangleDownIcon,"aria-labelledby":"dismissal-duration-label",children:p}),c[1]=p,c[2]=n):n=c[2],c[3]!==u||c[4]!==d?(s=N.map((e,t)=>(0,a.jsx)(j.l.Item,{role:"menuitemradio",selected:t===d,"aria-checked":t===d,onSelect:()=>u(t),children:e.text},e.id)),c[3]=u,c[4]=d,c[5]=s):s=c[5],c[6]!==s?(r=(0,a.jsx)(b.W.Overlay,{children:(0,a.jsx)(j.l,{selectionVariant:"single",role:"menu","aria-labelledby":"dismissal-duration-label",children:s})}),c[6]=s,c[7]=r):r=c[7],c[8]!==n||c[9]!==r?(l=(0,a.jsxs)(w.B,{align:"center",direction:"horizontal",className:f.durationSelector,children:[t,(0,a.jsxs)(b.W,{children:[n,r]})]}),c[8]=n,c[9]=r,c[10]=l):l=c[10],l}try{C.displayName||(C.displayName="DurationMenu")}catch{}function I(e){let t,n,r,o,l,c,d,u,m,p,h=(0,i.c)(23),{isOpen:f,onClose:g,onConfirm:v,ssoOrgs:b}=e,[j,w]=s.useState(S);h[0]!==f?(t=()=>{f&&w(S())},n=[f],h[0]=f,h[1]=t,h[2]=n):(t=h[1],n=h[2]),s.useEffect(t,n),h[3]!==v||h[4]!==j?(r=()=>{let e=N[j];v(e?.days??null)},h[3]=v,h[4]=j,h[5]=r):r=h[5];let I=r;return f?(h[6]!==g?(o={buttonType:"default",content:"Cancel",onClick:g},h[6]=g,h[7]=o):o=h[7],h[8]!==I?(l={buttonType:"primary",content:"Confirm",onClick:I},h[8]=I,h[9]=l):l=h[9],h[10]!==o||h[11]!==l?(c=[o,l],h[10]=o,h[11]=l,h[12]=c):c=h[12],h[13]!==b?(d=(0,a.jsx)(x,{ssoOrgs:b}),h[13]=b,h[14]=d):d=h[14],h[15]!==j?(u=(0,a.jsx)(C,{selectedDurationIndex:j,onDurationChange:w}),h[15]=j,h[16]=u):u=h[16],h[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,a.jsxs)("p",{children:["To sign into any of your SSO organizations, visit the"," ",(0,a.jsx)(y.A,{href:"/settings/organizations",inline:!0,children:"SSO settings page."})]}),h[17]=m):m=h[17],h[18]!==g||h[19]!==c||h[20]!==d||h[21]!==u?(p=(0,a.jsxs)(_.l,{title:"Dismiss SSO Banner",width:"medium",height:"auto",onClose:g,footerButtons:c,children:[d,u,m]}),h[18]=g,h[19]=c,h[20]=d,h[21]=u,h[22]=p):p=h[22],p):null}try{I.displayName||(I.displayName="ConfirmationDialog")}catch{}var k=n(21373),T=n(77430),E=n(79988);function L(e,t){let n=`/orgs/${encodeURIComponent(e)}/sso`,a=t.pathname+t.search+t.hash;return`${n}?return_to=${encodeURIComponent(a)}`}function A(e){let t,n,s,r,o,l=(0,i.c)(20),{ssoOrgs:c,redirectLocation:d}=e,{sendClickAnalyticsEvent:u}=(0,p.S)();if(0===c.length)return null;l[0]!==u?(t=()=>{u({category:E.c$,action:"click_single_sso_button",label:"sso_authentication"})},l[0]=u,l[1]=t):t=l[1];let m=t;l[2]!==u?(n=e=>{u({category:E.c$,action:"click_sso_dropdown_item",label:`org:${e}`})},l[2]=u,l[3]=n):n=l[3];let h=n;if(1===c.length){let e,t,n=c[0];return void 0===n?null:(l[4]!==n.login||l[5]!==d?(e=L(n.login,d),l[4]=n.login,l[5]=d,l[6]=e):e=l[6],l[7]!==m||l[8]!==e?(t=(0,a.jsx)(k.Q,{as:"a",href:e,onClick:m,children:"Single sign-on"}),l[7]=m,l[8]=e,l[9]=t):t=l[9],t)}if(l[10]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(b.W.Button,{size:"small",children:"Single sign-on"}),l[10]=s):s=l[10],l[11]!==h||l[12]!==d||l[13]!==c){let e;l[15]!==h||l[16]!==d?(e=e=>(0,a.jsxs)(j.l.LinkItem,{href:L(e.login,d),onClick:()=>h(e.name),children:[e.avatar_url&&(0,a.jsx)(j.l.LeadingVisual,{children:(0,a.jsx)(T.r,{size:24,src:e.avatar_url})}),e.name]},e.login),l[15]=h,l[16]=d,l[17]=e):e=l[17],r=c.map(e),l[11]=h,l[12]=d,l[13]=c,l[14]=r}else r=l[14];return l[18]!==r?(o=(0,a.jsxs)(b.W,{children:[s,(0,a.jsx)(b.W.Overlay,{children:(0,a.jsx)(j.l,{children:r})})]}),l[18]=r,l[19]=o):o=l[19],o}try{A.displayName||(A.displayName="SSOActionMenu")}catch{}function R(){let e=(0,c.Ri)(E.z4);if(e?.value)try{let t=JSON.parse(e.value);return Array.isArray(t)?t:[]}catch(e){(0,c.Yj)(E.z4)}return[]}function D(e){return"object"==typeof e&&null!==e&&"id"in e&&"name"in e&&"login"in e}function P(e){let t,n,u,h,y,_,x,v,b,j,w,N,S,C,k,T=(0,i.c)(35),{ssoOrgs:L}=e,D=(0,l.zy)(),[P,B]=s.useState("visible"),[M,F]=s.useState(!1),U=s.useRef(!1),{sendClickAnalyticsEvent:V}=(0,p.S)();T[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.G7)("global_sso_banner_dismiss_dialog"),T[0]=t):t=T[0];let $=t;if(T[1]!==L.length?(n=()=>{!U.current&&L.length>0&&((0,d.G7)("record_sso_banner_metrics")&&(0,m.i)({incrementKey:"GLOBAL_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),U.current=!0)},T[1]=L.length,T[2]=n):n=T[2],T[3]!==L?(u=[L],T[3]=L,T[4]=u):u=T[4],s.useEffect(n,u),0===L.length)return null;T[5]!==L?(h=e=>{B("hidden"),function(e,t){let n=e.map(e=>e.id);if((0,d.G7)("global_sso_banner_dismiss_dialog")&&(n=[...new Set([...R(),...n])].sort()),(0,c.Yj)(E.z4),null===t){let e=new Date(Date.now()+31536e7).toUTCString();(0,c.TV)(E.z4,JSON.stringify(n),e)}else{let e=new Date(Date.now()+24*(t??30)*36e5).toUTCString();(0,c.TV)(E.z4,JSON.stringify(n),e)}}(L,void 0===e?30:e)},T[5]=L,T[6]=h):h=T[6];let W=h;T[7]!==W||T[8]!==V?(y=()=>{V({category:E.c$,action:"click_dismiss_button",label:"banner_dismissed"}),$?F(!0):W()},T[7]=W,T[8]=V,T[9]=y):y=T[9];let H=y;T[10]!==W?(_=e=>{W(e),F(!1)},T[10]=W,T[11]=_):_=T[11];let q=_;T[12]!==L?(x=()=>{if(0===L.length)return"Single sign-on to see results";let e=L.slice(0,E.n5),t=L.length-E.n5,n=1===L.length?"organization":"organizations";return(0,a.jsxs)(a.Fragment,{children:["Single sign-on to see results in the ",(()=>{let n=e.map(O);if(1===n.length)return n[0];{if(2===n.length)return(0,a.jsxs)(a.Fragment,{children:[n[0]," and ",n[1]]});let e=n.length-1,i=(0,a.jsxs)(a.Fragment,{children:[n[0],", ",n[1],", and ",n[e]]});return t>0?(0,a.jsxs)(a.Fragment,{children:[i,", and ",t," more"]}):i}})()," ",n]})},T[12]=L,T[13]=x):x=T[13];let z=x,G="visible"!==P;T[14]===Symbol.for("react.memo_cache_sentinel")?(v=(0,a.jsx)(o.ShieldLockIcon,{}),T[14]=v):v=T[14],T[15]!==z?(b=z(),T[15]=z,T[16]=b):b=T[16],T[17]!==D||T[18]!==L?(j=(0,a.jsx)(A,{ssoOrgs:L,redirectLocation:D}),T[17]=D,T[18]=L,T[19]=j):j=T[19],T[20]!==H||T[21]!==b||T[22]!==j?(w=(0,a.jsx)(r.l,{title:"Single-sign on",className:f.banner,hideTitle:!0,icon:v,description:b,onDismiss:H,primaryAction:j,"data-testid":"global-sso-banner"}),T[20]=H,T[21]=b,T[22]=j,T[23]=w):w=T[23],T[24]!==w||T[25]!==G?(N=(0,a.jsx)(g,{hidden:G,children:w}),T[24]=w,T[25]=G,T[26]=N):N=T[26];let K=$&&M;return T[27]===Symbol.for("react.memo_cache_sentinel")?(S=()=>F(!1),T[27]=S):S=T[27],T[28]!==q||T[29]!==L||T[30]!==K?(C=(0,a.jsx)(I,{isOpen:K,onClose:S,onConfirm:q,ssoOrgs:L}),T[28]=q,T[29]=L,T[30]=K,T[31]=C):C=T[31],T[32]!==N||T[33]!==C?(k=(0,a.jsxs)(a.Fragment,{children:[N,C]}),T[32]=N,T[33]=C,T[34]=k):k=T[34],k}function O(e){return(0,a.jsx)("strong",{children:e.name},e.login)}function B(){let e,t=(0,i.c)(2),{ssoOrgs:n,suppressBanner:r}=function(){let{ssoOrgs:e,baseAvatarUrl:t}=(0,u.N)(),{current_sso_orgs_match_dismissed_cookie:n}=(0,h.X)()??{},a=s.useMemo(()=>e.filter(D).map(e=>({...e,avatar_url:`${t}/u/${e.id}`})),[e,t]);return{suppressBanner:!0===n||function(e){let t=R();return e.length===t.length&&e.every(e=>t.includes(e.id))}(a),ssoOrgs:a,baseAvatarUrl:t}}();return 0===n.length||!(0,d.G7)("global_sso_banner")||r?null:(t[0]!==n?(e=(0,a.jsx)(P,{ssoOrgs:n}),t[0]=n,t[1]=e):e=t[1],e)}let M=E.z4;try{P.displayName||(P.displayName="GlobalSsoBanner")}catch{}try{B.displayName||(B.displayName="ContextualGlobalSsoBanner")}catch{}},42312:(e,t,n)=>{n.d(t,{KL:()=>l,U:()=>m});var a=n(74848),i=n(21728),s=n(71315),r=n(96540);let o=(0,r.createContext)({registerNavigableRef:()=>{},unregisterNavigableRef:()=>{}});function l(e){let t,n,l,m,p,h,f,g=(0,i.c)(9),{children:y}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],g[0]=t):t=g[0];let[_,x]=r.useState(t);g[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{x(t=>t.some(t=>t===e)?t:[...t,e])},g[1]=n):n=g[1];let v=n;g[2]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{x(t=>t.filter(t=>t!==e))},g[2]=l):l=g[2];let b=l;g[3]!==_?(m=()=>{let e=e=>{if(e.ctrlKey&&"F6"===e.key){let t=_.filter(u).sort(d);if(0===t.length)return;let n=t.findIndex(c),a=(!e.shiftKey?t[n+1]??t[0]:t[n-1]??t[t.length-1])?.current;if(a){if(!["A","BUTTON","INPUT","SELECT","TEXTAREA"].includes(a.tagName)&&!a.hasAttribute("tabindex")){a.setAttribute("tabindex","-1");let e=()=>{a.removeAttribute("tabindex"),a.removeEventListener("blur",e)};a.addEventListener("blur",e,{once:!0})}a.focus()}}};return s.XC?.addEventListener("keydown",e),()=>{s.XC?.removeEventListener("keydown",e)}},p=[_],g[3]=_,g[4]=m,g[5]=p):(m=g[4],p=g[5]),(0,r.useEffect)(m,p),g[6]===Symbol.for("react.memo_cache_sentinel")?(h={registerNavigableRef:v,unregisterNavigableRef:b},g[6]=h):h=g[6];let j=h;return g[7]!==y?(f=(0,a.jsx)(o.Provider,{value:j,children:y}),g[7]=y,g[8]=f):f=g[8],f}function c(e){return e.current?.contains(s.XC?.activeElement||null)}function d(e,t){let n=e.current,a=t.current;return n===a?0:n.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}function u(e){return null!==e.current}function m(){let e,t,n=(0,i.c)(4),a=(0,r.useRef)(null),{registerNavigableRef:s,unregisterNavigableRef:l}=(0,r.useContext)(o);return n[0]!==s||n[1]!==l?(e=()=>(s(a),()=>{l(a)}),t=[s,l],n[0]=s,n[1]=l,n[2]=e,n[3]=t):(e=n[2],t=n[3]),(0,r.useEffect)(e,t),a}try{o.displayName||(o.displayName="NavigableRefContext")}catch{}try{l.displayName||(l.displayName="NavigableRefProvider")}catch{}},79684:(e,t,n)=>{n.d(t,{B:()=>m});var a=n(74848),i=n(21728),s=n(96540),r=n(13017),o=n(21373),l=n(1992),c=n(5524);let d={container:"Breadcrumbs-module__container--bnnIp",list:"Breadcrumbs-module__list--hG7n1",item:"Breadcrumbs-module__item--fekY7",link:"Breadcrumbs-module__link--A48Bt",text:"Breadcrumbs-module__text--yZS1N",icon:"Breadcrumbs-module__icon--CWnGJ",condensed:"Breadcrumbs-module__condensed--l60Z1",condensedList:"Breadcrumbs-module__condensedList--vpMXO",alwaysVisible:"Breadcrumbs-module__alwaysVisible--dK_nL",fullList:"Breadcrumbs-module__fullList--aHVvT"};var u=n(38621);let m=e=>{let t,n,r,u,m,y=(0,i.c)(31),{children:_,"aria-label":x,condensed:v}=e,b=void 0===x?"Breadcrumbs":x;if(y[0]!==_){t=[];let e=(n,a)=>{let i=void 0===a?"":a;for(let[a,r]of s.Children.toArray(n).entries())(0,s.isValidElement)(r)&&(r.type===s.Fragment||"Symbol(react.fragment)"===r.type.toString()?e(r.props.children,`${i}fragment-${a}-`):r.type===p?t.push({key:r.key?.toString()||`${i}item-${a}`,href:r.props.href,children:r.props.children,hasMenu:!1}):r.type===h&&t.push({key:r.key?.toString()||`${i}item-${a}`,children:r.props.children,hasMenu:!0,menuOverlay:r.props.menuOverlay}))};e(_),y[0]=_,y[1]=t}else t=y[1];let j=t[t.length-1];y[2]!==t?(n=t.slice(0,-1),y[2]=t,y[3]=n):n=y[3];let w=n,N=t.length>=3,S=void 0!==v&&v&&N,C=s.useRef(null);if(void 0!==v)if(S){let e,t,n,i,s;return y[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(o.Q,{ref:C,className:d.link,children:"..."}),y[4]=e):e=y[4],y[5]!==w?(t=(0,a.jsx)("li",{className:d.item,children:(0,a.jsxs)(l.W,{children:[e,(0,a.jsx)(l.W.Overlay,{children:(0,a.jsx)(c.l,{children:w.map(f)})})]})}),y[5]=w,y[6]=t):t=y[6],y[7]!==j?(n=j&&(j.hasMenu&&j.menuOverlay?(0,a.jsx)(h,{menuOverlay:j.menuOverlay,children:j.children}):j.href?(0,a.jsx)(p,{href:j.href,children:j.children}):null),y[7]=j,y[8]=n):n=y[8],y[9]!==t||y[10]!==n?(i=(0,a.jsxs)("ol",{className:d.list,children:[t,n]}),y[9]=t,y[10]=n,y[11]=i):i=y[11],y[12]!==b||y[13]!==i?(s=(0,a.jsx)("nav",{className:`${d.container} ${d.condensed}`,"aria-label":b,children:i}),y[12]=b,y[13]=i,y[14]=s):s=y[14],s}else{let e,t;return y[15]!==_?(e=(0,a.jsx)("ol",{className:d.list,children:_}),y[15]=_,y[16]=e):e=y[16],y[17]!==b||y[18]!==e?(t=(0,a.jsx)("nav",{className:d.container,"aria-label":b,children:e}),y[17]=b,y[18]=e,y[19]=t):t=y[19],t}let I=`${d.list} ${N?d.fullList:d.alwaysVisible}`;return y[20]!==_||y[21]!==I?(r=(0,a.jsx)("ol",{className:I,children:_}),y[20]=_,y[21]=I,y[22]=r):r=y[22],y[23]!==N||y[24]!==j||y[25]!==w?(u=N&&(0,a.jsxs)("ol",{className:`${d.list} ${d.condensedList}`,children:[(0,a.jsx)("li",{className:d.item,children:(0,a.jsxs)(l.W,{children:[(0,a.jsx)(o.Q,{ref:C,className:d.link,children:"..."}),(0,a.jsx)(l.W.Overlay,{children:(0,a.jsx)(c.l,{children:w.map(g)})})]})}),j&&(j.hasMenu&&j.menuOverlay?(0,a.jsx)(h,{menuOverlay:j.menuOverlay,children:j.children}):j.href?(0,a.jsx)(p,{href:j.href,children:j.children}):null)]}),y[23]=N,y[24]=j,y[25]=w,y[26]=u):u=y[26],y[27]!==b||y[28]!==r||y[29]!==u?(m=(0,a.jsxs)("nav",{className:d.container,"aria-label":b,children:[r,u]}),y[27]=b,y[28]=r,y[29]=u,y[30]=m):m=y[30],m},p=e=>{let t,n,s,o,l,c=(0,i.c)(10);return c[0]!==e?({href:n,children:t,...s}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=s):(t=c[1],n=c[2],s=c[3]),c[4]!==t?(o=(0,a.jsx)("span",{className:d.text,children:t}),c[4]=t,c[5]=o):o=c[5],c[6]!==n||c[7]!==s||c[8]!==o?(l=(0,a.jsx)("li",{className:d.item,children:(0,a.jsx)(r.N_,{...s,to:n,className:d.link,"aria-current":"page",children:o})}),c[6]=n,c[7]=s,c[8]=o,c[9]=l):l=c[9],l},h=e=>{let t,n,s,r,o=(0,i.c)(9),{buttonRef:c,children:m,menuOverlay:p}=e;return o[0]!==m?(t=(0,a.jsx)("span",{className:d.text,children:m}),o[0]=m,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("span",{className:d.icon,children:(0,a.jsx)(u.TriangleDownIcon,{})}),o[2]=n):n=o[2],o[3]!==t?(s=(0,a.jsx)(l.W.Anchor,{children:(0,a.jsxs)("button",{className:d.link,"aria-current":"page","aria-haspopup":"true",children:[t,n]})}),o[3]=t,o[4]=s):s=o[4],o[5]!==c||o[6]!==p||o[7]!==s?(r=(0,a.jsx)("li",{className:d.item,children:(0,a.jsxs)(l.W,{anchorRef:c,children:[s,p]})}),o[5]=c,o[6]=p,o[7]=s,o[8]=r):r=o[8],r};m.Item=p,m.ItemWithMenu=h;try{m.displayName||(m.displayName="Breadcrumbs")}catch{}try{p.displayName||(p.displayName="Item")}catch{}try{h.displayName||(h.displayName="ItemWithMenu")}catch{}function f(e){return(0,a.jsx)(c.l.LinkItem,{href:e.href,children:e.children},e.key)}function g(e){return(0,a.jsx)(c.l.LinkItem,{href:e.href,children:e.children},e.key)}},11607:(e,t,n)=>{n.d(t,{$:()=>c});var a=n(74848),i=n(21728),s=n(34164),r=n(96540),o=n(13017);let l={button:"Button-module__button--hMmd1",small:"Button-module__small--xYPhJ",medium:"Button-module__medium--d64dr",condensed:"Button-module__condensed--WrsZL",iconOnly:"Button-module__iconOnly--NkD70",default:"Button-module__default--fN_4Y",disabled:"Button-module__disabled--tNL94",invisible:"Button-module__invisible--lYAq6",icon:"Button-module__icon--Qd_AY",text:"Button-module__text--VDmpz"},c=(0,r.forwardRef)((e,t)=>{let n,r,c,d,u,m,p,h,f,g,y,_,x,v,b,j,w,N=(0,i.c)(65);N[0]!==e?({size:m,variant:p,condensed:h,iconOnly:f,icon:d,className:r,children:n,disabled:c,...u}=e,N[0]=e,N[1]=n,N[2]=r,N[3]=c,N[4]=d,N[5]=u,N[6]=m,N[7]=p,N[8]=h,N[9]=f):(n=N[1],r=N[2],c=N[3],d=N[4],u=N[5],m=N[6],p=N[7],h=N[8],f=N[9]);let S=void 0===p?"default":p,C=void 0!==h&&h,I=void 0!==f&&f,k=l[void 0===m?"small":m],T=l[S],E=C&&l.condensed,L=I&&l.iconOnly,A=c&&l.disabled;N[10]!==r||N[11]!==k||N[12]!==T||N[13]!==E||N[14]!==L||N[15]!==A?(g=(0,s.$)(l.button,k,T,E,L,A,r),N[10]=r,N[11]=k,N[12]=T,N[13]=E,N[14]=L,N[15]=A,N[16]=g):g=N[16];let R=g;N[17]!==d?(y=null!=d?(0,a.jsx)("span",{className:l.icon,children:d}):null,N[17]=d,N[18]=y):y=N[18],N[19]!==n||N[20]!==I?(_=!I&&n?(0,a.jsx)("span",{className:l.text,children:n}):null,N[19]=n,N[20]=I,N[21]=_):_=N[21],N[22]!==y||N[23]!==_?(x=(0,a.jsxs)(a.Fragment,{children:[y,_]}),N[22]=y,N[23]=_,N[24]=x):x=N[24];let D=x;if("to"in u){let e,n,i,s;return N[25]!==u?({to:i,onClick:e,...n}=u,N[25]=u,N[26]=e,N[27]=n,N[28]=i):(e=N[26],n=N[27],i=N[28]),N[29]!==R||N[30]!==D||N[31]!==c||N[32]!==e||N[33]!==n||N[34]!==t||N[35]!==i?(s=(0,a.jsx)(o.N_,{ref:t,to:i,className:R,"aria-disabled":c,onClick:e,...n,children:D}),N[29]=R,N[30]=D,N[31]=c,N[32]=e,N[33]=n,N[34]=t,N[35]=i,N[36]=s):s=N[36],s}if("href"in u){let e,n,i,s,r,o;return N[37]!==u?({href:e,target:r,rel:i,onClick:n,...s}=u,N[37]=u,N[38]=e,N[39]=n,N[40]=i,N[41]=s,N[42]=r):(e=N[38],n=N[39],i=N[40],s=N[41],r=N[42]),N[43]!==R||N[44]!==D||N[45]!==c||N[46]!==e||N[47]!==n||N[48]!==i||N[49]!==s||N[50]!==t||N[51]!==r?(o=(0,a.jsx)("a",{ref:t,href:e,target:r,rel:i,className:R,"aria-disabled":c,onClick:n,...s,children:D}),N[43]=R,N[44]=D,N[45]=c,N[46]=e,N[47]=n,N[48]=i,N[49]=s,N[50]=t,N[51]=r,N[52]=o):o=N[52],o}N[53]!==u?({onClick:v,type:j,...b}=u,N[53]=u,N[54]=v,N[55]=b,N[56]=j):(v=N[54],b=N[55],j=N[56]);let P=void 0===j?"button":j;return N[57]!==R||N[58]!==D||N[59]!==c||N[60]!==v||N[61]!==b||N[62]!==t||N[63]!==P?(w=(0,a.jsx)("button",{ref:t,type:P,onClick:v,disabled:c,className:R,...b,children:D}),N[57]=R,N[58]=D,N[59]=c,N[60]=v,N[61]=b,N[62]=t,N[63]=P,N[64]=w):w=N[64],w});c.displayName="Button"},27912:(e,t,n)=>{n.d(t,{X:()=>E,P:()=>D});var a=n(74848),i=n(21728),s=n(34164),r=n(96540),o=n(57919),l=n(69599),c=n(16070);let d={container:"Layout-module__container--qlyoa",resizing:"Layout-module__resizing--rf7h4",banner:"Layout-module__banner--b14up",sidebar:"Layout-module__sidebar--r6coV",mainColumn:"Layout-module__mainColumn--OFMVb",secondaryColumn:"Layout-module__secondaryColumn--Ut9LZ",monoView:"Layout-module__monoView--z920C",sidebarCondensed:"Layout-module__sidebarCondensed--m7Zsu",panelView:"Layout-module__panelView--l6qZ7",columnLeft:"Layout-module__columnLeft--jY2aC",secondaryColumnVisible:"Layout-module__secondaryColumnVisible--RdfK7",resourcePanelOpen:"Layout-module__resourcePanelOpen--vh9_8",splitView:"Layout-module__splitView--ldg6X",columnRight:"Layout-module__columnRight--WBwz7",mainColumnRight:"Layout-module__mainColumnRight--Izd_P",verticalSecondaryColumn:"Layout-module__verticalSecondaryColumn--O2DEP",secondaryColumnHidden:"Layout-module__secondaryColumnHidden--y3gv6"},u={header:"Header-module__header--tjtIT",columnHeader:"Header-module__columnHeader--UxTKW",column:"Header-module__column--ysX1b",leftColumn:"Header-module__leftColumn--MghGY",rightColumn:"Header-module__rightColumn--AckUb"};var m=n(38621),p=n(894),h=n(11607);let f={sidebarToggleButton:"SidebarToggle-module__sidebarToggleButton--NAVdU"};function g(){let e,t,n=(0,i.c)(3),{toggleSidebar:s}=(0,p.L)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(m.ThreeBarsIcon,{}),n[0]=e):e=n[0],n[1]!==s?(t=(0,a.jsx)("div",{className:f.sidebarToggleButton,children:(0,a.jsx)(h.$,{icon:e,iconOnly:!0,onClick:s,"aria-label":"Toggle sidebar"})}),n[1]=s,n[2]=t):t=n[2],t}try{g.displayName||(g.displayName="SidebarToggle")}catch{}function y(e){let t,n,r,o,l,c=(0,i.c)(10);return c[0]!==e?({children:t,className:n,...r}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=r):(t=c[1],n=c[2],r=c[3]),c[4]!==n?(o=(0,s.$)(u.column,u.leftColumn,n),c[4]=n,c[5]=o):o=c[5],c[6]!==t||c[7]!==r||c[8]!==o?(l=(0,a.jsx)("div",{className:o,...r,children:t}),c[6]=t,c[7]=r,c[8]=o,c[9]=l):l=c[9],l}function _(e){let t,n,r,o,l,c=(0,i.c)(10);return c[0]!==e?({children:t,className:n,...r}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=r):(t=c[1],n=c[2],r=c[3]),c[4]!==n?(o=(0,s.$)(u.column,u.rightColumn,n),c[4]=n,c[5]=o):o=c[5],c[6]!==t||c[7]!==r||c[8]!==o?(l=(0,a.jsx)("div",{className:o,...r,children:t}),c[6]=t,c[7]=r,c[8]=o,c[9]=l):l=c[9],l}function x(e){let t,n,r,l,c,d,m,p=(0,i.c)(20);p[0]!==e?({children:t,className:n,...r}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=r):(t=p[1],n=p[2],r=p[3]),p[4]===Symbol.for("react.memo_cache_sentinel")?(l={leftColumn:y,rightColumn:_},p[4]=l):l=p[4];let[h]=(0,o.H)(t,l);if(h.leftColumn&&h.rightColumn){let e,t,i;return p[5]!==n?(e=(0,s.$)(u.columnHeader,n),p[5]=n,p[6]=e):e=p[6],p[7]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(g,{}),p[7]=t):t=p[7],p[8]!==r||p[9]!==h.leftColumn||p[10]!==h.rightColumn||p[11]!==e?(i=(0,a.jsxs)("header",{className:e,...r,children:[t,h.leftColumn,h.rightColumn]}),p[8]=r,p[9]=h.leftColumn,p[10]=h.rightColumn,p[11]=e,p[12]=i):i=p[12],i}return p[13]!==n?(c=(0,s.$)(u.header,n),p[13]=n,p[14]=c):c=p[14],p[15]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(g,{}),p[15]=d):d=p[15],p[16]!==t||p[17]!==r||p[18]!==c?(m=(0,a.jsxs)("header",{className:c,...r,children:[d,t]}),p[16]=t,p[17]=r,p[18]=c,p[19]=m):m=p[19],m}try{y.displayName||(y.displayName="HeaderLeft")}catch{}try{_.displayName||(_.displayName="HeaderRight")}catch{}try{x.displayName||(x.displayName="Header")}catch{}let v={headerToggleOnly:"HeaderToggleOnly-module__headerToggleOnly--wC7_E"};function b(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:v.headerToggleOnly,children:(0,a.jsx)(g,{})}),t[0]=e):e=t[0],e}try{b.displayName||(b.displayName="HeaderToggleOnly")}catch{}let j={container:"Sidebar-module__container--onmDW",header:"Sidebar-module__header--rIhJd",sidebar:"Sidebar-module__sidebar--u6QU6",toggleSidebarFloating:"Sidebar-module__toggleSidebarFloating--fQq3y",toggleSidebarVertical:"Sidebar-module__toggleSidebarVertical--_YU5M",githubLogo:"Sidebar-module__githubLogo--qLZu3",visible:"Sidebar-module__visible--NW0KW",toggleSidebarContainer:"Sidebar-module__toggleSidebarContainer--QtdhW",iconLineTop:"Sidebar-module__iconLineTop--Ef2Ww",iconLineBottom:"Sidebar-module__iconLineBottom--QhwW5",condensed:"Sidebar-module__condensed--DvFLD",toggleIcon:"Sidebar-module__toggleIcon--MWRyj"};var w=n(36523),N=n(77999);function S(e){let t,n,o,l,c,d,u,p,f,g,y,_,x=(0,i.c)(37),{children:v,className:b,isVisible:S,isExpanded:C,sidebarRef:I,onToggle:k,"data-testid":T}=e,E=!C,L=(0,w.L)(I),A=(0,r.useId)();x[0]!==S?(t=()=>S?(0,a.jsx)(m.XIcon,{}):(0,a.jsx)(m.ThreeBarsIcon,{}),x[0]=S,x[1]=t):t=x[1];let R=t,D=`${A}-copilot-navigation`;x[2]!==b||x[3]!==E||x[4]!==S?(n=(0,s.$)(j.container,b,{[j.visible]:S,[j.condensed]:E}),x[2]=b,x[3]=E,x[4]=S,x[5]=n):n=x[5];let P=`${A}-copilot-navigation`;x[6]!==P?(o=(0,a.jsx)("h2",{id:P,className:"sr-only",children:"Copilot navigation"}),x[6]=P,x[7]=o):o=x[7],x[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)("a",{href:"/",target:"_self",className:j.githubLogo,"aria-label":"GitHub homepage",children:(0,a.jsx)(m.MarkGithubIcon,{size:32})}),x[8]=l):l=x[8];let O=S?"Close sidebar":"Open sidebar",B=S?"invisible":"default";x[9]!==R?(c=R(),x[9]=R,x[10]=c):c=x[10],x[11]!==k||x[12]!==O||x[13]!==B||x[14]!==c?(d=(0,a.jsx)(h.$,{className:j.toggleSidebarFloating,"aria-label":O,onClick:k,iconOnly:!0,variant:B,icon:c}),x[11]=k,x[12]=O,x[13]=B,x[14]=c,x[15]=d):d=x[15],x[16]!==d||x[17]!==o?(u=(0,a.jsxs)("div",{className:j.header,children:[o,l,d]}),x[16]=d,x[17]=o,x[18]=u):u=x[18],x[19]!==v||x[20]!==u?(p=(0,a.jsxs)("div",{className:j.sidebar,children:[u,v]}),x[19]=v,x[20]=u,x[21]=p):p=x[21];let M=S||C?"Condense":"Expand",F=C?-8:0,U=S||C?"Condense sidebar":"Expand sidebar";return x[22]===Symbol.for("react.memo_cache_sentinel")?(f=(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",strokeLinejoin:"round",className:j.toggleIcon,children:[(0,a.jsx)("path",{d:"M8 2.75 L8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:j.iconLineTop}),(0,a.jsx)("path",{d:"M8 13.25 L8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:j.iconLineBottom})]}),x[22]=f):f=x[22],x[23]!==k||x[24]!==U?(g=(0,a.jsx)("button",{className:j.toggleSidebarVertical,"aria-label":U,onClick:k,children:f}),x[23]=k,x[24]=U,x[25]=g):g=x[25],x[26]!==M||x[27]!==F||x[28]!==g?(y=(0,a.jsx)("div",{className:j.toggleSidebarContainer,children:(0,a.jsx)(N.m,{text:M,offset:F,children:g})}),x[26]=M,x[27]=F,x[28]=g,x[29]=y):y=x[29],x[30]!==T||x[31]!==L||x[32]!==p||x[33]!==y||x[34]!==D||x[35]!==n?(_=(0,a.jsxs)("aside",{"aria-labelledby":D,ref:L,className:n,"data-testid":T,children:[p,y]}),x[30]=T,x[31]=L,x[32]=p,x[33]=y,x[34]=D,x[35]=n,x[36]=_):_=x[36],_}try{S.displayName||(S.displayName="Sidebar")}catch{}function C(e){let t,n,r,o,l,c,u=(0,i.c)(17);if(u[0]!==e){let{children:a,className:i,onToggle:s,"data-testid":l,...c}=e;t=a,n=i,r=l,o=c,u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=o}else t=u[1],n=u[2],r=u[3],o=u[4];let{sidebarExpanded:m,sidebarVisible:h,layoutBreakpoint:f,toggleSidebar:g,sidebarRef:y}=(0,p.L)();return u[5]!==n?(l=(0,s.$)(d.sidebar,n),u[5]=n,u[6]=l):l=u[6],u[7]!==t||u[8]!==r||u[9]!==f||u[10]!==o||u[11]!==m||u[12]!==y||u[13]!==h||u[14]!==l||u[15]!==g?(c=(0,a.jsx)(S,{className:l,isFloating:f,isVisible:h,isExpanded:m,onToggle:g,sidebarRef:y,"data-testid":r,...o,children:t}),u[7]=t,u[8]=r,u[9]=f,u[10]=o,u[11]=m,u[12]=y,u[13]=h,u[14]=l,u[15]=g,u[16]=c):c=u[16],c}function I(e){let t,n,r,o,l,c=(0,i.c)(11);c[0]!==e?({children:t,className:n,...r}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=r):(t=c[1],n=c[2],r=c[3]);let{mainColumn:u}=(0,p.L)(),m="left"===u?d.mainColumn:d.secondaryColumn;return c[4]!==n||c[5]!==m?(o=(0,s.$)(d.columnLeft,m,n),c[4]=n,c[5]=m,c[6]=o):o=c[6],c[7]!==t||c[8]!==r||c[9]!==o?(l=(0,a.jsx)("div",{className:o,"data-column-position":"left",...r,children:t}),c[7]=t,c[8]=r,c[9]=o,c[10]=l):l=c[10],l}function k(e){let t,n,r,o,l,c,u=(0,i.c)(13);u[0]!==e?({children:t,className:n,"data-testid":r,...o}=e,u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=o):(t=u[1],n=u[2],r=u[3],o=u[4]);let{mainColumn:m}=(0,p.L)(),h="right"===m?d.mainColumn:d.secondaryColumn;return u[5]!==n||u[6]!==h?(l=(0,s.$)(d.columnRight,h,n),u[5]=n,u[6]=h,u[7]=l):l=u[7],u[8]!==t||u[9]!==r||u[10]!==o||u[11]!==l?(c=(0,a.jsx)("div",{className:l,"data-testid":r,"data-column-position":"right",...o,children:t}),u[8]=t,u[9]=r,u[10]=o,u[11]=l,u[12]=c):c=u[12],c}function T(){let e,t=(0,i.c)(1);return(0,l.G7)("global_sso_banner")?(t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:d.banner,children:(0,a.jsx)(c.Y0,{})}),t[0]=e):e=t[0],e):null}let E="(max-width: 1024px)",L="COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY";function A(){return function(){if("undefined"==typeof window)return null;try{let e=localStorage.getItem(L);return null===e?null:JSON.parse(e)}catch{return null}}()??!0}function R(e){let t,n,l,c,u,m,h,f,g,v,j,w,N,S,R,D=(0,i.c)(30);D[0]!==e?({children:t,className:n,mainColumn:f,"data-testid":l,secondaryColumnState:h,resourcePanelState:m,faviconOverride:c,mobileSecondaryColumnDirection:g,...u}=e,D[0]=e,D[1]=t,D[2]=n,D[3]=l,D[4]=c,D[5]=u,D[6]=m,D[7]=h,D[8]=f,D[9]=g):(t=D[1],n=D[2],l=D[3],c=D[4],u=D[5],m=D[6],h=D[7],f=D[8],g=D[9]);let P=void 0===f?"left":f,O=void 0===g?"horizontal":g;D[10]===Symbol.for("react.memo_cache_sentinel")?(v={banner:T,header:x,sidebar:C,columnLeft:I,columnRight:k},D[10]=v):v=D[10];let[B]=(0,o.H)(t,v),M=function(e){if(!e||!(0,r.isValidElement)(e))return!1;let t=!1,n=!1,a=e.props.children;for(let e of r.Children.toArray(a))(0,r.isValidElement)(e)&&(e.type===y&&(t=!0),e.type===_&&(n=!0));return t&&n}(B.header||null),F=!!B.columnLeft&&!B.columnRight||!B.columnLeft&&!!B.columnRight,U=!!B.columnLeft&&!!B.columnRight,V=!M&&!F,$=function(e,t,n){let a,s,o,l,c,d,u,m=(0,i.c)(27),[p,h]=(0,r.useState)(A),[f,g]=(0,r.useState)(!1),y=(0,r.useState)(!1),_=(0,r.useState)(!1),[x,v]=t??y,[b,j]=n??_;m[0]!==j||m[1]!==v?(a=e=>{e?(v(!1),j(!1)):g(!1)},m[0]=j,m[1]=v,m[2]=a):a=m[2];let w=function(e,t){let n,a,s,o=(0,i.c)(6);o[0]!==e?(n=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,o[0]=e,o[1]=n):n=o[1];let[l,c]=(0,r.useState)(n);return o[2]!==t||o[3]!==e?(a=()=>{let n=window.matchMedia(e),a=e=>{c(e.matches),t&&t(e.matches)};return c(n.matches),n.addEventListener("change",a),()=>{n.removeEventListener("change",a)}},s=[e,t],o[2]=t,o[3]=e,o[4]=a,o[5]=s):(a=o[4],s=o[5]),(0,r.useEffect)(a,s),l}(E,a),N=(0,r.useRef)(null),S=(0,r.useRef)(null);m[3]!==w||m[4]!==p||m[5]!==f?(s=()=>{if(w)g(!f);else{let e=!p;h(e);if("undefined"!=typeof window)try{localStorage.setItem(L,JSON.stringify(e))}catch{}}},m[3]=w,m[4]=p,m[5]=f,m[6]=s):s=m[6];let C=s;m[7]!==x||m[8]!==j||m[9]!==v?(o=()=>{x&&j(!1),v(!x)},m[7]=x,m[8]=j,m[9]=v,m[10]=o):o=m[10];let I=o;m[11]!==b||m[12]!==j?(l=()=>{j(!b)},m[11]=b,m[12]=j,m[13]=l):l=m[13];let k=l;return m[14]!==f?(c=()=>{if(f&&S.current){let e=e=>{S.current&&!S.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},d=[f],m[14]=f,m[15]=c,m[16]=d):(c=m[15],d=m[16]),(0,r.useEffect)(c,d),m[17]!==w||m[18]!==e||m[19]!==b||m[20]!==x||m[21]!==p||m[22]!==f||m[23]!==k||m[24]!==I||m[25]!==C?(u={sidebarExpanded:p,sidebarVisible:f,toggleSidebar:C,secondaryColumnVisible:x,toggleSecondaryColumn:I,resourcePanelOpen:b,toggleResourcePanel:k,layoutBreakpoint:w,mainColumn:e,containerRef:N,sidebarRef:S},m[17]=w,m[18]=e,m[19]=b,m[20]=x,m[21]=p,m[22]=f,m[23]=k,m[24]=I,m[25]=C,m[26]=u):u=m[26],u}(P,h,m),{containerRef:W,secondaryColumnVisible:H,sidebarExpanded:q,resourcePanelOpen:z}=$,G=function(e,t){let n,a,s=(0,i.c)(6),[o,l]=(0,r.useState)(!1),c=(0,r.useRef)(void 0);return void 0!==s[0]||s[1]!==e.current?(n=()=>{if(!e.current)return;let t=new ResizeObserver(e=>{l(!0),c.current&&clearTimeout(c.current),c.current=window.setTimeout(()=>{l(!1)},150)});return t.observe(e.current),()=>{t.disconnect(),c.current&&clearTimeout(c.current)}},s[0]=t,s[1]=e.current,s[2]=n):n=s[2],s[3]!==t||s[4]!==e?(a=[e,t],s[3]=t,s[4]=e,s[5]=a):a=s[5],(0,r.useEffect)(n,a),o}(W),K=p.M,Q=(0,s.$)(d.container,V&&d.panelView,M&&d.splitView,M&&"right"===P&&d.mainColumnRight,H&&d.secondaryColumnVisible,!H&&U&&d.secondaryColumnHidden,z&&d.resourcePanelOpen,F&&d.monoView,!q&&d.sidebarCondensed,G&&d.resizing,"vertical"===O&&d.verticalSecondaryColumn,n);return D[11]!==c?(j=c&&(0,a.jsx)("span",{"data-favicon-override":c,"data-testid":"favicon-override"}),D[11]=c,D[12]=j):j=D[12],D[13]===Symbol.for("react.memo_cache_sentinel")?(w=(0,a.jsx)(T,{}),D[13]=w):w=D[13],D[14]!==B.header?(N=B.header||(0,a.jsx)(b,{}),D[14]=B.header,D[15]=N):N=D[15],D[16]!==W||D[17]!==l||D[18]!==u||D[19]!==B.columnLeft||D[20]!==B.columnRight||D[21]!==B.sidebar||D[22]!==Q||D[23]!==j||D[24]!==N?(S=(0,a.jsxs)("div",{className:Q,"data-testid":l,ref:W,...u,children:[j,w,N,B.sidebar,B.columnLeft,B.columnRight]}),D[16]=W,D[17]=l,D[18]=u,D[19]=B.columnLeft,D[20]=B.columnRight,D[21]=B.sidebar,D[22]=Q,D[23]=j,D[24]=N,D[25]=S):S=D[25],D[26]!==$||D[27]!==K.Provider||D[28]!==S?(R=(0,a.jsx)(K.Provider,{value:$,children:S}),D[26]=$,D[27]=K.Provider,D[28]=S,D[29]=R):R=D[29],R}let D=Object.assign(R,{Banner:T,Sidebar:C,ColumnLeft:I,ColumnRight:k,Header:x,HeaderLeft:y,HeaderRight:_});try{C.displayName||(C.displayName="LayoutSidebar")}catch{}try{I.displayName||(I.displayName="ColumnLeft")}catch{}try{k.displayName||(k.displayName="ColumnRight")}catch{}try{T.displayName||(T.displayName="Banner")}catch{}try{E.displayName||(E.displayName="LAYOUT_BREAKPOINT")}catch{}try{R.displayName||(R.displayName="LayoutRoot")}catch{}try{D.displayName||(D.displayName="Layout")}catch{}},71205:(e,t,n)=>{n.d(t,{W:()=>o});var a=n(74848),i=n(21728),s=n(34164);let r={item:"SidebarListItem-module__item--x3BBP",link:"SidebarListItem-module__link--_g1X4",statusIcon:"SidebarListItem-module__statusIcon--Oc8Sk",text:"SidebarListItem-module__text--xnDP7",trailingAction:"SidebarListItem-module__trailingAction--S8yi9"};function o(e){let t,n,o,l,c,d,u,m=(0,i.c)(20),{href:p,text:h,isSelected:f,trailingAction:g,onClick:y,className:_,leadingVisual:x}=e;m[0]!==_?(t=(0,s.$)(r.item,_),m[0]=_,m[1]=t):t=m[1];let v=f?"page":void 0;return m[2]!==x?(n=x&&(0,a.jsx)(x,{}),m[2]=x,m[3]=n):n=m[3],m[4]!==n?(o=(0,a.jsx)("span",{className:r.statusIcon,children:n}),m[4]=n,m[5]=o):o=m[5],m[6]!==h?(l=(0,a.jsx)("span",{className:r.text,children:h}),m[6]=h,m[7]=l):l=m[7],m[8]!==p||m[9]!==y||m[10]!==v||m[11]!==o||m[12]!==l?(c=(0,a.jsxs)("a",{className:r.link,href:p,"aria-current":v,onClick:y,children:[o,l]}),m[8]=p,m[9]=y,m[10]=v,m[11]=o,m[12]=l,m[13]=c):c=m[13],m[14]!==g?(d=g?(0,a.jsx)("span",{className:r.trailingAction,children:g}):null,m[14]=g,m[15]=d):d=m[15],m[16]!==t||m[17]!==c||m[18]!==d?(u=(0,a.jsxs)("li",{className:t,children:[c,d]}),m[16]=t,m[17]=c,m[18]=d,m[19]=u):u=m[19],u}try{o.displayName||(o.displayName="SidebarListItem")}catch{}},77999:(e,t,n)=>{n.d(t,{m:()=>d});var a=n(74848),i=n(34164),s=n(37367),r=n(34743),o=n(71988),l=n(96540);let c={tooltip:"Tooltip-module__tooltip--hAat9"},d=({text:e,position:t,children:n,relationship:d="description",offset:u=8})=>{let[m,p]=(0,l.useState)(!1),h=(0,l.useRef)(null),{refs:f,floatingStyles:g,context:y,isPositioned:_}=(0,s.we)({open:m,onOpenChange:p,placement:t,middleware:[(0,r.cY)(u),...t?[]:[(0,r.RK)()]],whileElementsMounted:o.ll}),x=(0,s.Mk)(y,{move:!1,delay:{open:100,close:0}}),v=(0,s.iQ)(y),b=(0,s.s9)(y),j=(0,s.It)(y,{role:"tooltip",enabled:"description"===d}),{getReferenceProps:w,getFloatingProps:N}=(0,s.bv)([x,v,b,j]),S=w(),C={};"label"===d?C["aria-label"]=e:"description"===d&&(C["aria-describedby"]=y.floatingId);let I=(0,l.cloneElement)(n,{...S,...C,onTouchEnd:e=>{n.props.onTouchEnd&&n.props.onTouchEnd(e),setTimeout(()=>p(!1),10)},onMouseEnter:e=>{n.props.onMouseEnter&&n.props.onMouseEnter(e),h.current&&(clearTimeout(h.current),h.current=null)},ref:f.setReference});return(0,a.jsxs)(a.Fragment,{children:[I,m&&(0,a.jsx)(s.XF,{children:(0,a.jsx)("div",{ref:f.setFloating,id:y.floatingId,style:{...g,visibility:_?"visible":"hidden"},className:(0,i.$)(c.tooltip),...N(),children:e})})]})};try{d.displayName||(d.displayName="Tooltip")}catch{}}},e=>{e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_stacktrace-parser_dist_stack-trace-parser_esm_js-node_modules_github_bro-2f4e04","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-1fff13","vendors-node_modules_tanstack_query-core_build_modern_mutation_js-node_modules_tanstack_query-9bf7e4","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_github_hydro-analytics-c-2a6094","vendors-node_modules_tanstack_query-core_build_modern_queryClient_js-node_modules_tanstack_re-d87a32","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_lodash-es__isIterateeCa-89abd9","vendors-node_modules_github_hotkey_dist_index_js-node_modules_date-fns_getDaysInMonth_mjs-nod-70c11b","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-72228e","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_lit-labs_react_index_js-node_modules_tanstack_react-virtual_dist_esm_index_js","vendors-node_modules_swc_helpers_esm__define_property_js-node_modules_lodash-es__getAllKeys_j-86c8c2","vendors-node_modules_react-relay_index_js","vendors-node_modules_devlop_lib_default_js-node_modules_mdast-util-from-markdown_lib_index_js-cf17bf","vendors-node_modules_mdast-util-gfm_lib_index_js-node_modules_micromark-extension-gfm_index_js","vendors-node_modules_tanstack_react-query_build_modern_useQuery_js-node_modules_diff_lib_index_mjs","vendors-node_modules_remark-parse_lib_index_js-node_modules_unified_lib_index_js","vendors-node_modules_codemirror_language_dist_index_js","vendors-node_modules_react-markdown_lib_index_js","vendors-node_modules_codemirror_commands_dist_index_js","vendors-node_modules_hastscript_lib_index_js-node_modules_lowlight_lib_all_js-node_modules_re-376063","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_accname_dist_access-a25db5","vendors-node_modules_react-relay_hooks_js-node_modules_github_g-emoji-element_dist_index_js-n-845989","vendors-node_modules_codemirror_language-data_dist_index_js","vendors-node_modules_codemirror_autocomplete_dist_index_js-node_modules_codemirror_search_dis-aafe81","vendors-node_modules_js-yaml_dist_js-yaml_mjs","vendors-node_modules_github_catalyst_lib_index_js-node_modules_tanstack_react-query_build_mod-d1dec4","vendors-node_modules_lodash_merge_index_js-node_modules_lodash_mergewith_index_js-node_module-1e3047","vendors-node_modules_github_quote-selection_dist_index_js-node_modules_tanstack_react-query_b-5995bf","vendors-node_modules_emoji-regex_index_js-node_modules_codemirror_merge_dist_index_js-node_mo-8041f4","packages_paths_index_ts","packages_ui-commands_ui-commands_ts","packages_date-picker_components_DatePicker_tsx","packages_drag-and-drop_drag-and-drop_ts-packages_hydro-analytics_hydro-analytics_ts","packages_list-view_src_hooks_use-next-header-tag_ts-packages_list-view_src_ListItem_ListItem_-055669","packages_ref-selector_RefSelector_tsx","packages_copilot-chat_utils_copilot-local-storage_ts","packages_copilot-chat_components_tracing_TraceProvider_tsx","packages_copilot-chat_utils_CopilotChatContext_tsx-packages_safe-html_VerifiedHTML_tsx","packages_item-picker_components_RepositoryPicker_tsx","packages_copilot-markdown_MarkdownRenderer_tsx","packages_history_history_ts-packages_relay-environment_relay-environment_ts-packages_soft-nav-84fffc","packages_copilot-chat_components_ModelPicker_tsx","packages_use-client-value_use-client-value_ts-packages_issue-create_dialog_CreateIssueDialogE-b1118b","packages_commenting_constants_values_ts-packages_document-metadata_document-metadata_ts-packa-c2a275","packages_code-mirror_CodeMirror_tsx","packages_promise-with-resolvers-polyfill_promise-with-resolvers-polyfill_ts-packages_diff-lin-c17115","packages_agent-sessions_utils_get-leading-visual-icon-attributes_ts-packages_agent-sessions_h-2c8bb7","packages_copilot-chat_components_CopilotIconAnimation_tsx","packages_app-uuid_app-uuid_ts-packages_signed-commit-badge_index_ts","packages_copilot-chat_hooks_use-chat-message-behavior_ts-packages_copilot-chat_hooks_use-chat-2abdaf","packages_markdown-viewer_NewMarkdownViewer_tsx","packages_issue-viewer_components_IssueViewer_tsx-packages_issue-viewer_contexts_IssueViewerCo-d82ffd","packages_agent-sessions_components_AgentsIcon_tsx-packages_agent-sessions_components_PremiumR-c64ebf","packages_copilot-chat_components_tracing_TraceDisplay_tsx"],()=>e(e.s=23614)),e.O()}]);
//# sourceMappingURL=copilot-immersive-v1-85fdba5997f7.js.map